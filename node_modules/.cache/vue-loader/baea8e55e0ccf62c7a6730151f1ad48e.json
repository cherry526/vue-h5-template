{"remainingRequest":"C:\\Users\\Administrator\\Desktop\\vip_inline_h5\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Administrator\\Desktop\\vip_inline_h5\\src\\views\\home\\home.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\Administrator\\Desktop\\vip_inline_h5\\src\\views\\home\\home.vue","mtime":1597480920707},{"path":"C:\\Users\\Administrator\\Desktop\\vip_inline_h5\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Administrator\\Desktop\\vip_inline_h5\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\Administrator\\Desktop\\vip_inline_h5\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Administrator\\Desktop\\vip_inline_h5\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IG1hcEdldHRlcnMsIG1hcEFjdGlvbnMsIG1hcE11dGF0aW9ucyB9IGZyb20gInZ1ZXgiOwppbXBvcnQgYWN0aXZlSXRlbSBmcm9tICdAY29tcG9uZW50cy9hY3RpdmUvYWN0aXZlSXRlbScKaW1wb3J0IHsgc2V0VGltZW91dCB9IGZyb20gJ3RpbWVycyc7CgpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogJ2hvbWUnLAogIGNvbXBvbmVudHM6ewogICAgYWN0aXZlSXRlbSwKICB9LAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICByZWZyZXNoTGlzdDogZmFsc2UsCiAgICAgIHRhY0FjdGl2ZTogZmFsc2UsCiAgICAgIGxpc3Q6IFtdLAogICAgICBidXNpbmVzczogJ+WVhuWciMK35YWo5Z+OJywKICAgICAgY2F0ZWdvcnk6ICflhajpg6jlk4HnsbsnLAogICAgICBzb3J0OiAn57u85ZCI5o6S5bqPJywKICAgICAgY2l0eUlkOiAwLAogICAgICByZWZyZXNoOiB0cnVlLAogICAgICBmaWx0ZXJJdGVtOiBudWxsLAogICAgICBwYWdlVHlwZTogMiwKICAgICAgZmlsdGVySWQ6IDAsCiAgICAgIGZpbHRlckRhdGE6IHt9LAogICAgICByYW5nZTogMCwKICAgICAgdHlwZTogMSwvLyAxLumZhOi/kSAyLuWVhuWciCAz5Zyw5Yy6IDQu5YiG57G7IDUu57u85ZCI5o6S5bqPIDbmipjmiaPnrZvpgIkKICAgICAgYXJlYUlkOiAwLCAvLyDkuIDnuqflnLDljLppZAogICAgICBidXNDaXJjbGVJZDogMCwgLy/kuIDnuqflnLDljLppZO+8iOWVhuWciElk77yJCiAgICAgIGN0Z0lkOiAwLCAvLyDkuoznuqflk4HnsbtJZO+8jAogICAgICBzb3J0VHlwZTogMSwgLy/nrZvpgInvvJoxLue7vOWQiOaOkuW6jyAy5Lq65rCU5pyA6auYIDMu6Led56a75LyY5YWIIDQu5Lq65Z2H5pyA5L2OIDXkurrlnYfmnIDpq5gKICAgICAgZGlzY291bnRSYW5nZTogMCwgLy/mipjmiaPvvJrmoLzlvI8nOHwxMCcKICAgIH0KICB9LAogIGNvbXB1dGVkOiB7CiAgICAuLi5tYXBHZXR0ZXJzKFsibG9jYXRpb25JbmZvIiwgImxvY2F0aW9uQ2l0eSIsICJ1cGRhdGVQYWdlIl0pCiAgfSwKICBtZXRob2RzOiB7CiAgICAuLi5tYXBNdXRhdGlvbnMoJ2luZGV4JywgWwogICAgICAnU0VUX1VQREFURVBBR0UnLAogICAgICAnR0VUX1VQREFURVBBR0UnCiAgICBdKSwKICAgIC4uLm1hcEFjdGlvbnMoJ2luZGV4JywgWwogICAgICAnZ2V0VXBkYXRlUGFnZScKICAgIF0pLAogICAgLy8g562b6YCJ57uE5Lu25Zue6LCDCiAgICBjaGFuZ2VMaXN0KHRhYkRhdGEpIHsKICAgICAgbGV0IHRhYnR5cGUgPSB0YWJEYXRhLnRhYnR5cGUKICAgICAgbGV0IGFpZCwgYmlkLCBjaWQsIHR5cGUsIHJhbmdlLCBzb3J0dHlwZQogICAgICBpZiAodGFidHlwZSA9PT0gJzAnKSB7CiAgICAgICAgKHsgYWlkLCBiaWQgPSAwLCB0eXBlLCByYW5nZSA9IDAgfSA9IHRhYkRhdGEpOwogICAgICAgICh7IGN0Z0lkOiBjaWQsIHNvcnRUeXBlOiBzb3J0dHlwZSB9ID0gdGhpcy5maWx0ZXJEYXRhKQogICAgICB9IGVsc2UgaWYgKHRhYnR5cGUgPT09ICcxJykgewogICAgICAgICh7IGNpZCwgdHlwZSB9ID0gdGFiRGF0YSk7CiAgICAgICAgKHsgYXJlYUlkOiBhaWQsIHJhbmdlLCBidXNDaXJjbGVJZDogYmlkLCBzb3J0VHlwZTogc29ydHR5cGUgfSA9IHRoaXMuZmlsdGVyRGF0YSkKICAgICAgfSBlbHNlIGlmICh0YWJ0eXBlID09PSAnMicpIHsKICAgICAgICAoeyBzb3J0dHlwZSwgdHlwZSB9ID0gdGFiRGF0YSk7CiAgICAgICAgKHsgYXJlYUlkOiBhaWQsIHJhbmdlLCBidXNDaXJjbGVJZDogYmlkLCBjdGdJZDogY2lkIH0gPSB0aGlzLmZpbHRlckRhdGEpCiAgICAgIH0gZWxzZSBpZiAodGFidHlwZSA9PT0gJzMnKSB7CiAgICAgICAgKHsgdHlwZSB9ID0gdGFiRGF0YSk7CiAgICAgICAgKHsgYXJlYUlkOiBhaWQsIHJhbmdlLCBidXNDaXJjbGVJZDogYmlkLCBjdGdJZDogY2lkLCBzb3J0VHlwZTogc29ydHR5cGUgfSA9IHRoaXMuZmlsdGVyRGF0YSkKICAgICAgfQogICAgICB0aGlzLmZpbHRlckRhdGEuYXJlYUlkID0gYWlkIHx8IDAKICAgICAgdGhpcy5maWx0ZXJEYXRhLnJhbmdlID0gcmFuZ2UgfHwgMAogICAgICB0aGlzLmZpbHRlckRhdGEuYnVzQ2lyY2xlSWQgPSBiaWQgfHwgMAogICAgICB0aGlzLmZpbHRlckRhdGEuc29ydFR5cGUgPSBzb3J0dHlwZSB8fCAxCiAgICAgIHRoaXMuZmlsdGVyRGF0YS5jdGdJZCA9IGNpZCB8fCAwCiAgICAgIGNvbnNvbGUubG9nKHRoaXMuZmlsdGVyRGF0YSkKICAgICAgLy8g5Yi35paw5YiX6KGoCiAgICAgIHRoaXMucmVmcmVzaExpc3QgPSB0cnVlCiAgICB9CiAgfSwKICBhY3RpdmF0ZWQoKSB7CiAgfSwKICBjcmVhdGVkKCkgewogICAgdGhpcy5maWx0ZXJEYXRhID0gewogICAgICBjaXR5SWQ6IHRoaXMubG9jYXRpb25DaXR5LmNpdHlJZCwKICAgICAgcmFuZ2U6IHRoaXMucmFuZ2UsCiAgICAgIHR5cGU6IHRoaXMudHlwZSwvLyAxLumZhOi/kSAyLuWVhuWciCAz5Zyw5Yy6IDQu5YiG57G7IDUu57u85ZCI5o6S5bqPIDbmipjmiaPnrZvpgIkKICAgICAgYXJlYUlkOiB0aGlzLmFpZCwgLy8g5LiA57qn5Zyw5Yy6aWQKICAgICAgYnVzQ2lyY2xlSWQ6IHRoaXMuYmlkLCAvL+S4gOe6p+WcsOWMumlk77yI5ZWG5ZyISWTvvIkKICAgICAgY3RnSWQ6IHRoaXMuY2lkLCAvLyDkuoznuqflk4HnsbtJZO+8jAogICAgICBzb3J0VHlwZTogdGhpcy5zb3J0dHlwZSB8fCAxLCAvL+etm+mAie+8mjEu57u85ZCI5o6S5bqPIDLkurrmsJTmnIDpq5ggMy7ot53nprvkvJjlhYggNC7kurrlnYfmnIDkvY4gNeS6uuWdh+acgOmrmAogICAgICBkaXNjb3VudFJhbmdlOiB0aGlzLmRpc2NvdW50UmFuZ2UsIC8v5oqY5omj77ya5qC85byPJzh8MTAnCiAgICAgIGxuZzogdGhpcy5sb2NhdGlvbkluZm8ubG9uZ2l0dWRlLAogICAgICBsYXQ6IHRoaXMubG9jYXRpb25JbmZvLmxvbmdpdHVkZSwKICAgICAgZmlsdGVySWQ6IDAsCiAgICAgIHRpbWU6IHRydWUKICAgIH0KICB9Cn0K"},{"version":3,"sources":["home.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsCA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"home.vue","sourceRoot":"src/views/home","sourcesContent":["<!--\r\n * @Description: 首页\r\n * @Version: 1.0\r\n * @Autor: cherry\r\n * @Date: 2020-07-10 16:38:41\r\n * @LastEditors: cherry\r\n * @LastEditTime: 2020-08-15 16:42:00\r\n--> \r\n<template>\r\n  <div class=\"home-page\">\r\n    <search-tab rightText=\"搜索\"></search-tab>\r\n    <div class=\"sort-tab\" :class=\"tacActive ? 'border':''\" id=\"sort-tab\">\r\n      <sort-tab\r\n        :business=\"business\"\r\n        :category=\"category\"\r\n        :sort=\"sort\"\r\n        :cityId.sync=\"locationCity.cityId\" \r\n        :type=\"pageType\"  \r\n        isShowDiscount \r\n        @changeList=\"changeList\" \r\n        :refresh=\"refresh\"\r\n      >\r\n      </sort-tab>\r\n    </div>\r\n    <common-list\r\n      apiName='specialSellList'\r\n      :filterData='filterData'\r\n      :refresh.sync=\"refreshList\"\r\n      :dropDown=\"true\"\r\n      class=\"act-list\"\r\n    >\r\n      <template v-slot=\"{ list }\">\r\n        <active-item v-for=\"(item, index) in list\" :key=\"index\" :item=\"item\"></active-item>\r\n      </template>\r\n    </common-list>\r\n  </div>\r\n</template>\r\n<script>\r\n  import { mapGetters, mapActions, mapMutations } from \"vuex\";\r\n  import activeItem from '@components/active/activeItem'\r\n  import { setTimeout } from 'timers';\r\n\r\n  export default {\r\n    name: 'home',\r\n    components:{\r\n      activeItem,\r\n    },\r\n    data() {\r\n      return {\r\n        refreshList: false,\r\n        tacActive: false,\r\n        list: [],\r\n        business: '商圈·全城',\r\n        category: '全部品类',\r\n        sort: '综合排序',\r\n        cityId: 0,\r\n        refresh: true,\r\n        filterItem: null,\r\n        pageType: 2,\r\n        filterId: 0,\r\n        filterData: {},\r\n        range: 0,\r\n        type: 1,// 1.附近 2.商圈 3地区 4.分类 5.综合排序 6折扣筛选\r\n        areaId: 0, // 一级地区id\r\n        busCircleId: 0, //一级地区id（商圈Id）\r\n        ctgId: 0, // 二级品类Id，\r\n        sortType: 1, //筛选：1.综合排序 2人气最高 3.距离优先 4.人均最低 5人均最高\r\n        discountRange: 0, //折扣：格式'8|10'\r\n      }\r\n    },\r\n    computed: {\r\n      ...mapGetters([\"locationInfo\", \"locationCity\", \"updatePage\"])\r\n    },\r\n    methods: {\r\n      ...mapMutations('index', [\r\n        'SET_UPDATEPAGE',\r\n        'GET_UPDATEPAGE'\r\n      ]),\r\n      ...mapActions('index', [\r\n        'getUpdatePage'\r\n      ]),\r\n      // 筛选组件回调\r\n      changeList(tabData) {\r\n        let tabtype = tabData.tabtype\r\n        let aid, bid, cid, type, range, sorttype\r\n        if (tabtype === '0') {\r\n          ({ aid, bid = 0, type, range = 0 } = tabData);\r\n          ({ ctgId: cid, sortType: sorttype } = this.filterData)\r\n        } else if (tabtype === '1') {\r\n          ({ cid, type } = tabData);\r\n          ({ areaId: aid, range, busCircleId: bid, sortType: sorttype } = this.filterData)\r\n        } else if (tabtype === '2') {\r\n          ({ sorttype, type } = tabData);\r\n          ({ areaId: aid, range, busCircleId: bid, ctgId: cid } = this.filterData)\r\n        } else if (tabtype === '3') {\r\n          ({ type } = tabData);\r\n          ({ areaId: aid, range, busCircleId: bid, ctgId: cid, sortType: sorttype } = this.filterData)\r\n        }\r\n        this.filterData.areaId = aid || 0\r\n        this.filterData.range = range || 0\r\n        this.filterData.busCircleId = bid || 0\r\n        this.filterData.sortType = sorttype || 1\r\n        this.filterData.ctgId = cid || 0\r\n        console.log(this.filterData)\r\n        // 刷新列表\r\n        this.refreshList = true\r\n      }\r\n    },\r\n    activated() {\r\n    },\r\n    created() {\r\n      this.filterData = {\r\n        cityId: this.locationCity.cityId,\r\n        range: this.range,\r\n        type: this.type,// 1.附近 2.商圈 3地区 4.分类 5.综合排序 6折扣筛选\r\n        areaId: this.aid, // 一级地区id\r\n        busCircleId: this.bid, //一级地区id（商圈Id）\r\n        ctgId: this.cid, // 二级品类Id，\r\n        sortType: this.sorttype || 1, //筛选：1.综合排序 2人气最高 3.距离优先 4.人均最低 5人均最高\r\n        discountRange: this.discountRange, //折扣：格式'8|10'\r\n        lng: this.locationInfo.longitude,\r\n        lat: this.locationInfo.longitude,\r\n        filterId: 0,\r\n        time: true\r\n      }\r\n    }\r\n  }\r\n</script>\r\n\r\n<style lang='scss'>\r\n  .home-page {\r\n    .act-list {\r\n      .act-item:nth-of-type(2n) {\r\n        margin-left: 18px;\r\n      }\r\n    }\r\n  }\r\n</style>\r\n\r\n<style scoped lang='scss'>\r\n  .home-page {\r\n    padding-top: 200px;\r\n     .act-list {\r\n      padding: 0 24px;\r\n    }\r\n    .sort-tab {\r\n      // position: sticky;\r\n      position: fixed;\r\n      top: 100px;\r\n      left: 0;\r\n      width: 100%;\r\n      // background: #f6f6f6;\r\n      background-color: #fff;\r\n      z-index: 1;\r\n      &.active {\r\n        background: #fff;\r\n        border-bottom: 1px solid #E5E6E8;\r\n      }\r\n    }\r\n  }\r\n</style>"]}]}