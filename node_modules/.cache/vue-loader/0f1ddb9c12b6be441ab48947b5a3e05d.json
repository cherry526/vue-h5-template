{"remainingRequest":"C:\\Users\\Administrator\\Desktop\\vip_inline_h5\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Administrator\\Desktop\\vip_inline_h5\\src\\views\\active\\giftBag.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\Administrator\\Desktop\\vip_inline_h5\\src\\views\\active\\giftBag.vue","mtime":1597889072568},{"path":"C:\\Users\\Administrator\\Desktop\\vip_inline_h5\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Administrator\\Desktop\\vip_inline_h5\\node_modules\\thread-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Administrator\\Desktop\\vip_inline_h5\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\Administrator\\Desktop\\vip_inline_h5\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Administrator\\Desktop\\vip_inline_h5\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IG1hcEdldHRlcnMsIG1hcEFjdGlvbnMsIG1hcE11dGF0aW9ucyB9IGZyb20gInZ1ZXgiOwppbXBvcnQgc2Vja2lsbE1peGluIGZyb20gJ0AvbWl4aW5zL3NlY2tpbGxNaXhpbicgCi8vIGltcG9ydCBzaGFyZU1peGluIGZyb20gJ0AvbWl4aW5zL3NoYXJlTWl4aW4nIAppbXBvcnQgYWN0aXZlSGVhZGVyIGZyb20gJ0Bjb21wb25lbnRzL2FjdGl2ZS9hY3RpdmVIZWFkZXInCmltcG9ydCBhY3RpdmVDYXNoIGZyb20gJ0Bjb21wb25lbnRzL2FjdGl2ZS9hY3RpdmVDYXNoJwppbXBvcnQgYWN0aXZlR2lmdCBmcm9tICdAY29tcG9uZW50cy9hY3RpdmUvYWN0aXZlR2lmdCcKaW1wb3J0IGFjdGl2ZUdpZnRSZWFzb24gZnJvbSAnQGNvbXBvbmVudHMvYWN0aXZlL2FjdGl2ZUdpZnRSZWFzb24nCmltcG9ydCBhY3RpdmVHcmFwaGljIGZyb20gJ0Bjb21wb25lbnRzL2FjdGl2ZS9hY3RpdmVHcmFwaGljJwppbXBvcnQgYWN0aXZlRm9vdGVyIGZyb20gJ0Bjb21wb25lbnRzL2FjdGl2ZS9hY3RpdmVGb290ZXInCmltcG9ydCBhY3RpdmVVdGlscyBmcm9tICdAL2ZpbHRlcnMvYWN0aXZlLmpzJwppbXBvcnQgb3JkZXJQYXkgZnJvbSAiQC91dGlscy9wYXkiCmltcG9ydCB1dGlscyBmcm9tICJAL3V0aWxzL3V0aWxzIgpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogJ2dpZnRCYWcnLAogIC8vIG1peGluczogW3NlY2tpbGxNaXhpbiwgc2hhcmVNaXhpbl0sCiAgbWl4aW5zOiBbc2Vja2lsbE1peGluXSwKICBjb21wdXRlZDogewogIH0sCiAgY29tcG9uZW50czogewogICAgYWN0aXZlSGVhZGVyLAogICAgYWN0aXZlQ2FzaCwKICAgIGFjdGl2ZUdpZnQsCiAgICBhY3RpdmVHaWZ0UmVhc29uLAogICAgYWN0aXZlR3JhcGhpYywKICAgIGFjdGl2ZUZvb3RlcgogIH0sCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHJlYWR5OiBmYWxzZSwKICAgICAgdGltZXI6IG51bGwsCiAgICAgIGxpbWl0VGltZXI6IG51bGwsCiAgICAgIHNob3dQb3A6IGZhbHNlLAogICAgICBidG5UZXh0OiAn56uL5Y2z5oqi6LStJywKICAgICAgaGVhZGxpbmU6ICcnLAogICAgICBzaG93VGltZTogdHJ1ZSwKICAgICAgcmVtYWluVGltZTogMCwKICAgICAgY2hhbm5lbFR5cGU6ICcnLAogICAgICBvcHRpb25zOiB0aGlzLiRyb3V0ZS5xdWVyeSB8fCB7fSwKICAgICAgYnRuRGlzYWJsZWQ6IGZhbHNlLCAvLyDmjInpkq7mmK/lkKbkuI3lj6/nlKgKICAgICAgYnRuRm9udFNpemU6ICdmdDM0JywKICAgICAgc2VsQ2FzaHJlZDoge30sCiAgICAgIHNlbENvbnN1bWVyOiB7fSwKICAgICAgY29uZGl0aW9uSW5mbzoge30sCiAgICAgIHRyYWN2ZWxVc2VyTGlzdDogW10sCiAgICAgIHNlbERhdGU6IHsKICAgICAgICBzdGFydFRpbWU6ICcnCiAgICAgIH0sCiAgICAgIGluZm86IHt9LAogICAgICByZWNlaXZlT2JqOiB7CiAgICAgICAgMjogJ+aWsOeUqOaItycsCiAgICAgICAgMzogJ+S8muWRmCcsCiAgICAgICAgNDogJ+mdnuS8muWRmCcKICAgICAgfSwKICAgICAgZG93blRpbWU6IHsKICAgICAgICBob3VyOiAnMDAnLAogICAgICAgIG1pbnV0ZTogJzAwJywKICAgICAgICBzZWNvbmQ6ICcwMCcKICAgICAgfSwKICAgICAgcFR5cGU6ICdBQ1RfR0lGVF9QQUNLQUdFJywKICAgICAgc2hhcmVDbG9zZTogdHJ1ZSwKICAgICAgc2hhcmVJbmZvU2VsZjoge30sCiAgICB9CiAgfSwKICBjb21wdXRlZDogewogICAgLi4ubWFwR2V0dGVycyhbImxvY2F0aW9uSW5mbyIsICJ3eFVzZXIiLCAibG9jYXRpb25DaXR5IiwgInZpcENhcmRJbmZvIiwgInVwZGF0ZUdpZnQiXSkKICB9LAogIG1ldGhvZHM6IHsKICAgIC4uLm1hcE11dGF0aW9ucygnYWN0aXZlJywgWwogICAgICAnU0VUX1VQREFURUdJRlQnCiAgICBdKSwKICAvLyDorr7nva7mj5DphpIKICAgIHJlbWluZFNldChlKSB7CgogICAgfSwKCiAgICBoYW5kbGVyTGltaXQocmVzLCBmbGFnKXsKICAgICAgaWYgKHJlcy5pbmZvLmxpbWl0QWN0U3RhdGUgPT0gOCB8fCByZXMuaW5mby5saW1pdEFjdFN0YXRlID09IDkpIHsKICAgICAgICByZXMuaW5mby50aW1lU3RhdGUgPSAxCiAgICAgICAgdGhpcy5oZWFkbGluZSA9IGFjdGl2ZVV0aWxzLmdldERheU5hbWUocmVzLmluZm8ubGltaXRTdGFydFRpbWUpCiAgICAgIH0gZWxzZSBpZiAocmVzLmluZm8ubGltaXRBY3RTdGF0ZSA9PSAxIHx8IHJlcy5pbmZvLmxpbWl0QWN0U3RhdGUgPT0gMyB8fCByZXMuaW5mby5saW1pdEFjdFN0YXRlID09IDEwKSB7CiAgICAgICAgcmVzLmluZm8udGltZVN0YXRlID0gMgogICAgICB9IGVsc2UgaWYgKHJlcy5pbmZvLmxpbWl0QWN0U3RhdGUgPT0gMikgewogICAgICAgIHJlcy5pbmZvLnRpbWVTdGF0ZSA9IDMKICAgICAgfSBlbHNlIHsKICAgICAgICAvLyAx5pyq5byA5aeLIDLov5vooYzkuK0gM+W3sue7k+adnwogICAgICAgIGxldCBjdXJyZW50VGltZSA9ICtuZXcgRGF0ZSgpCiAgICAgICAgaWYoKHJlcy5pbmZvLmxpbWl0RW5kVGltZTxjdXJyZW50VGltZSkgJiYgKHJlcy5pbmZvLmxpbWl0U3RhcnRUaW1lPGN1cnJlbnRUaW1lKSkgewogICAgICAgICAgcmVzLmluZm8udGltZVN0YXRlID0gMwogICAgICAgIH0gZWxzZSBpZiAoKHJlcy5pbmZvLmxpbWl0RW5kVGltZT5jdXJyZW50VGltZSkgJiYgKHJlcy5pbmZvLmxpbWl0U3RhcnRUaW1lPGN1cnJlbnRUaW1lKSl7CiAgICAgICAgICByZXMuaW5mby50aW1lU3RhdGUgPSAyCiAgICAgICAgfSBlbHNlIGlmIChyZXMuaW5mby5saW1pdFN0YXJ0VGltZT5jdXJyZW50VGltZSkgewogICAgICAgICAgcmVzLmluZm8udGltZVN0YXRlID0gMQogICAgICAgICAgdGhpcy5oZWFkbGluZSA9IGFjdGl2ZVV0aWxzLmdldERheU5hbWUocmVzLmluZm8ubGltaXRTdGFydFRpbWUpCiAgICAgICAgfQogICAgICB9CiAgICAgIGlmKHJlcy5pbmZvLnRpbWVTdGF0ZSAhPSAzKSB7CiAgICAgICAgY2xlYXJJbnRlcnZhbCh0aGlzLmxpbWl0VGltZXIpCiAgICAgICAgdGhpcy5saW1pdFRpbWVyID0gc2V0SW50ZXJ2YWwoKCkgPT4gewogICAgICAgICAgbGV0IG5vd1RpbWUgPSArbmV3IERhdGUoKQogICAgICAgICAgdmFyIGN1dFRpbWUgPSAwCiAgICAgICAgICBpZihyZXMuaW5mby50aW1lU3RhdGUgPT0gMSkgewogICAgICAgICAgICBjdXRUaW1lID0gcmVzLmluZm8ubGltaXRTdGFydFRpbWUgLSBub3dUaW1lCiAgICAgICAgICB9IGVsc2UgeyAKICAgICAgICAgICAgY3V0VGltZSA9IHJlcy5pbmZvLmxpbWl0RW5kVGltZSAtIG5vd1RpbWUKICAgICAgICAgIH0KICAgICAgICAgIHRoaXMuZG93blRpbWUgPSB1dGlscy5jb3VudERvd24zKGN1dFRpbWUpCiAgICAgICAgICBpZihjdXRUaW1lIDw9IDAgJiYgKHJlcy5pbmZvLmxpbWl0QWN0U3RhdGUgIT0gMTIpKXsKICAgICAgICAgICAgY2xlYXJJbnRlcnZhbCh0aGlzLmxpbWl0VGltZXIpCiAgICAgICAgICAgIHRoaXMuZ2V0QWN0RGV0YWlsKCkKICAgICAgICAgIH0KICAgICAgICB9LCAxMDAwKQogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuZG93blRpbWUgPSB7CiAgICAgICAgICBob3VyOiAnMDAnLAogICAgICAgICAgbWludXRlOiAnMDAnLAogICAgICAgICAgc2Vjb25kOiAnMDAnCiAgICAgICAgfQogICAgICB9CiAgICAgIGNvbnNvbGUubG9nKCdyZXMuLi4uLi4uLi4uLicsIHJlcy5pbmZvLCB0aGlzLmRvd25UaW1lKQoKICAgICAgaWYoZmxhZykgewogICAgICAgIC8vIOW3suaKouWujOa0u+WKqOW8ueeqlwogICAgICAgIGlmKHJlcy5pbmZvLmxpbWl0QWN0U3RhdGUgPT0gMyB8fCByZXMuaW5mby5saW1pdEFjdFN0YXRlID09IDIgfHwgIXRoaXMuaW5mby5yZW1haW5OdW0pIHsKICAgICAgICAgIHRoaXMuZ2V0RW5kQWN0aXZlKCkKICAgICAgICB9CiAgICAgIH0KICAgIH0sCiAgICAvLyDjgILjgILjgILjgILjgILjgILjgILjgILjgILjgILjgILjgILjgILjgILjgILjgILjgILjgILjgILjgILjgILkvJjljJbnu5PmnZ/jgILjgILjgILjgILjgILjgILjgILjgILjgILjgILjgILjgILjgILjgIIKCiAgICBjbG9zZVBvcCgpIHsKICAgICAgdGhpcy5zaG93UG9wID0gZmFsc2UKICAgIH0sCgogICAgLy8g56S85YyF54m55pyJ5L+h5oGvCiAgICBnZXRHaWZ0SW5mbygpIHsKICAgICAgcmV0dXJuIHRoaXMuJGFwaS5hY3RfZ2lmdF9pbmZvKHsKICAgICAgICBjaGFubmVsVHlwZTogdGhpcy5jaGFubmVsVHlwZSwKICAgICAgICBxckNvZGU6IHRoaXMucXJDb2RlLAogICAgICAgIGFjdFNuOiB0aGlzLmFjdFNuLAogICAgICAgIGxhdDogdGhpcy5sb2NhdGlvbkluZm8ubGF0aXR1ZGUsCiAgICAgICAgbG5nOiB0aGlzLmxvY2F0aW9uSW5mby5sb25naXR1ZGUKICAgICAgfSkudGhlbihyZXMgPT4gewogICAgICAgIGlmIChyZXMuc3RhdGUpIHsKICAgICAgICAgIGxldCBjYXJkU3VtID0gMAogICAgICAgICAgcmVzLmluZm8uY2FyZExpc3QuZm9yRWFjaCgoaXRlbSkgPT4gewogICAgICAgICAgICBjYXJkU3VtICs9IGl0ZW0uY2FyZE51bQogICAgICAgICAgfSkKICAgICAgICAgIHRoaXMuaW5mbyA9IE9iamVjdC5hc3NpZ24oeyBjYXJkU3VtIH0sIHRoaXMuaW5mbywgcmVzLmluZm8pCiAgICAgICAgICBpZiAocmVzLmluZm8ucmVtYWluTnVtID09IDApIHsKICAgICAgICAgICAgdGhpcy5oYW5kbGVyQnRuKCflt7LllK7nvYQnLCB0cnVlKQogICAgICAgICAgfQogICAgICAgICAgCiAgICAgICAgfQogICAgICB9KQogICAgfSwKCiAgICBoYW5kbGVyQnRuKHRleHQsIGRpc2FibGVkPWZhbHNlLCBmb250U2l6ZT0nZnQzNCcpIHsKICAgICAgdGhpcy5idG5UZXh0ID0gdGV4dAogICAgICB0aGlzLmJ0bkZvbnRTaXplID0gZm9udFNpemUKICAgICAgdGhpcy5idG5EaXNhYmxlZCA9IGRpc2FibGVkCiAgICAgIGlmIChkaXNhYmxlZCkgewogICAgICAgIHRoaXMuc2hvd1RpbWUgPSBmYWxzZQogICAgICB9CiAgICB9LAoKICAgIC8vIOWIpOaWreeUqOaIt+i0reS5sOS/oeaBrwogICAgZ2V0UmVhbFRpbWVJbmZvKGxpbWl0RnJlcXVlbmN5KSB7CiAgICAgIHJldHVybiB0aGlzLiRhcGkucmVhbFRpbWVfaW5mbyh7CiAgICAgICAgYWN0U246IHRoaXMuYWN0U24KICAgICAgfSkudGhlbihyZXMgPT4gewogICAgICAgIGlmIChyZXMuc3RhdGUpIHsKICAgICAgICAgIHRoaXMucmVhbEluZm8gPSByZXMuaW5mbwogICAgICAgIH0KICAgICAgfSkKICAgIH0sCiAgICBnZXRSZWNlaXZlQ29uZGl0aW9uICgpIHsKICAgICAgcmV0dXJuIHRoaXMuJGFwaS5yZWNlaXZlX2NvbmRpdGlvbih7CiAgICAgICAgYWN0U246IHRoaXMuYWN0U24KICAgICAgfSkudGhlbihyZXM9PiB7CiAgICAgICAgaWYgKHJlcy5zdGF0ZSkgewogICAgICAgICAgdGhpcy5jb25kaXRpb25JbmZvID0gcmVzLmluZm8KICAgICAgICB9CiAgICAgIH0pCiAgICB9LAogICAgLy8g5aSE55CG56uL5Y2z6aKG5Y+W55qE5oyJ6ZKuCiAgICBoYW5kbGVyUmVjZWl2ZUJ0bigpIHsKICAgICAgbGV0IGhhc1JlY2VpdmVDaGFubmVsRnJlZUdpZnQgPSB0aGlzLmluZm8uaGFzUmVjZWl2ZUNoYW5uZWxGcmVlR2lmdAogICAgICBsZXQgY2hhbm5lbFR5cGUgPSB0aGlzLmNoYW5uZWxUeXBlCiAgICAgIHRoaXMuaGFuZGxlckJ0bign56uL5Y2z6aKG5Y+WJykKICAgICAgaWYgKGhhc1JlY2VpdmVDaGFubmVsRnJlZUdpZnQgJiYgY2hhbm5lbFR5cGUgPT0gJ0NIQU5ORUxfQUNUSVZJVFlfTEFCRUxfU0hPVycpIHRoaXMuaGFuZGxlckJ0bign6aKG5Y+W5qyh5pWw5bey55So5a6MJywgdHJ1ZSkKICAgIH0sCgogICAgLy8g6YCa55So5rS75Yqo6K+m5oOFCiAgICBnZXRBY3REZXRhaWwoZmxhZykgewogICAgICB0aGlzLiRUb2FzdC5sb2FkaW5nKHsKICAgICAgICBtZXNzYWdlOiAn5Yqg6L295LitLi4uJywKICAgICAgICBmb3JiaWRDbGljazogdHJ1ZSwKICAgICAgICBkdXJhdGlvbjogMAogICAgICB9KQogICAgICByZXR1cm4gdGhpcy4kYXBpLmFjdF9kZXRhaWwoewogICAgICAgIGNoYW5uZWxUeXBlOiB0aGlzLmNoYW5uZWxUeXBlLAogICAgICAgIHFyQ29kZTogdGhpcy5xckNvZGUsCiAgICAgICAgYWN0U246IHRoaXMuYWN0U24KICAgICAgfSkudGhlbihhc3luYyByZXMgPT4gewogICAgICAgIGlmIChyZXMuc3RhdGUpIHsKICAgICAgICAgIHRoaXMuc2hvd1NoYXJlID0gdHJ1ZQogICAgICAgICAgdGhpcy5lbnVtS2V5ID0gcmVzLmluZm8uY2hpbGRFbnVtS2V5CiAgICAgICAgICB0aGlzLnNoYXJlSW5mb1NlbGYgPSB7CiAgICAgICAgICAgIGRlc2M6IHJlcy5pbmZvLmFjdE5hbWUgfHwgJ+Wkp+ekvOWMhScKICAgICAgICAgIH0KICAgICAgICAgIC8vIHRoaXMuc2hhcmVQYWdlKCkKICAgICAgICAgIC8vIOWkhOeQhumZkOaXtueahOWAkuiuoeaXtuetiemXrumimCAKICAgICAgICAgIGlmICggcmVzLmluZm8uY2hpbGRFbnVtS2V5ID09ICdBQ1RfR0lGVF9QQUNLQUdFX1BVUkNIQVNFX0xJTUlUJykgewogICAgICAgICAgICB0aGlzLmhhbmRsZXJMaW1pdChyZXMsIGZsYWcpCiAgICAgICAgICB9CiAgICAgICAgICByZXMuaW5mby5jaGFubmVsVHlwZSA9IHRoaXMuY2hhbm5lbFR5cGUgfHwgJycKICAgICAgICAgIHRoaXMuaW5mbyA9IE9iamVjdC5hc3NpZ24oe30sIHRoaXMuaW5mbywgcmVzLmluZm8pCiAgICAgICAgICB0aGlzLnJlbWFpblRpbWUgPSByZXMuaW5mby5yZW1haW5UaW1lCiAgICAgICAgICB0aGlzLnNob3dUaW1lID0gcmVzLmluZm8uc2hvd1RpbWUKICAgICAgICAgIHRoaXMucmVhZHkgPSB0cnVlCgogICAgICAgICAgY29uc29sZS5sb2coJ2luZm8uLi4uLi4uLi4uJywgdGhpcy5pbmZvKQoKICAgICAgICAgIC8vIOaMiemSruaWh+WtlwogICAgICAgICAgbGV0IHZpcFVzZXIgPSB0aGlzLnZpcENhcmRJbmZvLnZpcFVzZXIKICAgICAgICAgIHRoaXMudmlwVXNlciA9IHRoaXMudmlwQ2FyZEluZm8udmlwVXNlcgogICAgICAgICAgbGV0IGNoYW5uZWxUeXBlID0gdGhpcy5jaGFubmVsVHlwZQogICAgICAgICAgbGV0IHJlc3RyaWN0U3RhdGUgPSB0aGlzLmluZm8ucmVzdHJpY3RTdGF0ZQogICAgICAgICAgbGV0IHBhY2thZ2VHaWZ0VHlwZSA9IHRoaXMuaW5mby5wYWNrYWdlR2lmdFR5cGUKICAgICAgICAgIGxldCBoYXNSZWNlaXZlQ2hhbm5lbEZyZWVHaWZ0ID0gdGhpcy5pbmZvLmhhc1JlY2VpdmVDaGFubmVsRnJlZUdpZnQKICAgICAgICAgIGxldCByZW1haW5OdW0gPSB0aGlzLmluZm8ucmVtYWluTnVtCiAgICAgICAgICBsZXQgY2hhbm5lbFRyYWNrID0gdGhpcy5pbmZvLmNoYW5uZWxUcmFjawogICAgICAgICAgbGV0IHNlbGxQcmljZSA9IHRoaXMuaW5mby5zZWxsUHJpY2UKICAgICAgICAgIGxldCBub1ZpcFByaWNlID0gdGhpcy5pbmZvLm5vVmlwUHJpY2UKICAgICAgICAgIGxldCBzdGF0ZSA9IHJlcy5pbmZvLmFjdFN0YXRlCiAgICAgICAgICBsZXQgYnV5TGltaXQgPSByZXMuaW5mby5idXlMaW1pdAoKICAgICAgICAgIGlmIChzdGF0ZSA9PSAxKSB7CiAgICAgICAgICAgIHRoaXMuaGFuZGxlckJ0bign5pyq5byA5aeLJywgdHJ1ZSkKICAgICAgICAgIH0gZWxzZSBpZiAoc3RhdGUgPT0gMykgewogICAgICAgICAgICB0aGlzLmhhbmRsZXJCdG4oJ+W3suWUrue9hCcsIHRydWUpCiAgICAgICAgICB9IGVsc2UgaWYgKHN0YXRlID09IDQpIHsKICAgICAgICAgICAgdGhpcy5oYW5kbGVyQnRuKCflt7Lnu5PmnZ8nLCB0cnVlKQogICAgICAgICAgfSBlbHNlIGlmIChzdGF0ZSA9PSA1KSB7CiAgICAgICAgICAgIC8vICDkvJrlkZgKICAgICAgICAgICAgaWYodmlwVXNlcil7CiAgICAgICAgICAgICAgaWYgKHNlbGxQcmljZSA+IDApewogICAgICAgICAgICAgICAgdGhpcy5oYW5kbGVyQnRuKCflt7LllK7nvYQnLCB0cnVlKQogICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICB0aGlzLmhhbmRsZXJCdG4oJ+mihuWPluasoeaVsOW3sueUqOWujCcsIHRydWUpCiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9ZWxzZXsKICAgICAgICAgICAgICBpZiAoYnV5TGltaXQgPT0gMSAmJiBub1ZpcFByaWNlID4gMCkgewogICAgICAgICAgICAgICAgdGhpcy5oYW5kbGVyQnRuKCflt7LllK7nvYQnLCB0cnVlKQogICAgICAgICAgICAgIH0gZWxzZSBpZiAoYnV5TGltaXQgPT0gMSAmJiBub1ZpcFByaWNlID09IDApIHsKICAgICAgICAgICAgICAgIHRoaXMuaGFuZGxlckJ0bign6aKG5Y+W5qyh5pWw5bey55So5a6MJywgdHJ1ZSkKICAgICAgICAgICAgICB9IGVsc2UgaWYgKGJ1eUxpbWl0ID09IDIpIHsKICAgICAgICAgICAgICAgIHRoaXMuaGFuZGxlckJ0bign5bey5ZSu572EJywgdHJ1ZSkKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICAgIC8vIOWklumDqOa4oOmBk+i/m+WFpQogICAgICAgICAgaWYgKHN0YXRlID09IDIpIHsKICAgICAgICAgICAgCiAgICAgICAgICAgIC8vIC4uLi4uLi4uLi4uLi4u5aSW6YOo5rig6YGT56S85YyF5Li65ZSu5Y2W5Z6LLi4uLi4uLi4uLi4uLi4uLi4uLi4KICAgICAgICAgICAgaWYgKGNoYW5uZWxUcmFjayA/IHBhY2thZ2VHaWZ0VHlwZSA9PSAxIDogcmVzdHJpY3RTdGF0ZSA9PSAyKSB7CiAgICAgICAgICAgICAgaWYgKHJlbWFpbk51bSA+IDApIHsKICAgICAgICAgICAgICAgIHRoaXMuaGFuZGxlckJ0bign56uL5Y2z6LSt5LmwJykKICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgLy8gIOS8muWRmAogICAgICAgICAgICAgICAgaWYgKHZpcFVzZXIpIHsKICAgICAgICAgICAgICAgICAgaWYgKHNlbGxQcmljZSA+IDApIHsKICAgICAgICAgICAgICAgICAgICB0aGlzLmhhbmRsZXJCdG4oJ+W3suWUrue9hCcsIHRydWUpCiAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5oYW5kbGVyQnRuKCfpooblj5bmrKHmlbDlt7LnlKjlrownLCB0cnVlKQogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICBpZiAoYnV5TGltaXQgPT0gMSAmJiBub1ZpcFByaWNlID4gMCkgewogICAgICAgICAgICAgICAgICAgIHRoaXMuaGFuZGxlckJ0bign5bey5ZSu572EJywgdHJ1ZSkKICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChidXlMaW1pdCA9PSAxICYmIG5vVmlwUHJpY2UgPT0gMCkgewogICAgICAgICAgICAgICAgICAgIHRoaXMuaGFuZGxlckJ0bign6aKG5Y+W5qyh5pWw5bey55So5a6MJywgdHJ1ZSkKICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChidXlMaW1pdCA9PSAyKSB7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5oYW5kbGVyQnRuKCflt7LllK7nvYQnLCB0cnVlKQogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAvLyDku4XkvJrlkZjlj6/otK3kubDml7bvvIzpnZ7kvJrlkZjmmL7npLoKICAgICAgICAgICAgICBpZiAoYnV5TGltaXQgPT0gMiAmJiAhdmlwVXNlcikgewogICAgICAgICAgICAgICAgdGhpcy5oYW5kbGVyQnRuKCflvIDpgJrlubbotK3kubAnKQogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgLy8g5LuF5Lya5ZGY5Y+v6LSt5Lmw77yM5Lya5ZGY5Lu35Li6MO+8jOmdnuS8muWRmOinhuinkgogICAgICAgICAgICAgIGlmIChidXlMaW1pdCA9PSAyICYmICFzZWxsUHJpY2UgJiYgIXZpcFVzZXIpIHsKICAgICAgICAgICAgICAgIHRoaXMub3Blbl9yZWNlaXZlID0gdHJ1ZQogICAgICAgICAgICAgICAgdGhpcy5oYW5kbGVyQnRuKCflvIDpgJrlubbpooblj5YnKQogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAvLy4uLi4uLi4uLi4uLi4uLi4u56uL5Y2z6aKG5Y+W55qE5oyJ6ZKu5byA5aeLLi4uLi4uLi4uLi4uLi4uLi4uLgogICAgICAgICAgICAgIC8vIOS7heS8muWRmOWPr+i0reS5sO+8jOS8muWRmOS7t+S4ujDvvIzkvJrlkZjop4bop5IKICAgICAgICAgICAgICBpZiAoYnV5TGltaXQgPT0gMiAmJiAhc2VsbFByaWNlICYmIHZpcFVzZXIpIHsKICAgICAgICAgICAgICAgIHRoaXMuaGFuZGxlclJlY2VpdmVCdG4oc3RhdGUpCiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAvLyDmiYDmnInkurrlj6/otK3kubDvvIzkvJrlkZjku7fjgIHpnZ7kvJrlkZjku7fpg73kuLow77yM5omA5pyJ5Lq66KeG6KeSCiAgICAgICAgICAgICAgaWYgKGJ1eUxpbWl0ID09IDEgJiYgIXNlbGxQcmljZSAmJiAhbm9WaXBQcmljZSkgewogICAgICAgICAgICAgICAgdGhpcy5oYW5kbGVyUmVjZWl2ZUJ0bihzdGF0ZSkKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgLy8g5omA5pyJ5Lq65Y+v6LSt5Lmw77yM5Lya5ZGY5Lu344CB6Z2e5Lya5ZGY5Lu36YO95Li6MO+8jOaJgOacieS6uuinhuinkgogICAgICAgICAgICAgIGlmIChidXlMaW1pdCA9PSAxICYmICFzZWxsUHJpY2UgJiYgIW5vVmlwUHJpY2UpIHsKICAgICAgICAgICAgICAgIHRoaXMuaGFuZGxlclJlY2VpdmVCdG4oc3RhdGUpCiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIAogICAgICAgICAgICAgIC8vIOaJgOacieS6uuWPr+i0reS5sO+8jOS8muWRmOS7t+OAgemdnuS8muWRmOS7t+mDveS4ujDvvIzmiYDmnInkurrop4bop5IKICAgICAgICAgICAgICBpZiAoYnV5TGltaXQgPT0gMSAmJiAhc2VsbFByaWNlICYmIHZpcFVzZXIpIHsKICAgICAgICAgICAgICAgIHRoaXMuaGFuZGxlclJlY2VpdmVCdG4oc3RhdGUpCiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIC8vLi4uLi4uLi4uLi4uLi4uLi7nq4vljbPpooblj5bnmoTmjInpkq7nu5PmnZ8uLi4uLi4uLi4uLi4uLi4uLi4uCgogICAgICAgICAgICB9IGVsc2UgaWYgKGNoYW5uZWxUcmFjayA/IHBhY2thZ2VHaWZ0VHlwZSA9PSAyIDogcmVzdHJpY3RTdGF0ZSA9PSAxKSB7CiAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgLy8gLi4uLi4uLi4uLi4uLi7lpJbpg6jmuKDpgZPnpLzljIXkuLrlhY3otLnpooblj5blnosuLi4uLi4uLi4uLi4uLi4uCiAgICAgICAgICAgICAgaWYgKHJlbWFpbk51bSA+IDApIHsKICAgICAgICAgICAgICAgIHRoaXMuaGFuZGxlckJ0bign56uL5Y2z6aKG5Y+WJykKICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgdGhpcy5oYW5kbGVyQnRuKCflt7LllK7nvYQnLCB0cnVlKQogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBpZiAoaGFzUmVjZWl2ZUNoYW5uZWxGcmVlR2lmdCAmJiBjaGFubmVsVHlwZSA9PSAnQ0hBTk5FTF9BQ1RJVklUWV9MQUJFTF9TSE9XJykgewogICAgICAgICAgICAgICAgdGhpcy5oYW5kbGVyQnRuKCfpooblj5bmrKHmlbDlt7LnlKjlrownLCB0cnVlKQogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQoKCiAgICAgICAgICAgIC8vLi4uLi4uLi4uLi4uLi4uLi4uLi7pooblj5bmrKHmlbDkuI7otK3kubDmrKHmlbDmmK/lkKblt7LnlKjlrowuLi4uLi4uLi4uLi4uLi4uIAogICAgICAgICAgICBsZXQgdG90YWxOdW0gPSBOdW1iZXIodGhpcy5yZWFsSW5mby51c2VyQnV5TnVtKSArIE51bWJlcih0aGlzLnJlYWxJbmZvLnVzZXJGcmVlUmVjZWl2ZU51bSkgLy8g5b2T5YmN55So5oi355qE6LSt5Lmw5pWw6YeP5ZKM6aKG5Y+W5pWw6YeP5oC75ZKMCiAgICAgICAgICAgIGxldCBjb250YXRpb24gPSAocmVzLmluZm8uYnV5TGltaXQgPT0gMSAmJiAhcmVzLmluZm8uc2VsbFByaWNlICYmICFyZXMuaW5mby5ub1ZpcFByaWNlKSB8fCAocmVzLmluZm8uYnV5TGltaXQgPT0gMiAmJiAhcmVzLmluZm8uc2VsbFByaWNlKSAvLyDliKTmlq3lt7Lpooblj5bnmoTnirbmgIEKCiAgICAgICAgICAgIC8vIOWIpOaWreaYr+WQpumZkOWItui0reS5sAogICAgICAgICAgICBpZiAocmVzLmluZm8ubGltaXRTdGF0ZSkgewogICAgICAgICAgICAgIGlmICh0b3RhbE51bSA+PSByZXMuaW5mby5saW1pdEZyZXF1ZW5jeSkgewoKICAgICAgICAgICAgICAgIC8vIOeUqOaIt+aAu+aIkOWKn+i0reS5sOaVsOmHj+Wkp+S6jumZkOWItui0reS5sOaVsOmHjwogICAgICAgICAgICAgICAgdGhpcy5oYW5kbGVyQnRuKCflt7LotK3kubAnLCB0cnVlKQogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBpZiAoKHRvdGFsTnVtID49IHJlcy5pbmZvLmxpbWl0RnJlcXVlbmN5KSAmJiBjb250YXRpb24pIHsKCiAgICAgICAgICAgICAgICAvLyDlvZPliY3nlKjmiLflvZPliY3mtLvliqjkuK3mgLvlhY3otLnpooblj5bmlbDph4/lpKfkuo7pmZDliLbpooblj5bmlbDph48KICAgICAgICAgICAgICAgIHRoaXMuaGFuZGxlckJ0bign6aKG5Y+W5qyh5pWw5bey55So5a6MJywgdHJ1ZSkKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgIH0gCiAgICAgICAgICAvLyDliKTmlq3kuLrlhZHmjaLkuK3lv4Pov5vlhaUKICAgICAgICAgIGlmICh0aGlzLmhhc0V4Y2hhbmdlICE9ICcnKSB7IAogICAgICAgICAgICBsZXQgZXhjaGFuZ2VfZGF0YSA9IHRoaXMuZXhjaGFuZ2VfZGF0YSAvLyDlhZHmjaLkuK3lv4PmtLvliqjmlbDmja4KCiAgICAgICAgICAgIGlmIChleGNoYW5nZV9kYXRhLmhhc0V4Y2hhbmdlKSB7CiAgICAgICAgICAgICAgdGhpcy5oYW5kbGVyQnRuKCflt7LlhZHmjaInLCB0cnVlKQogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIGlmIChleGNoYW5nZV9kYXRhLnJlbWFpbk51bSA+IDApIHsKICAgICAgICAgICAgICAgIGlmIChleGNoYW5nZV9kYXRhLnN0YXRlICE9IDIpIHsKICAgICAgICAgICAgICAgICAgdGhpcy5oYW5kbGVyQnRuKCflt7Lnu5PmnZ8nLCB0cnVlKQogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgaWYgKGV4Y2hhbmdlX2RhdGEuY29uZGl0aW9uKSB7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgIHRoaXMuaGFuZGxlckJ0bign56uL5Y2z5YWR5o2iJywgZmFsc2UpCiAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5oYW5kbGVyQnRuKCfnq4vljbPlhZHmjaInLCB0cnVlKQogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIHRoaXMuaGFuZGxlckJ0bign5bey5YWR5a6MJywgdHJ1ZSkKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KCiAgICAgICAgICAvLyAuLi4uLi4uLi4uLi4uLi4uLuS8mOWMluaWsOWini4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4KICAgICAgICAgIC8vIOWIpOaWreS7jumZkOi0rei/m+WFpQogICAgICAgICAgaWYgKHRoaXMuaW5mby5jaGlsZEVudW1LZXkgPT0gJ0FDVF9HSUZUX1BBQ0tBR0VfUFVSQ0hBU0VfTElNSVQnKSB7CiAgICAgICAgICAgIC8vIOWIpOaWreaMiemSrueahOWxleekugogICAgICAgICAgICAvLyAxLua0u+WKqOacquW8gOWniyDmnKrorr7nva7mj5DphpIgLS0tLS0g5o+Q6YaS5oiRL+mihOe6puaPkOmGkiAKICAgICAgICAgICAgLy8gMi7mtLvliqjmnKrlvIDlp4sg5bey6K6+572u5o+Q6YaSIC0tLS0tIOW3sumihOe6pgogICAgICAgICAgICAvLyAzLua0u+WKqOi/m+ihjOS4rSAtLS0tLSDnq4vljbPmiqLotK0KICAgICAgICAgICAgLy8gNC7mtLvliqjov5vooYzkuK0g6LSt5Lmw5qyh5pWw6L6+5Yiw5LiK6ZmQLS0tLS0g5bey6LSt5LmwCiAgICAgICAgICAgIC8vIDUu5rS75Yqo6L+b6KGM5LitIOW6k+WtmOS4ujAgLS0tLS0g5bey5oqi5a6MCiAgICAgICAgICAgIC8vIDYu5rS75Yqo5pyq5Y+R5biDIOaXoOazlei0reS5sOOAgeiuvue9ruaPkOmGkiAtLS0tLSDoi6Xngrnlh7vvvIzliJl0b2FzdOaPkOekuuKAnOW9k+WJjea0u+WKqC/lkIjovpHmnKrlj5HluIPigJ0KICAgICAgICAgICAgLy8gNy7mtLvliqjlt7Lnu5PmnZ8gLS0tLS0gIOW3suaKouWujAogICAgICAgICAgICBpZiAoIXRoaXMuaW5mby5yZW1haW5OdW0pIHsKICAgICAgICAgICAgICB0aGlzLmhhbmRsZXJCdG4oJ+W3suaKouWujCcsIHRydWUpCiAgICAgICAgICAgICAgcmV0dXJuCiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYocmVzLmluZm8uYWN0U3RhdGUgPT0gMTEgIHx8IHJlcy5pbmZvLmFjdFN0YXRlID09IDMpIHsKICAgICAgICAgICAgICB0aGlzLmhhbmRsZXJCdG4oJ+W3suaKouWujCcsIHRydWUpCiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgLy8gaWYgKHJlcy5pbmZvLmxpbWl0QWN0U3RhdGUgPT0gOCkgewogICAgICAgICAgICAgIC8vICAgdGhpcy5oYW5kbGVyQnRuKCfpooTnuqbmj5DphpInLCBmYWxzZSkKICAgICAgICAgICAgICAvLyB9IGVsc2UgaWYgKHJlcy5pbmZvLmxpbWl0QWN0U3RhdGUgPT0gOSkgewogICAgICAgICAgICAgIC8vICAgdGhpcy5oYW5kbGVyQnRuKCflt7LpooTnuqYnLCBmYWxzZSkKICAgICAgICAgICAgICAvLyB9IAogICAgICAgICAgICAgIGlmIChyZXMuaW5mby5saW1pdEFjdFN0YXRlID09IDggfHwgcmVzLmluZm8ubGltaXRBY3RTdGF0ZSA9PSA5KSB7CiAgICAgICAgICAgICAgICB0aGlzLmhhbmRsZXJCdG4oJ+acquW8gOWniycsIHRydWUpCiAgICAgICAgICAgICAgfSBlbHNlIGlmIChyZXMuaW5mby5saW1pdEFjdFN0YXRlID09IDEpIHsKICAgICAgICAgICAgICAgIHRoaXMuaGFuZGxlckJ0bign56uL5Y2z5oqi6LStJywgZmFsc2UpCiAgICAgICAgICAgICAgfSBlbHNlIGlmIChyZXMuaW5mby5saW1pdEFjdFN0YXRlID09IDEwKSB7CiAgICAgICAgICAgICAgICB0aGlzLmhhbmRsZXJCdG4oJ+W3sui0reS5sCcsIHRydWUpCiAgICAgICAgICAgICAgfSBlbHNlIGlmIChyZXMuaW5mby5saW1pdEFjdFN0YXRlID09IDMpIHsKICAgICAgICAgICAgICAgIHRoaXMuaGFuZGxlckJ0bign5bey5oqi5a6MJywgdHJ1ZSkKICAgICAgICAgICAgICB9IGVsc2UgaWYgKHJlcy5pbmZvLmxpbWl0QWN0U3RhdGUgPT0gMikgewogICAgICAgICAgICAgICAgdGhpcy5oYW5kbGVyQnRuKCflt7LmiqLlrownLCB0cnVlKQogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgfQoKICAgICAgICAgIHRoaXMuc2hvd0J0blR4dCA9IHRydWUKICAgICAgICAKICAgICAgICAgIC8vIOWmguaenOmcgOimgeaYvuekuuWAkuiuoeaXtgogICAgICAgICAgaWYgKHRoaXMuc2hvd1RpbWUgJiYgdGhpcy5pbmZvLmNoaWxkRW51bUtleSAhPSAnQUNUX0dJRlRfUEFDS0FHRV9QVVJDSEFTRV9MSU1JVCcpIHsKICAgICAgICAgICAgY2xlYXJJbnRlcnZhbCh0aGlzLnRpbWVyKQogICAgICAgICAgICB2YXIgcmVtYWluVGltZSA9IHJlcy5pbmZvLnJlbWFpblRpbWUKCiAgICAgICAgICAgIHRoaXMudGltZXIgPSBzZXRJbnRlcnZhbCgoKSA9PiB7CiAgICAgICAgICAgICAgaWYgKHJlbWFpblRpbWUgPj0gMTAwMCkgewogICAgICAgICAgICAgICAgcmVtYWluVGltZSAtPSAxMDAwCiAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIGNsZWFySW50ZXJ2YWwodGhpcy50aW1lcikKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgdGhpcy5yZW1haW5UaW1lID0gcmVtYWluVGltZSB8fCAwCiAgICAgICAgICAgIH0sIDEwMDApCiAgICAgICAgICB9CgogICAgICAgICAgdGhpcy5nZXRDYXNoTnVtKCkgLy8g6I635Y+W5rS75Yqo57qi5YyF5b2T5YmN5Lqr55So5pyA5aSn57qi5YyFCiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHRoaXMuYmFja190byhyZXMpCiAgICAgICAgfQogICAgICB9KS5maW5hbGx5KCgpID0+IHsKICAgICAgICB0aGlzLiRUb2FzdC5jbGVhcigpCiAgICAgIH0pCiAgICB9LAoKICAgIC8vIOmihuWPluekvOWMheaOpeWPo+iwg+eUqAogICAgLy8gcmVjZWl2ZVR5cGUg6I635Y+W5pa55byP77yMMeS8muWRmOmihuWPlu+8jDLkvJrlkZjotK3kubDvvIwz5rig6YGT6LSt5LmwCiAgICByZWNlaXZlR2lmdChyZWNlaXZlVHlwZT0xKSB7CiAgICAgIGxldCBjb25kaXRpb25JbmZvID0gdGhpcy5jb25kaXRpb25JbmZvCiAgICAgIGxldCB0cmFjdmVsVXNlckxpc3QgPSB0aGlzLnRyYWN2ZWxVc2VyTGlzdAogICAgICBpZiAoY29uZGl0aW9uSW5mby5pc0NvbmRpdGlvbiAmJiB0cmFjdmVsVXNlckxpc3QubGVuZ3RoID09IDApIHsKICAgICAgICAvLyDliKTmlq3mmK/lkKbpnIDmsYLloavlhpnkv6Hmga8KICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCh7CiAgICAgICAgICBuYW1lOiAndHJhdmVsSW5mb3JtYXRpb24nLAogICAgICAgICAgcXVlcnk6IHsKICAgICAgICAgICAgYWN0U246IHRoaXMub3B0aW9ucy5hY3RTbgogICAgICAgICAgfQogICAgICAgIH0pCiAgICAgICAgcmV0dXJuCiAgICAgIH0KICAgICAgbGV0IGFjdERlYWwgPSBvcmRlclBheS5hY3REZWFsKHsKICAgICAgICBjaXR5SWQ6IHRoaXMubG9jYXRpb25DaXR5LmNpdHlJZCwKICAgICAgICBhY3RTbjogdGhpcy5hY3RTbiwKICAgICAgICBkZWFsTnVtOiAxLAogICAgICAgIGNoYW5uZWxUeXBlOiB0aGlzLmNoYW5uZWxUeXBlLAogICAgICAgIHJlYWxGZWU6IDAsCiAgICAgICAgcmVjZWl2ZVR5cGUsCiAgICAgICAgb3BlblZpcDogZmFsc2UsIC8v5piv5ZCm5byA6YCa5pyI5Y2h5Lya5ZGY5bm26LSt5LmwCiAgICAgICAgYWN0RmVlOiAwLCAvL+a0u+WKqOaUr+S7mOi0ueeUqAogICAgICAgIHZpcEZlZTogMCwKICAgICAgICB2aXBDYXJkSWQ6ICcnLAogICAgICAgIGJ1eVR5cGU6IDAsCiAgICAgICAgcXJDb2RlOiB0aGlzLnFyQ29kZSwKICAgICAgICBjb21wSWQ6IHRoaXMuY29tcElkLCAvLyDlkIjovpFJZAogICAgICAgIGNob29zZURhdGU6IHRoaXMuc2VsRGF0ZS5zdGFydFRpbWUgPyB1dGlscy5mb3JtYXRUaW1lKHRoaXMuc2VsRGF0ZS5zdGFydFRpbWUgfHwgMCwgJ1lZWVlNTUREJykgOiAwLCAvLyDoh6rmiJHmuLjpgInmi6nml7bpl7QKICAgICAgICB0cmFjdmVsVXNlckxpc3Q6IEpTT04uc3RyaW5naWZ5KHRoaXMudHJhY3ZlbFVzZXJMaXN0KQogICAgICB9KQogICAgICBpZiAoYWN0RGVhbCkgewogICAgICAgIGFjdERlYWwudGhlbihyZXMgPT4gewogICAgICAgICAgaWYgKHJlcy5zdGF0ZSkgewogICAgICAgICAgICAvLyDmlLnlj5jlhajlsYDog73lkKblhY3otLnpooblj5bnpLzljIXnmoTnirbmgIEKICAgICAgICAgICAgdGhpcy5TRVRfVVBEQVRFR0lGVCh0cnVlKQogICAgICAgICAgICAvLyDmuIXpmaTnlKjmiLfloavlhpnkv6Hmga8KICAgICAgICAgICAgdGhpcy4kc2F2ZS5yZW1vdmUoJ3Nlc3Npb24nLCAndHJhdmVsSW5mb3JtYXRpb24nKQogICAgICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCh7bmFtZTogJ2dpZnRCYWdTdWNjZXNzJywgcXVlcnk6IHsgdHJhZGVJZDogcmVzLmluZm8udHJhZGVJZCwgYWN0TmFtZTogdGhpcy5pbmZvLmFjdE5hbWUsIHJlY2VpdmU6IDEsIGFjdFNuOiB0aGlzLmFjdFNufX0pCgogICAgICAgICAgICAvLyDot7Povazpooblj5bmiJDlip/pobUKICAgICAgICAgICAgLy8gd3gubmF2aWdhdGVUbyh7CiAgICAgICAgICAgIC8vICAgdXJsOiBgL3BhZ2VzL2FjdGl2aXR5L2dpZnRfYmFnX2RldGFpbC9zdWNjZXNzL3N1Y2Nlc3M/dHJhZGVJZD0ke3Jlcy5pbmZvLnRyYWRlSWR9JmFjdE5hbWU9JHt0aGlzLmluZm8uYWN0TmFtZX0mcmVjZWl2ZT0xJmFjdFNuPSR7dGhpcy5hY3RTbn1gLAogICAgICAgICAgICAvLyAgIHN1Y2Nlc3M6IChyZXN1bHQpPT57CiAgICAgICAgICAgIC8vICAgICB0aGlzLnNldERhdGEoewogICAgICAgICAgICAvLyAgICAgICBpc0NhbkNsaWNrOiBmYWxzZSAKICAgICAgICAgICAgLy8gICAgIH0pCiAgICAgICAgICAgIC8vICAgfQogICAgICAgICAgICAvLyB9KTsKICAgICAgICAgIH0KICAgICAgICB9KQogICAgICB9CiAgICB9LAoKICAgIC8vIOWIpOaWreaYr+WQpuacieacquaUr+S7mOeahOiuouWNlQogICAgLy8gcmVjZWl2ZVR5cGUg6I635Y+W5pa55byP77yMMeS8muWRmOmihuWPlu+8jDLkvJrlkZjotK3kubDvvIwz5rig6YGT6LSt5LmwCiAgICBvcmRlclVucGF5KHJlY2VpdmVUeXBlKSB7CiAgICAgIHRoaXMuJHNhdmUuc2V0KCdzZXNzaW9uJywgJ29yZGVySW5mbycsIHRoaXMuaW5mbykKICAgICAgY29uc29sZS5sb2coJ3RoaXMuaW5mbycsIHRoaXMuaW5mbykKICAgICAgaWYgKHRoaXMuaXNDYW5DbGljazIpIHJldHVybiAKICAgICAgdGhpcy5pc0NhbkNsaWNrMiA9IHRydWUgCiAgICAgIHRoaXMuJGFwaS5vcmRlcl91bnBheSh7CiAgICAgICAgYWN0U246IHRoaXMuYWN0U24KICAgICAgfSkudGhlbihyZXMgPT4gewogICAgICAgIGlmIChyZXMuc3RhdGUpIHsKICAgICAgICAgIGlmIChyZXMuaW5mby5leGlzdHNVblBheSkgewogICAgICAgICAgICAvLyDlpoLmnpzlrZjlnKjmnKrmlK/ku5jnmoTorqLljZXvvIzot7PovazliLDorqLljZXliJfooajpobUKICAgICAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goewogICAgICAgICAgICAgIG5hbWU6ICdvcmRlckxpc3QnCiAgICAgICAgICAgIH0pCiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICB0aGlzLmp1bXBTdWJtaXQocmVjZWl2ZVR5cGUpCiAgICAgICAgICAgIHRoaXMuaXNDYW5DbGljazIgPSBmYWxzZQogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSkuY2F0Y2goKCkgPT4gewogICAgICAgIHRoaXMuaXNDYW5DbGljazIgPSBmYWxzZSAKICAgICAgfSkKICAgIH0sCgogICAgLy8g6Lez6L2s6LSt5Lmw6aG16Z2iCiAgICBqdW1wU3VibWl0KHJlY2VpdmVUeXBlKSB7CiAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHsKICAgICAgICBuYW1lOiAnc3VibWl0T3JkZXInLAogICAgICAgIHF1ZXJ5OiB7CiAgICAgICAgICBxckNvZGU6IHRoaXMub3B0aW9ucy5xckNvZGUgfHwgJycsCiAgICAgICAgICBjb21wSWQ6IHRoaXMub3B0aW9ucy5jb21wSWQgfHwgJycsCiAgICAgICAgICBhY3RTbjogdGhpcy5vcHRpb25zLmFjdFNuLAogICAgICAgICAgY2hhbm5lbFR5cGU6IHRoaXMub3B0aW9ucy5jaGFubmVsVHlwZSwKICAgICAgICAgIHJlY2VpdmVUeXBlOiByZWNlaXZlVHlwZSwKICAgICAgICB9CiAgICAgIH0pCiAgICAgIAogICAgfSwKCiAgICAvLyDpnZ7kvJrlkZjlvIDpgJrlubbpooblj5YKICAgIG9wZW5SZWNlaXZlKCkgewogICAgICB0aGlzLiRzZXQodGhpcy5pbmZvLCAnc2VsbFByaWNlJywgMCkKICAgICAgdGhpcy4kc2V0KHRoaXMuaW5mbywgJ25vVmlwUHJpY2UnLCAwKQogICAgICB0aGlzLiRzYXZlLnNldCgnc2Vzc2lvbicsICdvcmRlckluZm8nLCB0aGlzLmluZm8pCiAgICAgIC8vIOmdnuS8muWRmOW8gOmAmuW5tumihuWPlgogICAgICBsZXQgcmVjZWl2ZVR5cGUgPSB0aGlzLmNoYW5uZWxUeXBlID09ICdDSEFOTkVMX0FDVElWSVRZX0xBQkVMX1NIT1cnID8gNCA6IDEKICAgICAgdGhpcy5qdW1wU3VibWl0KHJlY2VpdmVUeXBlKQogICAgfSwKCiAgICBoYW5kbGVyTGltaXRFdmVudCgpIHsKICAgICAgaWYoIHRoaXMuaW5mby5saW1pdEFjdFN0YXRlID09IDEyICkgewogICAgICAgIHRoaXMuJFRvYXN0KCflvZPliY3lkIjovpHpnZ7ov5vooYzkuK3nirbmgIEnKQogICAgICB9IGVsc2UgewogICAgICAgIGlmKHRoaXMuYnRuVGV4dCA9PSAn56uL5Y2z5oqi6LStJykgewogICAgICAgICAgdGhpcy4kc2F2ZS5zZXQoJ3Nlc3Npb24nLCAnb3JkZXJJbmZvJywgdGhpcy5pbmZvKQogICAgICAgICAgdGhpcy5qdW1wU3VibWl0KDIpCiAgICAgICAgfQogICAgICB9CiAgICB9LAoKICAgIC8qKgogICAgKiDpooblj5bmiJbogIXmiqLotK3npLzljIUKICAgICAgICByZXN0cmljdFN0YXRlICDmmK/lkKblj6/otK3kubDvvJox5ZCmIDLmmK8KICAgICAgICByZWNlaXZlVHlwZTog5aSW6YOo5rig6YGTewogICAgICAgICAg6LSt5Lmw77yaIDMKICAgICAgICAgIOWFjei0uemihjogIDEKICAgICAgICB9CiAgICAqLwogICAgZ2V0R2lmdCgpIHsKICAgICAgdmFyIHZpcFVzZXIgPSB0aGlzLnZpcENhcmRJbmZvLnZpcFVzZXIKICAgICAgdmFyIGlzbmV3VXNlciA9IHRoaXMucmVhbEluZm8ubmV3VXNlcgogICAgICBsZXQgcGFja2FnZUdpZnRUeXBlID0gdGhpcy5pbmZvLnBhY2thZ2VHaWZ0VHlwZSAvLyAx5ZSu5Y2WIDLlhY3otLnpooYKICAgICAgbGV0IGZyZWVSZWNlaXZlVHlwZSA9IHRoaXMuaW5mby5mcmVlUmVjZWl2ZVR5cGUgLy8gMeaJgOacieS6uuWPr+mihuWPliAy5LuF6ZmQ5paw55So5oi3IDPku4XpmZDkvJrlkZggNOS7hemZkOmdnuS8muWRmAogICAgICBsZXQgcmVzdHJpY3RTdGF0ZSA9IHRoaXMuaW5mby5yZXN0cmljdFN0YXRlCiAgICAgIGxldCBjaGFubmVsVHJhY2sgPSB0aGlzLmluZm8uY2hhbm5lbFRyYWNrIC8vIOmAmui/h+i/meS4quWtl+aute+8jOWIpOaWreeUqHBhY2thZ2VHaWZ0VHlwZei/mOaYr3Jlc3RyaWN0U3RhdGXlrZfmrrUKICAgICAgdmFyIGp1bXBTYXRlID0gZmFsc2UgLy8g55So5p2l5Yik5pat5piv5ZCm5o+Q56S65LuF6ZmQ5p+Q55So5oi36aKG5Y+WCiAgICAgIGlmIChmcmVlUmVjZWl2ZVR5cGUgPT0gMSkgewogICAgICAgIC8vIOaJgOacieS6uuWPr+mihuWPlgogICAgICAgIGp1bXBTYXRlID0gdHJ1ZQogICAgICB9IGVsc2UgaWYgKGZyZWVSZWNlaXZlVHlwZSA9PSAyICYmIGlzbmV3VXNlcikgewogICAgICAgIC8vIOWIpOaWreeUqOaIt+aYr+WQpuS4uuaWsOeUqOaItwogICAgICAgIGp1bXBTYXRlID0gdHJ1ZQogICAgICB9IGVsc2UgaWYgKGZyZWVSZWNlaXZlVHlwZSA9PSAzICYmIHZpcFVzZXIpIHsKICAgICAgICAvLyDliKTmlq3mmK/lkKbku4XkvJrlkZjpooblj5YKICAgICAgICBqdW1wU2F0ZSA9IHRydWUKICAgICAgfSBlbHNlIGlmIChmcmVlUmVjZWl2ZVR5cGUgPT0gNCAmJiAhdmlwVXNlcikgewogICAgICAgIC8vIOWIpOaWreaYr+WQpuS7hemdnuS8muWRmOmihuWPlgogICAgICAgIGp1bXBTYXRlID0gdHJ1ZQogICAgICB9CgogICAgICAvLyDlpoLmnpzmmK/lvIDpgJrlubbpooblj5YKICAgICAgaWYgKHRoaXMub3Blbl9yZWNlaXZlKSB7CiAgICAgICAgdGhpcy4kc2V0KHRoaXMuaW5mbywgJ3NlbGxQcmljZScsIDApCiAgICAgICAgdGhpcy4kc2V0KHRoaXMuaW5mbywgJ25vVmlwUHJpY2UnLCAwKQogICAgICB9CgogICAgICB0aGlzLiRzYXZlLnNldCgnc2Vzc2lvbicsICdvcmRlckluZm8nLCB0aGlzLmluZm8pCiAgICAgIGlmICh0aGlzLmhhc0V4Y2hhbmdlICE9ICcnKSB7CiAgICAgICAgLy8g5Yik5pat5YWR5aWW5Lit5b+D6L+b5YWlIOeri+WNs+WFkeaNogogICAgICAgIGxldCBjb25kaXRpb25JbmZvID0gdGhpcy5jb25kaXRpb25JbmZvCiAgICAgICAgbGV0IHRyYWN2ZWxVc2VyTGlzdCA9IHRoaXMudHJhY3ZlbFVzZXJMaXN0CiAgICAgICAgaWYgKGNvbmRpdGlvbkluZm8uaXNDb25kaXRpb24gJiYgdHJhY3ZlbFVzZXJMaXN0Lmxlbmd0aCA9PSAwKSB7CiAgICAgICAgICAvLyDliKTmlq3mmK/lkKbpnIDmsYLloavlhpnkv6Hmga8KICAgICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHsKICAgICAgICAgICAgbmFtZTogJ3RyYXZlbEluZm9ybWF0aW9uJywKICAgICAgICAgICAgcXVlcnk6IHsKICAgICAgICAgICAgICBhY3RTbjogdGhpcy5vcHRpb25zLmFjdFNuCiAgICAgICAgICAgIH0KICAgICAgICAgIH0pCiAgICAgICAgICByZXR1cm4KICAgICAgICB9CiAgICAgICAgaWYgKCF0aGlzLmJ0bkRpc2FibGVkKSB0aGlzLmV4Y2hhbmdlKCkKICAgICAgfSBlbHNlIGlmICh0aGlzLmluZm8uY2hpbGRFbnVtS2V5ID09ICdBQ1RfR0lGVF9QQUNLQUdFX1BVUkNIQVNFX0xJTUlUJykgewogICAgICAgIHRoaXMuaGFuZGxlckxpbWl0RXZlbnQoKQogICAgICB9IGVsc2UgaWYgKHRoaXMuaW5mby5hY3RTdGF0ZSA9PSAyKSB7CiAgICAgICAgLy8g5Yik5pat5piv5ZCm5piv5LuO5aSW6YOo5rig6YGT6L+b5YWl77yM5aSW6YOo5rig6YGT6L+b5YWl5pe277yM5aaC5p6c6YWN572u55So5oi35Y+v6LSt5Lmw77yM6Z2e5Lya5ZGY5Lmf5Y+v6LSt5Lmw56S85YyFCiAgICAgICAgbGV0IGJ1eUxpbWl0ID0gdGhpcy5pbmZvLmJ1eUxpbWl0CiAgICAgICAgbGV0IHNlbGxQcmljZSA9IHRoaXMuaW5mby5zZWxsUHJpY2UKICAgICAgICBsZXQgbm9WaXBQcmljZSA9IHRoaXMuaW5mby5ub1ZpcFByaWNlCiAgICAgICAgbGV0IGJ1eVN0YXRlID0gZmFsc2U7CiAgICAgICAgLy8gIOaJgOacieS6uiAgIOS8miAwICAg6Z2eIDAKICAgICAgICBpZiAoYnV5TGltaXQgPT0gMSAmJiBub1ZpcFByaWNlID09IDAgJiYgc2VsbFByaWNlID09IDApewogICAgICAgICAgYnV5U3RhdGUgPSBmYWxzZTsKICAgICAgICAvLyAg5Lya5ZGY6Lqr5Lu9CiAgICAgICAgfSBlbHNlIGlmICh2aXBVc2VyICYmIHNlbGxQcmljZSA+IDApewogICAgICAgICAgYnV5U3RhdGUgPSB0cnVlCiAgICAgICAgfSBlbHNlIGlmICghdmlwVXNlcil7CiAgICAgICAgICBidXlTdGF0ZSA9IGJ1eUxpbWl0ID09IDIgPyB0cnVlIDogbm9WaXBQcmljZSA+IDAgCiAgICAgICAgfQoKICAgICAgICBpZiAoY2hhbm5lbFRyYWNrID8gcGFja2FnZUdpZnRUeXBlID09IDEgOiByZXN0cmljdFN0YXRlID09IDIpIHsKCiAgICAgICAgICBpZihidXlTdGF0ZSl7CiAgICAgICAgICAgIC8vIOi0reS5sOekvOWMhQoKICAgICAgICAgICAgLy8g5aaC5p6c5piv5aSW6YOo5rig6YGT5bm25LiU5piv6aKG5Y+W54q25oCB77yMcmVjZWl2ZVR5cGXkuLo077yM6LSt5Lmw54q25oCBcmVjZWl2ZVR5cGXkuLoyCiAgICAgICAgICAgIGxldCByZWNlaXZlVHlwZSA9IHRoaXMuY2hhbm5lbFR5cGUgPT0gJ0NIQU5ORUxfQUNUSVZJVFlfTEFCRUxfU0hPVycgJiYgdGhpcy5vcGVuX3JlY2VpdmUgPyA0IDogMgogICAgICAgICAgICBpZiAoYnV5TGltaXQgPT0gMiAmJiBzZWxsUHJpY2UgPT0gMCkgewogICAgICAgICAgICAgIHJlY2VpdmVUeXBlID0gMQogICAgICAgICAgICB9CiAgICAgICAgICAgIHRoaXMub3JkZXJVbnBheShyZWNlaXZlVHlwZSkgICAgCiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAvLyDkvb/nlKjlrZfmrrVyZXN0cmljdFN0YXRl5Yik5patCiAgICAgICAgICAgIHRoaXMucmVjZWl2ZUdpZnQoNCkKICAgICAgICAgIH0KCiAgICAgICAgfSBlbHNlIGlmIChjaGFubmVsVHJhY2sgPyBwYWNrYWdlR2lmdFR5cGUgPT0gMiA6IHJlc3RyaWN0U3RhdGUgPT0gMSkgewogICAgICAgICAgLy8g5YWN6LS56aKGCiAgICAgICAgICBpZiAoY2hhbm5lbFRyYWNrKSB7CgogICAgICAgICAgICAvLyDkvb/nlKjlrZfmrrVwYWNrYWdlR2lmdFR5cGXliKTmlq0KICAgICAgICAgICAgaWYgKGZyZWVSZWNlaXZlVHlwZSAhPSAxICYmICFqdW1wU2F0ZSkgewogICAgICAgICAgICAgIHRoaXMuJFRvYXN0KGDku4XpmZAke3RoaXMucmVjZWl2ZU9ialtmcmVlUmVjZWl2ZVR5cGVdfemihuWPlmApCiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgdGhpcy5yZWNlaXZlR2lmdCg0KQogICAgICAgICAgICB9CiAgICAgICAgICB9IGVsc2UgewoKICAgICAgICAgICAgLy8g5L2/55So5a2X5q61cmVzdHJpY3RTdGF0ZeWIpOaWrQogICAgICAgICAgICB0aGlzLnJlY2VpdmVHaWZ0KDQpCiAgICAgICAgICB9CiAgICAgICAgICAKICAgICAgICB9CiAgICAgIH0KICAgIH0sCgogICAgLy8g5YWR5o2iCiAgICBleGNoYW5nZSAoKSB7CiAgICAgIGxldCBpdGVtID0gdGhpcy5leGNoYW5nZV9kYXRhCiAgICAgIHRoaXMuJGRpYWxvZy5jb25maXJtKHsKICAgICAgICB0aXRsZTogYOaYr+WQpuehruiupOWFkeaNoiR7aXRlbS5hY3ROYW1lIHx8ICcnfT9gLAogICAgICAgIG1lc3NhZ2U6J+WFkeaNouWQjuS4jeWPr+abtOaUueS4lOWOn+aciea9ruWNoeWwhuS8mua4heepuicsCiAgICAgIH0pLnRoZW4oKCk9PnsKICAgICAgICB0aGlzLnByaWNlRXhjaGFuZ2UoaXRlbSkKICAgICAgfSkuY2F0Y2goKCkgPT4gewogICAgICAgICAgICAvLyBvbiBjYW5jZWwKICAgICAgfSk7CiAgICB9LAoKICAgIC8vIOW8gOWni+WFkeaNogogICAgcHJpY2VFeGNoYW5nZSAoaXRlbSkgewogICAgICBpZiAodGhpcy5jYW5DbGljaykgcmV0dXJuCiAgICAgIHRoaXMuY2FuQ2xpY2sgPSB0cnVlCiAgICAgIHRoaXMuJGFwaS5wcmljZV9leGNoYW5nZSh7CiAgICAgICAgYWN0U246IGl0ZW0uYWN0U24sCiAgICAgICAgYXdhcmRJZDogaXRlbS5hd2FyZElkLAogICAgICAgIGNpdHlJZDogdGhpcy5sb2NhdGlvbkNpdHkuY2l0eUlkLAogICAgICAgIGNob29zZURhdGU6IHRoaXMuc2VsRGF0ZS5zdGFydFRpbWUgPyB1dGlscy5mb3JtYXRUaW1lKHRoaXMuc2VsRGF0ZS5zdGFydFRpbWUgfHwgMCwgJ1lZWVlNTUREJykgOiAwLCAvLyDoh6rmiJHmuLjpgInmi6nml7bpl7QKICAgICAgICB0cmFjdmVsVXNlckxpc3Q6IEpTT04uc3RyaW5naWZ5KHRoaXMudHJhY3ZlbFVzZXJMaXN0KQogICAgICB9KS50aGVuKHJlcyA9PiB7CiAgICAgICAgaWYgKHJlcy5zdGF0ZSkgewogICAgICAgICAgdGhpcy5tYXNrID0gdHJ1ZQogICAgICAgICAgdGhpcy5oYW5kbGVyQnRuKCflt7LlhZHmjaInLCB0cnVlKQogICAgICAgICAgLy8g5riF6Zmk55So5oi35aGr5YaZ5L+h5oGvCiAgICAgICAgICB0aGlzLiRzYXZlLnJlbW92ZSgnc2Vzc2lvbicsICd0cmF2ZWxJbmZvcm1hdGlvbicpCiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHRoaXMuJFRvYXN0KHJlcy5tZXNzYWdlKQogICAgICAgIH0KICAgICAgfSkuZmluYWxseSgoKT0+ewogICAgICAgIHNldFRpbWVvdXQoKCk9PnsKICAgICAgICAgIHRoaXMuY2FuQ2xpY2sgPSBmYWxzZQogICAgICAgIH0sIDMwMCkKICAgICAgfSkKICAgIH0sCgogICAgZ29DYXJkKCkgewogICAgICB0aGlzLiRyb3V0ZXIucHVzaCh7CiAgICAgICAgbmFtZTogJ2NvdXBvbkxpc3QnCiAgICAgIH0pCiAgICB9LAoKICAgIGNsb3NlKCkgewogICAgICB0aGlzLm1hc2sgPSBmYWxzZQogICAgfSwKCiAgICAvLyDojrflj5bkvJrlkZjljaHmnIDkvY7ku7fmoLwKICAgIHZpcFByaWNlKCkgewogICAgICB0aGlzLiRhcGkubG93X3ByaWNlKHt9KS50aGVuKHJlcyA9PiB7CiAgICAgICAgaWYgKHJlcy5zdGF0ZSkgewogICAgICAgICAgdGhpcy5sb3dQcmljZSA9IHJlcy5pbmZvLmxvd1ByaWNlCiAgICAgICAgfQogICAgICB9KQogICAgfSwKICAgIAogICAgc2hvd09yZGVyVGlwKCkgewogICAgICB0aGlzLiRkaWFsb2cuYWxlcnQoewogICAgICAgIHRpdGxlOiAn5o+Q56S6JywKICAgICAgICBtZXNzYWdlOiAn6K6i5Y2V6LaF5pe25bey5Y+W5raI77yM6K+36YeN5paw5LiL5Y2VJywKICAgICAgICBjb25maXJtQnV0dG9uVGV4dDogJ+ehruWumicsCiAgICAgICAgY29uZmlybUJ1dHRvbkNvbG9yOiAnI0Q5MDYzNCcKICAgICAgfSkKICAgIH0sCiAgICAKICAgIHRvSm9pbigpIHsKICAgICAgdGhpcy4kcm91dGVyLnB1c2goewogICAgICAgIG5hbWU6J2pvaW5WaXAnLAogICAgICAgIHF1ZXJ5OiB7CiAgICAgICAgICBjaGFubmVsVHlwZTogdGhpcy5jaGFubmVsVHlwZQogICAgICAgIH0KICAgICAgfSkKICAgIH0sCgogICAgLy8g5YWz6Zet57qi5YyF5YiX6KGoCiAgICBjb2xzZWNhc2hNYXNrKCkgewogICAgICB0aGlzLmNhc2hNYXNrID0gIXRoaXMuY2FzaE1hc2sKICAgIH0sCgogICAgLy8g6I635Y+W5rS75Yqo57qi5YyF5b2T5YmN5Lqr55So5pyA5aSn57qi5YyFCiAgICBnZXRDYXNoTnVtKCkgewogICAgICBsZXQgdmlwX2NoZWNrID0gKCF0aGlzLnZpcFVzZXIgJiYgdGhpcy5pbmZvLmJ1eUxpbWl0ID09IDIpID8gdHJ1ZSA6IGZhbHNlCiAgICAgIGxldCBwcmljZSA9ICh0aGlzLmluZm8uYnV5TGltaXQgPT0gMiB8fCB0aGlzLnZpcFVzZXIpID8gdGhpcy5pbmZvLnNlbGxQcmljZSA6IHRoaXMuaW5mby5ub1ZpcFByaWNlCiAgICAgIHRoaXMuJGFwaS5jYXNoX3JlZF9saXN0KHsKICAgICAgICBhY3RTbjogdGhpcy5hY3RTbiwKICAgICAgICBjaXR5SWQ6IHRoaXMubG9jYXRpb25DaXR5LmNpdHlJZCwKICAgICAgICBvcGVuVmlwOiB2aXBfY2hlY2ssIC8vIOaYr+WQpuWLvumAieS8muWRmOWNoQogICAgICAgIHZpcEZlZTogdmlwX2NoZWNrID8gdGhpcy5sb3dQcmljZSA6IDAsIC8vIOS8muWRmOWNoemHkeminQogICAgICAgIGFjdEZlZTogcHJpY2UsIC8vIOa0u+WKqOmHkeminQogICAgICAgIGNhcmRJZDogIiIsIC8vIOeJueWNluWNoeWIuGlkIHx8IOekvOWMheS8oOepugogICAgICB9KS50aGVuKHJlcyA9PiB7CiAgICAgICAgaWYgKHJlcy5zdGF0ZSkgewogICAgICAgICAgbGV0IHJlZExpc3QgPSByZXMuaW5mby5jYXNoUmVkTGlzdCB8fCBbXQogICAgICAgICAgbGV0IGNvbnN1bWVyQ291cG9uTGlzdCA9IHJlcy5pbmZvLmNvbnN1bWVyQ291cG9uTGlzdCB8fCBbXQogICAgICAgICAgbGV0IHVzYWJsZUxpc3QgPSByZWRMaXN0LmZpbHRlcigoaXRlbSkgPT4gaXRlbS5jdXJyZW50QWJsZVVzZSkgLy8g6L+H5ruk5Y+v55So57qi5YyFCiAgICAgICAgICBsZXQgc29ydFVzYWJsZUxpc3QgPSB1c2FibGVMaXN0LnNvcnQoZnVuY3Rpb24oYSwgYikgeyAvLyDpmY3luo/mjpLluo8KICAgICAgICAgICAgcmV0dXJuIGIubW9uZXkgLSBhLm1vbmV5CiAgICAgICAgICB9KQogICAgICAgICAgdGhpcy5zZWxDYXNocmVkID0gc29ydFVzYWJsZUxpc3RbMF0gfHwge30gLy8g6YCJ5Lit5pyA5aSn57qi5YyFCiAgICAgICAgICBpZiAoY29uc3VtZXJDb3Vwb25MaXN0Lmxlbmd0aCkgewogICAgICAgICAgICB0aGlzLnNlbENvbnN1bWVyID0gY29uc3VtZXJDb3Vwb25MaXN0WzBdIHx8IHt9IC8vIOmAieS4rea2iOi0ueWIuAogICAgICAgICAgfSAgCiAgICAgICAgfQogICAgICB9KS5maW5hbGx5KCgpPT4gewogICAgICB9KQogICAgfSwKCiAgICBoYXNDYWNoUmVkTGlzdCAoeyBkZXRhaWwgfSkgewogICAgICBpZiAoZGV0YWlsICYmIGRldGFpbC5sZW5ndGggPiAwKSB7CiAgICAgICAgLy8g6YeN5paw6K+35rGC57qi5YyF5o6l5Y+jCiAgICAgICAgdGhpcy5zZWxlY3RDb21wb25lbnQoJyNhY3RpdmVDYXNoJykuZ2V0Q2FzaExpc3QoKQogICAgICAgIHRoaXMuZ2V0Q2FzaE51bSgpCiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5zaG93UGFnZU1vZGVsID0gdHJ1ZQogICAgICB9CiAgICB9LAogICAgLyoqCiAgICAgKiDpooblj5bmiJbogIXmiqLotK3npLzljIUKICAgICAgICByZXN0cmljdFN0YXRlICDmmK/lkKblj6/otK3kubDvvJox5ZCmIDLmmK8KICAgICAgICByZWNlaXZlVHlwZTog5aSW6YOo5rig6YGTewogICAgICAgICAg6LSt5Lmw77yaIDMKICAgICAgICAgIOWFjei0uemihjogIDEKICAgICAgICB9CiAgICAqLwogICAgZ2V0R2lmdCgpIHsKICAgICAgdmFyIHZpcFVzZXIgPXRoaXMudmlwQ2FyZEluZm8udmlwVXNlcgogICAgICB2YXIgaXNuZXdVc2VyID0gdGhpcy5yZWFsSW5mby5uZXdVc2VyCiAgICAgIGxldCBwYWNrYWdlR2lmdFR5cGUgPSB0aGlzLmluZm8ucGFja2FnZUdpZnRUeXBlIC8vIDHllK7ljZYgMuWFjei0uemihgogICAgICBsZXQgZnJlZVJlY2VpdmVUeXBlID0gdGhpcy5pbmZvLmZyZWVSZWNlaXZlVHlwZSAvLyAx5omA5pyJ5Lq65Y+v6aKG5Y+WIDLku4XpmZDmlrDnlKjmiLcgM+S7hemZkOS8muWRmCA05LuF6ZmQ6Z2e5Lya5ZGYCiAgICAgIGxldCByZXN0cmljdFN0YXRlID0gdGhpcy5pbmZvLnJlc3RyaWN0U3RhdGUKICAgICAgbGV0IGNoYW5uZWxUcmFjayA9IHRoaXMuaW5mby5jaGFubmVsVHJhY2sgLy8g6YCa6L+H6L+Z5Liq5a2X5q6177yM5Yik5pat55SocGFja2FnZUdpZnRUeXBl6L+Y5pivcmVzdHJpY3RTdGF0ZeWtl+autQogICAgICB2YXIganVtcFNhdGUgPSBmYWxzZSAvLyDnlKjmnaXliKTmlq3mmK/lkKbmj5DnpLrku4XpmZDmn5DnlKjmiLfpooblj5YKICAgICAgaWYgKGZyZWVSZWNlaXZlVHlwZSA9PSAxKSB7CiAgICAgICAgLy8g5omA5pyJ5Lq65Y+v6aKG5Y+WCiAgICAgICAganVtcFNhdGUgPSB0cnVlCiAgICAgIH0gZWxzZSBpZiAoZnJlZVJlY2VpdmVUeXBlID09IDIgJiYgaXNuZXdVc2VyKSB7CiAgICAgICAgLy8g5Yik5pat55So5oi35piv5ZCm5Li65paw55So5oi3CiAgICAgICAganVtcFNhdGUgPSB0cnVlCiAgICAgIH0gZWxzZSBpZiAoZnJlZVJlY2VpdmVUeXBlID09IDMgJiYgdmlwVXNlcikgewogICAgICAgIC8vIOWIpOaWreaYr+WQpuS7heS8muWRmOmihuWPlgogICAgICAgIGp1bXBTYXRlID0gdHJ1ZQogICAgICB9IGVsc2UgaWYgKGZyZWVSZWNlaXZlVHlwZSA9PSA0ICYmICF2aXBVc2VyKSB7CiAgICAgICAgLy8g5Yik5pat5piv5ZCm5LuF6Z2e5Lya5ZGY6aKG5Y+WCiAgICAgICAganVtcFNhdGUgPSB0cnVlCiAgICAgIH0KCiAgICAgIC8vIOWmguaenOaYr+W8gOmAmuW5tumihuWPlgogICAgICBpZiAodGhpcy5vcGVuX3JlY2VpdmUpIHsKICAgICAgICB0aGlzLiRzZXQodGhpcy5pbmZvLCAnc2VsbFByaWNlJywgMCkKICAgICAgICB0aGlzLiRzZXQodGhpcy5pbmZvLCAnbm9WaXBQcmljZScsIDApCiAgICAgIH0KCiAgICAgIHRoaXMuJHNhdmUuc2V0KCdzZXNzaW9uJywgJ29yZGVySW5mbycsIHRoaXMuaW5mbykKICAgICAgaWYgKHRoaXMuaGFzRXhjaGFuZ2UgIT0gJycpIHsKICAgICAgICAvLyDliKTmlq3lhZHlpZbkuK3lv4Pov5vlhaUg56uL5Y2z5YWR5o2iCiAgICAgICAgbGV0IGNvbmRpdGlvbkluZm8gPSB0aGlzLmNvbmRpdGlvbkluZm8KICAgICAgICBsZXQgdHJhY3ZlbFVzZXJMaXN0ID0gdGhpcy50cmFjdmVsVXNlckxpc3QKICAgICAgICBpZiAoY29uZGl0aW9uSW5mby5pc0NvbmRpdGlvbiAmJiB0cmFjdmVsVXNlckxpc3QubGVuZ3RoID09IDApIHsKICAgICAgICAgIC8vIOWIpOaWreaYr+WQpumcgOaxguWhq+WGmeS/oeaBrwogICAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goewogICAgICAgICAgICBuYW1lOiAndHJhdmVsSW5mb3JtYXRpb24nLAogICAgICAgICAgICBxdWVyeTogewogICAgICAgICAgICAgIGFjdFNuOiB0aGlzLm9wdGlvbnMuYWN0U24KICAgICAgICAgICAgfQogICAgICAgICAgfSkKICAgICAgICAgIHJldHVybgogICAgICAgIH0KICAgICAgICBpZiAoIXRoaXMuYnRuRGlzYWJsZWQpIHRoaXMuZXhjaGFuZ2UoKQogICAgICB9IGVsc2UgaWYgKHRoaXMuaW5mby5jaGlsZEVudW1LZXkgPT0gJ0FDVF9HSUZUX1BBQ0tBR0VfUFVSQ0hBU0VfTElNSVQnKSB7CiAgICAgICAgdGhpcy5oYW5kbGVyTGltaXRFdmVudCgpCiAgICAgIH0gZWxzZSBpZiAodGhpcy5pbmZvLmFjdFN0YXRlID09IDIpIHsKICAgICAgICAvLyDliKTmlq3mmK/lkKbmmK/ku47lpJbpg6jmuKDpgZPov5vlhaXvvIzlpJbpg6jmuKDpgZPov5vlhaXml7bvvIzlpoLmnpzphY3nva7nlKjmiLflj6/otK3kubDvvIzpnZ7kvJrlkZjkuZ/lj6/otK3kubDnpLzljIUKICAgICAgICBsZXQgYnV5TGltaXQgPSB0aGlzLmluZm8uYnV5TGltaXQKICAgICAgICBsZXQgc2VsbFByaWNlID0gdGhpcy5pbmZvLnNlbGxQcmljZQogICAgICAgIGxldCBub1ZpcFByaWNlID0gdGhpcy5pbmZvLm5vVmlwUHJpY2UKICAgICAgICBsZXQgYnV5U3RhdGUgPSBmYWxzZTsKICAgICAgICAvLyAg5omA5pyJ5Lq6ICAg5LyaIDAgICDpnZ4gMAogICAgICAgIGlmIChidXlMaW1pdCA9PSAxICYmIG5vVmlwUHJpY2UgPT0gMCAmJiBzZWxsUHJpY2UgPT0gMCl7CiAgICAgICAgICBidXlTdGF0ZSA9IGZhbHNlOwogICAgICAgIC8vICDkvJrlkZjouqvku70KICAgICAgICB9IGVsc2UgaWYgKHZpcFVzZXIgJiYgc2VsbFByaWNlID4gMCl7CiAgICAgICAgICBidXlTdGF0ZSA9IHRydWUKICAgICAgICB9IGVsc2UgaWYgKCF2aXBVc2VyKXsKICAgICAgICAgIGJ1eVN0YXRlID0gYnV5TGltaXQgPT0gMiA/IHRydWUgOiBub1ZpcFByaWNlID4gMCAKICAgICAgICB9CiAgICAgICAgaWYgKGNoYW5uZWxUcmFjayA/IHBhY2thZ2VHaWZ0VHlwZSA9PSAxIDogcmVzdHJpY3RTdGF0ZSA9PSAyKSB7CiAgICAgICAgICBpZihidXlTdGF0ZSl7CiAgICAgICAgICAgIC8vIOi0reS5sOekvOWMhQogICAgICAgICAgICAvLyDlpoLmnpzmmK/lpJbpg6jmuKDpgZPlubbkuJTmmK/pooblj5bnirbmgIHvvIxyZWNlaXZlVHlwZeS4ujTvvIzotK3kubDnirbmgIFyZWNlaXZlVHlwZeS4ujIKICAgICAgICAgICAgbGV0IHJlY2VpdmVUeXBlID0gdGhpcy5jaGFubmVsVHlwZSA9PSAnQ0hBTk5FTF9BQ1RJVklUWV9MQUJFTF9TSE9XJyAmJiB0aGlzLm9wZW5fcmVjZWl2ZSA/IDQgOiAyCiAgICAgICAgICAgIGlmIChidXlMaW1pdCA9PSAyICYmIHNlbGxQcmljZSA9PSAwKSB7CiAgICAgICAgICAgICAgcmVjZWl2ZVR5cGUgPSAxCiAgICAgICAgICAgIH0KICAgICAgICAgICAgdGhpcy5vcmRlclVucGF5KHJlY2VpdmVUeXBlKSAgICAKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIC8vIOS9v+eUqOWtl+autXJlc3RyaWN0U3RhdGXliKTmlq0KICAgICAgICAgICAgdGhpcy5yZWNlaXZlR2lmdCg0KQogICAgICAgICAgfQogICAgICAgIH0gZWxzZSBpZiAoY2hhbm5lbFRyYWNrID8gcGFja2FnZUdpZnRUeXBlID09IDIgOiByZXN0cmljdFN0YXRlID09IDEpIHsKICAgICAgICAgIC8vIOWFjei0uemihgogICAgICAgICAgaWYgKGNoYW5uZWxUcmFjaykgewogICAgICAgICAgICAvLyDkvb/nlKjlrZfmrrVwYWNrYWdlR2lmdFR5cGXliKTmlq0KICAgICAgICAgICAgaWYgKGZyZWVSZWNlaXZlVHlwZSAhPSAxICYmICFqdW1wU2F0ZSkgewogICAgICAgICAgICAgIHRoaXMuJFRvYXN0KGDku4XpmZAke3RoaXMucmVjZWl2ZU9ialtmcmVlUmVjZWl2ZVR5cGVdfemihuWPlmApCiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgdGhpcy5yZWNlaXZlR2lmdCg0KQogICAgICAgICAgICB9CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAvLyDkvb/nlKjlrZfmrrVyZXN0cmljdFN0YXRl5Yik5patCiAgICAgICAgICAgIHRoaXMucmVjZWl2ZUdpZnQoNCkKICAgICAgICAgIH0KICAgICAgICAgIAogICAgICAgIH0KICAgICAgfQogICAgfSwKICB9LAogIGFzeW5jIGNyZWF0ZWQoKSB7CiAgICB0aGlzLm9wdGlvbnMgPSB0aGlzLiRyb3V0ZS5xdWVyeQogICAgdGhpcy5hY3RTbiA9ICB0aGlzLm9wdGlvbnMuYWN0U24KICAgIHRoaXMucXJDb2RlID0gIHRoaXMub3B0aW9ucy5xckNvZGUgfHwgJycKICAgIHRoaXMuY2hhbm5lbFR5cGUgPSAgdGhpcy5vcHRpb25zLmNoYW5uZWxUeXBlIHx8ICcnCiAgICB0aGlzLmNvbXBJZCA9ICB0aGlzLm9wdGlvbnMuY29tcElkIHx8ICcnCiAgICB0aGlzLmhhc0V4Y2hhbmdlID0gIHRoaXMub3B0aW9ucy5oYXNFeGNoYW5nZSB8fCAnJwogICAgYXdhaXQgdGhpcy5nZXRSZWFsVGltZUluZm8oKQogICAgaWYgKHRoaXMub3B0aW9ucy5wb3B1cCkgewogICAgICB0aGlzLnNob3dPcmRlclRpcCgpCiAgICB9CiAgICBpZiAodGhpcy5oYXNFeGNoYW5nZSAhPSAiIikgeyAvLyDliKTmlq3kuLrlhZHmjaLkuK3lv4Pov5vlhaUKICAgICAgdGhpcy5leGNoYW5nZV9kYXRhID0gdGhpcy4kc2F2ZS5nZXQoJ3Nlc3Npb24nLCAnZXhjaGFuZ2VfZGF0YScpLy8g5YWR5o2i5Lit5b+D5rS75Yqo5pWw5o2uCiAgICB9CiAgICB0aGlzLmdldFJlY2VpdmVDb25kaXRpb24oKSAvLyDmmK/lkKbpnIDopoHloavlhpnnlKjmiLfkv6Hmga/lj4rlhbbmnaHku7YKICAgIHRoaXMudmlwUHJpY2UoKQogICAgYXdhaXQgdGhpcy5nZXRHaWZ0SW5mbygpCiAgICBhd2FpdCB0aGlzLmdldEFjdERldGFpbCh0cnVlKQogIH0KfQo="},null]}