{"remainingRequest":"C:\\Users\\Administrator\\Desktop\\vip_inline_h5\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Administrator\\Desktop\\vip_inline_h5\\src\\views\\active\\giftBagSuccess.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\Administrator\\Desktop\\vip_inline_h5\\src\\views\\active\\giftBagSuccess.vue","mtime":1596624611499},{"path":"C:\\Users\\Administrator\\Desktop\\vip_inline_h5\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Administrator\\Desktop\\vip_inline_h5\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\Administrator\\Desktop\\vip_inline_h5\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Administrator\\Desktop\\vip_inline_h5\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgY2FyZENvZGVEZXRhaWwgZnJvbSAnQC9jb21wb25lbnRzL2NlbnRlci9jYXJkQ29kZURldGFpbCcNCmV4cG9ydCBkZWZhdWx0IHsNCiAgZGF0YSgpIHsNCiAgICByZXR1cm4gew0KICAgICAgc2hvd01hc2s6IGZhbHNlLA0KICAgICAgc2hvd1BvcDogZmFsc2UsDQogICAgICBjYXJkTnVtOiAwLA0KICAgICAgbWFzazogZmFsc2UsDQogICAgICBpc091dENhcmQ6JycsDQogICAgICBzaG93TW9kZWw6IGZhbHNlLA0KICAgICAgaW5mbzoge30sDQogICAgICBvcHRpb25zOiB7fQ0KICAgIH0NCiAgfSwNCiAgY29tcG9uZW50czogew0KICAgIGNhcmRDb2RlRGV0YWlsDQogIH0sDQogIG1ldGhvZHM6IHsNCiAgICBnZXRJbmZvKHRyYWRlSWQpIHsNCiAgICAgIHRoaXMuJFRvYXN0LmxvYWRpbmcoew0KICAgICAgICBtZXNzYWdlOiAn5Yqg6L295LitLi4uJywNCiAgICAgICAgZm9yYmlkQ2xpY2s6IHRydWUsDQogICAgICAgIGR1cmF0aW9uOiAwDQogICAgICB9KQ0KICAgICAgdGhpcy4kYXBpLmdpZnRfc3VjY2Vzcyh7DQogICAgICAgIHRyYWRlSWQNCiAgICAgIH0pLnRoZW4ocmVzID0+IHsNCiAgICAgICAgaWYgKHJlcy5zdGF0ZSkgew0KICAgICAgICAgIHRoaXMuaW5mbyA9IHJlcy5pbmZvDQogICAgICAgICAgdGhpcy5zZXRDYXJkTnVtKCkNCiAgICAgICAgICBpZiAocmVzLmluZm8uaGFzVmlwQ2FyZCB8fCB0aGlzLnZpcF9jaGVjaykgeyAvLyDmnInkvJrlkZjljaHnmoTmg4XlhrXkuIvmm7TmlrDkvJrlkZjkv6Hmga8NCiAgICAgICAgICAgIC8vIGFwcC5nZXRWaXBDYXJkSW5mbygpDQogICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICAgIH0pLmZpbmFsbHkoKCkgPT4gew0KICAgICAgICAgIHRoaXMuJFRvYXN0LmNsZWFyKCkNCiAgICAgICAgfSkNCiAgICB9LA0KDQogICAgY2xvc2VNb2RhbCgpIHsNCiAgICAgIHRoaXMuc2hvd01hc2sgPSBmYWxzZQ0KICAgIH0sDQoNCiAgICAvLyDorqHnrpfljaHliLjmlbDph48NCiAgICBzZXRDYXJkTnVtICgpIHsNCiAgICAgIGxldCBjYXJkTGlzdCA9IHRoaXMuaW5mby5jYXJkTGlzdCwgY2FyZE51bSA9IDA7DQogICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGNhcmRMaXN0Lmxlbmd0aDsgaSsrKSB7DQogICAgICAgIGNhcmROdW0gKz0gTnVtYmVyKGNhcmRMaXN0W2ldLmNhcmROdW0pDQogICAgICB9DQogICAgICB0aGlzLmNhcmROdW0gPSBjYXJkTnVtDQogICAgfSwNCg0KICAgIC8vIOi3s+i9rOWNoeWIuOivpuaDhQ0KICAgIGNhcmREZXRhaWwgKGl0ZW0pIHsNCiAgICAgIGxldCB7IGNhcmRJZCwgZGV0YWlsSWQsIGNhcmRTdGFydFRpbWUsIGNhcmRFbmRUaW1lIH0gPSBpdGVtDQogICAgICAvLyDliKTmlq3miJHnmoTlvZPliY3kvJjmg6DliLjmmK/lkKblj6/nlKgNCiAgICAgIHRoaXMuJGFwaS5teV9jb3Vwb25fdXNlX2FibGUoew0KICAgICAgICBjYXJkSWQsDQogICAgICAgIGRldGFpbElkDQogICAgICB9KS50aGVuKChyZXMpID0+IHsNCiAgICAgICAgaWYgKHJlcy5zdGF0ZSkgew0KICAgICAgICAgIGlmIChyZXMuaW5mby51c2VBYmxlKSB7DQogICAgICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCh7cGF0aDogJy9jb3Vwb24vY291cG9uRGV0YWlsJywgcXVlcnk6IHsgY2FyZElkLCBkZXRhaWxJZCwgY2FyZEVuZFRpbWUsIGNhcmRTdGFydFRpbWUsIHR5cGU6IDEgfX0pDQogICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHtwYXRoOiAnL2NvdXBvbi9jb3Vwb25EZXRhaWwnLCBxdWVyeTogeyBjYXJkSWQsIGRldGFpbElkLCBjYXJkRW5kVGltZSwgY2FyZFN0YXJ0VGltZSwgdHlwZTo0IH19KQ0KICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgfSkNCiAgICB9LA0KDQogICAgLy8g5pi+56S65Y2h5Yi45by556qXDQogICAgYXN5bmMgc2hvd1FyKGl0ZW0pIHsNCiAgICAgIGxldCBvcHRpb25zID0gew0KICAgICAgICBjYXJkSWQ6IGl0ZW0uY2FyZElkLA0KICAgICAgICBkZXRhaWxJZDogaXRlbS5kZXRhaWxJZCwNCiAgICAgICAgdHJhZGVJZDogdGhpcy5vcHRpb25zLnRyYWRlSWQsDQogICAgICAgIGFwaVVybDogJ2NhcmRfcXJjb2RlJw0KICAgICAgfQ0KICAgICAgdGhpcy5vcHRpb25zID0gb3B0aW9ucw0KICAgICAgdGhpcy5zaG93TWFzayA9IHRydWUNCiAgICB9LA0KDQogICAgc2V0SW5mbyAoZSkgew0KICAgICAgDQogICAgfSwNCg0KICAgIGxvb2tDb3Vwb24oKSB7DQogICAgICB0aGlzLiRyb3V0ZXIucHVzaCgnL2NvdXBvbi9jb3Vwb25MaXN0JykNCiAgICB9DQogIH0sDQogIGNyZWF0ZWQoKSB7DQogICAgbGV0IG9wdGlvbnMgPSB0aGlzLiRyb3V0ZS5xdWVyeQ0KICAgIG9wdGlvbnMudmlwVXNlciA9IG9wdGlvbnMudmlwVXNlciB8fCAnJywNCiAgICBvcHRpb25zLnZpcF9jaGVjayA9IE51bWJlcihvcHRpb25zLnZpcF9jaGVjaykNCiAgICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zDQogICAgdGhpcy5nZXRJbmZvKG9wdGlvbnMudHJhZGVJZCkNCiAgfQ0KfQ0K"},{"version":3,"sources":["giftBagSuccess.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAkEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"giftBagSuccess.vue","sourceRoot":"src/views/active","sourcesContent":["<!--\r\n * @Description: \r\n * @Version: 1.0\r\n * @Autor: yesong\r\n * @Date: 2020-08-01 15:25:51\r\n * @LastEditors: yesong\r\n * @LastEditTime: 2020-08-04 20:45:50\r\n--> \r\n<template>\r\n  <div>\r\n    <div>\r\n      <div class=\"tac header\">\r\n        <div class='c8C4 ft48 bold'>{{options.receive == 1 ? '领取成功' : '购买成功'}}</div>\r\n        <div class='c8C4 ft28' style=\"margin-top: 12px\">\r\n          <template v-if=\"cardNum > 1\">\r\n            本次购买的<text class=\"cD9\">{{ cardNum }}</text>张代金券\r\n          </template>\r\n          <template wx:else>\r\n            本次购买的代金券\r\n          </template>\r\n        </div>\r\n      </div>\r\n\r\n      <div class='list plr30'>\r\n        <div class=\"vip-box flex-v ft26 c1A\" v-if=\"options.vip_check\">\r\n          <img class=\"icon\" src=\"http://doyd.oss-cn-shenzhen.aliyuncs.com/vip_mini_apply/vip_small_card.png\" />\r\n          恭喜你成为潮级VIP，买单可享返现\r\n        </div>\r\n        <!-- 列表 -->\r\n        <div class=\"list-item por\" \r\n          v-for=\"(item, index) in info.cardList\"\r\n          :key=\"index\"\r\n          @click=\"showQr(item)\"\r\n        >\r\n          <div class=\"card-info flex-v\">\r\n            <img class=\"shop-img\" :src=\"item.shopPic\" mode=\"aspectFill\" />\r\n            <div class=\"flex-1\">\r\n              <div class=\"ft24 c66\">{{ item.shopName }}</div>\r\n              <div class=\"ft28 c1A card-name bold\">{{ item.cardName }}</div>\r\n              <div class=\"ft24 c66\" v-if=\"info.createType != 2\">{{ item.usePeriod ? item.limitTimeInterval : '营业时间可用' }} | {{ item.useCondition == 1 ? '无门槛使用' : item.useCondition == 2 ? '每满'+item.limitFunds/100+'元可用1张' : '消费任意金额可用' }} | {{ item.stackable ? '单次可用'+item.limitStackable+'张' : '不限使用张数' }}</div>\r\n            </div>\r\n          </div>\r\n          <div class=\"bottom por flex-v\">\r\n            <div class=\"c1A bold ft24\" v-if=\"item.cardCode\">券码:{{ (item.cardCode || '000000000000') | cardReplace }}</div>\r\n            <text class=\"c9E ft24\" v-if=\"item.cardNum > 1\">({{ item.cardNum }}张)</text>\r\n            <button @click.stop=\"cardDetail(item)\">去使用</button>\r\n          </div>\r\n          <div class=\"num\" v-if=\"item.cardNum > 1\">含{{ item.cardNum }}张券</div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- 查看卡券二维码弹窗 -->\r\n    <div class='mask flex-col flex-c flex-v' v-if=\"showMask\">\r\n      <div class='qr-box'>\r\n        <card-code-detail @setInfo=\"setInfo\" :options=\"options\"></card-code-detail>\r\n      </div>\r\n      <img src='@/assets/imgs/close_icon2.png' class='close-icon' @click=\"closeModal\" />\r\n    </div>\r\n\r\n    <div class='footer pof flex-c flex-v ft36'>\r\n      <button formType=\"submit\" class=\"buy-btn buy-btn-not cff tac bold flex-1\" @click=\"lookCoupon\">查看卡券</button>\r\n    </div>\r\n  </div>\r\n</template>\r\n<script>\r\nimport cardCodeDetail from '@/components/center/cardCodeDetail'\r\nexport default {\r\n  data() {\r\n    return {\r\n      showMask: false,\r\n      showPop: false,\r\n      cardNum: 0,\r\n      mask: false,\r\n      isOutCard:'',\r\n      showModel: false,\r\n      info: {},\r\n      options: {}\r\n    }\r\n  },\r\n  components: {\r\n    cardCodeDetail\r\n  },\r\n  methods: {\r\n    getInfo(tradeId) {\r\n      this.$Toast.loading({\r\n        message: '加载中...',\r\n        forbidClick: true,\r\n        duration: 0\r\n      })\r\n      this.$api.gift_success({\r\n        tradeId\r\n      }).then(res => {\r\n        if (res.state) {\r\n          this.info = res.info\r\n          this.setCardNum()\r\n          if (res.info.hasVipCard || this.vip_check) { // 有会员卡的情况下更新会员信息\r\n            // app.getVipCardInfo()\r\n          }\r\n        }\r\n        }).finally(() => {\r\n          this.$Toast.clear()\r\n        })\r\n    },\r\n\r\n    closeModal() {\r\n      this.showMask = false\r\n    },\r\n\r\n    // 计算卡券数量\r\n    setCardNum () {\r\n      let cardList = this.info.cardList, cardNum = 0;\r\n      for (let i = 0; i < cardList.length; i++) {\r\n        cardNum += Number(cardList[i].cardNum)\r\n      }\r\n      this.cardNum = cardNum\r\n    },\r\n\r\n    // 跳转卡券详情\r\n    cardDetail (item) {\r\n      let { cardId, detailId, cardStartTime, cardEndTime } = item\r\n      // 判断我的当前优惠券是否可用\r\n      this.$api.my_coupon_use_able({\r\n        cardId,\r\n        detailId\r\n      }).then((res) => {\r\n        if (res.state) {\r\n          if (res.info.useAble) {\r\n            this.$router.push({path: '/coupon/couponDetail', query: { cardId, detailId, cardEndTime, cardStartTime, type: 1 }})\r\n          } else {\r\n            this.$router.push({path: '/coupon/couponDetail', query: { cardId, detailId, cardEndTime, cardStartTime, type:4 }})\r\n          }\r\n        }\r\n      })\r\n    },\r\n\r\n    // 显示卡券弹窗\r\n    async showQr(item) {\r\n      let options = {\r\n        cardId: item.cardId,\r\n        detailId: item.detailId,\r\n        tradeId: this.options.tradeId,\r\n        apiUrl: 'card_qrcode'\r\n      }\r\n      this.options = options\r\n      this.showMask = true\r\n    },\r\n\r\n    setInfo (e) {\r\n      \r\n    },\r\n\r\n    lookCoupon() {\r\n      this.$router.push('/coupon/couponList')\r\n    }\r\n  },\r\n  created() {\r\n    let options = this.$route.query\r\n    options.vipUser = options.vipUser || '',\r\n    options.vip_check = Number(options.vip_check)\r\n    this.options = options\r\n    this.getInfo(options.tradeId)\r\n  }\r\n}\r\n</script>\r\n<style lang=\"scss\" scoped>\r\n.header {\r\n  width: 100%;\r\n  height: 212px;\r\n  background: url('http://doyd.oss-cn-shenzhen.aliyuncs.com/vip_mini_apply/img_order_bg.png') no-repeat center;\r\n  background-size: cover;\r\n}\r\n.list{\r\n  margin-top: -80px;\r\n}\r\n\r\n.vip-box {\r\n  padding: 0 24px;\r\n  margin-bottom: 18px;\r\n  height: 88px;\r\n  background: #FFFFFF;\r\n  border: 1px solid #F5F3F0;\r\n  border-radius: 12px;\r\n  line-height: 88px;\r\n}\r\n.vip-box .icon {\r\n  width: 42px;\r\n  height: 30px;\r\n  margin-right: 10px;\r\n}\r\n\r\n.list-item {\r\n  border-radius: 12px;\r\n  overflow: hidden;\r\n  margin-bottom: 18px;\r\n}\r\n.list-item .card-info {\r\n  padding-left: 24px;\r\n  height: 167px;\r\n  background-color: #fff;\r\n  border-bottom-left-radius: 14px;\r\n  border-bottom-right-radius: 14px;\r\n}\r\n.list-item .card-info .shop-img {\r\n  width: 108px;\r\n  height: 108px;\r\n  border: 1px solid #EBE9E6;\r\n  border-radius: 12px;\r\n  margin-right: 18px;\r\n}\r\n.list-item .card-info .card-name {\r\n  margin: 12px 0;\r\n}\r\n.list-item .bottom {\r\n  height: 70px;\r\n  background-color: #fff;\r\n  border-top: 1px dashed rgba(158, 157, 155, .2);\r\n  border-top-left-radius: 14px;\r\n  border-top-right-radius: 14px;\r\n}\r\n.list-item .bottom div {\r\n  padding-left: 24px;\r\n}\r\n.list-item .bottom button {\r\n  position: absolute;\r\n  right: 30px;\r\n  top: 14px;\r\n  width: 108px;\r\n  height: 42px;\r\n  line-height: 42px;\r\n  background-image: linear-gradient(90deg, #F7420D 0%, #F50C05 100%);\r\n  border-radius: 42px;\r\n  font-size: 24px;\r\n  color: #FFFFFF;\r\n}\r\n.list-item .num {\r\n  position: absolute;\r\n  right: 0;\r\n  top: 0;\r\n  padding: 0 10px;\r\n  height: 40px;\r\n  line-height: 40px;\r\n  background: #FEEED5;\r\n  border-radius: 0 12px 0 14px;\r\n  font-size: 22px;\r\n  color: #CD7B00;\r\n}\r\n\r\n.footer{\r\n  bottom: 0;\r\n  left: 0;\r\n  width: 100%;\r\n  padding: 22px 30px;\r\n  z-index: 9;\r\n  background: #fff;\r\n}\r\n.footer .buy-btn{\r\n  line-height: 96px;\r\n  height: 96px;\r\n  background-image: linear-gradient(90deg, #FFE6B7 0%, #FFE6B7 0%, #FFCF94 100%);\r\n  border-radius: 48px;\r\n  color: #8C4B00;\r\n  font-size: 34px;\r\n}\r\n/* 关注组件位置 */\r\n.follow-bar {\r\n  bottom: 140px !important;\r\n}\r\n\r\n\r\n.qr-box{\r\n  width: 600px;\r\n  background: #FFFFFF;\r\n  border: 1px solid #E4E4E4;\r\n  border-radius: 14px;\r\n  overflow: hidden;\r\n}\r\n\r\n.mask .content {\r\n  position: absolute;\r\n  top: 30%;\r\n  left: calc(50% - 308px);\r\n  width: 617px;\r\n  height: 494px;\r\n}\r\n.mask .content > div {\r\n  position: relative;\r\n  z-index: 3\r\n}\r\n.mask .content div {\r\n  margin-top: 100px;\r\n  margin-bottom: 30px;\r\n  font-size: 43px;\r\n  color: #F65134;\r\n}\r\n.mask .content button {\r\n  margin-top: 166px;\r\n  width: 214px;\r\n  height: 70px;\r\n  line-height: 70px;\r\n  font-size: 30px;\r\n  color: #F03800;\r\n  background-image: linear-gradient(180deg, #F8D962 0%, #FDC131 100%);\r\n  border-radius: 35px;\r\n}\r\n.mask .content .bg {\r\n  position: absolute;\r\n  top: 0;\r\n  width: 100%;\r\n  height: 100%;\r\n}\r\n.mask .close {\r\n  position: absolute;\r\n  right: 35px;\r\n  top: -91px;\r\n  width: 62px;\r\n  height: 92px;\r\n}\r\n\r\n.close-icon{\r\n  width: 62px;\r\n  height: 62px;\r\n  margin-top: 50px;\r\n}\r\n\r\n\r\n</style>\r\n\r\n"]}]}