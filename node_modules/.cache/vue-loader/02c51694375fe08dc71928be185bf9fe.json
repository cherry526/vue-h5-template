{"remainingRequest":"C:\\Users\\Administrator\\Desktop\\vip_inline_h5\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Administrator\\Desktop\\vip_inline_h5\\src\\views\\home\\home.vue?vue&type=style&index=0&lang=scss&","dependencies":[{"path":"C:\\Users\\Administrator\\Desktop\\vip_inline_h5\\src\\views\\home\\home.vue","mtime":1596624611547},{"path":"C:\\Users\\Administrator\\Desktop\\vip_inline_h5\\node_modules\\css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Administrator\\Desktop\\vip_inline_h5\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"C:\\Users\\Administrator\\Desktop\\vip_inline_h5\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"C:\\Users\\Administrator\\Desktop\\vip_inline_h5\\node_modules\\sass-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Administrator\\Desktop\\vip_inline_h5\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Administrator\\Desktop\\vip_inline_h5\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCi5ob21lLXBhZ2UgewogIC5hY3QtbGlzdCB7CiAgICAuYWN0LWl0ZW06bnRoLW9mLXR5cGUoMm4pIHsKICAgICAgbWFyZ2luLWxlZnQ6IDE4cHg7CiAgICB9CiAgfQp9Cg=="},{"version":3,"sources":["home.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqIA;AACA;AACA;AACA;AACA;AACA;AACA","file":"home.vue","sourceRoot":"src/views/home","sourcesContent":["<!--\r\n * @Description: 首页\r\n * @Version: 1.0\r\n * @Autor: cherry\r\n * @Date: 2020-07-10 16:38:41\r\n * @LastEditors: cherry\r\n * @LastEditTime: 2020-08-05 17:55:12\r\n--> \r\n<template>\r\n  <div class=\"home-page\">\r\n    <search-tab rightText=\"搜索\"></search-tab>\r\n    <div class=\"sort-tab\" :class=\"tacActive ? 'border':''\" id=\"sort-tab\">\r\n      <sort-tab\r\n        :business=\"business\"\r\n        :category=\"category\"\r\n        :sort=\"sort\"\r\n        :cityId.sync=\"locationCity.cityId\" \r\n        :type=\"pageType\"  \r\n        isShowDiscount \r\n        @changeList=\"changeList\" \r\n        :refresh=\"refresh\"\r\n      >\r\n      </sort-tab>\r\n    </div>\r\n    <common-list\r\n      apiName='specialSellList'\r\n      :filterData='filterData'\r\n      :refresh.sync=\"refreshList\"\r\n      :dropDown=\"true\"\r\n      class=\"act-list\"\r\n    >\r\n      <template v-slot=\"{ list }\">\r\n        <active-item v-for=\"(item, index) in list\" :key=\"index\" :item=\"item\"></active-item>\r\n      </template>\r\n    </common-list>\r\n  </div>\r\n</template>\r\n<script>\r\n  // import actions from '@utils/actions'\r\n  import { mapGetters, mapActions, mapMutations } from \"vuex\";\r\n  import activeItem from '@components/active/activeItem'\r\nimport { setTimeout } from 'timers';\r\n  export default {\r\n    name: 'home',\r\n    components:{\r\n      activeItem,\r\n    },\r\n    data() {\r\n      return {\r\n        loading: false,\r\n        finished: false,\r\n        refreshing: false,\r\n        refreshList: false,\r\n        filterKeywordList:[],\r\n        tacActive: false,\r\n        list: [],\r\n        business: '商圈·全城',\r\n        category: '全部品类',\r\n        sort: '综合排序',\r\n        cityId: 0,\r\n        refresh: true,\r\n        filterItem: null,\r\n        pageType: 2,\r\n        filterId: 0,\r\n        filterData: {},\r\n        range: 0,\r\n        type: 1,// 1.附近 2.商圈 3地区 4.分类 5.综合排序 6折扣筛选\r\n        areaId: 0, // 一级地区id\r\n        busCircleId: 0, //一级地区id（商圈Id）\r\n        ctgId: 0, // 二级品类Id，\r\n        sortType: 1, //筛选：1.综合排序 2人气最高 3.距离优先 4.人均最低 5人均最高\r\n        discountRange: 0, //折扣：格式'8|10'\r\n      }\r\n    },\r\n    computed: {\r\n      ...mapGetters([\"locationInfo\", \"locationCity\", \"updatePage\"])\r\n    },\r\n    methods: {\r\n      ...mapMutations('index', [\r\n        'SET_UPDATEPAGE',\r\n        'GET_UPDATEPAGE'\r\n      ]),\r\n      ...mapActions('index', [\r\n        'getUpdatePage'\r\n      ]),\r\n      // 筛选组件回调\r\n      changeList(tabData) {\r\n        let tabtype = tabData.tabtype\r\n        let aid, bid, cid, type, range, sorttype\r\n        if (tabtype === '0') {\r\n          ({ aid, bid = 0, type, range = 0 } = tabData);\r\n          ({ ctgId: cid, sortType: sorttype } = this.filterData)\r\n        } else if (tabtype === '1') {\r\n          ({ cid, type } = tabData);\r\n          ({ areaId: aid, range, busCircleId: bid, sortType: sorttype } = this.filterData)\r\n        } else if (tabtype === '2') {\r\n          ({ sorttype, type } = tabData);\r\n          ({ areaId: aid, range, busCircleId: bid, ctgId: cid } = this.filterData)\r\n        } else if (tabtype === '3') {\r\n          ({ type } = tabData);\r\n          ({ areaId: aid, range, busCircleId: bid, ctgId: cid, sortType: sorttype } = this.filterData)\r\n        }\r\n        this.filterData.areaId = aid || 0\r\n        this.filterData.range = range || 0\r\n        this.filterData.busCircleId = bid || 0\r\n        this.filterData.sortType = sorttype || 1\r\n        this.filterData.ctgId = cid || 0\r\n        console.log(this.filterData)\r\n        // 刷新列表\r\n        this.refreshList = true\r\n      }\r\n    },\r\n    created() {\r\n      this.filterData = {\r\n        cityId: this.locationCity.cityId,\r\n        range: this.range,\r\n        type: this.type,// 1.附近 2.商圈 3地区 4.分类 5.综合排序 6折扣筛选\r\n        areaId: this.aid, // 一级地区id\r\n        busCircleId: this.bid, //一级地区id（商圈Id）\r\n        ctgId: this.cid, // 二级品类Id，\r\n        sortType: this.sorttype || 1, //筛选：1.综合排序 2人气最高 3.距离优先 4.人均最低 5人均最高\r\n        discountRange: this.discountRange, //折扣：格式'8|10'\r\n        lng: this.locationInfo.longitude,\r\n        lat: this.locationInfo.longitude,\r\n        filterId: 0,\r\n        time: true\r\n      }\r\n      console.log(this.$route, '---000----')\r\n    }\r\n  }\r\n</script>\r\n\r\n<style lang='scss'>\r\n  .home-page {\r\n    .act-list {\r\n      .act-item:nth-of-type(2n) {\r\n        margin-left: 18px;\r\n      }\r\n    }\r\n  }\r\n</style>\r\n\r\n<style scoped lang='scss'>\r\n  .home-page {\r\n    padding-top: 200px;\r\n     .act-list {\r\n      padding: 0 24px;\r\n    }\r\n    .sort-tab {\r\n      // position: sticky;\r\n      position: fixed;\r\n      top: 100px;\r\n      left: 0;\r\n      width: 100%;\r\n      // background: #f6f6f6;\r\n      background-color: #fff;\r\n      z-index: 1;\r\n      &.active {\r\n        background: #fff;\r\n        border-bottom: 1px solid #E5E6E8;\r\n      }\r\n    }\r\n  }\r\n</style>"]}]}