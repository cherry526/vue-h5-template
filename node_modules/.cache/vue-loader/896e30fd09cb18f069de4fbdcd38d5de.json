{"remainingRequest":"C:\\Users\\Administrator\\Desktop\\vip_inline_h5\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Administrator\\Desktop\\vip_inline_h5\\src\\views\\active\\specialSale.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\Administrator\\Desktop\\vip_inline_h5\\src\\views\\active\\specialSale.vue","mtime":1596627053486},{"path":"C:\\Users\\Administrator\\Desktop\\vip_inline_h5\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Administrator\\Desktop\\vip_inline_h5\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\Administrator\\Desktop\\vip_inline_h5\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Administrator\\Desktop\\vip_inline_h5\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IG1hcEdldHRlcnMsIG1hcEFjdGlvbnMsIG1hcE11dGF0aW9ucyB9IGZyb20gInZ1ZXgiOwppbXBvcnQgc2Vja2lsbE1peGluIGZyb20gJ0AvbWl4aW5zL3NlY2tpbGxNaXhpbicgCmltcG9ydCBhY3RpdmVCcmFuZCBmcm9tICdAY29tcG9uZW50cy9hY3RpdmUvYWN0aXZlQnJhbmQnCmltcG9ydCBhY3RpdmVOb3RpY2UgZnJvbSAnQGNvbXBvbmVudHMvYWN0aXZlL2FjdGl2ZU5vdGljZScKaW1wb3J0IGFjdGl2ZUdyYXBoaWMgZnJvbSAnQGNvbXBvbmVudHMvYWN0aXZlL2FjdGl2ZUdyYXBoaWMnCmltcG9ydCBhY3RpdmVSb29tIGZyb20gJ0Bjb21wb25lbnRzL2FjdGl2ZS9hY3RpdmVSb29tJwppbXBvcnQgYWN0aXZlSGVhZGVyIGZyb20gJ0Bjb21wb25lbnRzL2FjdGl2ZS9hY3RpdmVIZWFkZXInCmltcG9ydCBhY3RpdmVDb3Vwb24gZnJvbSAnQGNvbXBvbmVudHMvYWN0aXZlL2FjdGl2ZUNvdXBvbicKaW1wb3J0IGFjdGl2ZUNhc2ggZnJvbSAnQGNvbXBvbmVudHMvYWN0aXZlL2FjdGl2ZUNhc2gnCmltcG9ydCBhY3RpdmVGb290ZXIgZnJvbSAnQGNvbXBvbmVudHMvYWN0aXZlL2FjdGl2ZUZvb3RlcicKaW1wb3J0IHV0aWxzIGZyb20gIkAvdXRpbHMvdXRpbHMiCmltcG9ydCBvcmRlclBheSBmcm9tICJAL3V0aWxzL3BheSIKaW1wb3J0IGFjdGl2ZVV0aWxzIGZyb20gJ0AvZmlsdGVycy9hY3RpdmUnCgpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogJ3NwZWNpYWxTYWxlJywKICBtaXhpbnM6IFtzZWNraWxsTWl4aW5dLAogIGNvbXB1dGVkOiB7fSwKICBjb21wb25lbnRzOnsKICAgIGFjdGl2ZUhlYWRlciwKICAgIGFjdGl2ZUNvdXBvbiwKICAgIGFjdGl2ZUNhc2gsCiAgICBhY3RpdmVHcmFwaGljLAogICAgYWN0aXZlQnJhbmQsCiAgICBhY3RpdmVSb29tLAogICAgYWN0aXZlTm90aWNlLAogICAgYWN0aXZlRm9vdGVyCiAgfSwKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgdmlwVXNlcjogZmFsc2UsCiAgICAgIHN1aXRTaG9wczogW10sCiAgICAgIG1lZGlhTGlzdDogW10sCiAgICAgIGdyYXBoaWNEZXRhaWw6ICcnLCAvLyDor6bmg4VodG1s5L+h5oGvCiAgICAgIHRpbWVyOiBudWxsLAogICAgICByZWNvbW1lbmRMaXN0OiBbXSwgLy8g5YW25LuW56S85YyF5o6o6I2QL+aOqOiNkOadg+ebigogICAgICBmbGFnOiB0cnVlLAogICAgICBzaG93UG9wOiBmYWxzZSwgLy8g6Z2e5Lya5ZGY6LSt5Lmw5pe25o+Q56S6CiAgICAgIHJlY29tUGFnZTogMSwgIC8vIOeJueWNlueahOaOqOiNkOadg+ebiuS4iuaLieabtOWkmgogICAgICBoYXNNb3JlOiB0cnVlLCAvLyDnibnljZbnmoTmjqjojZDmnYPnm4rmm7TlpJrmj5DnpLoKICAgICAgYnRuRGlzYWJsZWQ6IGZhbHNlLAogICAgICBjYXNoTWFzazogZmFsc2UsCiAgICAgIHNlbENhc2hyZWQ6IHt9LAogICAgICBzZWxDb25zdW1lcjoge30sCiAgICAgIGNhbGVuZGFyTWFzazogZmFsc2UsIC8vIOaXpeWOhuW8ueeqlwogICAgICBzZWxEYXRlOiB7CiAgICAgICAgc3RhcnRUaW1lOiAnJywKICAgICAgICBlbmRUaW1lOiAnJwogICAgICB9LCAvLyDoh6rmiJHmuLjpgInkuK3nmoTml7bpl7QKICAgICAgLy8gdHJhdmVsTW9udGhJbmZvOiB7fSwKICAgICAgY29uZGl0aW9uSW5mbzoge30sIC8vIOWFkeWlluS4reW/g+S/oeaBrwogICAgICB0cmFjdmVsVXNlckxpc3Q6IFtdLAogICAgICByZWZyZXNoOiBmYWxzZSwgLy8g5Yi35paw5pel5Y6G5pWw5o2uCiAgICAgIGRvd25UaW1lOiB7CiAgICAgICAgaG91cjogJzAwJywKICAgICAgICBtaW51dGU6ICcwMCcsCiAgICAgICAgc2Vjb25kOiAnMDAnCiAgICAgIH0sCiAgICAgIHJlYWR5OiBmYWxzZSwKICAgICAgYnRuVGV4dDogJ+eri+WNs+aKoui0rScsCiAgICAgIHNob3dCdG5UeHQ6IHRydWUsCiAgICAgIGZpeGVkRGV0YWlsOnt9LCAvLyDpl6jlupflk4HniYzkurrlnYfkv6Hmga8KICAgICAgcmVtYWluVGltZTogMzk5OTAwMCwKICAgICAgY2hhbm5lbFR5cGU6ICcnLAogICAgICBvcHRpb25zOiB0aGlzLiRyb3V0ZS5xdWVyeSB8fCB7fSwKICAgICAgaW5mbzoge30KICAgIH0KICB9LAogIGNvbXB1dGVkOiB7CiAgICAuLi5tYXBHZXR0ZXJzKFsibG9jYXRpb25JbmZvIiwgInd4VXNlciIsICJsb2NhdGlvbkNpdHkiLCAidmlwQ2FyZEluZm8iLCAidXBkYXRlRmxhZyJdKQogIH0sCiAgbWV0aG9kczogewogICAgLy8g5oyJ6ZKu6aKG5Y+W44CB5byA6YCa44CB6LSt5Lmw562J5pON5L2c5LqL5Lu2CiAgICBoYW5kbGVyRXZlbnQoKSB7CiAgICAgIGlmICh0aGlzLmJ0bkRpc2FibGVkKSByZXR1cm4gLy8g5oyJ6ZKu572u54Gw5pe277yM5peg5rOV54K55Ye76LSt5Lmw5oyJ6ZKuCiAgICAgIGxldCBpbmZvID0gdGhpcy5pbmZvCiAgICAgIGlmIChpbmZvLnN1cHBsaWVyQ29kZSA9PSAnUEFSVFlfWldZJyAmJiBbMywgNCwgNV0uaW5jbHVkZXMoaW5mby52YWxpZGl0eVR5cGUpKSB7CiAgICAgICAgLy8g6Ieq5oiR5ri454m55Y2W5pe2ICYmIOmcgOimgemAieWumuaXpeacnyAgIOW8ueWHuumAieaLqeaXpeWOhgogICAgICAgIGlmICghdGhpcy5jYWxlbmRhck1hc2spIHsKICAgICAgICAgIHRoaXMuY2FsZW5kYXJNYXNrID0gdHJ1ZQogICAgICAgICAgcmV0dXJuCiAgICAgICAgfQogICAgICAgIGlmICghdGhpcy5zZWxEYXRlLnN0YXJ0VGltZSkgeyAvLyDmnKrpgInmi6nml7bpl7QKICAgICAgICAgIHRoaXMuJFRvYXN0KCfor7fpgInmi6nmuLjnjqnml6XmnJ8nKQogICAgICAgICAgdGhpcy5jYWxlbmRhck1hc2sgPSB0cnVlCiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGlmIChpbmZvLnZhbGlkaXR5VHlwZSA9PSA0IHx8IGluZm8udmFsaWRpdHlUeXBlID09IDUpIHsgLy8g5ri45a6i6YCJ5a6a5pel5pyf5bu25ZCOWOacieaViCB8fCDmuLjlrqLpgInlrprml6XmnJ/mjIflrprml7bpl7TmnInmlYgKICAgICAgICAgICAgdGhpcy4kZGlhbG9nLmNvbmZpcm0oewogICAgICAgICAgICAgIHRpdGxlOifnoa7lrprlh7rmuLjml7bpl7Q/JywKICAgICAgICAgICAgICBtZXNzYWdlOmAke3V0aWxzLmZvcm1hdFRpbWUodGhpcy5zZWxEYXRlLnN0YXJ0VGltZSB8fCAwLCAnWVlZWS9NTS9ERCcpfSB+ICR7dXRpbHMuZm9ybWF0VGltZSh0aGlzLnNlbERhdGUuZW5kVGltZSB8fCAwLCAnWVlZWS9NTS9ERCcpfWAsCiAgICAgICAgICAgIH0pLnRoZW4oKCk9PnsKICAgICAgICAgICAgICB0aGlzLnBsYWNlT3JkZXIoKQogICAgICAgICAgICB9KS5jYXRjaCgoKSA9PiB7CiAgICAgICAgICAgICAgICAgIC8vIG9uIGNhbmNlbAogICAgICAgICAgICB9KTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHRoaXMuJGRpYWxvZy5jb25maXJtKHsKICAgICAgICAgICAgICB0aXRsZTon56Gu5a6a5Ye65ri45pe26Ze0PycsCiAgICAgICAgICAgICAgbWVzc2FnZTpgJHt1dGlscy5mb3JtYXRUaW1lKHRoaXMuc2VsRGF0ZS5zdGFydFRpbWUgfHwgMCwgJ1lZWVkvTU0vREQnKX1gLAogICAgICAgICAgICB9KS50aGVuKCgpPT57CiAgICAgICAgICAgICAgdGhpcy5wbGFjZU9yZGVyKCkKICAgICAgICAgICAgfSkuY2F0Y2goKCkgPT4gewogICAgICAgICAgICAgICAgICAvLyBvbiBjYW5jZWwKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIHJldHVybgogICAgICB9CiAgICAgIHRoaXMucGxhY2VPcmRlcigpCiAgICB9LAoKICAgIC8vIOS4i+WNlQogICAgcGxhY2VPcmRlcigpIHsKICAgICAgaWYgKHRoaXMub3B0aW9ucy5oYXNFeGNoYW5nZSAhPSAnJykgewogICAgICBjb25zb2xlLmxvZygn6Kem5Y+R54K55Ye76LSt5LmwMScsIHRoaXMuaW5mby5jaGlsZEVudW1LZXksIHRoaXMuZnJlZSwgdGhpcy5pbmZvLmNhcmRUeXBlKQoKICAgICAgICAvLyDliKTmlq3lhZHlpZbkuK3lv4Pov5vlhaUgIOeri+WNs+WFkeaNogogICAgICAgIGxldCBjb25kaXRpb25JbmZvID0gdGhpcy5jb25kaXRpb25JbmZvCiAgICAgICAgbGV0IHRyYWN2ZWxVc2VyTGlzdCA9IHRoaXMudHJhY3ZlbFVzZXJMaXN0CiAgICAgICAgaWYgKGNvbmRpdGlvbkluZm8uaXNDb25kaXRpb24gJiYgdHJhY3ZlbFVzZXJMaXN0Lmxlbmd0aCA9PSAwKSB7CiAgICAgICAgICAvLyDliKTmlq3mmK/lkKbpnIDmsYLloavlhpnkv6Hmga8KICAgICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHsKICAgICAgICAgICAgbmFtZTogJ3RyYXZlbEluZm9ybWF0aW9uJywKICAgICAgICAgICAgcXVlcnk6IHsKICAgICAgICAgICAgICBhY3RTbjogdGhpcy5vcHRpb25zLmFjdFNuCiAgICAgICAgICAgIH0KICAgICAgICAgIH0pCiAgICAgICAgICByZXR1cm4gCiAgICAgICAgfQogICAgICAgIHRoaXMuZXhjaGFuZ2UoKQogICAgICB9IGVsc2UgaWYgKHRoaXMuaW5mby5jaGlsZEVudW1LZXkgPT0gJ0FDVF9TUEVDSUFMX09GRkVSX1BVUkNIQVNFX0xJTUlUJykgewogICAgICBjb25zb2xlLmxvZygn6Kem5Y+R54K55Ye76LSt5LmwMicsIHRoaXMuaW5mby5jaGlsZEVudW1LZXksIHRoaXMuZnJlZSwgdGhpcy5pbmZvLmNhcmRUeXBlKQoKICAgICAgICAvLyDku47pmZDotK3ov5vlhaUKICAgICAgICB0aGlzLmhhbmRsZXJMaW1pdEV2ZW50KCkKICAgICAgfSBlbHNlIGlmICh0aGlzLmZyZWUgJiYgdGhpcy5pbmZvLmNhcmRUeXBlICE9ICdDQVJEX0RJUkVDVF9SRUNIQVJHRScpIHsKCiAgICAgICAgbGV0IGNvbmRpdGlvbkluZm8gPSB0aGlzLmNvbmRpdGlvbkluZm8KICAgICAgICBsZXQgdHJhY3ZlbFVzZXJMaXN0ID0gdGhpcy50cmFjdmVsVXNlckxpc3QKICAgICAgY29uc29sZS5sb2coJ+inpuWPkeeCueWHu+i0reS5sDMnLCBjb25kaXRpb25JbmZvLmlzQ29uZGl0aW9uLCB0aGlzLmZyZWUsIHRyYWN2ZWxVc2VyTGlzdCkKCiAgICAgICAgaWYgKGNvbmRpdGlvbkluZm8uaXNDb25kaXRpb24gJiYgdHJhY3ZlbFVzZXJMaXN0Lmxlbmd0aCA9PSAwKSB7CiAgICAgICAgICAvLyDliKTmlq3mmK/lkKbpnIDmsYLloavlhpnkv6Hmga8KICAgICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHsKICAgICAgICAgICAgbmFtZTogJ3RyYXZlbEluZm9ybWF0aW9uJywKICAgICAgICAgICAgcXVlcnk6IHsKICAgICAgICAgICAgICBhY3RTbjogdGhpcy5vcHRpb25zLmFjdFNuCiAgICAgICAgICAgIH0KICAgICAgICAgIH0pCiAgICAgICAgICByZXR1cm4KICAgICAgICB9CiAgICAgICAgLy8g5YWN6LS56aKG5Y+WCiAgICAgICAgdGhpcy5nZXRGcmVlKCkKICAgICAgfSBlbHNlIGlmICh0aGlzLm9wZW5fcmVjZWl2ZSkgewogICAgICBjb25zb2xlLmxvZygn6Kem5Y+R54K55Ye76LSt5LmwNCcsIHRoaXMuaW5mby5jaGlsZEVudW1LZXksIHRoaXMuZnJlZSwgdGhpcy5pbmZvLmNhcmRUeXBlKQoKICAgICAgICB0aGlzLm9wZW5SZWNlaXZlKCkKICAgICAgfSBlbHNlIHsKICAgICAgY29uc29sZS5sb2coJ+inpuWPkeeCueWHu+i0reS5sDUnLCB0aGlzLmluZm8uY2hpbGRFbnVtS2V5LCB0aGlzLmZyZWUsIHRoaXMuaW5mby5jYXJkVHlwZSkKCiAgICAgICAgdGhpcy50b0J1eSgpCiAgICAgIH0KICAgIH0sCgogICAgaGFuZGxlckxpbWl0RXZlbnQoKSB7CiAgICAgIGlmICh0aGlzLmluZm8ubGltaXRBY3RTdGF0ZSA9PSAxMikgewogICAgICAgIHRoaXMuJFRvYXN0KCflvZPliY3lkIjovpHpnZ7ov5vooYzkuK3nirbmgIEnKQogICAgICB9IGVsc2UgewogICAgICAgIGlmICh0aGlzLmJ0blRleHQgPT0gJ+eri+WNs+aKoui0rScpIHsKICAgICAgICAgIHRoaXMudG9CdXkoKQogICAgICAgIH0KICAgICAgfQogICAgfSwKCiAgICAvLyDlhZHmjaIKICAgIGV4Y2hhbmdlKCkgewogICAgICBsZXQgaXRlbSA9IHRoaXMuZXhjaGFuZ2VfZGF0YQogICAgICB0aGlzLiRkaWFsb2cuY29uZmlybSh7CiAgICAgICAgdGl0bGU6IGDmmK/lkKbnoa7orqTlhZHmjaIke2l0ZW0uYWN0TmFtZSB8fCAnJ30/YCwKICAgICAgICBtZXNzYWdlOiflhZHmjaLlkI7kuI3lj6/mm7TmlLnkuJTljp/mnInmva7ljaHlsIbkvJrmuIXnqbonLAogICAgICB9KS50aGVuKCgpPT57CiAgICAgICAgdGhpcy5wcmljZUV4Y2hhbmdlKGl0ZW0pCiAgICAgIH0pLmNhdGNoKCgpID0+IHsKICAgICAgICAgICAgLy8gb24gY2FuY2VsCiAgICAgIH0pOwogICAgfSwKCiAgICAvLyDlvIDlp4vlhZHmjaIKICAgIHByaWNlRXhjaGFuZ2UoaXRlbSkgewogICAgICBpZiAodGhpcy5pc0NhbkNsaWNrKSByZXR1cm4KICAgICAgdGhpcy5pc0NhbkNsaWNrID0gdHJ1ZQogICAgICB0aGlzLiRhcGkucHJpY2VfZXhjaGFuZ2UoewogICAgICAgIGFjdFNuOiBpdGVtLmFjdFNuLAogICAgICAgIGF3YXJkSWQ6IGl0ZW0uYXdhcmRJZCwKICAgICAgICBjaXR5SWQ6IHRoaXMubG9jYXRpb25DaXR5LmNpdHlJZCwKICAgICAgICBjaG9vc2VEYXRlOiB0aGlzLnNlbERhdGUuc3RhcnRUaW1lID8gdXRpbHMuZm9ybWF0VGltZSh0aGlzLnNlbERhdGUuc3RhcnRUaW1lIHx8IDAsICdZWVlZTU1ERCcpIDogMCwgLy8g6Ieq5oiR5ri46YCJ5oup5pe26Ze0CiAgICAgICAgdHJhY3ZlbFVzZXJMaXN0OiBKU09OLnN0cmluZ2lmeSh0aGlzLnRyYWN2ZWxVc2VyTGlzdCkKICAgICAgfSkudGhlbihyZXMgPT4gewogICAgICAgIGlmIChyZXMuc3RhdGUpIHsKICAgICAgICAgIHRoaXMubWFzayA9IHRydWUKICAgICAgICAgIHRoaXMudHJhY3ZlbFVzZXJMaXN0ID0gW10KICAgICAgICAgIHRoaXMuJHNhdmUucmVtb3ZlKCdzZXNzaW9uJywgJ3RyYXZlbEluZm9ybWF0aW9uJykKICAgICAgICAgIHRoaXMuaGFuZGxlckJ0bign5bey5YWR5o2iJywgdHJ1ZSkKICAgICAgICAgIC8vIOa4hemZpOeUqOaIt+Whq+WGmeS/oeaBrwogICAgICAgICAgdGhpcy4kc2F2ZS5yZW1vdmUoJ3Nlc3Npb24nLCAndHJhdmVsSW5mb3JtYXRpb24nKQogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB0aGlzLiRUb2FzdChyZXMubWVzc2FnZSkKICAgICAgICB9CiAgICAgIH0pLmZpbmFsbHkoKCkgPT4gewogICAgICAgIHNldFRpbWVvdXQoKCkgPT4gewogICAgICAgICAgdGhpcy5pc0NhbkNsaWNrID0gZmFsc2UKICAgICAgICB9LCAzMDApCiAgICAgIH0pCiAgICB9LAoKICAgIGdvQ2FyZCgpIHsKICAgICAgdGhpcy4kcm91dGVyLnB1c2goewogICAgICAgIG5hbWU6ICdjb3Vwb25MaXN0JwogICAgICB9KQogICAgfSwKCiAgICBjbG9zZSgpIHsKICAgICAgdGhpcy5tYXNrID0gZmFsc2UKICAgIH0sCgogICAgLy8g6Z2e5Lya5ZGY5byA6YCa5bm26aKG5Y+WCiAgICBvcGVuUmVjZWl2ZSgpIHsKICAgICAgdGhpcy4kc2V0KHRoaXMuaW5mbywgJ3NlbGxQcmljZScsIDApCiAgICAgIHRoaXMuJHNldCh0aGlzLmluZm8sICdub1ZpcFByaWNlJywgMCkKICAgICAgbGV0IHJlY2VpdmVUeXBlID0gdGhpcy5vcHRpb25zLmNoYW5uZWxUeXBlID09ICdDSEFOTkVMX0FDVElWSVRZX0xBQkVMX1NIT1cnID8gNCA6IDEKICAgICAgbGV0IGluZm8gPSB0aGlzLmluZm8KICAgICAgaW5mby5zZWxEYXRlID0gdGhpcy5zZWxEYXRlCiAgICAgIGluZm8uZGVzY3JpYmUgPSAnJwogICAgICB0aGlzLiRzYXZlLnNldCgnc2Vzc2lvbicsICdvcmRlckluZm8nLCB0aGlzLmluZm8pCiAgICAgIAogICAgICAvLyDpnZ7kvJrlkZjlvIDpgJrlubbpooblj5YKICAgICAgdGhpcy4kcm91dGVyLnB1c2goewogICAgICAgIG5hbWU6ICdzdWJtaXRPcmRlcicsCiAgICAgICAgcXVlcnk6IHsKICAgICAgICAgIGNvbXBJZDogdGhpcy5vcHRpb25zLmNvbXBJZCB8fCAnJywKICAgICAgICAgIGFjdFNuOiB0aGlzLm9wdGlvbnMuYWN0U24sCiAgICAgICAgICBjaGFubmVsVHlwZTogdGhpcy5vcHRpb25zLmNoYW5uZWxUeXBlLAogICAgICAgICAgcmVjZWl2ZVR5cGU6IHJlY2VpdmVUeXBlCiAgICAgICAgfQogICAgICB9KQogICAgfSwKCiAgICAvLyDllK7ku7fkuLow5pe277yM5YWN6LS56aKGCiAgICBnZXRGcmVlKCkgewogICAgICBsZXQgYWN0RGVhbCA9IG9yZGVyUGF5LmFjdERlYWwoewogICAgICAgIGNpdHlJZDogdGhpcy5sb2NhdGlvbkNpdHkuY2l0eUlkLAogICAgICAgIGFjdFNuOiB0aGlzLm9wdGlvbnMuYWN0U24sCiAgICAgICAgZGVhbE51bTogMSwKICAgICAgICBjaGFubmVsVHlwZTogdGhpcy5vcHRpb25zLmNoYW5uZWxUeXBlLAogICAgICAgIHFyQ29kZTogdGhpcy5vcHRpb25zLnFyQ29kZSB8fCAnJywKICAgICAgICByZWFsRmVlOiAwLAogICAgICAgIHJlY2VpdmVUeXBlOiB0aGlzLm9wdGlvbnMuY2hhbm5lbFR5cGUgPT0gJ0NIQU5ORUxfQUNUSVZJVFlfTEFCRUxfU0hPVycgPyA0IDogMSwgLy8g6I635Y+W5pa55byP77yMMeS8muWRmOmihuWPlu+8jDLkvJrlkZjotK3kubDvvIwz5rig6YGT6LSt5LmwIHYxLjIuMOaUueS4ujEKICAgICAgICBvcGVuVmlwOiBmYWxzZSwgLy/mmK/lkKblvIDpgJrmnIjljaHkvJrlkZjlubbotK3kubAKICAgICAgICBhY3RGZWU6IDAsIC8v5rS75Yqo5pSv5LuY6LS555SoCiAgICAgICAgdmlwRmVlOiAwLAogICAgICAgIHZpcENhcmRJZDogJycsCiAgICAgICAgYnV5VHlwZTogMCwKICAgICAgICBjb21wSWQ6IHRoaXMub3B0aW9ucy5jb21wSWQsIC8vIOWQiOi+kUlkCiAgICAgICAgY2hvb3NlRGF0ZTogdGhpcy5zZWxEYXRlLnN0YXJ0VGltZSA/IHV0aWxzLmZvcm1hdFRpbWUodGhpcy5zZWxEYXRlLnN0YXJ0VGltZSB8fCAwLCAnWVlZWU1NREQnKSA6IDAsIC8vIOiHquaIkea4uOmAieaLqeaXtumXtAogICAgICAgIHRyYWN2ZWxVc2VyTGlzdDogSlNPTi5zdHJpbmdpZnkodGhpcy50cmFjdmVsVXNlckxpc3QpCiAgICAgIH0pCiAgICAgIGlmIChhY3REZWFsKSB7CiAgICAgICAgYWN0RGVhbC50aGVuKHJlcyA9PiB7CiAgICAgICAgICBpZiAocmVzLnN0YXRlKSB7CiAgICAgICAgICAgIHRoaXMudHJhY3ZlbFVzZXJMaXN0ID0gW10KICAgICAgICAgICAgdGhpcy4kc2F2ZS5yZW1vdmUoJ3Nlc3Npb24nLCAndHJhdmVsSW5mb3JtYXRpb24nKQogICAgICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCh7bmFtZTogJ3NwZWNpYWxTYWxlU3VjY2VzcycsIHF1ZXJ5OiB7IHRyYWRlSWQ6IHJlcy5pbmZvLnRyYWRlSWQsIGFjdE5hbWU6IHRoaXMuaW5mby5hY3ROYW1lLCByZWNlaXZlOiAxLCBhY3RTbjogdGhpcy5vcHRpb25zLmFjdFNuLCB2aXBfY2hlY2s6IDB9fSkKICAgICAgICAgICAgLy8gd3gucmVtb3ZlU3RvcmFnZSh7CiAgICAgICAgICAgIC8vICAga2V5OiAndHJhdmVsSW5mb3JtYXRpb24nCiAgICAgICAgICAgIC8vIH0pCiAgICAgICAgICAgIC8vIHd4Lm5hdmlnYXRlVG8oewogICAgICAgICAgICAvLyAgIHVybDogYC9wYWdlcy9hY3Rpdml0eS9zZWxsX2RldGFpbC9zdWNjZXNzL3N1Y2Nlc3M/YWN0TmFtZT0ke3RoaXMuaW5mby5hY3ROYW1lfSZhY3RTbj0ke3RoaXMub3B0aW9ucy5hY3RTbn0mdHJhZGVJZD0ke3Jlcy5pbmZvLnRyYWRlSWR9JnZpcF9jaGVjaz1mYWxzZWAKICAgICAgICAgICAgLy8gfSk7CiAgICAgICAgICB9CiAgICAgICAgfSkKICAgICAgfQogICAgfSwKCiAgICB0b0J1eSgpIHsKICAgICAgaWYgKHRoaXMuaXNDYW5DbGljaykgcmV0dXJuCiAgICAgIHRoaXMuaXNDYW5DbGljayA9IHRydWUKCiAgICAgIGxldCBpbmZvID0gdGhpcy5pbmZvCiAgICAgIGluZm8uc2VsRGF0ZSA9IHRoaXMuc2VsRGF0ZQogICAgICBpbmZvLmRlc2NyaWJlID0gJycKICAgICAgdGhpcy4kc2F2ZS5zZXQoJ3Nlc3Npb24nLCAnb3JkZXJJbmZvJywgdGhpcy5pbmZvKQogICAgICAvLyDliKTmlq3mmK/lkKbmnInmnKrmlK/ku5jnmoTorqLljZUKICAgICAgdGhpcy4kYXBpLm9yZGVyX3VucGF5KHsKICAgICAgICBhY3RTbjogdGhpcy5vcHRpb25zLmFjdFNuCiAgICAgIH0pLnRoZW4ocmVzID0+IHsKICAgICAgICBpZiAocmVzLnN0YXRlKSB7CiAgICAgICAgICBpZiAocmVzLmluZm8uZXhpc3RzVW5QYXkpIHsKICAgICAgICAgICAgLy8g5aaC5p6c5a2Y5Zyo5pyq5pSv5LuY55qE6K6i5Y2V77yM6Lez6L2s5Yiw6K6i5Y2V5YiX6KGo6aG1CiAgICAgICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHsKICAgICAgICAgICAgICBuYW1lOiAnb3JkZXJMaXN0JwogICAgICAgICAgICB9KQogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgbGV0IHJlY2VpdmVUeXBlID0gdGhpcy5vcHRpb25zLmNoYW5uZWxUeXBlID09ICdDSEFOTkVMX0FDVElWSVRZX0xBQkVMX1NIT1cnID8gMyA6IDIKICAgICAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goewogICAgICAgICAgICAgIG5hbWU6ICdzdWJtaXRPcmRlcicsCiAgICAgICAgICAgICAgcXVlcnk6IHsKICAgICAgICAgICAgICAgIHFyQ29kZTogdGhpcy5vcHRpb25zLnFyQ29kZSB8fCAnJywKICAgICAgICAgICAgICAgIGNvbXBJZDogdGhpcy5vcHRpb25zLmNvbXBJZCB8fCAnJywKICAgICAgICAgICAgICAgIGFjdFNuOiB0aGlzLm9wdGlvbnMuYWN0U24sCiAgICAgICAgICAgICAgICBjaGFubmVsVHlwZTogdGhpcy5vcHRpb25zLmNoYW5uZWxUeXBlLAogICAgICAgICAgICAgICAgcmVjZWl2ZVR5cGU6IHJlY2VpdmVUeXBlCiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KQogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSkuZmluYWxseSgoKSA9PiB7CiAgICAgICAgdGhpcy5pc0NhbkNsaWNrID0gZmFsc2UKICAgICAgfSkKICAgIH0sCgogICAgLy8g5Yik5pat55So5oi36LSt5Lmw5L+h5oGvCiAgICBnZXRSZWFsVGltZUluZm8obGltaXRGcmVxdWVuY3kpIHsKICAgICAgcmV0dXJuIHRoaXMuJGFwaS5yZWFsVGltZV9pbmZvKHsKICAgICAgICBhY3RTbjogdGhpcy5vcHRpb25zLmFjdFNuCiAgICAgIH0pLnRoZW4ocmVzID0+IHsKICAgICAgICBpZiAocmVzLnN0YXRlKSB7CiAgICAgICAgICB0aGlzLnJlYWxJbmZvID0gcmVzLmluZm8KICAgICAgICB9CiAgICAgIH0pCiAgICB9LAoKICAgIGhhbmRsZXJCdG4odGV4dCwgZGlzYWJsZWQgPSBmYWxzZSkgewogICAgICB0aGlzLmJ0blRleHQgPSB0ZXh0CiAgICAgIHRoaXMuYnRuRGlzYWJsZWQgPSBkaXNhYmxlZAogICAgfSwKCiAgICBoYW5kbGVyTGltaXQoaW5mbzIsIGZsYWcpIHsKICAgICAgLy8gMeacquW8gOWniyAy6L+b6KGM5LitIDPlt7Lnu5PmnZ8KICAgICAgbGV0IGN1cnJlbnRUaW1lID0gK25ldyBEYXRlKCkKICAgICAgaWYgKChpbmZvMi5saW1pdEVuZFRpbWUgPCBjdXJyZW50VGltZSkgJiYgKGluZm8yLmxpbWl0U3RhcnRUaW1lIDwgY3VycmVudFRpbWUpKSB7CiAgICAgICAgaW5mbzIudGltZVN0YXRlID0gMwogICAgICB9IGVsc2UgaWYgKChpbmZvMi5saW1pdEVuZFRpbWUgPiBjdXJyZW50VGltZSkgJiYgKGluZm8yLmxpbWl0U3RhcnRUaW1lIDwgY3VycmVudFRpbWUpKSB7CiAgICAgICAgaW5mbzIudGltZVN0YXRlID0gMgogICAgICB9IGVsc2UgaWYgKGluZm8yLmxpbWl0U3RhcnRUaW1lID4gY3VycmVudFRpbWUpIHsKICAgICAgICBpbmZvMi50aW1lU3RhdGUgPSAxCiAgICAgICAgbGV0IGhlYWRsaW5lID0gZ2V0RGF5TmFtZShpbmZvMi5saW1pdFN0YXJ0VGltZSkKICAgICAgICB0aGlzLmhlYWRsaW5lID0gaGVhZGxpbmUKICAgICAgfQogICAgICBpZiAoaW5mbzIudGltZVN0YXRlICE9IDMpIHsKICAgICAgICBjbGVhckludGVydmFsKHRoaXMubGltaXRUaW1lcikKICAgICAgICB0aGlzLmxpbWl0VGltZXIgPSBzZXRJbnRlcnZhbCgoKSA9PiB7CiAgICAgICAgICBsZXQgbm93VGltZSA9ICtuZXcgRGF0ZSgpCiAgICAgICAgICB2YXIgY3V0VGltZSA9IDAKICAgICAgICAgIGlmIChpbmZvMi50aW1lU3RhdGUgPT0gMSkgewogICAgICAgICAgICBjdXRUaW1lID0gaW5mbzIubGltaXRTdGFydFRpbWUgLSBub3dUaW1lCiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBjdXRUaW1lID0gaW5mbzIubGltaXRFbmRUaW1lIC0gbm93VGltZQogICAgICAgICAgfQogICAgICAgICAgbGV0IGxhc3RUaW1lID0gdXRpbHMuY291bnREb3duMyhjdXRUaW1lKQogICAgICAgICAgdGhpcy5kb3duVGltZSA9IGxhc3RUaW1lCiAgICAgICAgICBpZiAoY3V0VGltZSA8PSAwICYmIChpbmZvMi5saW1pdEFjdFN0YXRlICE9IDEyKSkgewogICAgICAgICAgICBjbGVhckludGVydmFsKHRoaXMubGltaXRUaW1lcikKICAgICAgICAgICAgdGhpcy5nZXRBY3REZXRhaWwoKQoKICAgICAgICAgIH0KICAgICAgICB9LCAxMDAwKQogICAgICAgIGNvbnNvbGUubG9nKHRoaXMuZG93blRpbWUsICd0aGlzLmRvd25UaW1lJykKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLmRvd25UaW1lID0gewogICAgICAgICAgaG91cjogJzAwJywKICAgICAgICAgIG1pbnV0ZTogJzAwJywKICAgICAgICAgIHNlY29uZDogJzAwJwogICAgICAgIH0KICAgICAgfQogICAgICAKICAgICAgaWYgKGZsYWcpIHsKICAgICAgICBjb25zb2xlLmxvZygnZmxhZycsIGluZm8yLCAnPT09PT09PT09PT09PT0nKQogICAgICAgIC8vIOW3suaKouWujOa0u+WKqOW8ueeqlwogICAgICAgIGlmIChpbmZvMi5saW1pdEFjdFN0YXRlID09IDMgfHwgaW5mbzIubGltaXRBY3RTdGF0ZSA9PSAyIHx8ICF0aGlzLmluZm8ucmVtYWluTnVtKSB7CiAgICAgICAgICB0aGlzLmdldEVuZEFjdGl2ZSgpCiAgICAgICAgfQogICAgICB9CiAgICB9LAoKICAgIC8vIOiOt+WPlua0u+WKqOivpuaDhQogICAgYXN5bmMgZ2V0QWN0RGV0YWlsKGZsYWcpIHsKICAgICAgdGhpcy4kVG9hc3QubG9hZGluZyh7IAogICAgICAgIG1lc3NhZ2U6ICfliqDovb3kuK0uLi4nLAogICAgICAgIGZvcmJpZENsaWNrOiB0cnVlLAogICAgICAgIGR1cmF0aW9uOiAwCiAgICAgIH0pCiAgICAgIGF3YWl0IHRoaXMuZ2V0U3BlY2lhbEluZm8oKSAvLyDlpoLmnpzmmK/nibnljZbmtLvliqjor6bmg4XvvIxjYXJkSWTvvIxkZXRhaWxJZOS7jueJueWNluivpuaDhemHjOmdouiOt+WPlgogICAgICBhd2FpdCB0aGlzLmdldENvdXBEZXRhaWwoKTsgLy8g6I635Y+W5Y2h5Yi46K+m5oOFCiAgICAgIGF3YWl0IHRoaXMuZ2V0UmVhbFRpbWVJbmZvKCkKICAgICAgdGhpcy5nZXRTdWl0U2hvcHMoKSAvLyDojrflj5bpgILnlKjlupfpk7oKICAgICAgdGhpcy4kYXBpLmFjdF9kZXRhaWwoewogICAgICAgIGNoYW5uZWxUeXBlOiB0aGlzLm9wdGlvbnMuY2hhbm5lbFR5cGUsCiAgICAgICAgcXJDb2RlOiB0aGlzLm9wdGlvbnMucXJDb2RlIHx8ICcnLAogICAgICAgIGFjdFNuOiB0aGlzLm9wdGlvbnMuYWN0U24KICAgICAgfSkudGhlbihhc3luYyByZXMgPT4gewogICAgICAgIGlmIChyZXMuc3RhdGUpIHsKICAgICAgICAgIGxldCBpbmZvMSA9IHRoaXMuaW5mbwogICAgICAgICAgbGV0IGluZm8yID0gcmVzLmluZm8KICAgICAgICAgIGxldCBjb250YXRpb24gPSAoaW5mbzIuYnV5TGltaXQgPT0gMSAmJiAhaW5mbzIuc2VsbFByaWNlICYmICFpbmZvMi5ub1ZpcFByaWNlKSB8fCAoaW5mbzIuYnV5TGltaXQgPT0gMiAmJiAhaW5mbzIuc2VsbFByaWNlKSAvLyDliKTmlq3lt7Lpooblj5bnmoTnirbmgIEKICAgICAgICAgIAogICAgICAgICAgLy8g5aSE55CG6ZmQ5pe255qE5YCS6K6h5pe2562J6Zeu6aKYIAogICAgICAgICAgaWYgKGluZm8yLmNoaWxkRW51bUtleSA9PSAnQUNUX1NQRUNJQUxfT0ZGRVJfUFVSQ0hBU0VfTElNSVQnKSB7CiAgICAgICAgICAgIHRoaXMuaGFuZGxlckxpbWl0KGluZm8yLCBmbGFnKQogICAgICAgICAgfQogICAgICAgICAgaW5mbzEuY2hhbm5lbFR5cGUgPSB0aGlzLm9wdGlvbnMuY2hhbm5lbFR5cGUgfHwgJycKICAgICAgICAgIGxldCBpbmZvID0geyAuLi5pbmZvMSwgLi4uaW5mbzIgfQogICAgICAgICAgdGhpcy5pbmZvID0gaW5mbwogICAgICAgICAgdGhpcy5yZW1haW5UaW1lID0gaW5mbzIucmVtYWluVGltZQogICAgICAgICAgdGhpcy5yZWFkeSA9IHRydWUKICAgICAgICAgIGNvbnNvbGUubG9nKHRoaXMuaW5mbywgJ2luZm8xaW5mbzFpbmZvMWluZm8xaW5mbzEnKQogICAgICAgICAgLy8g6Ieq5oiR5ri454m55Y2W5pe26ZyA6LCD55So5pel5Y6G5o6l5Y+jICjljaHliLjmnInmlYjmnJ/nsbvlnovkuLogMyw0LDUpCiAgICAgICAgICBpZiAodGhpcy5pbmZvLnN1cHBsaWVyQ29kZSA9PSAnUEFSVFlfWldZJykgewogICAgICAgICAgICAvLyDoh6rmiJHmuLjmmL7npLrkvJrlkZjku7fvvIjpgInmi6nml6XmnJ/lkI7ov5nph4znmoTku7fmoLzkuI3lj5jvvIkKICAgICAgICAgICAgdGhpcy4kc2V0KHRoaXMuaW5mbywgJ3RyYXZlbFByaWNlJywgaW5mbzIuc2VsbFByaWNlKQogICAgICAgICAgICBpZiAodGhpcy5zZWxEYXRlLnNlbGxQcmljZSB8fCB0aGlzLnNlbERhdGUuc2VsbFByaWNlID09IDApIHsgLy8g5Yik5pat5bey6YCJ5oup55qE5Lu35qC8CiAgICAgICAgICAgICAgdGhpcy4kc2V0KHRoaXMuaW5mbywgJ3NlbGxQcmljZScsIHRoaXMuc2VsRGF0ZS5zZWxsUHJpY2UpCiAgICAgICAgICAgICAgdGhpcy4kc2V0KHRoaXMuaW5mbywgJ25vVmlwUHJpY2UnLCB0aGlzLnNlbERhdGUubm9WaXBQcmljZSkKICAgICAgICAgICAgfQoKICAgICAgICAgICAgaWYgKFszLCA0LCA1XS5pbmNsdWRlcyhpbmZvMS52YWxpZGl0eVR5cGUpKSB7CiAgICAgICAgICAgICAgLy8g5Yik5pat6YCJ5a6a5pel5pyf77yM5pi+56S65pel5Y6GCiAgICAgICAgICAgICAgLy8gdGhpcy50cmF2ZWxBY3RNb250aCgpCiAgICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy5pbmZvLmxpbWl0VGltZSA+IDApIHsKCiAgICAgICAgICAgICAgLy8g5Yik5pat5b2T5YmN5pe26Ze05piv5ZCm5Y+v6LSt5LmwIAogICAgICAgICAgICAgIGxldCBsaW1pdFRpbWUgPSB0aGlzLmluZm8ubGltaXRUaW1lCiAgICAgICAgICAgICAgbGV0IGRhdGUgPSBuZXcgRGF0ZSgpCiAgICAgICAgICAgICAgbGV0IGggPSBkYXRlLmdldEhvdXJzKCkgPiA5ID8gZGF0ZS5nZXRIb3VycygpICsgJycgOiAnMCcgKyBkYXRlLmdldEhvdXJzKCkKICAgICAgICAgICAgICB2YXIgbSA9IGRhdGUuZ2V0TWludXRlcygpID4gOSA/IGRhdGUuZ2V0TWludXRlcygpICsgJycgOiAnMCcgKyBkYXRlLmdldE1pbnV0ZXMoKQogICAgICAgICAgICAgIGxldCBkYXlUaW1lID0gaCArIG0KICAgICAgICAgICAgICBpZiAoZGF5VGltZSA+IGxpbWl0VGltZSkgewogICAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7CiAgICAgICAgICAgICAgICAgIHRoaXMuaGFuZGxlckJ0bign5b2T5YmN5LiN5Y+v6LSt5LmwJywgdHJ1ZSkKICAgICAgICAgICAgICAgIH0sIDUwMCkKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICAgIHRoaXMuaGFuZGxlckJ0bih0aGlzLmluZm8uY2FyZFR5cGUgPT09ICdDQVJEX0RJUkVDVF9SRUNIQVJHRScgPyAn56uL5Y2z5YWF5YC8JyA6ICfnq4vljbPotK3kubAnKQogICAgICAgICAgLy8g5LuF6ZmQ5Lya5ZGY6LSt5Lmw77yM6Z2e5Lya5ZGY5pi+56S6CiAgICAgICAgICBpZiAoaW5mbzIuYnV5TGltaXQgPT0gMiAmJiAhdGhpcy52aXBVc2VyKSB7CiAgICAgICAgICAgIHRoaXMuaGFuZGxlckJ0bign5byA6YCa5bm26LSt5LmwJykKICAgICAgICAgIH0KCiAgICAgICAgICAvLyDku4XpmZDkvJrlkZjotK3kubDkuJTkvJrlkZjllK7ku7fkuLow77yM6Z2e5Lya5ZGY6KeG6KeSCiAgICAgICAgICBpZiAoaW5mbzIuYnV5TGltaXQgPT0gMiAmJiAhaW5mbzIuc2VsbFByaWNlICYmICF0aGlzLnZpcFVzZXIpIHsKICAgICAgICAgICAgdGhpcy5oYW5kbGVyQnRuKCflvIDpgJrlubbpooblj5YnKQogICAgICAgICAgICB0aGlzLm9wZW5fcmVjZWl2ZSA9IHRydWUgLy8g5qCH5b+X5piv5byA6YCa5bm26aKG5Y+W5oyJ6ZKuCiAgICAgICAgICB9CiAgICAgICAgICBpZiAodGhpcy5pbmZvLnJlbWFpbk51bSA+IDAgfHwgdGhpcy5pbmZvLmNhcmRUeXBlID09PSAnQ0FSRF9ESVJFQ1RfUkVDSEFSR0UnKSB7CiAgICAgICAgICAgIGlmICh0aGlzLmluZm8uY2hhbm5lbFR5cGUgPT0gJ0NIQU5ORUxfQ09OU1VNRVJfQ09VUE9OJyB8fCB0aGlzLmluZm8uY2hhbm5lbFR5cGUgPT0gJ0NIQU5ORUxfRk9SVFVORV9DT1VQT04nKSB7CiAgICAgICAgICAgICAgLy8g5raI6LS55Yi45rig6YGT5pe277yM5Yik5pat5Y6f5Lu3CiAgICAgICAgICAgICAgaWYgKGluZm8yLndvcnRoID09IDApIHsKICAgICAgICAgICAgICAgIHRoaXMuaGFuZGxlckJ0bign56uL5Y2z6aKG5Y+WJykKICAgICAgICAgICAgICAgIHRoaXMuZnJlZSA9IHRydWUgLy/lj6/ku6XlhY3otLnpooblj5YKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgaWYgKCghaW5mbzIuc2VsbFByaWNlICYmIHRoaXMudmlwVXNlcikgfHwgKGluZm8yLmJ1eUxpbWl0ID09IDEgJiYgIWluZm8yLnNlbGxQcmljZSAmJiAhaW5mbzIubm9WaXBQcmljZSkpIHsKICAgICAgICAgICAgICAgIHRoaXMuaGFuZGxlckJ0bign56uL5Y2z6aKG5Y+WJykKICAgICAgICAgICAgICAgIHRoaXMuZnJlZSA9IHRydWUgLy/lj6/ku6XlhY3otLnpooblj5YKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgCiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAvLyDlupPlrZjkuLow5pe2CiAgICAgICAgICAgIGlmIChjb250YXRpb24pIHsKICAgICAgICAgICAgICB0aGlzLmhhbmRsZXJCdG4oJ+W3sumihuWujCcsIHRydWUpCiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgdGhpcy5oYW5kbGVyQnRuKCflt7LllK7nvYQnLCB0cnVlKQogICAgICAgICAgICB9CiAgICAgICAgICB9CgogICAgICAgICAgaWYgKGluZm8yLmFjdFN0YXRlID09IDMgfHwgaW5mbzIuYWN0U3RhdGUgPT0gNCB8fCBpbmZvMi5hY3RTdGF0ZSA9PSA1KSB7CiAgICAgICAgICAgIC8v5ZSu5Lu36YO95Li6MAogICAgICAgICAgICBpZiAoY29udGF0aW9uKSB7CiAgICAgICAgICAgICAgdGhpcy5oYW5kbGVyQnRuKCflt7LpooblrownLCB0cnVlKQogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIHRoaXMuaGFuZGxlckJ0bign5bey5ZSu572EJywgdHJ1ZSkKICAgICAgICAgICAgfQogICAgICAgICAgfQoKICAgICAgICAgIGlmIChpbmZvMi5hY3RTdGF0ZSA9PSAxKSB7CiAgICAgICAgICAgIHRoaXMuaGFuZGxlckJ0bign5rS75Yqo5pyq5byA5aeLJywgdHJ1ZSkKICAgICAgICAgIH0gZWxzZSBpZiAoaW5mbzIuYWN0U3RhdGUgPT0gMjApIHsKICAgICAgICAgICAgLy8g6Ieq5oiR5ri45Y2h5Yi45b2T5YmN5pe26Ze05LiN5Y+v6LSt5LmwCiAgICAgICAgICAgIHRoaXMuaGFuZGxlckJ0bign5b2T5YmN5LiN5Y+v6LSt5LmwJywgdHJ1ZSkKICAgICAgICAgIH0KCiAgICAgICAgICBsZXQgdG90YWxOdW0gPSBOdW1iZXIodGhpcy5yZWFsSW5mby51c2VyQnV5TnVtKSArIE51bWJlcih0aGlzLnJlYWxJbmZvLnVzZXJGcmVlUmVjZWl2ZU51bSkgLy8g5b2T5YmN55So5oi355qE6LSt5Lmw5pWw6YeP5ZKM6aKG5Y+W5pWw6YeP5oC75ZKMCgogICAgICAgICAgLy8g5piv5ZCm6ZmQ5Yi26LSt5LmwCiAgICAgICAgICBpZiAoaW5mbzIubGltaXRTdGF0ZSkgewogICAgICAgICAgICBpZiAodG90YWxOdW0gPj0gaW5mbzIubGltaXRGcmVxdWVuY3kpIHsKCiAgICAgICAgICAgICAgLy8g55So5oi35oC75oiQ5Yqf6LSt5Lmw5pWw6YeP5aSn5LqO6ZmQ5Yi26LSt5Lmw5pWw6YePCiAgICAgICAgICAgICAgdGhpcy5oYW5kbGVyQnRuKCflt7LotK3kubAnLCB0cnVlKQogICAgICAgICAgICB9CgogICAgICAgICAgICBpZiAoKHRvdGFsTnVtID49IGluZm8yLmxpbWl0RnJlcXVlbmN5KSAmJiBjb250YXRpb24pIHsKCiAgICAgICAgICAgICAgLy8g5b2T5YmN55So5oi35b2T5YmN5rS75Yqo5Lit5oC75YWN6LS56aKG5Y+W5pWw6YeP5aSn5LqO6ZmQ5Yi26aKG5Y+W5pWw6YePCiAgICAgICAgICAgICAgdGhpcy5oYW5kbGVyQnRuKCflt7Lpooblj5YnLCB0cnVlKQogICAgICAgICAgICB9CiAgICAgICAgICB9CgogICAgICAgICAgdGhpcy5zaG93QnRuVHh0ID0gdHJ1ZQoKICAgICAgICAgIAoKICAgICAgICAgIC8vIC4uLi4uLi4uLi4uLi4uLi4u5LyY5YyW5paw5aKeLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLgogICAgICAgICAgLy8g5Yik5pat5LuO6ZmQ6LSt6L+b5YWlCiAgICAgICAgICBpZiAoaW5mbzIuY2hpbGRFbnVtS2V5ID09ICdBQ1RfU1BFQ0lBTF9PRkZFUl9QVVJDSEFTRV9MSU1JVCcpIHsKICAgICAgICAgICAgaWYgKCF0aGlzLmluZm8ucmVtYWluTnVtKSB7CiAgICAgICAgICAgICAgdGhpcy5oYW5kbGVyQnRuKCflt7LmiqLlrownLCB0cnVlKQogICAgICAgICAgICAgIHJldHVybgogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmIChyZXMuaW5mby5hY3RTdGF0ZSA9PSAxMSB8fCByZXMuaW5mby5hY3RTdGF0ZSA9PSAzKSB7CiAgICAgICAgICAgICAgdGhpcy5oYW5kbGVyQnRuKCflt7LmiqLlrownLCB0cnVlKQogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIC8vIGlmIChyZXMuaW5mby5saW1pdEFjdFN0YXRlID09IDgpIHsKICAgICAgICAgICAgICAvLyAgIHRoaXMuaGFuZGxlckJ0bign6aKE57qm5o+Q6YaSJywgZmFsc2UpCiAgICAgICAgICAgICAgLy8gfSBlbHNlIGlmIChyZXMuaW5mby5saW1pdEFjdFN0YXRlID09IDkpIHsKICAgICAgICAgICAgICAvLyAgIHRoaXMuaGFuZGxlckJ0bign5bey6aKE57qmJywgZmFsc2UpCiAgICAgICAgICAgICAgLy8gfSAKICAgICAgICAgICAgICBpZiAocmVzLmluZm8ubGltaXRBY3RTdGF0ZSA9PSA4IHx8IHJlcy5pbmZvLmxpbWl0QWN0U3RhdGUgPT0gOSkgewogICAgICAgICAgICAgICAgdGhpcy5oYW5kbGVyQnRuKCfmnKrlvIDlp4snLCB0cnVlKQogICAgICAgICAgICAgIH0gZWxzZSBpZiAocmVzLmluZm8ubGltaXRBY3RTdGF0ZSA9PSAxKSB7CiAgICAgICAgICAgICAgICB0aGlzLmhhbmRsZXJCdG4oJ+eri+WNs+aKoui0rScsIGZhbHNlKQogICAgICAgICAgICAgIH0gZWxzZSBpZiAocmVzLmluZm8ubGltaXRBY3RTdGF0ZSA9PSAxMCkgewogICAgICAgICAgICAgICAgdGhpcy5oYW5kbGVyQnRuKCflt7LotK3kubAnLCB0cnVlKQogICAgICAgICAgICAgIH0gZWxzZSBpZiAocmVzLmluZm8ubGltaXRBY3RTdGF0ZSA9PSAzKSB7CiAgICAgICAgICAgICAgICB0aGlzLmhhbmRsZXJCdG4oJ+W3suaKouWujCcsIHRydWUpCiAgICAgICAgICAgICAgfSBlbHNlIGlmIChyZXMuaW5mby5saW1pdEFjdFN0YXRlID09IDIpIHsKICAgICAgICAgICAgICAgIHRoaXMuaGFuZGxlckJ0bign5bey5oqi5a6MJywgdHJ1ZSkKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KCiAgICAgICAgICAvLyDliKTmlq3kuLrlhZHmjaLkuK3lv4Pov5vlhaUKICAgICAgICAgIGlmICh0aGlzLm9wdGlvbnMuaGFzRXhjaGFuZ2UgIT0gJycpIHsKICAgICAgICAgICAgbGV0IGV4Y2hhbmdlX2RhdGEgPSB0aGlzLmV4Y2hhbmdlX2RhdGEgLy8g5YWR5o2i5Lit5b+D5rS75Yqo5pWw5o2uCgogICAgICAgICAgICBpZiAoZXhjaGFuZ2VfZGF0YS5oYXNFeGNoYW5nZSkgewogICAgICAgICAgICAgIHRoaXMuaGFuZGxlckJ0bign5bey5YWR5o2iJywgdHJ1ZSkKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICBpZiAoZXhjaGFuZ2VfZGF0YS5yZW1haW5OdW0gPiAwKSB7CiAgICAgICAgICAgICAgICBpZiAoZXhjaGFuZ2VfZGF0YS5zdGF0ZSAhPSAyKSB7CiAgICAgICAgICAgICAgICAgIHRoaXMuaGFuZGxlckJ0bign5bey57uT5p2fJywgdHJ1ZSkKICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgIGlmIChleGNoYW5nZV9kYXRhLmNvbmRpdGlvbikgewogICAgICAgICAgICAgICAgICAgIHRoaXMuaGFuZGxlckJ0bign56uL5Y2z5YWR5o2iJywgZmFsc2UpCiAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5oYW5kbGVyQnRuKCfnq4vljbPlhZHmjaInLCB0cnVlKQogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIHRoaXMuaGFuZGxlckJ0bign5bey5YWR5a6MJywgdHJ1ZSkKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KCiAgICAgICAgICAvLyDlpoLmnpzpnIDopoHmmL7npLrlgJLorqHml7YKICAgICAgICAgIGlmIChpbmZvMi5zaG93VGltZSAmJiBpbmZvMi5jaGlsZEVudW1LZXkgIT0gJ0FDVF9TUEVDSUFMX09GRkVSX1BVUkNIQVNFX0xJTUlUJykgewogICAgICAgICAgICAvLyAuLi4uLi4uLi4uLi4uLi4uLi7kvJjljJbnu5PmnZ8uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLgogICAgICAgICAgICBjbGVhckludGVydmFsKHRoaXMudGltZXIpCiAgICAgICAgICAgIHZhciByZW1haW5UaW1lID0gdGhpcy5yZW1haW5UaW1lCiAgICAgICAgICAgIHRoaXMudGltZXIgPSBzZXRJbnRlcnZhbCgoKSA9PiB7CiAgICAgICAgICAgICAgaWYgKHJlbWFpblRpbWUgPj0gMTAwMCkgewogICAgICAgICAgICAgICAgcmVtYWluVGltZSAtPSAxMDAwCiAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIGNsZWFySW50ZXJ2YWwodGhpcy50aW1lcikKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgdGhpcy5yZW1haW5UaW1lID0gcmVtYWluVGltZSB8fCAwCiAgICAgICAgICAgIH0sIDEwMDApCiAgICAgICAgICB9CiAgICAgICAgICAvLyB0aGlzLmdldENhc2hOdW0oKSAvLyDojrflj5blvZPliY3mtLvliqjlj6/nlKjmirXmiaPmnIDlpKfph5Hpop3nuqLljIUKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdGhpcy5iYWNrX3RvKHJlcykKICAgICAgICB9CiAgICAgIH0pLmZpbmFsbHkoKCkgPT4gewogICAgICAgIHRoaXMuJFRvYXN0LmNsZWFyKCkKICAgICAgfSkKICAgIH0sCiAgICAvLyDojrflj5bmtLvliqjljaHliLjor6bmg4UKICAgIGdldENvdXBEZXRhaWwoKSB7CiAgICAgIHJldHVybiB0aGlzLiRhcGkuYWN0X2NhcmRfZGV0YWlsKHsKICAgICAgICBjYXJkSWQ6IHRoaXMuY2FyZElkLAogICAgICAgIGRldGFpbElkOiB0aGlzLmRldGFpbElkLAogICAgICAgIGFjdFNuOiB0aGlzLm9wdGlvbnMuYWN0U24KICAgICAgfSkudGhlbihyZXMgPT4gewogICAgICAgIGlmIChyZXMuc3RhdGUpIHsKICAgICAgICAgIHRoaXMuaW5mbyA9IHsgLi4udGhpcy5pbmZvLCAuLi5yZXMuaW5mbyB9CiAgICAgICAgICB0aGlzLm1lZGlhTGlzdCA9IHJlcy5pbmZvLm1lZGlhTGlzdAogICAgICAgICAgaWYocmVzLmluZm8uc2hvcFNob3cpIHsKICAgICAgICAgICAgdGhpcy5nZXRTdWl0U2hvcHMoKSAKICAgICAgICAgIH0KICAgICAgICAgIC8vIOiHquaIkea4uOWNoeWIuOaXtuWVhuWutuivpuaDheaYvuekuuS4uuWbvuaWh+ivpuaDhQogICAgICAgICAgaWYgKHRoaXMuaW5mby5kZXNjcmliZSkgewogICAgICAgICAgICB0aGlzLmdyYXBoaWNEZXRhaWwgPSB0aGlzLmluZm8uZGVzY3JpYmUKICAgICAgICAgIH0KICAgICAgICAgIHRoaXMuZ2V0Rml4ZWREZXRhaWwocmVzLmluZm8uc2hvcFNuKSAvLyDojrflj5bllYblrrbor6bmg4UKICAgICAgICB9IGVsc2UgewogICAgICAgICAgLy8gdGhpcy5iYWNrX3RvKHJlcykKICAgICAgICB9CiAgICAgIH0pCiAgICB9LAoKCiAgICAvLyDnibnljZbmtLvliqjnibnmnInkv6Hmga8KICAgIGdldFNwZWNpYWxJbmZvKCkgewogICAgICByZXR1cm4gdGhpcy4kYXBpLnNwZWNpYWxfc2VsbF9pbmZvKHsKICAgICAgICBjaGFubmVsVHlwZTogdGhpcy5vcHRpb25zLmNoYW5uZWxUeXBlIHx8ICcnLAogICAgICAgIHFyQ29kZTogdGhpcy5vcHRpb25zLnFyQ29kZSB8fCAnJywKICAgICAgICBhY3RTbjogdGhpcy5vcHRpb25zLmFjdFNuCiAgICAgIH0pLnRoZW4ocmVzID0+IHsKICAgICAgICBjb25zb2xlLmxvZygnc3BlY2lhbF9zZWxsX2luZm8nLCByZXMuaW5mbykKICAgICAgICBpZiAocmVzLnN0YXRlKSB7CiAgICAgICAgICB0aGlzLmNhcmRJZCA9IHJlcy5pbmZvLmNhcmRJZCwKICAgICAgICAgIHRoaXMuZGV0YWlsSWQgPSByZXMuaW5mby5kZXRhaWxJZAogICAgICAgICAgdGhpcy5pbmZvID0gey4uLnRoaXMuaW5mbywgLi4ucmVzLmluZm99CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIC8vIHRoaXMuYmFja190byhyZXMpCiAgICAgICAgfQogICAgICB9KQogICAgfSwKCiAgICAvLyDojrflj5bllYblrrblm7rlrprkv6Hmga8KICAgIGdldEZpeGVkRGV0YWlsKHNob3BTbikgewogICAgICB0aGlzLiRhcGkuc2hvcF9maXhlZF9kZXRhaWwoewogICAgICAgIHNob3BTbiwKICAgICAgICBsYXQ6IHRoaXMubG9jYXRpb25JbmZvLmxhdGl0dWRlLAogICAgICAgIGxuZzogdGhpcy5sb2NhdGlvbkluZm8ubG9uZ2l0dWRlCiAgICAgIH0pLnRoZW4ocmVzID0+IHsKICAgICAgICBpZiAocmVzLnN0YXRlKSB7CiAgICAgICAgICB0aGlzLmZpeGVkRGV0YWlsID0gcmVzLmluZm8uc2hvcAogICAgICAgICAgaWYoIXRoaXMuaW5mby5kZXNjcmliZSkgewogICAgICAgICAgICB0aGlzLmdyYXBoaWNEZXRhaWwgPSByZXMuaW5mby5zaG9wLmRldGFpbAogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSkKICAgIH0sCgogICAgLy8g5YWz6Zet57qi5YyF5YiX6KGoCiAgICBjb2xzZWNhc2hNYXNrKCkgewogICAgICB0aGlzLmNhc2hNYXNrID0gIXRoaXMuY2FzaE1hc2sKICAgIH0sCgogICAgLy8g6I635Y+W5rS75Yqo57qi5YyF5b2T5YmN5Lqr55So5pyA5aSn57qi5YyFCiAgICBnZXRDYXNoTnVtKCkgewogICAgICB0aGlzLiRUb2FzdC5sb2FkaW5nKHsgCiAgICAgICAgbWVzc2FnZTogJ+WKoOi9veS4rS4uLicsCiAgICAgICAgZm9yYmlkQ2xpY2s6IHRydWUsCiAgICAgICAgZHVyYXRpb246IDAKICAgICAgfSkKICAgICAgbGV0IHZpcF9jaGVjayA9ICghdGhpcy52aXBVc2VyICYmIHRoaXMuaW5mby5idXlMaW1pdCA9PSAyKSA/IHRydWUgOiBmYWxzZQogICAgICBsZXQgcHJpY2UgPSAodGhpcy5pbmZvLmJ1eUxpbWl0ID09IDIgfHwgdGhpcy52aXBVc2VyKSA/IHRoaXMuaW5mby5zZWxsUHJpY2UgOiB0aGlzLmluZm8ubm9WaXBQcmljZQogICAgICAKICAgICAgdGhpcy4kYXBpLmNhc2hfcmVkX2xpc3QoewogICAgICAgIGFjdFNuOiB0aGlzLm9wdGlvbnMuYWN0U24sCiAgICAgICAgY2l0eUlkOiB0aGlzLmxvY2F0aW9uQ2l0eS5jaXR5SWQsCiAgICAgICAgb3BlblZpcDogdmlwX2NoZWNrLCAvLyDmmK/lkKbli77pgInkvJrlkZjljaEKICAgICAgICB2aXBGZWU6IHZpcF9jaGVjayA/IHRoaXMudmlwRmVlIDogMCwgLy8g5Lya5ZGY5Y2h6YeR6aKdCiAgICAgICAgYWN0RmVlOiBwcmljZSwgLy8g5rS75Yqo6YeR6aKdCiAgICAgICAgY2FyZElkOiB0aGlzLmluZm8uY2FyZElkLCAvLyDnibnljZbljaHliLhpZCB8fCDnpLzljIXkvKDnqboKICAgICAgfSkudGhlbihyZXMgPT4gewogICAgICAgIGlmIChyZXMuc3RhdGUpIHsKICAgICAgICAgIGxldCByZWRMaXN0ID0gcmVzLmluZm8uY2FzaFJlZExpc3QgfHwgW10KICAgICAgICAgIGxldCBjb25zdW1lckNvdXBvbkxpc3QgPSByZXMuaW5mby5jb25zdW1lckNvdXBvbkxpc3QgfHwgW10KICAgICAgICAgIGxldCB1c2FibGVMaXN0ID0gcmVkTGlzdC5maWx0ZXIoKGl0ZW0pID0+IGl0ZW0uY3VycmVudEFibGVVc2UpIC8vIOi/h+a7pOWPr+eUqOe6ouWMhQogICAgICAgICAgbGV0IHNvcnRVc2FibGVMaXN0ID0gdXNhYmxlTGlzdC5zb3J0KGZ1bmN0aW9uIChhLCBiKSB7IC8vIOmZjeW6j+aOkuW6jwogICAgICAgICAgICByZXR1cm4gYi5tb25leSAtIGEubW9uZXkKICAgICAgICAgIH0pCiAgICAgICAgICB0aGlzLnNlbENhc2hyZWQgPSBzb3J0VXNhYmxlTGlzdFswXSAvLyDpgInkuK3mnIDlpKfnuqLljIUKICAgICAgICAgIGlmIChjb25zdW1lckNvdXBvbkxpc3QubGVuZ3RoKSB7CiAgICAgICAgICAgIHRoaXMuc2VsQ29uc3VtZXIgPSBjb25zdW1lckNvdXBvbkxpc3RbMF0gfHwge30gLy8g6YCJ5Lit5raI6LS55Yi4CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9KS5maW5hbGx5KCgpID0+IHsKICAgICAgICB0aGlzLiRUb2FzdC5jbGVhcigpCiAgICAgIH0pCiAgICB9LAoKICAgIC8vIOiOt+WPluS8muWRmOWNoeacgOS9juS7t+agvAogICAgdmlwUHJpY2UoKSB7CiAgICAgIHRoaXMuJGFwaS52MV80X3ZpcF9sb3dQcmljZSh7CiAgICAgICAgdG9waWNUeXBlOiAxLAogICAgICAgIHRvcGljU246IHRoaXMub3B0aW9ucy5hY3RTbgogICAgICB9KS50aGVuKHJlcyA9PiB7CiAgICAgICAgaWYgKHJlcy5zdGF0ZSkgewogICAgICAgICAgdGhpcy52aXBGZWUgPSByZXMuaW5mbyA/IHJlcy5pbmZvLmxvd1ByaWNlIHx8IDAgOiAwCiAgICAgICAgfQogICAgICB9KQogICAgfSwKCiAgICAvLyDlhbPpl63nuqLljIXlvLnnqpfml7YKICAgIGhhc0NhY2hSZWRMaXN0KHsgZGV0YWlsIH0pIHsKICAgICAgaWYgKGRldGFpbCAmJiBkZXRhaWwubGVuZ3RoID4gMCkgewogICAgICAgIC8vIOmHjeaWsOivt+axgue6ouWMheaOpeWPowogICAgICAgIC8vIHRoaXMuc2VsZWN0Q29tcG9uZW50KCcjYWN0aXZlQ2FzaCcpLmdldENhc2hMaXN0KCkKICAgICAgICB0aGlzLmdldENhc2hOdW0oKQogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuc2hvd1BhZ2VNb2RlbCA9IHRydWUKICAgICAgfQogICAgfSwKCiAgICAvLyDoh6rmiJHmuLjmtLvliqjor6bmg4XpgInmi6nku7fmoLwKICAgIC8vIHNlbERhdGVMaXN0KHsgY3VycmVudFRhcmdldCB9KSB7CiAgICAvLyAgIGxldCBpdGVtID0gY3VycmVudFRhcmdldC5kYXRhc2V0Lml0ZW0KICAgIC8vICAgbGV0IGRhdGUgPSB7CiAgICAvLyAgICAgdGV4dDogaXRlbS5kYXRlLnN1YnN0cigwLCA2KSwKICAgIC8vICAgICBtb250aDogaXRlbS5kYXRlLnN1YnN0cig0LCAyKSwKICAgIC8vICAgICB5ZWFyOiBpdGVtLmRhdGUuc3Vic3RyKDAsIDQpLAogICAgLy8gICAgIGRheTogaXRlbS5kYXRlLnN1YnN0cig2LCAyKQogICAgLy8gICB9CiAgICAvLyAgIHRoaXMuc2VsZWN0Q29tcG9uZW50KCIjY2FsZW5kYXIiKS5zaG93Q2FsZW5kYXJEYXRhKGRhdGUpCiAgICAvLyAgIHRoaXMub3BlbkNhbGVuZGFyKCkgLy8g5pi+56S65pel5Y6G5by556qXCiAgICAvLyB9LAoKICAgIG9wZW5DYWxlbmRhcigpIHsKICAgICAgdGhpcy5jYWxlbmRhck1hc2sgPSB0cnVlCiAgICB9LAoKICAgIHRyYXZlbE1vbnRoSW5mbyAoeyBkZXRhaWwgfSkgewogICAgICAvLyDmjqXmlLbml6Xljobkv6Hmga8KICAgICAgaWYgKGRldGFpbC5kYXRhVHlwZSA9PSAnaW5pdCcpIHsKICAgICAgICAvLyDml6XljobliJ3lp4vljJbmlbDmja4KICAgICAgICB0aGlzLnRyYXZlbE1vbnRoSW5mbyA9IGRldGFpbAogICAgICAgIGlmIChkZXRhaWwudW5hYmxlQnV5KSB7CiAgICAgICAgICB0aGlzLmhhbmRsZXJCdG4oJ+W9k+WJjeS4jeWPr+i0reS5sCcsIHRydWUpCiAgICAgICAgfQogICAgICB9IGVsc2UgaWYgKGRldGFpbC5kYXRhVHlwZSA9PSAnc2VsRGF0ZScpewogICAgICAgIC8vIOmAieaLqeaXpeWOhuS/oeaBrwogICAgICAgIGxldCBpbmZvID0gdGhpcy5pbmZvCiAgICAgICAgaW5mby5zZWxsUHJpY2UgPSBkZXRhaWwuc2VsbFByaWNlCiAgICAgICAgaW5mby5ub1ZpcFByaWNlID0gZGV0YWlsLm5vVmlwUHJpY2UKICAgICAgICB0aGlzLmluZm8gPSBpbmZvCiAgICAgICAgdGhpcy5zZWxEYXRlID0gZGV0YWlsCiAgICAgIH0KICAgIH0sCgogICAgZ2V0UmVjZWl2ZUNvbmRpdGlvbiAoKSB7CiAgICAgIHJldHVybiB0aGlzLiRhcGkucmVjZWl2ZV9jb25kaXRpb24oewogICAgICAgIGFjdFNuOiB0aGlzLm9wdGlvbnMuYWN0U24KICAgICAgfSkudGhlbihyZXM9PiB7CiAgICAgICAgaWYgKHJlcy5zdGF0ZSkgewogICAgICAgICAgdGhpcy5jb25kaXRpb25JbmZvID0gcmVzLmluZm8KICAgICAgICB9CiAgICAgIH0pCiAgICB9LAogIH0sCiAgCiAgY3JlYXRlZCgpIHsKICAgIGNvbnN0IG9wdGlvbnMgPSB0aGlzLiRyb3V0ZS5xdWVyeQogICAgb3B0aW9ucy5oYXNFeGNoYW5nZSA9IG9wdGlvbnMuaGFzRXhjaGFuZ2UgfHwgJycKICAgIG9wdGlvbnMudHlwZSA9IG9wdGlvbnMudHlwZSB8fCAnJwogICAgdGhpcy5vcHRpb25zID0gb3B0aW9ucwogICAgaWYgKG9wdGlvbnMucG9wdXApIHsKICAgICAgdGhpcy4kZGlhbG9nLmFsZXJ0KHsKICAgICAgICB0aXRsZTogJ+aPkOekuicsCiAgICAgICAgbWVzc2FnZTogJ+iuouWNlei2heaXtuW3suWPlua2iO+8jOivt+mHjeaWsOS4i+WNlScsCiAgICAgICAgY29uZmlybUJ1dHRvblRleHQ6ICfnoa7lrponLAogICAgICAgIGNvbmZpcm1CdXR0b25Db2xvcjogJyNEOTA2MzQnCiAgICAgIH0pCiAgICB9CiAgICB0aGlzLmdldEFjdERldGFpbCh0cnVlKQogICAgdGhpcy52aXBQcmljZSgpCiAgICBpZiAodGhpcy5vcHRpb25zLmhhc0V4Y2hhbmdlICE9ICcnKSB7IC8vIOWIpOaWreS4uuWFkeaNouS4reW/g+i/m+WFpQogICAgICB0aGlzLmV4Y2hhbmdlX2RhdGEgPSB0aGlzLiRzYXZlLmdldCgnc2Vzc2lvbicsICdleGNoYW5nZV9kYXRhJykgLy8g5YWR5o2i5Lit5b+D5rS75Yqo5pWw5o2uCiAgICB9CiAgICB0aGlzLmdldFJlY2VpdmVDb25kaXRpb24oKSAvLyDmmK/lkKbpnIDopoHloavlhpnnlKjmiLfkv6Hmga/lj4rlhbbmnaHku7YKCiAgICB0aGlzLm5lZWRBdXRoID0gdGhpcy5uZWVkQXV0aAogICAgdGhpcy5nZXRGcmVlQmFnID0gdGhpcy5nZXRGcmVlQmFnCiAgICB0aGlzLnZpcFVzZXIgPSB0aGlzLnZpcENhcmRJbmZvLnZpcFVzZXIKICAgIHRoaXMuc2VsQ2FzaHJlZCA9IHt9CiAgICBpZiAodGhpcy5hY3REZXRhbFVwZGF0ZSkgewogICAgICAvLyDliLfmlrDmtLvliqjmlbDmja4KICAgICAgdGhpcy5nZXRBY3REZXRhaWwodHJ1ZSkKICAgICAgdGhpcy5hY3REZXRhbFVwZGF0ZSA9IGZhbHNlCiAgICB9CgogICAgLy8g5rS75Yqo5Lu35qC85Yi35pawCiAgICBpZih0aGlzLnVwZGF0ZUZsYWcpIHsKICAgICAgdGhpcy5yZWZyZXNoID0gdHJ1ZQogICAgfQoKICAgIC8vIOeUqOaIt+S/oeaBr+aVsOaNrgogICAgbGV0IHRyYXZlbEluZm9ybWF0aW9uID0gdGhpcy4kc2F2ZS5nZXQoJ3Nlc3Npb24nLCAndHJhdmVsSW5mb3JtYXRpb24nKQogICAgaWYgKHRyYXZlbEluZm9ybWF0aW9uKSB7CiAgICAgIHRoaXMudHJhY3ZlbFVzZXJMaXN0ID0gdHJhdmVsSW5mb3JtYXRpb24uZm9ybUxpc3QKICAgICAgdGhpcy5zZWxEYXRlID0gdHJhdmVsSW5mb3JtYXRpb24uc2VsRGF0ZQogICAgICAKICAgICAgaWYgKHRoaXMub3B0aW9ucy5oYXNFeGNoYW5nZSAhPSAnJykgewogICAgICAgIHRoaXMuZXhjaGFuZ2UoKQogICAgICB9IGVsc2UgaWYgKHRoaXMuZnJlZSkgewogICAgICAgIC8vIOWFjei0uemihuWPlgogICAgICAgIHRoaXMuZ2V0RnJlZSgpCiAgICAgIH0KICAgIH0KICB9LAogIGFjdGl2YXRlZCgpIHsKCiAgfSwKICBkZXN0cm95ZWQoKSB7CiAgICAvLyDmuIXpmaTnlKjmiLfloavlhpnkv6Hmga8KICAgIHRoaXMuJHNhdmUucmVtb3ZlQXJyKCdzZXNzaW9uJywgIFsndHJhdmVsSW5mb3JtYXRpb24nLCAndXBkYXRlRmxhZyddKQogIH0KfQo="},null]}