{"remainingRequest":"C:\\Users\\Administrator\\Desktop\\vip_inline_h5\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Administrator\\Desktop\\vip_inline_h5\\src\\views\\active\\specialSale.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\Administrator\\Desktop\\vip_inline_h5\\src\\views\\active\\specialSale.vue","mtime":1597889072574},{"path":"C:\\Users\\Administrator\\Desktop\\vip_inline_h5\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Administrator\\Desktop\\vip_inline_h5\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\Administrator\\Desktop\\vip_inline_h5\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Administrator\\Desktop\\vip_inline_h5\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IG1hcEdldHRlcnMsIG1hcEFjdGlvbnMsIG1hcE11dGF0aW9ucyB9IGZyb20gInZ1ZXgiOwppbXBvcnQgc2Vja2lsbE1peGluIGZyb20gJ0AvbWl4aW5zL3NlY2tpbGxNaXhpbicgCmltcG9ydCBhY3RpdmVCcmFuZCBmcm9tICdAY29tcG9uZW50cy9hY3RpdmUvYWN0aXZlQnJhbmQnCmltcG9ydCBhY3RpdmVOb3RpY2UgZnJvbSAnQGNvbXBvbmVudHMvYWN0aXZlL2FjdGl2ZU5vdGljZScKaW1wb3J0IGFjdGl2ZUdyYXBoaWMgZnJvbSAnQGNvbXBvbmVudHMvYWN0aXZlL2FjdGl2ZUdyYXBoaWMnCmltcG9ydCBhY3RpdmVSb29tIGZyb20gJ0Bjb21wb25lbnRzL2FjdGl2ZS9hY3RpdmVSb29tJwppbXBvcnQgYWN0aXZlSGVhZGVyIGZyb20gJ0Bjb21wb25lbnRzL2FjdGl2ZS9hY3RpdmVIZWFkZXInCmltcG9ydCBhY3RpdmVDb3Vwb24gZnJvbSAnQGNvbXBvbmVudHMvYWN0aXZlL2FjdGl2ZUNvdXBvbicKaW1wb3J0IGFjdGl2ZUNhc2ggZnJvbSAnQGNvbXBvbmVudHMvYWN0aXZlL2FjdGl2ZUNhc2gnCmltcG9ydCBhY3RpdmVGb290ZXIgZnJvbSAnQGNvbXBvbmVudHMvYWN0aXZlL2FjdGl2ZUZvb3RlcicKaW1wb3J0IGFjdGl2ZUNhbGVuZGFyIGZyb20gJ0Bjb21wb25lbnRzL2FjdGl2ZS9hY3RpdmVDYWxlbmRhcicKCmltcG9ydCB1dGlscyBmcm9tICJAL3V0aWxzL3V0aWxzIgppbXBvcnQgb3JkZXJQYXkgZnJvbSAiQC91dGlscy9wYXkiCmltcG9ydCBhY3RpdmVVdGlscyBmcm9tICdAL2ZpbHRlcnMvYWN0aXZlJwoKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICdzcGVjaWFsU2FsZScsCiAgbWl4aW5zOiBbc2Vja2lsbE1peGluXSwKICBjb21wdXRlZDoge30sCiAgY29tcG9uZW50czp7CiAgICBhY3RpdmVIZWFkZXIsCiAgICBhY3RpdmVDb3Vwb24sCiAgICBhY3RpdmVDYXNoLAogICAgYWN0aXZlR3JhcGhpYywKICAgIGFjdGl2ZUJyYW5kLAogICAgYWN0aXZlUm9vbSwKICAgIGFjdGl2ZU5vdGljZSwKICAgIGFjdGl2ZUZvb3RlciwKICAgIGFjdGl2ZUNhbGVuZGFyCiAgfSwKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgdmlwVXNlcjogZmFsc2UsCiAgICAgIHN1aXRTaG9wczogW10sCiAgICAgIG1lZGlhTGlzdDogW10sCiAgICAgIGdyYXBoaWNEZXRhaWw6ICcnLCAvLyDor6bmg4VodG1s5L+h5oGvCiAgICAgIHRpbWVyOiBudWxsLAogICAgICByZWNvbW1lbmRMaXN0OiBbXSwgLy8g5YW25LuW56S85YyF5o6o6I2QL+aOqOiNkOadg+ebigogICAgICBmbGFnOiB0cnVlLAogICAgICBzaG93UG9wOiBmYWxzZSwgLy8g6Z2e5Lya5ZGY6LSt5Lmw5pe25o+Q56S6CiAgICAgIHJlY29tUGFnZTogMSwgIC8vIOeJueWNlueahOaOqOiNkOadg+ebiuS4iuaLieabtOWkmgogICAgICBoYXNNb3JlOiB0cnVlLCAvLyDnibnljZbnmoTmjqjojZDmnYPnm4rmm7TlpJrmj5DnpLoKICAgICAgYnRuRGlzYWJsZWQ6IGZhbHNlLAogICAgICBjYXNoTWFzazogZmFsc2UsCiAgICAgIHNlbENhc2hyZWQ6IHt9LAogICAgICBzZWxDb25zdW1lcjoge30sCiAgICAgIGNhbGVuZGFyTWFzazogZmFsc2UsIC8vIOaXpeWOhuW8ueeqlwogICAgICBzZWxEYXRlOiB7CiAgICAgICAgc3RhcnRUaW1lOiAnJywKICAgICAgICBlbmRUaW1lOiAnJwogICAgICB9LCAvLyDoh6rmiJHmuLjpgInkuK3nmoTml7bpl7QKICAgICAgdHJhdmVsTW9udGhJbmZvOiB7fSwKICAgICAgY29uZGl0aW9uSW5mbzoge30sIC8vIOWFkeWlluS4reW/g+S/oeaBrwogICAgICB0cmFjdmVsVXNlckxpc3Q6IFtdLAogICAgICByZWZyZXNoOiBmYWxzZSwgLy8g5Yi35paw5pel5Y6G5pWw5o2uCiAgICAgIGRvd25UaW1lOiB7CiAgICAgICAgaG91cjogJzAwJywKICAgICAgICBtaW51dGU6ICcwMCcsCiAgICAgICAgc2Vjb25kOiAnMDAnCiAgICAgIH0sCiAgICAgIHJlYWR5OiBmYWxzZSwKICAgICAgYnRuVGV4dDogJ+eri+WNs+aKoui0rScsCiAgICAgIHNob3dCdG5UeHQ6IHRydWUsCiAgICAgIGZpeGVkRGV0YWlsOnt9LCAvLyDpl6jlupflk4HniYzkurrlnYfkv6Hmga8KICAgICAgcmVtYWluVGltZTogMzk5OTAwMCwKICAgICAgY2hhbm5lbFR5cGU6ICcnLAogICAgICBvcHRpb25zOiB0aGlzLiRyb3V0ZS5xdWVyeSB8fCB7fSwKICAgICAgaW5mbzoge30KICAgIH0KICB9LAogIGNvbXB1dGVkOiB7CiAgICAuLi5tYXBHZXR0ZXJzKFsibG9jYXRpb25JbmZvIiwgInd4VXNlciIsICJsb2NhdGlvbkNpdHkiLCAidmlwQ2FyZEluZm8iLCAidXBkYXRlRmxhZyJdKQogIH0sCiAgbWV0aG9kczogewogICAgLy8g5oyJ6ZKu6aKG5Y+W44CB5byA6YCa44CB6LSt5Lmw562J5pON5L2c5LqL5Lu2CiAgICBoYW5kbGVyRXZlbnQoKSB7CiAgICAgIGlmICh0aGlzLmJ0bkRpc2FibGVkKSByZXR1cm4gLy8g5oyJ6ZKu572u54Gw5pe277yM5peg5rOV54K55Ye76LSt5Lmw5oyJ6ZKuCiAgICAgIGxldCBpbmZvID0gdGhpcy5pbmZvCiAgICAgIGlmIChpbmZvLnN1cHBsaWVyQ29kZSA9PSAnUEFSVFlfWldZJyAmJiBbMywgNCwgNV0uaW5jbHVkZXMoaW5mby52YWxpZGl0eVR5cGUpKSB7CiAgICAgICAgLy8g6Ieq5oiR5ri454m55Y2W5pe2ICYmIOmcgOimgemAieWumuaXpeacnyAgIOW8ueWHuumAieaLqeaXpeWOhgogICAgICAgIGlmICghdGhpcy5jYWxlbmRhck1hc2spIHsKICAgICAgICAgIHRoaXMuY2FsZW5kYXJNYXNrID0gdHJ1ZQogICAgICAgICAgcmV0dXJuCiAgICAgICAgfQogICAgICAgIGlmICghdGhpcy5zZWxEYXRlLnN0YXJ0VGltZSkgeyAvLyDmnKrpgInmi6nml7bpl7QKICAgICAgICAgIHRoaXMuJFRvYXN0KCfor7fpgInmi6nmuLjnjqnml6XmnJ8nKQogICAgICAgICAgdGhpcy5jYWxlbmRhck1hc2sgPSB0cnVlCiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGlmIChpbmZvLnZhbGlkaXR5VHlwZSA9PSA0IHx8IGluZm8udmFsaWRpdHlUeXBlID09IDUpIHsgLy8g5ri45a6i6YCJ5a6a5pel5pyf5bu25ZCOWOacieaViCB8fCDmuLjlrqLpgInlrprml6XmnJ/mjIflrprml7bpl7TmnInmlYgKICAgICAgICAgICAgdGhpcy4kZGlhbG9nLmNvbmZpcm0oewogICAgICAgICAgICAgIHRpdGxlOifnoa7lrprlh7rmuLjml7bpl7Q/JywKICAgICAgICAgICAgICBtZXNzYWdlOmAke3V0aWxzLmZvcm1hdFRpbWUodGhpcy5zZWxEYXRlLnN0YXJ0VGltZSB8fCAwLCAnWVlZWS9NTS9ERCcpfSB+ICR7dXRpbHMuZm9ybWF0VGltZSh0aGlzLnNlbERhdGUuZW5kVGltZSB8fCAwLCAnWVlZWS9NTS9ERCcpfWAsCiAgICAgICAgICAgIH0pLnRoZW4oKCk9PnsKICAgICAgICAgICAgICB0aGlzLnBsYWNlT3JkZXIoKQogICAgICAgICAgICB9KS5jYXRjaCgoKSA9PiB7CiAgICAgICAgICAgICAgICAgIC8vIG9uIGNhbmNlbAogICAgICAgICAgICB9KTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHRoaXMuJGRpYWxvZy5jb25maXJtKHsKICAgICAgICAgICAgICB0aXRsZTon56Gu5a6a5Ye65ri45pe26Ze0PycsCiAgICAgICAgICAgICAgbWVzc2FnZTpgJHt1dGlscy5mb3JtYXRUaW1lKHRoaXMuc2VsRGF0ZS5zdGFydFRpbWUgfHwgMCwgJ1lZWVkvTU0vREQnKX1gLAogICAgICAgICAgICB9KS50aGVuKCgpPT57CiAgICAgICAgICAgICAgdGhpcy5wbGFjZU9yZGVyKCkKICAgICAgICAgICAgfSkuY2F0Y2goKCkgPT4gewogICAgICAgICAgICAgICAgICAvLyBvbiBjYW5jZWwKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIHJldHVybgogICAgICB9CiAgICAgIHRoaXMucGxhY2VPcmRlcigpCiAgICB9LAoKICAgIC8vIOS4i+WNlQogICAgcGxhY2VPcmRlcigpIHsKICAgICAgaWYgKHRoaXMub3B0aW9ucy5oYXNFeGNoYW5nZSAhPSAnJykgewogICAgICBjb25zb2xlLmxvZygn6Kem5Y+R54K55Ye76LSt5LmwMScsIHRoaXMuaW5mby5jaGlsZEVudW1LZXksIHRoaXMuZnJlZSwgdGhpcy5pbmZvLmNhcmRUeXBlKQoKICAgICAgICAvLyDliKTmlq3lhZHlpZbkuK3lv4Pov5vlhaUgIOeri+WNs+WFkeaNogogICAgICAgIGxldCBjb25kaXRpb25JbmZvID0gdGhpcy5jb25kaXRpb25JbmZvCiAgICAgICAgbGV0IHRyYWN2ZWxVc2VyTGlzdCA9IHRoaXMudHJhY3ZlbFVzZXJMaXN0CiAgICAgICAgaWYgKGNvbmRpdGlvbkluZm8uaXNDb25kaXRpb24gJiYgdHJhY3ZlbFVzZXJMaXN0Lmxlbmd0aCA9PSAwKSB7CiAgICAgICAgICAvLyDliKTmlq3mmK/lkKbpnIDmsYLloavlhpnkv6Hmga8KICAgICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHsKICAgICAgICAgICAgbmFtZTogJ3RyYXZlbEluZm9ybWF0aW9uJywKICAgICAgICAgICAgcXVlcnk6IHsKICAgICAgICAgICAgICBhY3RTbjogdGhpcy5vcHRpb25zLmFjdFNuCiAgICAgICAgICAgIH0KICAgICAgICAgIH0pCiAgICAgICAgICByZXR1cm4gCiAgICAgICAgfQogICAgICAgIHRoaXMuZXhjaGFuZ2UoKQogICAgICB9IGVsc2UgaWYgKHRoaXMuaW5mby5jaGlsZEVudW1LZXkgPT0gJ0FDVF9TUEVDSUFMX09GRkVSX1BVUkNIQVNFX0xJTUlUJykgewogICAgICBjb25zb2xlLmxvZygn6Kem5Y+R54K55Ye76LSt5LmwMicsIHRoaXMuaW5mby5jaGlsZEVudW1LZXksIHRoaXMuZnJlZSwgdGhpcy5pbmZvLmNhcmRUeXBlKQoKICAgICAgICAvLyDku47pmZDotK3ov5vlhaUKICAgICAgICB0aGlzLmhhbmRsZXJMaW1pdEV2ZW50KCkKICAgICAgfSBlbHNlIGlmICh0aGlzLmZyZWUgJiYgdGhpcy5pbmZvLmNhcmRUeXBlICE9ICdDQVJEX0RJUkVDVF9SRUNIQVJHRScpIHsKCiAgICAgICAgbGV0IGNvbmRpdGlvbkluZm8gPSB0aGlzLmNvbmRpdGlvbkluZm8KICAgICAgICBsZXQgdHJhY3ZlbFVzZXJMaXN0ID0gdGhpcy50cmFjdmVsVXNlckxpc3QKICAgICAgY29uc29sZS5sb2coJ+inpuWPkeeCueWHu+i0reS5sDMnLCBjb25kaXRpb25JbmZvLmlzQ29uZGl0aW9uLCB0aGlzLmZyZWUsIHRyYWN2ZWxVc2VyTGlzdCkKCiAgICAgICAgaWYgKGNvbmRpdGlvbkluZm8uaXNDb25kaXRpb24gJiYgdHJhY3ZlbFVzZXJMaXN0Lmxlbmd0aCA9PSAwKSB7CiAgICAgICAgICAvLyDliKTmlq3mmK/lkKbpnIDmsYLloavlhpnkv6Hmga8KICAgICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHsKICAgICAgICAgICAgbmFtZTogJ3RyYXZlbEluZm9ybWF0aW9uJywKICAgICAgICAgICAgcXVlcnk6IHsKICAgICAgICAgICAgICBhY3RTbjogdGhpcy5vcHRpb25zLmFjdFNuCiAgICAgICAgICAgIH0KICAgICAgICAgIH0pCiAgICAgICAgICByZXR1cm4KICAgICAgICB9CiAgICAgICAgLy8g5YWN6LS56aKG5Y+WCiAgICAgICAgdGhpcy5nZXRGcmVlKCkKICAgICAgfSBlbHNlIGlmICh0aGlzLm9wZW5fcmVjZWl2ZSkgewogICAgICBjb25zb2xlLmxvZygn6Kem5Y+R54K55Ye76LSt5LmwNCcsIHRoaXMuaW5mby5jaGlsZEVudW1LZXksIHRoaXMuZnJlZSwgdGhpcy5pbmZvLmNhcmRUeXBlKQoKICAgICAgICB0aGlzLm9wZW5SZWNlaXZlKCkKICAgICAgfSBlbHNlIHsKICAgICAgY29uc29sZS5sb2coJ+inpuWPkeeCueWHu+i0reS5sDUnLCB0aGlzLmluZm8uY2hpbGRFbnVtS2V5LCB0aGlzLmZyZWUsIHRoaXMuaW5mby5jYXJkVHlwZSkKCiAgICAgICAgdGhpcy50b0J1eSgpCiAgICAgIH0KICAgIH0sCgogICAgaGFuZGxlckxpbWl0RXZlbnQoKSB7CiAgICAgIGlmICh0aGlzLmluZm8ubGltaXRBY3RTdGF0ZSA9PSAxMikgewogICAgICAgIHRoaXMuJFRvYXN0KCflvZPliY3lkIjovpHpnZ7ov5vooYzkuK3nirbmgIEnKQogICAgICB9IGVsc2UgewogICAgICAgIGlmICh0aGlzLmJ0blRleHQgPT0gJ+eri+WNs+aKoui0rScpIHsKICAgICAgICAgIHRoaXMudG9CdXkoKQogICAgICAgIH0KICAgICAgfQogICAgfSwKCiAgICAvLyDlhZHmjaIKICAgIGV4Y2hhbmdlKCkgewogICAgICBsZXQgaXRlbSA9IHRoaXMuZXhjaGFuZ2VfZGF0YQogICAgICB0aGlzLiRkaWFsb2cuY29uZmlybSh7CiAgICAgICAgdGl0bGU6IGDmmK/lkKbnoa7orqTlhZHmjaIke2l0ZW0uYWN0TmFtZSB8fCAnJ30/YCwKICAgICAgICBtZXNzYWdlOiflhZHmjaLlkI7kuI3lj6/mm7TmlLnkuJTljp/mnInmva7ljaHlsIbkvJrmuIXnqbonLAogICAgICB9KS50aGVuKCgpPT57CiAgICAgICAgdGhpcy5wcmljZUV4Y2hhbmdlKGl0ZW0pCiAgICAgIH0pLmNhdGNoKCgpID0+IHsKICAgICAgICAgICAgLy8gb24gY2FuY2VsCiAgICAgIH0pOwogICAgfSwKCiAgICAvLyDlvIDlp4vlhZHmjaIKICAgIHByaWNlRXhjaGFuZ2UoaXRlbSkgewogICAgICBpZiAodGhpcy5pc0NhbkNsaWNrKSByZXR1cm4KICAgICAgdGhpcy5pc0NhbkNsaWNrID0gdHJ1ZQogICAgICB0aGlzLiRhcGkucHJpY2VfZXhjaGFuZ2UoewogICAgICAgIGFjdFNuOiBpdGVtLmFjdFNuLAogICAgICAgIGF3YXJkSWQ6IGl0ZW0uYXdhcmRJZCwKICAgICAgICBjaXR5SWQ6IHRoaXMubG9jYXRpb25DaXR5LmNpdHlJZCwKICAgICAgICBjaG9vc2VEYXRlOiB0aGlzLnNlbERhdGUuc3RhcnRUaW1lID8gdXRpbHMuZm9ybWF0VGltZSh0aGlzLnNlbERhdGUuc3RhcnRUaW1lIHx8IDAsICdZWVlZTU1ERCcpIDogMCwgLy8g6Ieq5oiR5ri46YCJ5oup5pe26Ze0CiAgICAgICAgdHJhY3ZlbFVzZXJMaXN0OiBKU09OLnN0cmluZ2lmeSh0aGlzLnRyYWN2ZWxVc2VyTGlzdCkKICAgICAgfSkudGhlbihyZXMgPT4gewogICAgICAgIGlmIChyZXMuc3RhdGUpIHsKICAgICAgICAgIHRoaXMubWFzayA9IHRydWUKICAgICAgICAgIHRoaXMudHJhY3ZlbFVzZXJMaXN0ID0gW10KICAgICAgICAgIHRoaXMuJHNhdmUucmVtb3ZlKCdzZXNzaW9uJywgJ3RyYXZlbEluZm9ybWF0aW9uJykKICAgICAgICAgIHRoaXMuaGFuZGxlckJ0bign5bey5YWR5o2iJywgdHJ1ZSkKICAgICAgICAgIC8vIOa4hemZpOeUqOaIt+Whq+WGmeS/oeaBrwogICAgICAgICAgdGhpcy4kc2F2ZS5yZW1vdmUoJ3Nlc3Npb24nLCAndHJhdmVsSW5mb3JtYXRpb24nKQogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB0aGlzLiRUb2FzdChyZXMubWVzc2FnZSkKICAgICAgICB9CiAgICAgIH0pLmZpbmFsbHkoKCkgPT4gewogICAgICAgIHNldFRpbWVvdXQoKCkgPT4gewogICAgICAgICAgdGhpcy5pc0NhbkNsaWNrID0gZmFsc2UKICAgICAgICB9LCAzMDApCiAgICAgIH0pCiAgICB9LAoKICAgIGdvQ2FyZCgpIHsKICAgICAgdGhpcy4kcm91dGVyLnB1c2goewogICAgICAgIG5hbWU6ICdjb3Vwb25MaXN0JwogICAgICB9KQogICAgfSwKCiAgICBjbG9zZSgpIHsKICAgICAgdGhpcy5tYXNrID0gZmFsc2UKICAgIH0sCgogICAgLy8g6Z2e5Lya5ZGY5byA6YCa5bm26aKG5Y+WCiAgICBvcGVuUmVjZWl2ZSgpIHsKICAgICAgdGhpcy4kc2V0KHRoaXMuaW5mbywgJ3NlbGxQcmljZScsIDApCiAgICAgIHRoaXMuJHNldCh0aGlzLmluZm8sICdub1ZpcFByaWNlJywgMCkKICAgICAgbGV0IHJlY2VpdmVUeXBlID0gdGhpcy5vcHRpb25zLmNoYW5uZWxUeXBlID09ICdDSEFOTkVMX0FDVElWSVRZX0xBQkVMX1NIT1cnID8gNCA6IDEKICAgICAgbGV0IGluZm8gPSB0aGlzLmluZm8KICAgICAgaW5mby5zZWxEYXRlID0gdGhpcy5zZWxEYXRlCiAgICAgIGluZm8uZGVzY3JpYmUgPSAnJwogICAgICB0aGlzLiRzYXZlLnNldCgnc2Vzc2lvbicsICdvcmRlckluZm8nLCB0aGlzLmluZm8pCiAgICAgIAogICAgICAvLyDpnZ7kvJrlkZjlvIDpgJrlubbpooblj5YKICAgICAgdGhpcy4kcm91dGVyLnB1c2goewogICAgICAgIG5hbWU6ICdzdWJtaXRPcmRlcicsCiAgICAgICAgcXVlcnk6IHsKICAgICAgICAgIGNvbXBJZDogdGhpcy5vcHRpb25zLmNvbXBJZCB8fCAnJywKICAgICAgICAgIGFjdFNuOiB0aGlzLm9wdGlvbnMuYWN0U24sCiAgICAgICAgICBjaGFubmVsVHlwZTogdGhpcy5vcHRpb25zLmNoYW5uZWxUeXBlLAogICAgICAgICAgcmVjZWl2ZVR5cGU6IHJlY2VpdmVUeXBlCiAgICAgICAgfQogICAgICB9KQogICAgfSwKCiAgICAvLyDllK7ku7fkuLow5pe277yM5YWN6LS56aKGCiAgICBnZXRGcmVlKCkgewogICAgICBsZXQgYWN0RGVhbCA9IG9yZGVyUGF5LmFjdERlYWwoewogICAgICAgIGNpdHlJZDogdGhpcy5sb2NhdGlvbkNpdHkuY2l0eUlkLAogICAgICAgIGFjdFNuOiB0aGlzLm9wdGlvbnMuYWN0U24sCiAgICAgICAgZGVhbE51bTogMSwKICAgICAgICBjaGFubmVsVHlwZTogdGhpcy5vcHRpb25zLmNoYW5uZWxUeXBlLAogICAgICAgIHFyQ29kZTogdGhpcy5vcHRpb25zLnFyQ29kZSB8fCAnJywKICAgICAgICByZWFsRmVlOiAwLAogICAgICAgIHJlY2VpdmVUeXBlOiB0aGlzLm9wdGlvbnMuY2hhbm5lbFR5cGUgPT0gJ0NIQU5ORUxfQUNUSVZJVFlfTEFCRUxfU0hPVycgPyA0IDogMSwgLy8g6I635Y+W5pa55byP77yMMeS8muWRmOmihuWPlu+8jDLkvJrlkZjotK3kubDvvIwz5rig6YGT6LSt5LmwIHYxLjIuMOaUueS4ujEKICAgICAgICBvcGVuVmlwOiBmYWxzZSwgLy/mmK/lkKblvIDpgJrmnIjljaHkvJrlkZjlubbotK3kubAKICAgICAgICBhY3RGZWU6IDAsIC8v5rS75Yqo5pSv5LuY6LS555SoCiAgICAgICAgdmlwRmVlOiAwLAogICAgICAgIHZpcENhcmRJZDogJycsCiAgICAgICAgYnV5VHlwZTogMCwKICAgICAgICBjb21wSWQ6IHRoaXMub3B0aW9ucy5jb21wSWQsIC8vIOWQiOi+kUlkCiAgICAgICAgY2hvb3NlRGF0ZTogdGhpcy5zZWxEYXRlLnN0YXJ0VGltZSA/IHV0aWxzLmZvcm1hdFRpbWUodGhpcy5zZWxEYXRlLnN0YXJ0VGltZSB8fCAwLCAnWVlZWU1NREQnKSA6IDAsIC8vIOiHquaIkea4uOmAieaLqeaXtumXtAogICAgICAgIHRyYWN2ZWxVc2VyTGlzdDogSlNPTi5zdHJpbmdpZnkodGhpcy50cmFjdmVsVXNlckxpc3QpCiAgICAgIH0pCiAgICAgIGlmIChhY3REZWFsKSB7CiAgICAgICAgYWN0RGVhbC50aGVuKHJlcyA9PiB7CiAgICAgICAgICBpZiAocmVzLnN0YXRlKSB7CiAgICAgICAgICAgIHRoaXMudHJhY3ZlbFVzZXJMaXN0ID0gW10KICAgICAgICAgICAgdGhpcy4kc2F2ZS5yZW1vdmUoJ3Nlc3Npb24nLCAndHJhdmVsSW5mb3JtYXRpb24nKQogICAgICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCh7bmFtZTogJ3NwZWNpYWxTYWxlU3VjY2VzcycsIHF1ZXJ5OiB7IHRyYWRlSWQ6IHJlcy5pbmZvLnRyYWRlSWQsIGFjdE5hbWU6IHRoaXMuaW5mby5hY3ROYW1lLCByZWNlaXZlOiAxLCBhY3RTbjogdGhpcy5vcHRpb25zLmFjdFNuLCB2aXBfY2hlY2s6IDB9fSkKICAgICAgICAgIH0KICAgICAgICB9KQogICAgICB9CiAgICB9LAoKICAgIHRvQnV5KCkgewogICAgICBpZiAodGhpcy5pc0NhbkNsaWNrKSByZXR1cm4KICAgICAgdGhpcy5pc0NhbkNsaWNrID0gdHJ1ZQoKICAgICAgbGV0IGluZm8gPSB0aGlzLmluZm8KICAgICAgaW5mby5zZWxEYXRlID0gdGhpcy5zZWxEYXRlCiAgICAgIGluZm8uZGVzY3JpYmUgPSAnJwogICAgICB0aGlzLiRzYXZlLnNldCgnc2Vzc2lvbicsICdvcmRlckluZm8nLCB0aGlzLmluZm8pCiAgICAgIC8vIOWIpOaWreaYr+WQpuacieacquaUr+S7mOeahOiuouWNlQogICAgICB0aGlzLiRhcGkub3JkZXJfdW5wYXkoewogICAgICAgIGFjdFNuOiB0aGlzLm9wdGlvbnMuYWN0U24KICAgICAgfSkudGhlbihyZXMgPT4gewogICAgICAgIGlmIChyZXMuc3RhdGUpIHsKICAgICAgICAgIGlmIChyZXMuaW5mby5leGlzdHNVblBheSkgewogICAgICAgICAgICAvLyDlpoLmnpzlrZjlnKjmnKrmlK/ku5jnmoTorqLljZXvvIzot7PovazliLDorqLljZXliJfooajpobUKICAgICAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goewogICAgICAgICAgICAgIG5hbWU6ICdvcmRlckxpc3QnCiAgICAgICAgICAgIH0pCiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBsZXQgcmVjZWl2ZVR5cGUgPSB0aGlzLm9wdGlvbnMuY2hhbm5lbFR5cGUgPT0gJ0NIQU5ORUxfQUNUSVZJVFlfTEFCRUxfU0hPVycgPyAzIDogMgogICAgICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCh7CiAgICAgICAgICAgICAgbmFtZTogJ3N1Ym1pdE9yZGVyJywKICAgICAgICAgICAgICBxdWVyeTogewogICAgICAgICAgICAgICAgcXJDb2RlOiB0aGlzLm9wdGlvbnMucXJDb2RlIHx8ICcnLAogICAgICAgICAgICAgICAgY29tcElkOiB0aGlzLm9wdGlvbnMuY29tcElkIHx8ICcnLAogICAgICAgICAgICAgICAgYWN0U246IHRoaXMub3B0aW9ucy5hY3RTbiwKICAgICAgICAgICAgICAgIGNoYW5uZWxUeXBlOiB0aGlzLm9wdGlvbnMuY2hhbm5lbFR5cGUsCiAgICAgICAgICAgICAgICByZWNlaXZlVHlwZTogcmVjZWl2ZVR5cGUKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pCiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9KS5maW5hbGx5KCgpID0+IHsKICAgICAgICB0aGlzLmlzQ2FuQ2xpY2sgPSBmYWxzZQogICAgICB9KQogICAgfSwKCiAgICAvLyDliKTmlq3nlKjmiLfotK3kubDkv6Hmga8KICAgIGdldFJlYWxUaW1lSW5mbyhsaW1pdEZyZXF1ZW5jeSkgewogICAgICByZXR1cm4gdGhpcy4kYXBpLnJlYWxUaW1lX2luZm8oewogICAgICAgIGFjdFNuOiB0aGlzLm9wdGlvbnMuYWN0U24KICAgICAgfSkudGhlbihyZXMgPT4gewogICAgICAgIGlmIChyZXMuc3RhdGUpIHsKICAgICAgICAgIHRoaXMucmVhbEluZm8gPSByZXMuaW5mbwogICAgICAgIH0KICAgICAgfSkKICAgIH0sCgogICAgaGFuZGxlckJ0bih0ZXh0LCBkaXNhYmxlZCA9IGZhbHNlKSB7CiAgICAgIHRoaXMuYnRuVGV4dCA9IHRleHQKICAgICAgdGhpcy5idG5EaXNhYmxlZCA9IGRpc2FibGVkCiAgICB9LAoKICAgIGhhbmRsZXJMaW1pdChpbmZvMiwgZmxhZykgewogICAgICAvLyAx5pyq5byA5aeLIDLov5vooYzkuK0gM+W3sue7k+adnwogICAgICBsZXQgY3VycmVudFRpbWUgPSArbmV3IERhdGUoKQogICAgICBpZiAoKGluZm8yLmxpbWl0RW5kVGltZSA8IGN1cnJlbnRUaW1lKSAmJiAoaW5mbzIubGltaXRTdGFydFRpbWUgPCBjdXJyZW50VGltZSkpIHsKICAgICAgICBpbmZvMi50aW1lU3RhdGUgPSAzCiAgICAgIH0gZWxzZSBpZiAoKGluZm8yLmxpbWl0RW5kVGltZSA+IGN1cnJlbnRUaW1lKSAmJiAoaW5mbzIubGltaXRTdGFydFRpbWUgPCBjdXJyZW50VGltZSkpIHsKICAgICAgICBpbmZvMi50aW1lU3RhdGUgPSAyCiAgICAgIH0gZWxzZSBpZiAoaW5mbzIubGltaXRTdGFydFRpbWUgPiBjdXJyZW50VGltZSkgewogICAgICAgIGluZm8yLnRpbWVTdGF0ZSA9IDEKICAgICAgICBsZXQgaGVhZGxpbmUgPSBnZXREYXlOYW1lKGluZm8yLmxpbWl0U3RhcnRUaW1lKQogICAgICAgIHRoaXMuaGVhZGxpbmUgPSBoZWFkbGluZQogICAgICB9CiAgICAgIGlmIChpbmZvMi50aW1lU3RhdGUgIT0gMykgewogICAgICAgIGNsZWFySW50ZXJ2YWwodGhpcy5saW1pdFRpbWVyKQogICAgICAgIHRoaXMubGltaXRUaW1lciA9IHNldEludGVydmFsKCgpID0+IHsKICAgICAgICAgIGxldCBub3dUaW1lID0gK25ldyBEYXRlKCkKICAgICAgICAgIHZhciBjdXRUaW1lID0gMAogICAgICAgICAgaWYgKGluZm8yLnRpbWVTdGF0ZSA9PSAxKSB7CiAgICAgICAgICAgIGN1dFRpbWUgPSBpbmZvMi5saW1pdFN0YXJ0VGltZSAtIG5vd1RpbWUKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIGN1dFRpbWUgPSBpbmZvMi5saW1pdEVuZFRpbWUgLSBub3dUaW1lCiAgICAgICAgICB9CiAgICAgICAgICBsZXQgbGFzdFRpbWUgPSB1dGlscy5jb3VudERvd24zKGN1dFRpbWUpCiAgICAgICAgICB0aGlzLmRvd25UaW1lID0gbGFzdFRpbWUKICAgICAgICAgIGlmIChjdXRUaW1lIDw9IDAgJiYgKGluZm8yLmxpbWl0QWN0U3RhdGUgIT0gMTIpKSB7CiAgICAgICAgICAgIGNsZWFySW50ZXJ2YWwodGhpcy5saW1pdFRpbWVyKQogICAgICAgICAgICB0aGlzLmdldEFjdERldGFpbCgpCgogICAgICAgICAgfQogICAgICAgIH0sIDEwMDApCiAgICAgICAgY29uc29sZS5sb2codGhpcy5kb3duVGltZSwgJ3RoaXMuZG93blRpbWUnKQogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuZG93blRpbWUgPSB7CiAgICAgICAgICBob3VyOiAnMDAnLAogICAgICAgICAgbWludXRlOiAnMDAnLAogICAgICAgICAgc2Vjb25kOiAnMDAnCiAgICAgICAgfQogICAgICB9CiAgICAgIAogICAgICBpZiAoZmxhZykgewogICAgICAgIGNvbnNvbGUubG9nKCdmbGFnJywgaW5mbzIsICc9PT09PT09PT09PT09PScpCiAgICAgICAgLy8g5bey5oqi5a6M5rS75Yqo5by556qXCiAgICAgICAgaWYgKGluZm8yLmxpbWl0QWN0U3RhdGUgPT0gMyB8fCBpbmZvMi5saW1pdEFjdFN0YXRlID09IDIgfHwgIXRoaXMuaW5mby5yZW1haW5OdW0pIHsKICAgICAgICAgIHRoaXMuZ2V0RW5kQWN0aXZlKCkKICAgICAgICB9CiAgICAgIH0KICAgIH0sCgogICAgLy8g6I635Y+W5rS75Yqo6K+m5oOFCiAgICBhc3luYyBnZXRBY3REZXRhaWwoZmxhZykgewogICAgICB0aGlzLiRUb2FzdC5sb2FkaW5nKHsgCiAgICAgICAgbWVzc2FnZTogJ+WKoOi9veS4rS4uLicsCiAgICAgICAgZm9yYmlkQ2xpY2s6IHRydWUsCiAgICAgICAgZHVyYXRpb246IDAKICAgICAgfSkKICAgICAgYXdhaXQgdGhpcy5nZXRTcGVjaWFsSW5mbygpIC8vIOWmguaenOaYr+eJueWNlua0u+WKqOivpuaDhe+8jGNhcmRJZO+8jGRldGFpbElk5LuO54m55Y2W6K+m5oOF6YeM6Z2i6I635Y+WCiAgICAgIGF3YWl0IHRoaXMuZ2V0Q291cERldGFpbCgpOyAvLyDojrflj5bljaHliLjor6bmg4UKICAgICAgYXdhaXQgdGhpcy5nZXRSZWFsVGltZUluZm8oKQogICAgICB0aGlzLmdldFN1aXRTaG9wcygpIC8vIOiOt+WPlumAgueUqOW6l+mTugogICAgICB0aGlzLiRhcGkuYWN0X2RldGFpbCh7CiAgICAgICAgY2hhbm5lbFR5cGU6IHRoaXMub3B0aW9ucy5jaGFubmVsVHlwZSwKICAgICAgICBxckNvZGU6IHRoaXMub3B0aW9ucy5xckNvZGUgfHwgJycsCiAgICAgICAgYWN0U246IHRoaXMub3B0aW9ucy5hY3RTbgogICAgICB9KS50aGVuKGFzeW5jIHJlcyA9PiB7CiAgICAgICAgaWYgKHJlcy5zdGF0ZSkgewogICAgICAgICAgbGV0IGluZm8xID0gdGhpcy5pbmZvCiAgICAgICAgICBsZXQgaW5mbzIgPSByZXMuaW5mbwogICAgICAgICAgbGV0IGNvbnRhdGlvbiA9IChpbmZvMi5idXlMaW1pdCA9PSAxICYmICFpbmZvMi5zZWxsUHJpY2UgJiYgIWluZm8yLm5vVmlwUHJpY2UpIHx8IChpbmZvMi5idXlMaW1pdCA9PSAyICYmICFpbmZvMi5zZWxsUHJpY2UpIC8vIOWIpOaWreW3sumihuWPlueahOeKtuaAgQogICAgICAgICAgCiAgICAgICAgICAvLyDlpITnkIbpmZDml7bnmoTlgJLorqHml7bnrYnpl67popggCiAgICAgICAgICBpZiAoaW5mbzIuY2hpbGRFbnVtS2V5ID09ICdBQ1RfU1BFQ0lBTF9PRkZFUl9QVVJDSEFTRV9MSU1JVCcpIHsKICAgICAgICAgICAgdGhpcy5oYW5kbGVyTGltaXQoaW5mbzIsIGZsYWcpCiAgICAgICAgICB9CiAgICAgICAgICBpbmZvMS5jaGFubmVsVHlwZSA9IHRoaXMub3B0aW9ucy5jaGFubmVsVHlwZSB8fCAnJwogICAgICAgICAgbGV0IGluZm8gPSB7IC4uLmluZm8xLCAuLi5pbmZvMiB9CiAgICAgICAgICB0aGlzLmluZm8gPSBpbmZvCiAgICAgICAgICB0aGlzLnJlbWFpblRpbWUgPSBpbmZvMi5yZW1haW5UaW1lCiAgICAgICAgICB0aGlzLnJlYWR5ID0gdHJ1ZQogICAgICAgICAgY29uc29sZS5sb2codGhpcy5pbmZvLCAnaW5mbzFpbmZvMWluZm8xaW5mbzFpbmZvMScpCiAgICAgICAgICAvLyDoh6rmiJHmuLjnibnljZbml7bpnIDosIPnlKjml6XljobmjqXlj6MgKOWNoeWIuOacieaViOacn+exu+Wei+S4uiAzLDQsNSkKICAgICAgICAgIGlmICh0aGlzLmluZm8uc3VwcGxpZXJDb2RlID09ICdQQVJUWV9aV1knKSB7CiAgICAgICAgICAgIC8vIOiHquaIkea4uOaYvuekuuS8muWRmOS7t++8iOmAieaLqeaXpeacn+WQjui/memHjOeahOS7t+agvOS4jeWPmO+8iQogICAgICAgICAgICB0aGlzLiRzZXQodGhpcy5pbmZvLCAndHJhdmVsUHJpY2UnLCBpbmZvMi5zZWxsUHJpY2UpCiAgICAgICAgICAgIGlmICh0aGlzLnNlbERhdGUuc2VsbFByaWNlIHx8IHRoaXMuc2VsRGF0ZS5zZWxsUHJpY2UgPT0gMCkgeyAvLyDliKTmlq3lt7LpgInmi6nnmoTku7fmoLwKICAgICAgICAgICAgICB0aGlzLiRzZXQodGhpcy5pbmZvLCAnc2VsbFByaWNlJywgdGhpcy5zZWxEYXRlLnNlbGxQcmljZSkKICAgICAgICAgICAgICB0aGlzLiRzZXQodGhpcy5pbmZvLCAnbm9WaXBQcmljZScsIHRoaXMuc2VsRGF0ZS5ub1ZpcFByaWNlKQogICAgICAgICAgICB9CgogICAgICAgICAgICBpZiAoWzMsIDQsIDVdLmluY2x1ZGVzKGluZm8xLnZhbGlkaXR5VHlwZSkpIHsKICAgICAgICAgICAgICAvLyDliKTmlq3pgInlrprml6XmnJ/vvIzmmL7npLrml6XljoYKICAgICAgICAgICAgICAvLyB0aGlzLnRyYXZlbEFjdE1vbnRoKCkKICAgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLmluZm8ubGltaXRUaW1lID4gMCkgewoKICAgICAgICAgICAgICAvLyDliKTmlq3lvZPliY3ml7bpl7TmmK/lkKblj6/otK3kubAgCiAgICAgICAgICAgICAgbGV0IGxpbWl0VGltZSA9IHRoaXMuaW5mby5saW1pdFRpbWUKICAgICAgICAgICAgICBsZXQgZGF0ZSA9IG5ldyBEYXRlKCkKICAgICAgICAgICAgICBsZXQgaCA9IGRhdGUuZ2V0SG91cnMoKSA+IDkgPyBkYXRlLmdldEhvdXJzKCkgKyAnJyA6ICcwJyArIGRhdGUuZ2V0SG91cnMoKQogICAgICAgICAgICAgIHZhciBtID0gZGF0ZS5nZXRNaW51dGVzKCkgPiA5ID8gZGF0ZS5nZXRNaW51dGVzKCkgKyAnJyA6ICcwJyArIGRhdGUuZ2V0TWludXRlcygpCiAgICAgICAgICAgICAgbGV0IGRheVRpbWUgPSBoICsgbQogICAgICAgICAgICAgIGlmIChkYXlUaW1lID4gbGltaXRUaW1lKSB7CiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHsKICAgICAgICAgICAgICAgICAgdGhpcy5oYW5kbGVyQnRuKCflvZPliY3kuI3lj6/otK3kubAnLCB0cnVlKQogICAgICAgICAgICAgICAgfSwgNTAwKQogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgICAgdGhpcy5oYW5kbGVyQnRuKHRoaXMuaW5mby5jYXJkVHlwZSA9PT0gJ0NBUkRfRElSRUNUX1JFQ0hBUkdFJyA/ICfnq4vljbPlhYXlgLwnIDogJ+eri+WNs+i0reS5sCcpCiAgICAgICAgICAvLyDku4XpmZDkvJrlkZjotK3kubDvvIzpnZ7kvJrlkZjmmL7npLoKICAgICAgICAgIGlmIChpbmZvMi5idXlMaW1pdCA9PSAyICYmICF0aGlzLnZpcFVzZXIpIHsKICAgICAgICAgICAgdGhpcy5oYW5kbGVyQnRuKCflvIDpgJrlubbotK3kubAnKQogICAgICAgICAgfQoKICAgICAgICAgIC8vIOS7hemZkOS8muWRmOi0reS5sOS4lOS8muWRmOWUruS7t+S4ujDvvIzpnZ7kvJrlkZjop4bop5IKICAgICAgICAgIGlmIChpbmZvMi5idXlMaW1pdCA9PSAyICYmICFpbmZvMi5zZWxsUHJpY2UgJiYgIXRoaXMudmlwVXNlcikgewogICAgICAgICAgICB0aGlzLmhhbmRsZXJCdG4oJ+W8gOmAmuW5tumihuWPlicpCiAgICAgICAgICAgIHRoaXMub3Blbl9yZWNlaXZlID0gdHJ1ZSAvLyDmoIflv5fmmK/lvIDpgJrlubbpooblj5bmjInpkq4KICAgICAgICAgIH0KICAgICAgICAgIGlmICh0aGlzLmluZm8ucmVtYWluTnVtID4gMCB8fCB0aGlzLmluZm8uY2FyZFR5cGUgPT09ICdDQVJEX0RJUkVDVF9SRUNIQVJHRScpIHsKICAgICAgICAgICAgaWYgKHRoaXMuaW5mby5jaGFubmVsVHlwZSA9PSAnQ0hBTk5FTF9DT05TVU1FUl9DT1VQT04nIHx8IHRoaXMuaW5mby5jaGFubmVsVHlwZSA9PSAnQ0hBTk5FTF9GT1JUVU5FX0NPVVBPTicpIHsKICAgICAgICAgICAgICAvLyDmtojotLnliLjmuKDpgZPml7bvvIzliKTmlq3ljp/ku7cKICAgICAgICAgICAgICBpZiAoaW5mbzIud29ydGggPT0gMCkgewogICAgICAgICAgICAgICAgdGhpcy5oYW5kbGVyQnRuKCfnq4vljbPpooblj5YnKQogICAgICAgICAgICAgICAgdGhpcy5mcmVlID0gdHJ1ZSAvL+WPr+S7peWFjei0uemihuWPlgogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICBpZiAoKCFpbmZvMi5zZWxsUHJpY2UgJiYgdGhpcy52aXBVc2VyKSB8fCAoaW5mbzIuYnV5TGltaXQgPT0gMSAmJiAhaW5mbzIuc2VsbFByaWNlICYmICFpbmZvMi5ub1ZpcFByaWNlKSkgewogICAgICAgICAgICAgICAgdGhpcy5oYW5kbGVyQnRuKCfnq4vljbPpooblj5YnKQogICAgICAgICAgICAgICAgdGhpcy5mcmVlID0gdHJ1ZSAvL+WPr+S7peWFjei0uemihuWPlgogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgICAKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIC8vIOW6k+WtmOS4ujDml7YKICAgICAgICAgICAgaWYgKGNvbnRhdGlvbikgewogICAgICAgICAgICAgIHRoaXMuaGFuZGxlckJ0bign5bey6aKG5a6MJywgdHJ1ZSkKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICB0aGlzLmhhbmRsZXJCdG4oJ+W3suWUrue9hCcsIHRydWUpCiAgICAgICAgICAgIH0KICAgICAgICAgIH0KCiAgICAgICAgICBpZiAoaW5mbzIuYWN0U3RhdGUgPT0gMyB8fCBpbmZvMi5hY3RTdGF0ZSA9PSA0IHx8IGluZm8yLmFjdFN0YXRlID09IDUpIHsKICAgICAgICAgICAgLy/llK7ku7fpg73kuLowCiAgICAgICAgICAgIGlmIChjb250YXRpb24pIHsKICAgICAgICAgICAgICB0aGlzLmhhbmRsZXJCdG4oJ+W3sumihuWujCcsIHRydWUpCiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgdGhpcy5oYW5kbGVyQnRuKCflt7LllK7nvYQnLCB0cnVlKQogICAgICAgICAgICB9CiAgICAgICAgICB9CgogICAgICAgICAgaWYgKGluZm8yLmFjdFN0YXRlID09IDEpIHsKICAgICAgICAgICAgdGhpcy5oYW5kbGVyQnRuKCfmtLvliqjmnKrlvIDlp4snLCB0cnVlKQogICAgICAgICAgfSBlbHNlIGlmIChpbmZvMi5hY3RTdGF0ZSA9PSAyMCkgewogICAgICAgICAgICAvLyDoh6rmiJHmuLjljaHliLjlvZPliY3ml7bpl7TkuI3lj6/otK3kubAKICAgICAgICAgICAgdGhpcy5oYW5kbGVyQnRuKCflvZPliY3kuI3lj6/otK3kubAnLCB0cnVlKQogICAgICAgICAgfQoKICAgICAgICAgIGxldCB0b3RhbE51bSA9IE51bWJlcih0aGlzLnJlYWxJbmZvLnVzZXJCdXlOdW0pICsgTnVtYmVyKHRoaXMucmVhbEluZm8udXNlckZyZWVSZWNlaXZlTnVtKSAvLyDlvZPliY3nlKjmiLfnmoTotK3kubDmlbDph4/lkozpooblj5bmlbDph4/mgLvlkowKCiAgICAgICAgICAvLyDmmK/lkKbpmZDliLbotK3kubAKICAgICAgICAgIGlmIChpbmZvMi5saW1pdFN0YXRlKSB7CiAgICAgICAgICAgIGlmICh0b3RhbE51bSA+PSBpbmZvMi5saW1pdEZyZXF1ZW5jeSkgewoKICAgICAgICAgICAgICAvLyDnlKjmiLfmgLvmiJDlip/otK3kubDmlbDph4/lpKfkuo7pmZDliLbotK3kubDmlbDph48KICAgICAgICAgICAgICB0aGlzLmhhbmRsZXJCdG4oJ+W3sui0reS5sCcsIHRydWUpCiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGlmICgodG90YWxOdW0gPj0gaW5mbzIubGltaXRGcmVxdWVuY3kpICYmIGNvbnRhdGlvbikgewoKICAgICAgICAgICAgICAvLyDlvZPliY3nlKjmiLflvZPliY3mtLvliqjkuK3mgLvlhY3otLnpooblj5bmlbDph4/lpKfkuo7pmZDliLbpooblj5bmlbDph48KICAgICAgICAgICAgICB0aGlzLmhhbmRsZXJCdG4oJ+W3sumihuWPlicsIHRydWUpCiAgICAgICAgICAgIH0KICAgICAgICAgIH0KCiAgICAgICAgICB0aGlzLnNob3dCdG5UeHQgPSB0cnVlCgogICAgICAgICAgCgogICAgICAgICAgLy8gLi4uLi4uLi4uLi4uLi4uLi7kvJjljJbmlrDlop4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uCiAgICAgICAgICAvLyDliKTmlq3ku47pmZDotK3ov5vlhaUKICAgICAgICAgIGlmIChpbmZvMi5jaGlsZEVudW1LZXkgPT0gJ0FDVF9TUEVDSUFMX09GRkVSX1BVUkNIQVNFX0xJTUlUJykgewogICAgICAgICAgICBpZiAoIXRoaXMuaW5mby5yZW1haW5OdW0pIHsKICAgICAgICAgICAgICB0aGlzLmhhbmRsZXJCdG4oJ+W3suaKouWujCcsIHRydWUpCiAgICAgICAgICAgICAgcmV0dXJuCiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKHJlcy5pbmZvLmFjdFN0YXRlID09IDExIHx8IHJlcy5pbmZvLmFjdFN0YXRlID09IDMpIHsKICAgICAgICAgICAgICB0aGlzLmhhbmRsZXJCdG4oJ+W3suaKouWujCcsIHRydWUpCiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgLy8gaWYgKHJlcy5pbmZvLmxpbWl0QWN0U3RhdGUgPT0gOCkgewogICAgICAgICAgICAgIC8vICAgdGhpcy5oYW5kbGVyQnRuKCfpooTnuqbmj5DphpInLCBmYWxzZSkKICAgICAgICAgICAgICAvLyB9IGVsc2UgaWYgKHJlcy5pbmZvLmxpbWl0QWN0U3RhdGUgPT0gOSkgewogICAgICAgICAgICAgIC8vICAgdGhpcy5oYW5kbGVyQnRuKCflt7LpooTnuqYnLCBmYWxzZSkKICAgICAgICAgICAgICAvLyB9IAogICAgICAgICAgICAgIGlmIChyZXMuaW5mby5saW1pdEFjdFN0YXRlID09IDggfHwgcmVzLmluZm8ubGltaXRBY3RTdGF0ZSA9PSA5KSB7CiAgICAgICAgICAgICAgICB0aGlzLmhhbmRsZXJCdG4oJ+acquW8gOWniycsIHRydWUpCiAgICAgICAgICAgICAgfSBlbHNlIGlmIChyZXMuaW5mby5saW1pdEFjdFN0YXRlID09IDEpIHsKICAgICAgICAgICAgICAgIHRoaXMuaGFuZGxlckJ0bign56uL5Y2z5oqi6LStJywgZmFsc2UpCiAgICAgICAgICAgICAgfSBlbHNlIGlmIChyZXMuaW5mby5saW1pdEFjdFN0YXRlID09IDEwKSB7CiAgICAgICAgICAgICAgICB0aGlzLmhhbmRsZXJCdG4oJ+W3sui0reS5sCcsIHRydWUpCiAgICAgICAgICAgICAgfSBlbHNlIGlmIChyZXMuaW5mby5saW1pdEFjdFN0YXRlID09IDMpIHsKICAgICAgICAgICAgICAgIHRoaXMuaGFuZGxlckJ0bign5bey5oqi5a6MJywgdHJ1ZSkKICAgICAgICAgICAgICB9IGVsc2UgaWYgKHJlcy5pbmZvLmxpbWl0QWN0U3RhdGUgPT0gMikgewogICAgICAgICAgICAgICAgdGhpcy5oYW5kbGVyQnRuKCflt7LmiqLlrownLCB0cnVlKQogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgfQoKICAgICAgICAgIC8vIOWIpOaWreS4uuWFkeaNouS4reW/g+i/m+WFpQogICAgICAgICAgaWYgKHRoaXMub3B0aW9ucy5oYXNFeGNoYW5nZSAhPSAnJykgewogICAgICAgICAgICBsZXQgZXhjaGFuZ2VfZGF0YSA9IHRoaXMuZXhjaGFuZ2VfZGF0YSAvLyDlhZHmjaLkuK3lv4PmtLvliqjmlbDmja4KCiAgICAgICAgICAgIGlmIChleGNoYW5nZV9kYXRhLmhhc0V4Y2hhbmdlKSB7CiAgICAgICAgICAgICAgdGhpcy5oYW5kbGVyQnRuKCflt7LlhZHmjaInLCB0cnVlKQogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIGlmIChleGNoYW5nZV9kYXRhLnJlbWFpbk51bSA+IDApIHsKICAgICAgICAgICAgICAgIGlmIChleGNoYW5nZV9kYXRhLnN0YXRlICE9IDIpIHsKICAgICAgICAgICAgICAgICAgdGhpcy5oYW5kbGVyQnRuKCflt7Lnu5PmnZ8nLCB0cnVlKQogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgaWYgKGV4Y2hhbmdlX2RhdGEuY29uZGl0aW9uKSB7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5oYW5kbGVyQnRuKCfnq4vljbPlhZHmjaInLCBmYWxzZSkKICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICB0aGlzLmhhbmRsZXJCdG4oJ+eri+WNs+WFkeaNoicsIHRydWUpCiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgdGhpcy5oYW5kbGVyQnRuKCflt7LlhZHlrownLCB0cnVlKQogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgfQoKICAgICAgICAgIC8vIOWmguaenOmcgOimgeaYvuekuuWAkuiuoeaXtgogICAgICAgICAgaWYgKGluZm8yLnNob3dUaW1lICYmIGluZm8yLmNoaWxkRW51bUtleSAhPSAnQUNUX1NQRUNJQUxfT0ZGRVJfUFVSQ0hBU0VfTElNSVQnKSB7CiAgICAgICAgICAgIC8vIC4uLi4uLi4uLi4uLi4uLi4uLuS8mOWMlue7k+adny4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uCiAgICAgICAgICAgIGNsZWFySW50ZXJ2YWwodGhpcy50aW1lcikKICAgICAgICAgICAgdmFyIHJlbWFpblRpbWUgPSB0aGlzLnJlbWFpblRpbWUKICAgICAgICAgICAgdGhpcy50aW1lciA9IHNldEludGVydmFsKCgpID0+IHsKICAgICAgICAgICAgICBpZiAocmVtYWluVGltZSA+PSAxMDAwKSB7CiAgICAgICAgICAgICAgICByZW1haW5UaW1lIC09IDEwMDAKICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgY2xlYXJJbnRlcnZhbCh0aGlzLnRpbWVyKQogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB0aGlzLnJlbWFpblRpbWUgPSByZW1haW5UaW1lIHx8IDAKICAgICAgICAgICAgfSwgMTAwMCkKICAgICAgICAgIH0KICAgICAgICAgIC8vIHRoaXMuZ2V0Q2FzaE51bSgpIC8vIOiOt+WPluW9k+WJjea0u+WKqOWPr+eUqOaKteaJo+acgOWkp+mHkeminee6ouWMhQogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB0aGlzLmJhY2tfdG8ocmVzKQogICAgICAgIH0KICAgICAgfSkuZmluYWxseSgoKSA9PiB7CiAgICAgICAgdGhpcy4kVG9hc3QuY2xlYXIoKQogICAgICB9KQogICAgfSwKICAgIC8vIOiOt+WPlua0u+WKqOWNoeWIuOivpuaDhQogICAgZ2V0Q291cERldGFpbCgpIHsKICAgICAgcmV0dXJuIHRoaXMuJGFwaS5hY3RfY2FyZF9kZXRhaWwoewogICAgICAgIGNhcmRJZDogdGhpcy5jYXJkSWQsCiAgICAgICAgZGV0YWlsSWQ6IHRoaXMuZGV0YWlsSWQsCiAgICAgICAgYWN0U246IHRoaXMub3B0aW9ucy5hY3RTbgogICAgICB9KS50aGVuKHJlcyA9PiB7CiAgICAgICAgaWYgKHJlcy5zdGF0ZSkgewogICAgICAgICAgdGhpcy5pbmZvID0geyAuLi50aGlzLmluZm8sIC4uLnJlcy5pbmZvIH0KICAgICAgICAgIHRoaXMubWVkaWFMaXN0ID0gcmVzLmluZm8ubWVkaWFMaXN0CiAgICAgICAgICBpZihyZXMuaW5mby5zaG9wU2hvdykgewogICAgICAgICAgICB0aGlzLmdldFN1aXRTaG9wcygpIAogICAgICAgICAgfQogICAgICAgICAgLy8g6Ieq5oiR5ri45Y2h5Yi45pe25ZWG5a626K+m5oOF5pi+56S65Li65Zu+5paH6K+m5oOFCiAgICAgICAgICBpZiAodGhpcy5pbmZvLmRlc2NyaWJlKSB7CiAgICAgICAgICAgIHRoaXMuZ3JhcGhpY0RldGFpbCA9IHRoaXMuaW5mby5kZXNjcmliZQogICAgICAgICAgfQogICAgICAgICAgdGhpcy5nZXRGaXhlZERldGFpbChyZXMuaW5mby5zaG9wU24pIC8vIOiOt+WPluWVhuWutuivpuaDhQogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAvLyB0aGlzLmJhY2tfdG8ocmVzKQogICAgICAgIH0KICAgICAgfSkKICAgIH0sCgoKICAgIC8vIOeJueWNlua0u+WKqOeJueacieS/oeaBrwogICAgZ2V0U3BlY2lhbEluZm8oKSB7CiAgICAgIHJldHVybiB0aGlzLiRhcGkuc3BlY2lhbF9zZWxsX2luZm8oewogICAgICAgIGNoYW5uZWxUeXBlOiB0aGlzLm9wdGlvbnMuY2hhbm5lbFR5cGUgfHwgJycsCiAgICAgICAgcXJDb2RlOiB0aGlzLm9wdGlvbnMucXJDb2RlIHx8ICcnLAogICAgICAgIGFjdFNuOiB0aGlzLm9wdGlvbnMuYWN0U24KICAgICAgfSkudGhlbihyZXMgPT4gewogICAgICAgIGNvbnNvbGUubG9nKCdzcGVjaWFsX3NlbGxfaW5mbycsIHJlcy5pbmZvKQogICAgICAgIGlmIChyZXMuc3RhdGUpIHsKICAgICAgICAgIHRoaXMuY2FyZElkID0gcmVzLmluZm8uY2FyZElkLAogICAgICAgICAgdGhpcy5kZXRhaWxJZCA9IHJlcy5pbmZvLmRldGFpbElkCiAgICAgICAgICB0aGlzLmluZm8gPSB7Li4udGhpcy5pbmZvLCAuLi5yZXMuaW5mb30KICAgICAgICB9IGVsc2UgewogICAgICAgICAgLy8gdGhpcy5iYWNrX3RvKHJlcykKICAgICAgICB9CiAgICAgIH0pCiAgICB9LAoKICAgIC8vIOiOt+WPluWVhuWutuWbuuWumuS/oeaBrwogICAgZ2V0Rml4ZWREZXRhaWwoc2hvcFNuKSB7CiAgICAgIHRoaXMuJGFwaS5zaG9wX2ZpeGVkX2RldGFpbCh7CiAgICAgICAgc2hvcFNuLAogICAgICAgIGxhdDogdGhpcy5sb2NhdGlvbkluZm8ubGF0aXR1ZGUsCiAgICAgICAgbG5nOiB0aGlzLmxvY2F0aW9uSW5mby5sb25naXR1ZGUKICAgICAgfSkudGhlbihyZXMgPT4gewogICAgICAgIGlmIChyZXMuc3RhdGUpIHsKICAgICAgICAgIHRoaXMuZml4ZWREZXRhaWwgPSByZXMuaW5mby5zaG9wCiAgICAgICAgICBpZighdGhpcy5pbmZvLmRlc2NyaWJlKSB7CiAgICAgICAgICAgIHRoaXMuZ3JhcGhpY0RldGFpbCA9IHJlcy5pbmZvLnNob3AuZGV0YWlsCiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9KQogICAgfSwKCiAgICAvLyDlhbPpl63nuqLljIXliJfooagKICAgIGNvbHNlY2FzaE1hc2soKSB7CiAgICAgIHRoaXMuY2FzaE1hc2sgPSAhdGhpcy5jYXNoTWFzawogICAgfSwKCiAgICAvLyDojrflj5bmtLvliqjnuqLljIXlvZPliY3kuqvnlKjmnIDlpKfnuqLljIUKICAgIGdldENhc2hOdW0oKSB7CiAgICAgIHRoaXMuJFRvYXN0LmxvYWRpbmcoeyAKICAgICAgICBtZXNzYWdlOiAn5Yqg6L295LitLi4uJywKICAgICAgICBmb3JiaWRDbGljazogdHJ1ZSwKICAgICAgICBkdXJhdGlvbjogMAogICAgICB9KQogICAgICBsZXQgdmlwX2NoZWNrID0gKCF0aGlzLnZpcFVzZXIgJiYgdGhpcy5pbmZvLmJ1eUxpbWl0ID09IDIpID8gdHJ1ZSA6IGZhbHNlCiAgICAgIGxldCBwcmljZSA9ICh0aGlzLmluZm8uYnV5TGltaXQgPT0gMiB8fCB0aGlzLnZpcFVzZXIpID8gdGhpcy5pbmZvLnNlbGxQcmljZSA6IHRoaXMuaW5mby5ub1ZpcFByaWNlCiAgICAgIAogICAgICB0aGlzLiRhcGkuY2FzaF9yZWRfbGlzdCh7CiAgICAgICAgYWN0U246IHRoaXMub3B0aW9ucy5hY3RTbiwKICAgICAgICBjaXR5SWQ6IHRoaXMubG9jYXRpb25DaXR5LmNpdHlJZCwKICAgICAgICBvcGVuVmlwOiB2aXBfY2hlY2ssIC8vIOaYr+WQpuWLvumAieS8muWRmOWNoQogICAgICAgIHZpcEZlZTogdmlwX2NoZWNrID8gdGhpcy52aXBGZWUgOiAwLCAvLyDkvJrlkZjljaHph5Hpop0KICAgICAgICBhY3RGZWU6IHByaWNlLCAvLyDmtLvliqjph5Hpop0KICAgICAgICBjYXJkSWQ6IHRoaXMuaW5mby5jYXJkSWQsIC8vIOeJueWNluWNoeWIuGlkIHx8IOekvOWMheS8oOepugogICAgICB9KS50aGVuKHJlcyA9PiB7CiAgICAgICAgaWYgKHJlcy5zdGF0ZSkgewogICAgICAgICAgbGV0IHJlZExpc3QgPSByZXMuaW5mby5jYXNoUmVkTGlzdCB8fCBbXQogICAgICAgICAgbGV0IGNvbnN1bWVyQ291cG9uTGlzdCA9IHJlcy5pbmZvLmNvbnN1bWVyQ291cG9uTGlzdCB8fCBbXQogICAgICAgICAgbGV0IHVzYWJsZUxpc3QgPSByZWRMaXN0LmZpbHRlcigoaXRlbSkgPT4gaXRlbS5jdXJyZW50QWJsZVVzZSkgLy8g6L+H5ruk5Y+v55So57qi5YyFCiAgICAgICAgICBsZXQgc29ydFVzYWJsZUxpc3QgPSB1c2FibGVMaXN0LnNvcnQoZnVuY3Rpb24gKGEsIGIpIHsgLy8g6ZmN5bqP5o6S5bqPCiAgICAgICAgICAgIHJldHVybiBiLm1vbmV5IC0gYS5tb25leQogICAgICAgICAgfSkKICAgICAgICAgIHRoaXMuc2VsQ2FzaHJlZCA9IHNvcnRVc2FibGVMaXN0WzBdIC8vIOmAieS4reacgOWkp+e6ouWMhQogICAgICAgICAgaWYgKGNvbnN1bWVyQ291cG9uTGlzdC5sZW5ndGgpIHsKICAgICAgICAgICAgdGhpcy5zZWxDb25zdW1lciA9IGNvbnN1bWVyQ291cG9uTGlzdFswXSB8fCB7fSAvLyDpgInkuK3mtojotLnliLgKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0pLmZpbmFsbHkoKCkgPT4gewogICAgICAgIHRoaXMuJFRvYXN0LmNsZWFyKCkKICAgICAgfSkKICAgIH0sCgogICAgLy8g6I635Y+W5Lya5ZGY5Y2h5pyA5L2O5Lu35qC8CiAgICB2aXBQcmljZSgpIHsKICAgICAgdGhpcy4kYXBpLnYxXzRfdmlwX2xvd1ByaWNlKHsKICAgICAgICB0b3BpY1R5cGU6IDEsCiAgICAgICAgdG9waWNTbjogdGhpcy5vcHRpb25zLmFjdFNuCiAgICAgIH0pLnRoZW4ocmVzID0+IHsKICAgICAgICBpZiAocmVzLnN0YXRlKSB7CiAgICAgICAgICB0aGlzLnZpcEZlZSA9IHJlcy5pbmZvID8gcmVzLmluZm8ubG93UHJpY2UgfHwgMCA6IDAKICAgICAgICB9CiAgICAgIH0pCiAgICB9LAoKICAgIC8vIOWFs+mXree6ouWMheW8ueeql+aXtgogICAgaGFzQ2FjaFJlZExpc3QoeyBkZXRhaWwgfSkgewogICAgICBpZiAoZGV0YWlsICYmIGRldGFpbC5sZW5ndGggPiAwKSB7CiAgICAgICAgLy8g6YeN5paw6K+35rGC57qi5YyF5o6l5Y+jCiAgICAgICAgLy8gdGhpcy5zZWxlY3RDb21wb25lbnQoJyNhY3RpdmVDYXNoJykuZ2V0Q2FzaExpc3QoKQogICAgICAgIHRoaXMuZ2V0Q2FzaE51bSgpCiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5zaG93UGFnZU1vZGVsID0gdHJ1ZQogICAgICB9CiAgICB9LAoKICAgIC8vIOiHquaIkea4uOa0u+WKqOivpuaDhemAieaLqeS7t+agvAogICAgc2VsRGF0ZUxpc3QoaXRlbSkgewogICAgICBsZXQgZGF0ZSA9IHsKICAgICAgICB0ZXh0OiBpdGVtLmRhdGUuc3Vic3RyKDAsIDYpLAogICAgICAgIG1vbnRoOiBpdGVtLmRhdGUuc3Vic3RyKDQsIDIpLAogICAgICAgIHllYXI6IGl0ZW0uZGF0ZS5zdWJzdHIoMCwgNCksCiAgICAgICAgZGF5OiBpdGVtLmRhdGUuc3Vic3RyKDYsIDIpCiAgICAgIH0KICAgICAgdGhpcy4kcmVmcy5jYWxlbmRhci5zaG93Q2FsZW5kYXJEYXRhKGRhdGUpCiAgICAgIHRoaXMub3BlbkNhbGVuZGFyKCkgLy8g5pi+56S65pel5Y6G5by556qXCiAgICB9LAoKICAgIG9wZW5DYWxlbmRhcigpIHsKICAgICAgdGhpcy5jYWxlbmRhck1hc2sgPSB0cnVlCiAgICB9LAoKICAgIGdldFRyYXZlbE1vbnRoSW5mbyAoZGV0YWlsKSB7CiAgICAgIC8vIOaOpeaUtuaXpeWOhuS/oeaBrwogICAgICBpZiAoZGV0YWlsLmRhdGFUeXBlID09ICdpbml0JykgewogICAgICAgIC8vIOaXpeWOhuWIneWni+WMluaVsOaNrgogICAgICAgIHRoaXMudHJhdmVsTW9udGhJbmZvID0gZGV0YWlsCiAgICAgICAgaWYgKGRldGFpbC51bmFibGVCdXkpIHsKICAgICAgICAgIHRoaXMuaGFuZGxlckJ0bign5b2T5YmN5LiN5Y+v6LSt5LmwJywgdHJ1ZSkKICAgICAgICB9CiAgICAgIH0gZWxzZSBpZiAoZGV0YWlsLmRhdGFUeXBlID09ICdzZWxEYXRlJyl7CiAgICAgICAgLy8g6YCJ5oup5pel5Y6G5L+h5oGvCiAgICAgICAgbGV0IGluZm8gPSB0aGlzLmluZm8KICAgICAgICBpbmZvLnNlbGxQcmljZSA9IGRldGFpbC5zZWxsUHJpY2UKICAgICAgICBpbmZvLm5vVmlwUHJpY2UgPSBkZXRhaWwubm9WaXBQcmljZQogICAgICAgIHRoaXMuaW5mbyA9IGluZm8KICAgICAgICB0aGlzLnNlbERhdGUgPSBkZXRhaWwKICAgICAgfQogICAgfSwKCiAgICBnZXRSZWNlaXZlQ29uZGl0aW9uICgpIHsKICAgICAgcmV0dXJuIHRoaXMuJGFwaS5yZWNlaXZlX2NvbmRpdGlvbih7CiAgICAgICAgYWN0U246IHRoaXMub3B0aW9ucy5hY3RTbgogICAgICB9KS50aGVuKHJlcz0+IHsKICAgICAgICBpZiAocmVzLnN0YXRlKSB7CiAgICAgICAgICB0aGlzLmNvbmRpdGlvbkluZm8gPSByZXMuaW5mbwogICAgICAgIH0KICAgICAgfSkKICAgIH0sCiAgfSwKICAKICBjcmVhdGVkKCkgewogICAgY29uc3Qgb3B0aW9ucyA9IHRoaXMuJHJvdXRlLnF1ZXJ5CiAgICBvcHRpb25zLmhhc0V4Y2hhbmdlID0gb3B0aW9ucy5oYXNFeGNoYW5nZSB8fCAnJwogICAgb3B0aW9ucy50eXBlID0gb3B0aW9ucy50eXBlIHx8ICcnCiAgICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zCiAgICBpZiAob3B0aW9ucy5wb3B1cCkgewogICAgICB0aGlzLiRkaWFsb2cuYWxlcnQoewogICAgICAgIHRpdGxlOiAn5o+Q56S6JywKICAgICAgICBtZXNzYWdlOiAn6K6i5Y2V6LaF5pe25bey5Y+W5raI77yM6K+36YeN5paw5LiL5Y2VJywKICAgICAgICBjb25maXJtQnV0dG9uVGV4dDogJ+ehruWumicsCiAgICAgICAgY29uZmlybUJ1dHRvbkNvbG9yOiAnI0Q5MDYzNCcKICAgICAgfSkKICAgIH0KICAgIHRoaXMuZ2V0QWN0RGV0YWlsKHRydWUpCiAgICB0aGlzLnZpcFByaWNlKCkKICAgIGlmICh0aGlzLm9wdGlvbnMuaGFzRXhjaGFuZ2UgIT0gJycpIHsgLy8g5Yik5pat5Li65YWR5o2i5Lit5b+D6L+b5YWlCiAgICAgIHRoaXMuZXhjaGFuZ2VfZGF0YSA9IHRoaXMuJHNhdmUuZ2V0KCdzZXNzaW9uJywgJ2V4Y2hhbmdlX2RhdGEnKSAvLyDlhZHmjaLkuK3lv4PmtLvliqjmlbDmja4KICAgIH0KICAgIHRoaXMuZ2V0UmVjZWl2ZUNvbmRpdGlvbigpIC8vIOaYr+WQpumcgOimgeWhq+WGmeeUqOaIt+S/oeaBr+WPiuWFtuadoeS7tgoKICAgIHRoaXMubmVlZEF1dGggPSB0aGlzLm5lZWRBdXRoCiAgICB0aGlzLmdldEZyZWVCYWcgPSB0aGlzLmdldEZyZWVCYWcKICAgIHRoaXMudmlwVXNlciA9IHRoaXMudmlwQ2FyZEluZm8udmlwVXNlcgogICAgdGhpcy5zZWxDYXNocmVkID0ge30KICAgIGlmICh0aGlzLmFjdERldGFsVXBkYXRlKSB7CiAgICAgIC8vIOWIt+aWsOa0u+WKqOaVsOaNrgogICAgICB0aGlzLmdldEFjdERldGFpbCh0cnVlKQogICAgICB0aGlzLmFjdERldGFsVXBkYXRlID0gZmFsc2UKICAgIH0KCiAgICAvLyDmtLvliqjku7fmoLzliLfmlrAKICAgIGlmKHRoaXMudXBkYXRlRmxhZykgewogICAgICB0aGlzLnJlZnJlc2ggPSB0cnVlCiAgICB9CgogICAgLy8g55So5oi35L+h5oGv5pWw5o2uCiAgICBsZXQgdHJhdmVsSW5mb3JtYXRpb24gPSB0aGlzLiRzYXZlLmdldCgnc2Vzc2lvbicsICd0cmF2ZWxJbmZvcm1hdGlvbicpCiAgICBpZiAodHJhdmVsSW5mb3JtYXRpb24pIHsKICAgICAgdGhpcy50cmFjdmVsVXNlckxpc3QgPSB0cmF2ZWxJbmZvcm1hdGlvbi5mb3JtTGlzdAogICAgICB0aGlzLnNlbERhdGUgPSB0cmF2ZWxJbmZvcm1hdGlvbi5zZWxEYXRlCiAgICAgIAogICAgICBpZiAodGhpcy5vcHRpb25zLmhhc0V4Y2hhbmdlICE9ICcnKSB7CiAgICAgICAgdGhpcy5leGNoYW5nZSgpCiAgICAgIH0gZWxzZSBpZiAodGhpcy5mcmVlKSB7CiAgICAgICAgLy8g5YWN6LS56aKG5Y+WCiAgICAgICAgdGhpcy5nZXRGcmVlKCkKICAgICAgfQogICAgfQogIH0sCiAgYWN0aXZhdGVkKCkgewoKICB9LAogIGRlc3Ryb3llZCgpIHsKICAgIC8vIOa4hemZpOeUqOaIt+Whq+WGmeS/oeaBrwogICAgdGhpcy4kc2F2ZS5yZW1vdmVBcnIoJ3Nlc3Npb24nLCAgWyd0cmF2ZWxJbmZvcm1hdGlvbicsICd1cGRhdGVGbGFnJ10pCiAgfQp9Cg=="},{"version":3,"sources":["specialSale.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAoFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;;;;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA","file":"specialSale.vue","sourceRoot":"src/views/active","sourcesContent":["<!--\r\n * @Description: 特卖活动\r\n * @Version: 1.0\r\n * @Autor: cherry\r\n * @Date: 2020-07-20 15:48:24\r\n * @LastEditors: cherry\r\n * @LastEditTime: 2020-08-07 17:16:16\r\n--> \r\n<template>\r\n  <div>\r\n    <van-skeleton title :row=\"14\" :loading=\"!ready\">\r\n      <template v-if=\"ready\">\r\n        <common-swiper :imgUrls=\"mediaList\" ></common-swiper>\r\n        <div class=\"act-container\" >\r\n          <active-header\r\n            :info.sync=\"info\" \r\n            :channelType=\"channelType\" \r\n            :selConsumer=\"selConsumer\" \r\n            :showTime=\"info.showTime\" \r\n            :downTime.sync=\"downTime\"\r\n            :remainTime=\"remainTime\" \r\n            :hasExchange=\"options.hasExchange\">\r\n          </active-header>\r\n          <!-- 现金红包 && 使用规则 -->\r\n          <active-cash id=\"activeCash\" :info=\"info\" :options=\"options\" :actType=\"info.actType\" />\r\n          <!-- 商品详情 -->\r\n          <active-coupon :info=\"info\"></active-coupon>\r\n          <!-- 自我游加个日历 -->\r\n          <div v-if=\"travelMonthInfo.month\" class=\"calendar\" @click=\"openCalendar\">\r\n            <div class=\"flex-b calendar-til\">\r\n              <div class=\"flex-v left\">\r\n                <span class=\"ft32 c1A bold\">价格日历</span>\r\n              </div>\r\n              <div class=\"flex-v right\">\r\n                <span class=\"ft24 c66\">更多</span>\r\n                <span class=\"ft18 c66 iconfont iconicon_more\"></span>\r\n              </div>\r\n            </div>\r\n            <div v-if=\"travelMonthInfo.dateList && travelMonthInfo.dateList.length > 0\" class=\"calendar-list flex\">\r\n              <div class=\"calendar-scroll\" scroll-x>\r\n                <div class=\"list-item tac\" @click=\"selDateList(item)\"  v-for=\"(item, index) in travelMonthInfo.dateList\" :key=\"index\">\r\n                  <div class=\"ft24 c1A month\">{{ item.monthDay }}</div>\r\n                  <span class=\"ft20 cCD\">¥<span class=\"ft30\">{{ item.sellPrice/100 }}</span></span>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <!-- 自我游-房态详情 -->\r\n          <active-room :url=\"info.houseUrl\"></active-room>\r\n          <!-- 使用须知 -->\r\n          <active-notice :info=\"info\"></active-notice>\r\n          <!-- 品牌及门店 -->\r\n          <template v-if=\"info.supplierCode != 'PARTY_ZWY' && info.cardType != 'CARD_DIRECT_RECHARGE'\">\r\n            <active-brand :info=\"info\" :suitShops=\"suitShops\" :options=\"options\" :fixedDetail=\"fixedDetail\"></active-brand>\r\n          </template>\r\n\r\n          <!-- 商家/图文详情 -->\r\n          <active-graphic :detail=\"graphicDetail\" :title=\"info.describe ? '图文详情' : '商家详情'\"></active-graphic>\r\n\r\n        </div>\r\n\r\n        <!-- 底部按钮 -->\r\n        <!-- 兑换中心进入时 -->\r\n        <div class='active-footer footer1' v-if='options.hasExchange'>\r\n          <img v-if=\"!btnDisabled\" src='http://doyd.oss-cn-shenzhen.aliyuncs.com/vip_mini_apply/v1.0.0/btn_base_pay1.png'>\r\n          <img v-else src='http://doyd.oss-cn-shenzhen.aliyuncs.com/vip_mini_apply/v1.0.0/btn_unclickable_pay1.png'>\r\n          <div class='flex-v poa footer-text'>\r\n            <button class=\"ft34 tac\" :class=\"btnDisabled ? 'cB5' : 'c99' \"  id=\"STATIS_BUY\">{{btnText}}</button>\r\n          </div>\r\n        </div>\r\n        <!-- 正常活动进入 -->\r\n        <div class=\"footer pof\" v-if='showBtnTxt'>\r\n          <active-footer :info.sync=\"info\" :btnText=\"btnText\" :btnDisabled=\"btnDisabled\" :selCashred=\"selCashred\" :selConsumer=\"selConsumer\" @success=\"handlerEvent\"></active-footer>\r\n        </div>\r\n      </template>\r\n\r\n      \r\n    <!-- 日历弹窗 -->\r\n    <active-calendar ref=\"calendar\" v-if=\"info.validityType\" :refresh=\"refresh\" @travelMonthInfo=\"getTravelMonthInfo\" :info=\"info\" :actSn=\"options.actSn\" :calendarMask.sync=\"calendarMask\" :channelType=\"options.channelType\"></active-calendar>\r\n\r\n    </van-skeleton>\r\n  </div>\r\n</template>\r\n<script>\r\n  import { mapGetters, mapActions, mapMutations } from \"vuex\";\r\n  import seckillMixin from '@/mixins/seckillMixin' \r\n  import activeBrand from '@components/active/activeBrand'\r\n  import activeNotice from '@components/active/activeNotice'\r\n  import activeGraphic from '@components/active/activeGraphic'\r\n  import activeRoom from '@components/active/activeRoom'\r\n  import activeHeader from '@components/active/activeHeader'\r\n  import activeCoupon from '@components/active/activeCoupon'\r\n  import activeCash from '@components/active/activeCash'\r\n  import activeFooter from '@components/active/activeFooter'\r\n  import activeCalendar from '@components/active/activeCalendar'\r\n\r\n  import utils from \"@/utils/utils\"\r\n  import orderPay from \"@/utils/pay\"\r\n  import activeUtils from '@/filters/active'\r\n\r\n  export default {\r\n    name: 'specialSale',\r\n    mixins: [seckillMixin],\r\n    computed: {},\r\n    components:{\r\n      activeHeader,\r\n      activeCoupon,\r\n      activeCash,\r\n      activeGraphic,\r\n      activeBrand,\r\n      activeRoom,\r\n      activeNotice,\r\n      activeFooter,\r\n      activeCalendar\r\n    },\r\n    data() {\r\n      return {\r\n        vipUser: false,\r\n        suitShops: [],\r\n        mediaList: [],\r\n        graphicDetail: '', // 详情html信息\r\n        timer: null,\r\n        recommendList: [], // 其他礼包推荐/推荐权益\r\n        flag: true,\r\n        showPop: false, // 非会员购买时提示\r\n        recomPage: 1,  // 特卖的推荐权益上拉更多\r\n        hasMore: true, // 特卖的推荐权益更多提示\r\n        btnDisabled: false,\r\n        cashMask: false,\r\n        selCashred: {},\r\n        selConsumer: {},\r\n        calendarMask: false, // 日历弹窗\r\n        selDate: {\r\n          startTime: '',\r\n          endTime: ''\r\n        }, // 自我游选中的时间\r\n        travelMonthInfo: {},\r\n        conditionInfo: {}, // 兑奖中心信息\r\n        tracvelUserList: [],\r\n        refresh: false, // 刷新日历数据\r\n        downTime: {\r\n          hour: '00',\r\n          minute: '00',\r\n          second: '00'\r\n        },\r\n        ready: false,\r\n        btnText: '立即抢购',\r\n        showBtnTxt: true,\r\n        fixedDetail:{}, // 门店品牌人均信息\r\n        remainTime: 3999000,\r\n        channelType: '',\r\n        options: this.$route.query || {},\r\n        info: {}\r\n      }\r\n    },\r\n    computed: {\r\n      ...mapGetters([\"locationInfo\", \"wxUser\", \"locationCity\", \"vipCardInfo\", \"updateFlag\"])\r\n    },\r\n    methods: {\r\n      // 按钮领取、开通、购买等操作事件\r\n      handlerEvent() {\r\n        if (this.btnDisabled) return // 按钮置灰时，无法点击购买按钮\r\n        let info = this.info\r\n        if (info.supplierCode == 'PARTY_ZWY' && [3, 4, 5].includes(info.validityType)) {\r\n          // 自我游特卖时 && 需要选定日期   弹出选择日历\r\n          if (!this.calendarMask) {\r\n            this.calendarMask = true\r\n            return\r\n          }\r\n          if (!this.selDate.startTime) { // 未选择时间\r\n            this.$Toast('请选择游玩日期')\r\n            this.calendarMask = true\r\n          } else {\r\n            if (info.validityType == 4 || info.validityType == 5) { // 游客选定日期延后X有效 || 游客选定日期指定时间有效\r\n              this.$dialog.confirm({\r\n                title:'确定出游时间?',\r\n                message:`${utils.formatTime(this.selDate.startTime || 0, 'YYYY/MM/DD')} ~ ${utils.formatTime(this.selDate.endTime || 0, 'YYYY/MM/DD')}`,\r\n              }).then(()=>{\r\n                this.placeOrder()\r\n              }).catch(() => {\r\n                    // on cancel\r\n              });\r\n            } else {\r\n              this.$dialog.confirm({\r\n                title:'确定出游时间?',\r\n                message:`${utils.formatTime(this.selDate.startTime || 0, 'YYYY/MM/DD')}`,\r\n              }).then(()=>{\r\n                this.placeOrder()\r\n              }).catch(() => {\r\n                    // on cancel\r\n              });\r\n            }\r\n          }\r\n          return\r\n        }\r\n        this.placeOrder()\r\n      },\r\n\r\n      // 下单\r\n      placeOrder() {\r\n        if (this.options.hasExchange != '') {\r\n        console.log('触发点击购买1', this.info.childEnumKey, this.free, this.info.cardType)\r\n\r\n          // 判断兑奖中心进入  立即兑换\r\n          let conditionInfo = this.conditionInfo\r\n          let tracvelUserList = this.tracvelUserList\r\n          if (conditionInfo.isCondition && tracvelUserList.length == 0) {\r\n            // 判断是否需求填写信息\r\n            this.$router.push({\r\n              name: 'travelInformation',\r\n              query: {\r\n                actSn: this.options.actSn\r\n              }\r\n            })\r\n            return \r\n          }\r\n          this.exchange()\r\n        } else if (this.info.childEnumKey == 'ACT_SPECIAL_OFFER_PURCHASE_LIMIT') {\r\n        console.log('触发点击购买2', this.info.childEnumKey, this.free, this.info.cardType)\r\n\r\n          // 从限购进入\r\n          this.handlerLimitEvent()\r\n        } else if (this.free && this.info.cardType != 'CARD_DIRECT_RECHARGE') {\r\n\r\n          let conditionInfo = this.conditionInfo\r\n          let tracvelUserList = this.tracvelUserList\r\n        console.log('触发点击购买3', conditionInfo.isCondition, this.free, tracvelUserList)\r\n\r\n          if (conditionInfo.isCondition && tracvelUserList.length == 0) {\r\n            // 判断是否需求填写信息\r\n            this.$router.push({\r\n              name: 'travelInformation',\r\n              query: {\r\n                actSn: this.options.actSn\r\n              }\r\n            })\r\n            return\r\n          }\r\n          // 免费领取\r\n          this.getFree()\r\n        } else if (this.open_receive) {\r\n        console.log('触发点击购买4', this.info.childEnumKey, this.free, this.info.cardType)\r\n\r\n          this.openReceive()\r\n        } else {\r\n        console.log('触发点击购买5', this.info.childEnumKey, this.free, this.info.cardType)\r\n\r\n          this.toBuy()\r\n        }\r\n      },\r\n\r\n      handlerLimitEvent() {\r\n        if (this.info.limitActState == 12) {\r\n          this.$Toast('当前合辑非进行中状态')\r\n        } else {\r\n          if (this.btnText == '立即抢购') {\r\n            this.toBuy()\r\n          }\r\n        }\r\n      },\r\n\r\n      // 兑换\r\n      exchange() {\r\n        let item = this.exchange_data\r\n        this.$dialog.confirm({\r\n          title: `是否确认兑换${item.actName || ''}?`,\r\n          message:'兑换后不可更改且原有潮卡将会清空',\r\n        }).then(()=>{\r\n          this.priceExchange(item)\r\n        }).catch(() => {\r\n              // on cancel\r\n        });\r\n      },\r\n\r\n      // 开始兑换\r\n      priceExchange(item) {\r\n        if (this.isCanClick) return\r\n        this.isCanClick = true\r\n        this.$api.price_exchange({\r\n          actSn: item.actSn,\r\n          awardId: item.awardId,\r\n          cityId: this.locationCity.cityId,\r\n          chooseDate: this.selDate.startTime ? utils.formatTime(this.selDate.startTime || 0, 'YYYYMMDD') : 0, // 自我游选择时间\r\n          tracvelUserList: JSON.stringify(this.tracvelUserList)\r\n        }).then(res => {\r\n          if (res.state) {\r\n            this.mask = true\r\n            this.tracvelUserList = []\r\n            this.$save.remove('session', 'travelInformation')\r\n            this.handlerBtn('已兑换', true)\r\n            // 清除用户填写信息\r\n            this.$save.remove('session', 'travelInformation')\r\n          } else {\r\n            this.$Toast(res.message)\r\n          }\r\n        }).finally(() => {\r\n          setTimeout(() => {\r\n            this.isCanClick = false\r\n          }, 300)\r\n        })\r\n      },\r\n\r\n      goCard() {\r\n        this.$router.push({\r\n          name: 'couponList'\r\n        })\r\n      },\r\n\r\n      close() {\r\n        this.mask = false\r\n      },\r\n\r\n      // 非会员开通并领取\r\n      openReceive() {\r\n        this.$set(this.info, 'sellPrice', 0)\r\n        this.$set(this.info, 'noVipPrice', 0)\r\n        let receiveType = this.options.channelType == 'CHANNEL_ACTIVITY_LABEL_SHOW' ? 4 : 1\r\n        let info = this.info\r\n        info.selDate = this.selDate\r\n        info.describe = ''\r\n        this.$save.set('session', 'orderInfo', this.info)\r\n        \r\n        // 非会员开通并领取\r\n        this.$router.push({\r\n          name: 'submitOrder',\r\n          query: {\r\n            compId: this.options.compId || '',\r\n            actSn: this.options.actSn,\r\n            channelType: this.options.channelType,\r\n            receiveType: receiveType\r\n          }\r\n        })\r\n      },\r\n\r\n      // 售价为0时，免费领\r\n      getFree() {\r\n        let actDeal = orderPay.actDeal({\r\n          cityId: this.locationCity.cityId,\r\n          actSn: this.options.actSn,\r\n          dealNum: 1,\r\n          channelType: this.options.channelType,\r\n          qrCode: this.options.qrCode || '',\r\n          realFee: 0,\r\n          receiveType: this.options.channelType == 'CHANNEL_ACTIVITY_LABEL_SHOW' ? 4 : 1, // 获取方式，1会员领取，2会员购买，3渠道购买 v1.2.0改为1\r\n          openVip: false, //是否开通月卡会员并购买\r\n          actFee: 0, //活动支付费用\r\n          vipFee: 0,\r\n          vipCardId: '',\r\n          buyType: 0,\r\n          compId: this.options.compId, // 合辑Id\r\n          chooseDate: this.selDate.startTime ? utils.formatTime(this.selDate.startTime || 0, 'YYYYMMDD') : 0, // 自我游选择时间\r\n          tracvelUserList: JSON.stringify(this.tracvelUserList)\r\n        })\r\n        if (actDeal) {\r\n          actDeal.then(res => {\r\n            if (res.state) {\r\n              this.tracvelUserList = []\r\n              this.$save.remove('session', 'travelInformation')\r\n              this.$router.push({name: 'specialSaleSuccess', query: { tradeId: res.info.tradeId, actName: this.info.actName, receive: 1, actSn: this.options.actSn, vip_check: 0}})\r\n            }\r\n          })\r\n        }\r\n      },\r\n\r\n      toBuy() {\r\n        if (this.isCanClick) return\r\n        this.isCanClick = true\r\n\r\n        let info = this.info\r\n        info.selDate = this.selDate\r\n        info.describe = ''\r\n        this.$save.set('session', 'orderInfo', this.info)\r\n        // 判断是否有未支付的订单\r\n        this.$api.order_unpay({\r\n          actSn: this.options.actSn\r\n        }).then(res => {\r\n          if (res.state) {\r\n            if (res.info.existsUnPay) {\r\n              // 如果存在未支付的订单，跳转到订单列表页\r\n              this.$router.push({\r\n                name: 'orderList'\r\n              })\r\n            } else {\r\n              let receiveType = this.options.channelType == 'CHANNEL_ACTIVITY_LABEL_SHOW' ? 3 : 2\r\n              this.$router.push({\r\n                name: 'submitOrder',\r\n                query: {\r\n                  qrCode: this.options.qrCode || '',\r\n                  compId: this.options.compId || '',\r\n                  actSn: this.options.actSn,\r\n                  channelType: this.options.channelType,\r\n                  receiveType: receiveType\r\n                }\r\n              })\r\n            }\r\n          }\r\n        }).finally(() => {\r\n          this.isCanClick = false\r\n        })\r\n      },\r\n\r\n      // 判断用户购买信息\r\n      getRealTimeInfo(limitFrequency) {\r\n        return this.$api.realTime_info({\r\n          actSn: this.options.actSn\r\n        }).then(res => {\r\n          if (res.state) {\r\n            this.realInfo = res.info\r\n          }\r\n        })\r\n      },\r\n\r\n      handlerBtn(text, disabled = false) {\r\n        this.btnText = text\r\n        this.btnDisabled = disabled\r\n      },\r\n\r\n      handlerLimit(info2, flag) {\r\n        // 1未开始 2进行中 3已结束\r\n        let currentTime = +new Date()\r\n        if ((info2.limitEndTime < currentTime) && (info2.limitStartTime < currentTime)) {\r\n          info2.timeState = 3\r\n        } else if ((info2.limitEndTime > currentTime) && (info2.limitStartTime < currentTime)) {\r\n          info2.timeState = 2\r\n        } else if (info2.limitStartTime > currentTime) {\r\n          info2.timeState = 1\r\n          let headline = getDayName(info2.limitStartTime)\r\n          this.headline = headline\r\n        }\r\n        if (info2.timeState != 3) {\r\n          clearInterval(this.limitTimer)\r\n          this.limitTimer = setInterval(() => {\r\n            let nowTime = +new Date()\r\n            var cutTime = 0\r\n            if (info2.timeState == 1) {\r\n              cutTime = info2.limitStartTime - nowTime\r\n            } else {\r\n              cutTime = info2.limitEndTime - nowTime\r\n            }\r\n            let lastTime = utils.countDown3(cutTime)\r\n            this.downTime = lastTime\r\n            if (cutTime <= 0 && (info2.limitActState != 12)) {\r\n              clearInterval(this.limitTimer)\r\n              this.getActDetail()\r\n\r\n            }\r\n          }, 1000)\r\n          console.log(this.downTime, 'this.downTime')\r\n        } else {\r\n          this.downTime = {\r\n            hour: '00',\r\n            minute: '00',\r\n            second: '00'\r\n          }\r\n        }\r\n        \r\n        if (flag) {\r\n          console.log('flag', info2, '==============')\r\n          // 已抢完活动弹窗\r\n          if (info2.limitActState == 3 || info2.limitActState == 2 || !this.info.remainNum) {\r\n            this.getEndActive()\r\n          }\r\n        }\r\n      },\r\n\r\n      // 获取活动详情\r\n      async getActDetail(flag) {\r\n        this.$Toast.loading({ \r\n          message: '加载中...',\r\n          forbidClick: true,\r\n          duration: 0\r\n        })\r\n        await this.getSpecialInfo() // 如果是特卖活动详情，cardId，detailId从特卖详情里面获取\r\n        await this.getCoupDetail(); // 获取卡券详情\r\n        await this.getRealTimeInfo()\r\n        this.getSuitShops() // 获取适用店铺\r\n        this.$api.act_detail({\r\n          channelType: this.options.channelType,\r\n          qrCode: this.options.qrCode || '',\r\n          actSn: this.options.actSn\r\n        }).then(async res => {\r\n          if (res.state) {\r\n            let info1 = this.info\r\n            let info2 = res.info\r\n            let contation = (info2.buyLimit == 1 && !info2.sellPrice && !info2.noVipPrice) || (info2.buyLimit == 2 && !info2.sellPrice) // 判断已领取的状态\r\n            \r\n            // 处理限时的倒计时等问题 \r\n            if (info2.childEnumKey == 'ACT_SPECIAL_OFFER_PURCHASE_LIMIT') {\r\n              this.handlerLimit(info2, flag)\r\n            }\r\n            info1.channelType = this.options.channelType || ''\r\n            let info = { ...info1, ...info2 }\r\n            this.info = info\r\n            this.remainTime = info2.remainTime\r\n            this.ready = true\r\n            console.log(this.info, 'info1info1info1info1info1')\r\n            // 自我游特卖时需调用日历接口 (卡券有效期类型为 3,4,5)\r\n            if (this.info.supplierCode == 'PARTY_ZWY') {\r\n              // 自我游显示会员价（选择日期后这里的价格不变）\r\n              this.$set(this.info, 'travelPrice', info2.sellPrice)\r\n              if (this.selDate.sellPrice || this.selDate.sellPrice == 0) { // 判断已选择的价格\r\n                this.$set(this.info, 'sellPrice', this.selDate.sellPrice)\r\n                this.$set(this.info, 'noVipPrice', this.selDate.noVipPrice)\r\n              }\r\n\r\n              if ([3, 4, 5].includes(info1.validityType)) {\r\n                // 判断选定日期，显示日历\r\n                // this.travelActMonth()\r\n              } else if (this.info.limitTime > 0) {\r\n\r\n                // 判断当前时间是否可购买 \r\n                let limitTime = this.info.limitTime\r\n                let date = new Date()\r\n                let h = date.getHours() > 9 ? date.getHours() + '' : '0' + date.getHours()\r\n                var m = date.getMinutes() > 9 ? date.getMinutes() + '' : '0' + date.getMinutes()\r\n                let dayTime = h + m\r\n                if (dayTime > limitTime) {\r\n                  setTimeout(() => {\r\n                    this.handlerBtn('当前不可购买', true)\r\n                  }, 500)\r\n                }\r\n              }\r\n            }\r\n            this.handlerBtn(this.info.cardType === 'CARD_DIRECT_RECHARGE' ? '立即充值' : '立即购买')\r\n            // 仅限会员购买，非会员显示\r\n            if (info2.buyLimit == 2 && !this.vipUser) {\r\n              this.handlerBtn('开通并购买')\r\n            }\r\n\r\n            // 仅限会员购买且会员售价为0，非会员视角\r\n            if (info2.buyLimit == 2 && !info2.sellPrice && !this.vipUser) {\r\n              this.handlerBtn('开通并领取')\r\n              this.open_receive = true // 标志是开通并领取按钮\r\n            }\r\n            if (this.info.remainNum > 0 || this.info.cardType === 'CARD_DIRECT_RECHARGE') {\r\n              if (this.info.channelType == 'CHANNEL_CONSUMER_COUPON' || this.info.channelType == 'CHANNEL_FORTUNE_COUPON') {\r\n                // 消费券渠道时，判断原价\r\n                if (info2.worth == 0) {\r\n                  this.handlerBtn('立即领取')\r\n                  this.free = true //可以免费领取\r\n                }\r\n              } else {\r\n                if ((!info2.sellPrice && this.vipUser) || (info2.buyLimit == 1 && !info2.sellPrice && !info2.noVipPrice)) {\r\n                  this.handlerBtn('立即领取')\r\n                  this.free = true //可以免费领取\r\n                }\r\n              }\r\n              \r\n            } else {\r\n              // 库存为0时\r\n              if (contation) {\r\n                this.handlerBtn('已领完', true)\r\n              } else {\r\n                this.handlerBtn('已售罄', true)\r\n              }\r\n            }\r\n\r\n            if (info2.actState == 3 || info2.actState == 4 || info2.actState == 5) {\r\n              //售价都为0\r\n              if (contation) {\r\n                this.handlerBtn('已领完', true)\r\n              } else {\r\n                this.handlerBtn('已售罄', true)\r\n              }\r\n            }\r\n\r\n            if (info2.actState == 1) {\r\n              this.handlerBtn('活动未开始', true)\r\n            } else if (info2.actState == 20) {\r\n              // 自我游卡券当前时间不可购买\r\n              this.handlerBtn('当前不可购买', true)\r\n            }\r\n\r\n            let totalNum = Number(this.realInfo.userBuyNum) + Number(this.realInfo.userFreeReceiveNum) // 当前用户的购买数量和领取数量总和\r\n\r\n            // 是否限制购买\r\n            if (info2.limitState) {\r\n              if (totalNum >= info2.limitFrequency) {\r\n\r\n                // 用户总成功购买数量大于限制购买数量\r\n                this.handlerBtn('已购买', true)\r\n              }\r\n\r\n              if ((totalNum >= info2.limitFrequency) && contation) {\r\n\r\n                // 当前用户当前活动中总免费领取数量大于限制领取数量\r\n                this.handlerBtn('已领取', true)\r\n              }\r\n            }\r\n\r\n            this.showBtnTxt = true\r\n\r\n            \r\n\r\n            // .................优化新增............................\r\n            // 判断从限购进入\r\n            if (info2.childEnumKey == 'ACT_SPECIAL_OFFER_PURCHASE_LIMIT') {\r\n              if (!this.info.remainNum) {\r\n                this.handlerBtn('已抢完', true)\r\n                return\r\n              }\r\n              if (res.info.actState == 11 || res.info.actState == 3) {\r\n                this.handlerBtn('已抢完', true)\r\n              } else {\r\n                // if (res.info.limitActState == 8) {\r\n                //   this.handlerBtn('预约提醒', false)\r\n                // } else if (res.info.limitActState == 9) {\r\n                //   this.handlerBtn('已预约', false)\r\n                // } \r\n                if (res.info.limitActState == 8 || res.info.limitActState == 9) {\r\n                  this.handlerBtn('未开始', true)\r\n                } else if (res.info.limitActState == 1) {\r\n                  this.handlerBtn('立即抢购', false)\r\n                } else if (res.info.limitActState == 10) {\r\n                  this.handlerBtn('已购买', true)\r\n                } else if (res.info.limitActState == 3) {\r\n                  this.handlerBtn('已抢完', true)\r\n                } else if (res.info.limitActState == 2) {\r\n                  this.handlerBtn('已抢完', true)\r\n                }\r\n              }\r\n            }\r\n\r\n            // 判断为兑换中心进入\r\n            if (this.options.hasExchange != '') {\r\n              let exchange_data = this.exchange_data // 兑换中心活动数据\r\n\r\n              if (exchange_data.hasExchange) {\r\n                this.handlerBtn('已兑换', true)\r\n              } else {\r\n                if (exchange_data.remainNum > 0) {\r\n                  if (exchange_data.state != 2) {\r\n                    this.handlerBtn('已结束', true)\r\n                  } else {\r\n                    if (exchange_data.condition) {\r\n                      this.handlerBtn('立即兑换', false)\r\n                    } else {\r\n                      this.handlerBtn('立即兑换', true)\r\n                    }\r\n                  }\r\n                } else {\r\n                  this.handlerBtn('已兑完', true)\r\n                }\r\n              }\r\n            }\r\n\r\n            // 如果需要显示倒计时\r\n            if (info2.showTime && info2.childEnumKey != 'ACT_SPECIAL_OFFER_PURCHASE_LIMIT') {\r\n              // ..................优化结束.............................\r\n              clearInterval(this.timer)\r\n              var remainTime = this.remainTime\r\n              this.timer = setInterval(() => {\r\n                if (remainTime >= 1000) {\r\n                  remainTime -= 1000\r\n                } else {\r\n                  clearInterval(this.timer)\r\n                }\r\n                this.remainTime = remainTime || 0\r\n              }, 1000)\r\n            }\r\n            // this.getCashNum() // 获取当前活动可用抵扣最大金额红包\r\n          } else {\r\n            this.back_to(res)\r\n          }\r\n        }).finally(() => {\r\n          this.$Toast.clear()\r\n        })\r\n      },\r\n      // 获取活动卡券详情\r\n      getCoupDetail() {\r\n        return this.$api.act_card_detail({\r\n          cardId: this.cardId,\r\n          detailId: this.detailId,\r\n          actSn: this.options.actSn\r\n        }).then(res => {\r\n          if (res.state) {\r\n            this.info = { ...this.info, ...res.info }\r\n            this.mediaList = res.info.mediaList\r\n            if(res.info.shopShow) {\r\n              this.getSuitShops() \r\n            }\r\n            // 自我游卡券时商家详情显示为图文详情\r\n            if (this.info.describe) {\r\n              this.graphicDetail = this.info.describe\r\n            }\r\n            this.getFixedDetail(res.info.shopSn) // 获取商家详情\r\n          } else {\r\n            // this.back_to(res)\r\n          }\r\n        })\r\n      },\r\n\r\n\r\n      // 特卖活动特有信息\r\n      getSpecialInfo() {\r\n        return this.$api.special_sell_info({\r\n          channelType: this.options.channelType || '',\r\n          qrCode: this.options.qrCode || '',\r\n          actSn: this.options.actSn\r\n        }).then(res => {\r\n          console.log('special_sell_info', res.info)\r\n          if (res.state) {\r\n            this.cardId = res.info.cardId,\r\n            this.detailId = res.info.detailId\r\n            this.info = {...this.info, ...res.info}\r\n          } else {\r\n            // this.back_to(res)\r\n          }\r\n        })\r\n      },\r\n\r\n      // 获取商家固定信息\r\n      getFixedDetail(shopSn) {\r\n        this.$api.shop_fixed_detail({\r\n          shopSn,\r\n          lat: this.locationInfo.latitude,\r\n          lng: this.locationInfo.longitude\r\n        }).then(res => {\r\n          if (res.state) {\r\n            this.fixedDetail = res.info.shop\r\n            if(!this.info.describe) {\r\n              this.graphicDetail = res.info.shop.detail\r\n            }\r\n          }\r\n        })\r\n      },\r\n\r\n      // 关闭红包列表\r\n      colsecashMask() {\r\n        this.cashMask = !this.cashMask\r\n      },\r\n\r\n      // 获取活动红包当前享用最大红包\r\n      getCashNum() {\r\n        this.$Toast.loading({ \r\n          message: '加载中...',\r\n          forbidClick: true,\r\n          duration: 0\r\n        })\r\n        let vip_check = (!this.vipUser && this.info.buyLimit == 2) ? true : false\r\n        let price = (this.info.buyLimit == 2 || this.vipUser) ? this.info.sellPrice : this.info.noVipPrice\r\n        \r\n        this.$api.cash_red_list({\r\n          actSn: this.options.actSn,\r\n          cityId: this.locationCity.cityId,\r\n          openVip: vip_check, // 是否勾选会员卡\r\n          vipFee: vip_check ? this.vipFee : 0, // 会员卡金额\r\n          actFee: price, // 活动金额\r\n          cardId: this.info.cardId, // 特卖卡券id || 礼包传空\r\n        }).then(res => {\r\n          if (res.state) {\r\n            let redList = res.info.cashRedList || []\r\n            let consumerCouponList = res.info.consumerCouponList || []\r\n            let usableList = redList.filter((item) => item.currentAbleUse) // 过滤可用红包\r\n            let sortUsableList = usableList.sort(function (a, b) { // 降序排序\r\n              return b.money - a.money\r\n            })\r\n            this.selCashred = sortUsableList[0] // 选中最大红包\r\n            if (consumerCouponList.length) {\r\n              this.selConsumer = consumerCouponList[0] || {} // 选中消费券\r\n            }\r\n          }\r\n        }).finally(() => {\r\n          this.$Toast.clear()\r\n        })\r\n      },\r\n\r\n      // 获取会员卡最低价格\r\n      vipPrice() {\r\n        this.$api.v1_4_vip_lowPrice({\r\n          topicType: 1,\r\n          topicSn: this.options.actSn\r\n        }).then(res => {\r\n          if (res.state) {\r\n            this.vipFee = res.info ? res.info.lowPrice || 0 : 0\r\n          }\r\n        })\r\n      },\r\n\r\n      // 关闭红包弹窗时\r\n      hasCachRedList({ detail }) {\r\n        if (detail && detail.length > 0) {\r\n          // 重新请求红包接口\r\n          // this.selectComponent('#activeCash').getCashList()\r\n          this.getCashNum()\r\n        } else {\r\n          this.showPageModel = true\r\n        }\r\n      },\r\n\r\n      // 自我游活动详情选择价格\r\n      selDateList(item) {\r\n        let date = {\r\n          text: item.date.substr(0, 6),\r\n          month: item.date.substr(4, 2),\r\n          year: item.date.substr(0, 4),\r\n          day: item.date.substr(6, 2)\r\n        }\r\n        this.$refs.calendar.showCalendarData(date)\r\n        this.openCalendar() // 显示日历弹窗\r\n      },\r\n\r\n      openCalendar() {\r\n        this.calendarMask = true\r\n      },\r\n\r\n      getTravelMonthInfo (detail) {\r\n        // 接收日历信息\r\n        if (detail.dataType == 'init') {\r\n          // 日历初始化数据\r\n          this.travelMonthInfo = detail\r\n          if (detail.unableBuy) {\r\n            this.handlerBtn('当前不可购买', true)\r\n          }\r\n        } else if (detail.dataType == 'selDate'){\r\n          // 选择日历信息\r\n          let info = this.info\r\n          info.sellPrice = detail.sellPrice\r\n          info.noVipPrice = detail.noVipPrice\r\n          this.info = info\r\n          this.selDate = detail\r\n        }\r\n      },\r\n\r\n      getReceiveCondition () {\r\n        return this.$api.receive_condition({\r\n          actSn: this.options.actSn\r\n        }).then(res=> {\r\n          if (res.state) {\r\n            this.conditionInfo = res.info\r\n          }\r\n        })\r\n      },\r\n    },\r\n    \r\n    created() {\r\n      const options = this.$route.query\r\n      options.hasExchange = options.hasExchange || ''\r\n      options.type = options.type || ''\r\n      this.options = options\r\n      if (options.popup) {\r\n        this.$dialog.alert({\r\n          title: '提示',\r\n          message: '订单超时已取消，请重新下单',\r\n          confirmButtonText: '确定',\r\n          confirmButtonColor: '#D90634'\r\n        })\r\n      }\r\n      this.getActDetail(true)\r\n      this.vipPrice()\r\n      if (this.options.hasExchange != '') { // 判断为兑换中心进入\r\n        this.exchange_data = this.$save.get('session', 'exchange_data') // 兑换中心活动数据\r\n      }\r\n      this.getReceiveCondition() // 是否需要填写用户信息及其条件\r\n\r\n      this.needAuth = this.needAuth\r\n      this.getFreeBag = this.getFreeBag\r\n      this.vipUser = this.vipCardInfo.vipUser\r\n      this.selCashred = {}\r\n      if (this.actDetalUpdate) {\r\n        // 刷新活动数据\r\n        this.getActDetail(true)\r\n        this.actDetalUpdate = false\r\n      }\r\n\r\n      // 活动价格刷新\r\n      if(this.updateFlag) {\r\n        this.refresh = true\r\n      }\r\n\r\n      // 用户信息数据\r\n      let travelInformation = this.$save.get('session', 'travelInformation')\r\n      if (travelInformation) {\r\n        this.tracvelUserList = travelInformation.formList\r\n        this.selDate = travelInformation.selDate\r\n        \r\n        if (this.options.hasExchange != '') {\r\n          this.exchange()\r\n        } else if (this.free) {\r\n          // 免费领取\r\n          this.getFree()\r\n        }\r\n      }\r\n    },\r\n    activated() {\r\n\r\n    },\r\n    destroyed() {\r\n      // 清除用户填写信息\r\n      this.$save.removeArr('session',  ['travelInformation', 'updateFlag'])\r\n    }\r\n  }\r\n</script>\r\n<style scoped lang='scss'>\r\n  .footer1 {\r\n    width: 100%;\r\n    box-sizing: border-box;\r\n    height: 142px;\r\n    text-align: center;\r\n    bottom: 0;\r\n  }\r\n  .footer1 img {\r\n    position: relative;\r\n    z-index: -1;\r\n    width: 100%;\r\n    height: 100%;\r\n  }\r\n  .footer1 .footer-text {\r\n    top: 0;\r\n    padding: 0;\r\n    width: 100%;\r\n    height: 100%;\r\n  }\r\n  .footer1 form {\r\n    position: absolute;\r\n    top: 0;\r\n    height: 100%;\r\n    box-sizing: border-box;\r\n    width: 100%;\r\n  }\r\n  .footer1 button {\r\n    font-size: 34px;\r\n    color: #fff;\r\n    line-height: 127px;\r\n  }\r\n  /* 日历显示 */\r\n  .calendar {\r\n    padding: 30px 0 40px 24px;\r\n    background-color: #fff;\r\n    margin-bottom: 18px;\r\n  }\r\n  .calendar .calendar-til .right .iconicon_more {\r\n    margin-right: 10px;\r\n  } \r\n  .calendar .calendar-list {\r\n    margin-top: 25px;\r\n  }\r\n  .calendar .calendar-list .calendar-scroll {\r\n    width: 100%;\r\n    white-space: nowrap;\r\n  }\r\n  .calendar .calendar-list .list-item {\r\n    display: inline-block;\r\n    padding-top: 20px;\r\n    margin-left: 16px;\r\n    width: 160px;\r\n    height: 110px;\r\n    background: #FFFFFF;\r\n    border: 1px solid rgba(245,243,240,0.80);\r\n    border-radius: 10px;\r\n  }\r\n  .calendar .calendar-list .list-item:first-child {\r\n    margin-left: 0;\r\n  }\r\n  .calendar .calendar-list .list-item .month {\r\n    margin-bottom: 16px;\r\n  }\r\n  /* 现金红包 */\r\n  .travel-card-name {\r\n    line-height: 40px;\r\n  }\r\n\r\n</style>"]}]}