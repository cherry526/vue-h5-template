{"remainingRequest":"C:\\Users\\Administrator\\Desktop\\vip_inline_h5\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Administrator\\Desktop\\vip_inline_h5\\src\\components\\center\\vipCenterCard.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\Administrator\\Desktop\\vip_inline_h5\\src\\components\\center\\vipCenterCard.vue","mtime":1595324606019},{"path":"C:\\Users\\Administrator\\Desktop\\vip_inline_h5\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Administrator\\Desktop\\vip_inline_h5\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\Administrator\\Desktop\\vip_inline_h5\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Administrator\\Desktop\\vip_inline_h5\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAndmlwQ2VudGVyQ2FyZCcsCiAgY29tcG9uZW50czoge30sCiAgcHJvcHM6IHsKICAgIHNob3dCYWNrOiB7CiAgICAgIHR5cGU6IEJvb2xlYW4sCiAgICAgIGRlZmF1bHQ6IGZhbHNlCiAgICB9CiAgfSwKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgaW5zZXJ0UGFja2FnZTogWycnLCfnq4vljbPmj5LlhaXljaHljIUnLCAn56uL5Y2z5r+A5rS7JywgJ+afpeeci+S8muWRmOWNoSddLAogICAgICB3eFVzZXI6IHt9LAogICAgICB2aXBDYXJkSW5mbzp7fSwKICAgICAgbmVlZEF1dGg6IHRydWUsCiAgICAgIGN1ckNpdHlJbmZvOiB7fSwKICAgICAgY2hhbm5lbFR5cGU6ICdNRU1CRVJfQ0VOVEVSJwogICAgfQogIH0sCiAgbWV0aG9kczogewogICAgX3RvRXhjaGFuZ2UoKSB7CiAgICAgIHd4Lm5hdmlnYXRlVG8oewogICAgICAgIHVybDogJy9wYWdlcy9jZW50ZXIvZXhjaGFuZ2UvZXhjaGFuZ2UnCiAgICAgIH0pCiAgICB9LAogICAgX3RvSm9pbigpIHsKICAgICAgd3gubmF2aWdhdGVUbyh7CiAgICAgICAgdXJsOiBgL3BhZ2VzL2NlbnRlci9qb2luX3ZpcC9qb2luX3ZpcD9jaGFubmVsVHlwZT0ke3RoaXMuZGF0YS5jaGFubmVsVHlwZX1gCiAgICAgIH0pCiAgICB9LAogICAgYXN5bmMgZ2V0VXNlckluZm8oZSkgewogICAgICBjb25zb2xlLmxvZyhlKTsKICAgICAgaWYoZS5kZXRhaWwuaXYpIHsKICAgICAgICBjb25zdCB7IGl2LCBlbmNyeXB0ZWREYXRhIH0gPSBlLmRldGFpbDsKICAgICAgICBjb25zdCBjb2RlID0gdGhpcy5kYXRhLmNvZGU7CiAgICAgICAgYXBwLmdsb2JhbERhdGEuaXNBdXRob3JpemUgPSB0cnVlCiAgICAgICAgYXBwLmdsb2JhbERhdGEudXNlckluZm8gPSBlLmRldGFpbC51c2VySW5mbzsKICAgICAgICAKICAgICAgICB3eC5zaG93TG9hZGluZygpOwogICAgICAgIHRyeSB7CiAgICAgICAgICBhd2FpdCBhcHAudXNlckF1dGgoY29kZSwgaXYsIGVuY3J5cHRlZERhdGEsIDEpCiAgICAgICAgICB0aGlzLl90b0V4Y2hhbmdlKCkKICAgICAgICB9IGNhdGNoKGVycikgewogICAgICAgICAgd3guc2hvd1RvYXN0KHsKICAgICAgICAgICAgaWNvbjogJ25vbmUnLAogICAgICAgICAgICB0aXRsZTpg5aSx6LSl77yM56iN5ZCO6YeN6K+VICR7ZXJyLmNvZGV9YAogICAgICAgICAgfSkKICAgICAgICB9CiAgICAgICAgd3guaGlkZUxvYWRpbmcoKQogICAgICB9CiAgICB9LAogICAgLy8g54K55Ye75YWR5o2iCiAgICBmb3JtU3VibWl0KGUpIHsKICAgICAgaWYoIWFwcC5nbG9iYWxEYXRhLm5lZWRBdXRoKSB7IC8vIOS4jemcgOimgeaOiOadg+ebtOaOpei3s+i9rAogICAgICAgIHRoaXMuX3RvRXhjaGFuZ2UoKQogICAgICB9CiAgICAgIGFwcC5hZGRGb3JtSWQoZS5kZXRhaWwuZm9ybUlkKQogICAgfSwKICAgIGFzeW5jIF9hZGRDYXJkKCkgewogICAgICBjb25zdCB2aXBDYXJkSW5mbyA9IGFwcC5nbG9iYWxEYXRhLnZpcENhcmRJbmZvCiAgICAgIGxldCBpbnNlcnRQYWNrYWdlID0gdmlwQ2FyZEluZm8uaW5zZXJ0UGFja2FnZSAvLyAx77ya5pyq5o+S5YWl77yMMu+8muaPkuWFpeS9huacqua/gOa0u++8jDPlt7Lmj5LlhaXlubbmv4DmtLsKICAgICAgaWYgKGluc2VydFBhY2thZ2UgPT0gMykgewogICAgICAgIHd4Lm9wZW5DYXJkKHsKICAgICAgICAgIGNhcmRMaXN0OiBbewogICAgICAgICAgICBjYXJkSWQ6IHZpcENhcmRJbmZvLmNhcmRJZCwKICAgICAgICAgICAgY29kZTogdmlwQ2FyZEluZm8uY29kZQogICAgICAgICAgfV0sCiAgICAgICAgICBzdWNjZXNzIChyZXMpIHsgfQogICAgICAgIH0pCiAgICAgIH0gZWxzZSBpZihpbnNlcnRQYWNrYWdlID09IDIpIHsKICAgICAgICBhcGkudmlwQ2FyZEFjdGl2ZSgpCiAgICAgICAgICAudGhlbihyZXMgPT4gewogICAgICAgICAgICBpZihyZXMuc3RhdGUpewogICAgICAgICAgICAgIHd4LnNob3dUb2FzdCh7CiAgICAgICAgICAgICAgICB0aXRsZTogJ+a/gOa0u+aIkOWKnycKICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgIHRoaXMuc2V0RGF0YSh7ICd2aXBDYXJkSW5mby5pbnNlcnRQYWNrYWdlJzogMyB9KQogICAgICAgICAgICB9CiAgICAgICAgICB9KQogICAgICB9IGVsc2UgewogICAgICAgIGNvbnN0IGNhcmRFeHRJbmZvID0gYXdhaXQgYXBpLmdldEFkZENhcmRQYXJhbSgpLmNhdGNoKGVyciA9PiB7CiAgICAgICAgICB3eC5zaG93VG9hc3QoewogICAgICAgICAgICBpY29uOiAnbm9uZScsCiAgICAgICAgICAgIHRpdGxlOiBlcnIubWVzc2FnZQogICAgICAgICAgfSkKICAgICAgICB9KQogICAgICAgIGNvbnN0IGNhcmRFeHQgPSB7CiAgICAgICAgICB0aW1lc3RhbXA6IGNhcmRFeHRJbmZvLmluZm8udGltZVN0YW1wLAogICAgICAgICAgbm9uY2Vfc3RyOiBjYXJkRXh0SW5mby5pbmZvLm5vbmNlU3RyLAogICAgICAgICAgc2lnbmF0dXJlOiBjYXJkRXh0SW5mby5pbmZvLnNpZ25hdHVyZSwKICAgICAgICB9CiAgICAgICAgCiAgICAgICAgd3guYWRkQ2FyZCh7CiAgICAgICAgICBjYXJkTGlzdDogWwogICAgICAgICAgICB7CiAgICAgICAgICAgICAgY2FyZElkOiBhcHAuZ2xvYmFsRGF0YS52aXBDYXJkSW5mby5jYXJkSWQsCiAgICAgICAgICAgICAgY2FyZEV4dDogSlNPTi5zdHJpbmdpZnkoY2FyZEV4dCkKICAgICAgICAgICAgfQogICAgICAgICAgXSwKICAgICAgICAgIHN1Y2Nlc3M6IHJlcyA9PiB7CiAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlcy5jYXJkTGlzdCkgLy8g5Y2h5Yi45re75Yqg57uT5p6cCiAgICAgICAgICAgIGNvbnN0IGNvZGUgPSByZXMuY2FyZExpc3RbMF0uY29kZQogICAgICAgICAgICBhcGkudXBkYXRlQ2FyZFN0YXRlKHsgY29kZSB9KQogICAgICAgICAgICAgIC50aGVuKHJlcyA9PiB7CiAgICAgICAgICAgICAgICBpZihyZXMuc3RhdGUpIHsKICAgICAgICAgICAgICAgICAgd3guc2hvd1RvYXN0KHsKICAgICAgICAgICAgICAgICAgICB0aXRsZTogJ+aPkuWFpeaIkOWKnycKICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgICAgYXBwLmdldFZpcENhcmRJbmZvKCkKICAgICAgICAgICAgICAgICAgdGhpcy5zZXREYXRhKHsgJ3ZpcENhcmRJbmZvLmluc2VydFBhY2thZ2UnOiAzIH0pCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfSkKICAgICAgICAgIH0sCiAgICAgICAgICBmYWlsKGVycikgewogICAgICAgICAgICBjb25zb2xlLmxvZyhlcnIpCiAgICAgICAgICB9CiAgICAgICAgfSkKICAgICAgfQogICAgfSwKICAgIC8vIOeCueWHu+eri+WNs+W8gOmAmgogICAgZm9ybVN1Ym1pdDIoZSkgewogICAgICBpZighYXBwLmdsb2JhbERhdGEubmVlZEF1dGgpIHsgLy8g5LiN6ZyA6KaB5o6I5p2D55u05o6l6Lez6L2sCiAgICAgICAgdGhpcy50b0pvaW4oKQogICAgICB9CiAgICAgIGFwcC5hZGRGb3JtSWQoZS5kZXRhaWwuZm9ybUlkKQogICAgfSwKCiAgICBhc3luYyBnZXRVc2VySW5mbzIoZSkgewogICAgICBjb25zb2xlLmxvZyhlKTsKICAgICAgaWYoZS5kZXRhaWwuaXYpIHsKICAgICAgICBjb25zdCB7IGl2LCBlbmNyeXB0ZWREYXRhIH0gPSBlLmRldGFpbDsKICAgICAgICBhcHAuZ2xvYmFsRGF0YS5pc0F1dGhvcml6ZSA9IHRydWUKICAgICAgICBhcHAuZ2xvYmFsRGF0YS51c2VySW5mbyA9IGUuZGV0YWlsLnVzZXJJbmZvOwogICAgICAgIHd4LnNob3dMb2FkaW5nKCk7CiAgICAgICAgdHJ5IHsKICAgICAgICAgIHd4LmxvZ2luKHsKICAgICAgICAgICAgc3VjY2VzczogYXN5bmMgcmVzID0+ewogICAgICAgICAgICBhd2FpdCBhcHAudXNlckF1dGgocmVzLmNvZGUsIGl2LCBlbmNyeXB0ZWREYXRhLCAxKQogICAgICAgICAgICB9CiAgICAgICAgICB9KQogICAgICAgICAgdGhpcy5zZXREYXRhKHsKICAgICAgICAgICAgd3hVc2VyOiBhcHAuZ2xvYmFsRGF0YS53eFVzZXIKICAgICAgICAgIH0pCiAgICAgICAgfSBjYXRjaChlcnIpIHsKICAgICAgICAgIHd4LnNob3dUb2FzdCh7CiAgICAgICAgICAgIGljb246ICdub25lJywKICAgICAgICAgICAgdGl0bGU6YOWksei0pe+8jOeojeWQjumHjeivlSAke2Vyci5jb2RlfWAKICAgICAgICAgIH0pCiAgICAgICAgfQogICAgICAgIHd4LmhpZGVMb2FkaW5nKCkKICAgICAgfQogICAgfSwKICAgIGdldFBob25lTnVtYmVyKGUpIHsKICAgICAgaWYoZS5kZXRhaWwuaXYpIHsKICAgICAgICBjb25zdCB7IGl2LCBlbmNyeXB0ZWREYXRhIH0gPSBlLmRldGFpbDsKICAgICAgICBjb25zdCBjb2RlID0gdGhpcy5kYXRhLmNvZGU7CiAgICAgICAgd3guc2hvd0xvYWRpbmcoeyBtYXNrOiB0cnVlIH0pOwogICAgICAgIHd4LmxvZ2luKHsKICAgICAgICAgIHN1Y2Nlc3M6IHJlcyA9PnsKICAgICAgICAgICAgdGhpcy5waG9uZUF1dGgocmVzLmNvZGUsIGl2LCBlbmNyeXB0ZWREYXRhKQogICAgICAgICAgfQogICAgICAgIH0pCiAgICAgIH0KICAgICAgd3guaGlkZUxvYWRpbmcoKQogICAgfSwKICAgIHBob25lQXV0aChjb2RlLCBpdiwgZW5jcnlwdGVkRGF0YSkgewogICAgICBhcGkucGhvbmVfYXV0aCh7IGNvZGUsIGl2LCBlbmNyeXB0ZWREYXRhIH0pCiAgICAgICAgLnRoZW4ocmVzID0+IHsKICAgICAgICAgIGlmIChyZXMuc3RhdGUpIHsKICAgICAgICAgICAgY29uc3QgcGhvbmUgPSByZXMuaW5mby5waG9uZQogICAgICAgICAgICB0aGlzLnNldERhdGEoeyAKICAgICAgICAgICAgICAnd3hVc2VyLnBob25lJzogcGhvbmUKICAgICAgICAgICAgfSkKICAgICAgICAgICAgYXBwLmdsb2JhbERhdGEudmlwQ2FyZEluZm8ucGhvbmVOdW1iZXIgPSBwaG9uZQogICAgICAgICAgICBhcHAuZ2xvYmFsRGF0YS53eFVzZXIucGhvbmUgPSBwaG9uZQogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgd3guc2hvd1RvYXN0KHsKICAgICAgICAgICAgICB0aXRsZTogcmVzLm1lc3NhZ2UsCiAgICAgICAgICAgICAgaWNvbjogJ25vbmUnCiAgICAgICAgICAgIH0pCiAgICAgICAgICB9CiAgICAgICAgfSkuY2F0Y2goZXJyID0+IHsKICAgICAgICAgIHd4LnNob3dUb2FzdCh7CiAgICAgICAgICAgIGljb246ICdub25lJywKICAgICAgICAgICAgdGl0bGU6YOWksei0pe+8jOeojeWQjumHjeivlSAke2Vyci5jb2RlfWAKICAgICAgICAgIH0pCiAgICAgICAgfSkKICAgIH0sCiAgICB0b0pvaW4oKSB7CiAgICAgIHd4Lm5hdmlnYXRlVG8oewogICAgICAgIHVybDogYC9wYWdlcy9jZW50ZXIvam9pbl92aXAvam9pbl92aXA/Y2hhbm5lbFR5cGU9JHt0aGlzLmRhdGEuY2hhbm5lbFR5cGV9YAogICAgICB9KQogICAgfSwKICAgIGdvRXF1aXR5ICgpIHsKICAgICAgd3gubmF2aWdhdGVUbyh7CiAgICAgICAgdXJsOiAnL3BhZ2VzL2NlbnRlci9qb2luX3ZpcC9qb2luX3ZpcCcKICAgICAgfSkKICAgIH0sCiAgICB0b0JhY2sgKCl7CiAgICAgIHd4Lm5hdmlnYXRlQmFjaygpCiAgICB9CiAgfSwKICBjcmVhdGVkKCkgewogICAgY29uc29sZS5sb2codGhpcy52aXBDYXJkSW5mbywgJy0tLS0tLS0tLS0tLS12aXBDYXJkSW5mbycpCiAgfQp9Cg=="},{"version":3,"sources":["vipCenterCard.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6FA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"vipCenterCard.vue","sourceRoot":"src/components/center","sourcesContent":["<!--\r\n * @Description: 会员中心头部卡片\r\n * @Version: 1.0\r\n * @Autor: cherry\r\n * @Date: 2020-07-21 17:10:25\r\n * @LastEditors: cherry\r\n * @LastEditTime: 2020-07-21 17:43:25\r\n--> \r\n<template>\r\n  <div class=\"lh1\">\r\n    <div class=\"header\" :class=\"vipCardInfo.vipUser ? 'member' : ''\">\r\n      <div class=\"user-info flex-v\">\r\n        <div class=\"avatar por flex-v\">\r\n          <button form-type=\"submit\" open-type=\"getUserInfo\" bindgetuserinfo=\"getUserInfo2\">\r\n            <img class=\"avatar-img\" :src=\"wxUser.avatarUrl\">\r\n            <img v-if=\"vipCardInfo.vipUser\" class=\"vip-icon\" src=\"http://doyd.oss-cn-shenzhen.aliyuncs.com/vip_mini_apply/v1.4.1/img_my_member_icon.png\">\r\n          </button>\r\n        </div>\r\n        <div class=\"user-name flex-1\">\r\n            <template v-if=\"wxUser.nickName\">\r\n              <div class=\"nickname t-elps c1A bold flex-v\">\r\n                {{ wxUser.nickName }}<img v-if=\"wxUser.distributorFlag\" class=\"label_fenx\" src=\"http://doyd.oss-cn-shenzhen.aliyuncs.com/vip_mini_apply/v1.5.6/label_fenx.png\">\r\n              </div>\r\n              <div class=\"flex-v flex-c-b\">\r\n                <div>\r\n                  <template v-if=\"wxUser.phone\">\r\n                    <span class=\"iconfont iconicon_phone c66\"></span>\r\n                    <button open-type=\"getPhoneNumber\" bindgetphonenumber=\"getPhoneNumber\" class=\"ft24 c66 phone\">\r\n                      <span class=\"ft24 c66\">{{ wxUser.phone | formatPhone}}</span>\r\n                    </button>\r\n                  </template>\r\n                  <button v-else open-type=\"getPhoneNumber\" bindgetphonenumber=\"getPhoneNumber\" class=\"ft24 c66 phone\">未授权手机号</button>\r\n                  <span class=\"ft18 expire\" v-if=\"vipCardInfo.vipUser && vipCardInfo.excessTime <= 5 && !vipCardInfo.autoRenewal\">还有{{vipCardInfo.excessTime}}天到期</span>\r\n                </div>\r\n                <div>\r\n                  <span class=\"vip-auto\" v-if=\"vipCardInfo.vipUser && vipCardInfo.autoRenewal\">{{vipCardInfo.expirationTime | formatTime('YYYY/MM/DD')}}自动续费</span>\r\n                </div>\r\n              </div>\r\n            </template>\r\n            <template v-else>\r\n              <button form-type=\"submit\" open-type=\"getUserInfo\" bindgetuserinfo=\"getUserInfo2\" class=\"card-code ft32 c1A bold\">\r\n                授权登陆\r\n              </button>\r\n            </template>\r\n        </div>\r\n      </div>\r\n\r\n      <!-- 小卡片 非会员-->\r\n      <div class=\"card\" v-if=\"!vipCardInfo.vipUser\">\r\n        <div class=\"one flex-b flex-v\">\r\n          <span class=\"ft24 cB7\" v-if=\"vipCardInfo.saveMoney\">已为我省{{vipCardInfo.saveMoney / 100}}元/月</span>\r\n          <span class=\"ft24 cB7\" v-else>预计为您省{{vipCardInfo.averageSavings / 100}}元/月</span>\r\n          <div class=\"btn ft24 flex-v cff\" @click=\"toJoin\">\r\n            立即开通\r\n            <span class=\"iconfont iconicon_more ft14 cff\"></span>\r\n          </div>\r\n        </div>\r\n        <div class=\"two flex-b flex-v ft24 cB7\" v-if=\"!vipCardInfo.cardSn\">\r\n          <div><span class=\"iconfont small-icon iconicon_my_nomember_shop\"></span>5000+商家</div>\r\n          <div><span class=\"iconfont small-icon iconicon_my_nomember_check\"></span>买单5折</div>\r\n          <div><span class=\"iconfont small-icon iconicon_my_nomember_sale\"></span>5折优惠券</div>\r\n        </div>\r\n        <div class=\"two flex-b flex-v ft24 cB7\" v-else>\r\n          <span class=\"ft26 bold cB7\">{{ vipCardInfo.cardSn | cardReplace }}</span>\r\n          <div class=\"flex-v\" @click=\"_addCard\" id=\"STATIS_CARDBAG\">\r\n            {{insertPackage[vipCardInfo.insertPackage]}}\r\n            <span class=\"iconfont iconicon_more ft14 cB7\"></span>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      \r\n      <!-- 小卡片 会员 -->\r\n      <div class=\"card vip\" v-else>\r\n        <div class=\"one flex-b flex-v\">\r\n          <span class=\"ft24 cFF8\" v-if=\"vipCardInfo.saveMoney > 0\">已为我省{{vipCardInfo.saveMoney / 100}}元/月</span>\r\n          <span class=\"ft24 cFF8\" v-else>预计为您省{{vipCardInfo.averageSavings / 100}}元/月</span>\r\n          <div class=\"btn flex-v cff\" @click=\"toJoin\">\r\n            {{ vipCardInfo.vipUser && vipCardInfo.excessTime <= 5 ? '立即续费' : '查看权益' }}\r\n            <span class=\"iconfont iconicon_more ft14 c8C\"></span>\r\n          </div>\r\n        </div>\r\n        <div class=\"two flex-b flex-v ft24 cFF8\">\r\n          <span class=\"ft26 bold cFF\">{{ vipCardInfo.cardSn | cardReplace}}</span>\r\n          <div class=\"flex-v\" @click=\"_addCard\" id=\"STATIS_CARDBAG\">\r\n            {{insertPackage[vipCardInfo.insertPackage]}}\r\n            <span class=\"iconfont iconicon_more ft14 cFF8\"></span>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n<script>\r\n  export default {\r\n    name: 'vipCenterCard',\r\n    components: {},\r\n    props: {\r\n      showBack: {\r\n        type: Boolean,\r\n        default: false\r\n      }\r\n    },\r\n    data() {\r\n      return {\r\n        insertPackage: ['','立即插入卡包', '立即激活', '查看会员卡'],\r\n        wxUser: {},\r\n        vipCardInfo:{},\r\n        needAuth: true,\r\n        curCityInfo: {},\r\n        channelType: 'MEMBER_CENTER'\r\n      }\r\n    },\r\n    methods: {\r\n      _toExchange() {\r\n        wx.navigateTo({\r\n          url: '/pages/center/exchange/exchange'\r\n        })\r\n      },\r\n      _toJoin() {\r\n        wx.navigateTo({\r\n          url: `/pages/center/join_vip/join_vip?channelType=${this.data.channelType}`\r\n        })\r\n      },\r\n      async getUserInfo(e) {\r\n        console.log(e);\r\n        if(e.detail.iv) {\r\n          const { iv, encryptedData } = e.detail;\r\n          const code = this.data.code;\r\n          app.globalData.isAuthorize = true\r\n          app.globalData.userInfo = e.detail.userInfo;\r\n          \r\n          wx.showLoading();\r\n          try {\r\n            await app.userAuth(code, iv, encryptedData, 1)\r\n            this._toExchange()\r\n          } catch(err) {\r\n            wx.showToast({\r\n              icon: 'none',\r\n              title:`失败，稍后重试 ${err.code}`\r\n            })\r\n          }\r\n          wx.hideLoading()\r\n        }\r\n      },\r\n      // 点击兑换\r\n      formSubmit(e) {\r\n        if(!app.globalData.needAuth) { // 不需要授权直接跳转\r\n          this._toExchange()\r\n        }\r\n        app.addFormId(e.detail.formId)\r\n      },\r\n      async _addCard() {\r\n        const vipCardInfo = app.globalData.vipCardInfo\r\n        let insertPackage = vipCardInfo.insertPackage // 1：未插入，2：插入但未激活，3已插入并激活\r\n        if (insertPackage == 3) {\r\n          wx.openCard({\r\n            cardList: [{\r\n              cardId: vipCardInfo.cardId,\r\n              code: vipCardInfo.code\r\n            }],\r\n            success (res) { }\r\n          })\r\n        } else if(insertPackage == 2) {\r\n          api.vipCardActive()\r\n            .then(res => {\r\n              if(res.state){\r\n                wx.showToast({\r\n                  title: '激活成功'\r\n                })\r\n                this.setData({ 'vipCardInfo.insertPackage': 3 })\r\n              }\r\n            })\r\n        } else {\r\n          const cardExtInfo = await api.getAddCardParam().catch(err => {\r\n            wx.showToast({\r\n              icon: 'none',\r\n              title: err.message\r\n            })\r\n          })\r\n          const cardExt = {\r\n            timestamp: cardExtInfo.info.timeStamp,\r\n            nonce_str: cardExtInfo.info.nonceStr,\r\n            signature: cardExtInfo.info.signature,\r\n          }\r\n          \r\n          wx.addCard({\r\n            cardList: [\r\n              {\r\n                cardId: app.globalData.vipCardInfo.cardId,\r\n                cardExt: JSON.stringify(cardExt)\r\n              }\r\n            ],\r\n            success: res => {\r\n              console.log(res.cardList) // 卡券添加结果\r\n              const code = res.cardList[0].code\r\n              api.updateCardState({ code })\r\n                .then(res => {\r\n                  if(res.state) {\r\n                    wx.showToast({\r\n                      title: '插入成功'\r\n                    })\r\n                    app.getVipCardInfo()\r\n                    this.setData({ 'vipCardInfo.insertPackage': 3 })\r\n                  }\r\n                })\r\n            },\r\n            fail(err) {\r\n              console.log(err)\r\n            }\r\n          })\r\n        }\r\n      },\r\n      // 点击立即开通\r\n      formSubmit2(e) {\r\n        if(!app.globalData.needAuth) { // 不需要授权直接跳转\r\n          this.toJoin()\r\n        }\r\n        app.addFormId(e.detail.formId)\r\n      },\r\n\r\n      async getUserInfo2(e) {\r\n        console.log(e);\r\n        if(e.detail.iv) {\r\n          const { iv, encryptedData } = e.detail;\r\n          app.globalData.isAuthorize = true\r\n          app.globalData.userInfo = e.detail.userInfo;\r\n          wx.showLoading();\r\n          try {\r\n            wx.login({\r\n              success: async res =>{\r\n              await app.userAuth(res.code, iv, encryptedData, 1)\r\n              }\r\n            })\r\n            this.setData({\r\n              wxUser: app.globalData.wxUser\r\n            })\r\n          } catch(err) {\r\n            wx.showToast({\r\n              icon: 'none',\r\n              title:`失败，稍后重试 ${err.code}`\r\n            })\r\n          }\r\n          wx.hideLoading()\r\n        }\r\n      },\r\n      getPhoneNumber(e) {\r\n        if(e.detail.iv) {\r\n          const { iv, encryptedData } = e.detail;\r\n          const code = this.data.code;\r\n          wx.showLoading({ mask: true });\r\n          wx.login({\r\n            success: res =>{\r\n              this.phoneAuth(res.code, iv, encryptedData)\r\n            }\r\n          })\r\n        }\r\n        wx.hideLoading()\r\n      },\r\n      phoneAuth(code, iv, encryptedData) {\r\n        api.phone_auth({ code, iv, encryptedData })\r\n          .then(res => {\r\n            if (res.state) {\r\n              const phone = res.info.phone\r\n              this.setData({ \r\n                'wxUser.phone': phone\r\n              })\r\n              app.globalData.vipCardInfo.phoneNumber = phone\r\n              app.globalData.wxUser.phone = phone\r\n            } else {\r\n              wx.showToast({\r\n                title: res.message,\r\n                icon: 'none'\r\n              })\r\n            }\r\n          }).catch(err => {\r\n            wx.showToast({\r\n              icon: 'none',\r\n              title:`失败，稍后重试 ${err.code}`\r\n            })\r\n          })\r\n      },\r\n      toJoin() {\r\n        wx.navigateTo({\r\n          url: `/pages/center/join_vip/join_vip?channelType=${this.data.channelType}`\r\n        })\r\n      },\r\n      goEquity () {\r\n        wx.navigateTo({\r\n          url: '/pages/center/join_vip/join_vip'\r\n        })\r\n      },\r\n      toBack (){\r\n        wx.navigateBack()\r\n      }\r\n    },\r\n    created() {\r\n      console.log(this.vipCardInfo, '-------------vipCardInfo')\r\n    }\r\n  }\r\n</script>\r\n<style scoped lang='scss'>\r\n  .header {\r\n    width: 100%;\r\n    height: 276px;\r\n    background: url('http://doyd.oss-cn-shenzhen.aliyuncs.com/vip_mini_apply/v1.4.1/img_bg_my_member_not.png') no-repeat center;\r\n    background-size: cover;\r\n    position: relative;\r\n    overflow: hidden;\r\n  }\r\n  .header.member{\r\n    background: url('http://doyd.oss-cn-shenzhen.aliyuncs.com/vip_mini_apply/v1.4.1/img_bg_my_member.png?11') no-repeat center;\r\n    background-size: cover;\r\n  }\r\n  .header.member .card {\r\n    background: url('http://doyd.oss-cn-shenzhen.aliyuncs.com/vip_mini_apply/v1.4.1/img_my_card.png') no-repeat center;\r\n    background-size: cover;\r\n  }\r\n  .header .user-info {\r\n    padding: 0 48px;\r\n  }\r\n  .header .avatar button {\r\n    line-height: 1;\r\n  }\r\n  .header .avatar .avatar-img{\r\n    width: 90px;\r\n    height: 90px;\r\n    border-radius: 90px;\r\n    border: 3px solid rgba(255,255,255,0.30);\r\n  }\r\n  .header .avatar .vip-icon {\r\n    position: absolute;\r\n    bottom: 0;\r\n    right: 0;\r\n    width: 32px;\r\n    height: 35px;\r\n  }\r\n  .header .user-name {\r\n    margin-left: 24px;\r\n  }\r\n  .header .user-name .iconicon_phone {\r\n    font-size: 22px;\r\n  }\r\n  .header .vip-auto {\r\n    font-size: 24px;\r\n    color: #8C4B00;\r\n  }\r\n  .header .nickname {\r\n    margin-bottom: 15px;\r\n  }\r\n  .header .nickname .label_fenx {\r\n    width: 85px;\r\n    height: 28px;\r\n    margin-left: 9px;\r\n  }\r\n  .header .user-name .expire {\r\n    margin-left: 21px;\r\n    padding: 0 10px;\r\n    height: 26px;\r\n    line-height: 26px;\r\n    background: rgba(255,246,250,0.40);\r\n    border: 1px solid #E03839;\r\n    color: #F51307;\r\n    border-radius: 3px;\r\n  }\r\n  .header .user-name button {\r\n    line-height: 1;\r\n    margin: 0;\r\n    text-align: left;\r\n    display: inline-block;\r\n  }\r\n\r\n  .header .card {\r\n    position: absolute;\r\n    bottom: 0;\r\n    left: calc(50% - 345px);\r\n    width: 690px;\r\n    height: 148px;\r\n    background: url('http://doyd.oss-cn-shenzhen.aliyuncs.com/vip_mini_apply/v1.4.1/img_my_card_none_member.png') no-repeat center;\r\n    background-size: cover;\r\n  }\r\n\r\n  .header .card .one {\r\n    height: 80px;\r\n    padding: 0 30px 0 170px;\r\n  }\r\n  .header .card .two {\r\n    height: 60px;\r\n    padding: 0 30px;\r\n  }\r\n  .header .card .one .btn {\r\n    height: 50px;\r\n    line-height: 44px;\r\n    font-size: 26px;\r\n    padding: 0 12px 0 15px;\r\n    border-radius: 42px;\r\n    background: #F6380C;\r\n  }\r\n  .header .card .two .small-icon {\r\n    margin-right: 8px;\r\n  }\r\n  .header .card .iconicon_more {\r\n    margin-left: 6px;\r\n  }\r\n\r\n  .header .card.vip .btn{\r\n    font-size: 24px;\r\n    color: #8C4B00;\r\n    background-image: linear-gradient(90deg, #FFE6B7 0%, #FFE6B7 0%, #FFCF94 100%);\r\n  } \r\n\r\n  .cB7 {\r\n    color: #B76E3F;\r\n  }\r\n\r\n  .cCB {\r\n  color: #CBA664;\r\n  }\r\n\r\n  .cFF {\r\n    color: #FFD683;\r\n  }\r\n  .cFF8 {\r\n    color: rgba(255, 214, 131, .8);\r\n  }\r\n  .c8C {\r\n    color: #8C4B00;\r\n  }\r\n\r\n\r\n</style>"]}]}