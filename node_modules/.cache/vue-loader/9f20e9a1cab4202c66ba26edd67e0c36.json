{"remainingRequest":"C:\\Users\\Administrator\\Desktop\\vip_inline_h5\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Administrator\\Desktop\\vip_inline_h5\\src\\views\\active\\activeCoupon.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\Administrator\\Desktop\\vip_inline_h5\\src\\views\\active\\activeCoupon.vue","mtime":1596796726566},{"path":"C:\\Users\\Administrator\\Desktop\\vip_inline_h5\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Administrator\\Desktop\\vip_inline_h5\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\Administrator\\Desktop\\vip_inline_h5\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Administrator\\Desktop\\vip_inline_h5\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IG1hcEdldHRlcnMsIG1hcEFjdGlvbnMsIG1hcE11dGF0aW9ucyB9IGZyb20gInZ1ZXgiOwppbXBvcnQgYWN0aXZlQnJhbmQgZnJvbSAnQGNvbXBvbmVudHMvYWN0aXZlL2FjdGl2ZUJyYW5kJwppbXBvcnQgYWN0aXZlTm90aWNlIGZyb20gJ0Bjb21wb25lbnRzL2FjdGl2ZS9hY3RpdmVOb3RpY2UnCmltcG9ydCBhY3RpdmVHcmFwaGljIGZyb20gJ0Bjb21wb25lbnRzL2FjdGl2ZS9hY3RpdmVHcmFwaGljJwppbXBvcnQgYWN0aXZlUm9vbSBmcm9tICdAY29tcG9uZW50cy9hY3RpdmUvYWN0aXZlUm9vbScKaW1wb3J0IGFjdGl2ZUNvdXBvbiBmcm9tICdAY29tcG9uZW50cy9hY3RpdmUvYWN0aXZlQ291cG9uJwppbXBvcnQgYWN0aXZlQ2FzaCBmcm9tICdAY29tcG9uZW50cy9hY3RpdmUvYWN0aXZlQ2FzaCcKCmltcG9ydCB1dGlscyBmcm9tICJAL3V0aWxzL3V0aWxzIgppbXBvcnQgb3JkZXJQYXkgZnJvbSAiQC91dGlscy9wYXkiCmltcG9ydCBhY3RpdmVVdGlscyBmcm9tICdAL2ZpbHRlcnMvYWN0aXZlJwoKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICdzcGVjaWFsU2FsZScsCiAgY29tcHV0ZWQ6IHt9LAogIGNvbXBvbmVudHM6ewogICAgYWN0aXZlQ291cG9uLAogICAgYWN0aXZlQ2FzaCwKICAgIGFjdGl2ZUdyYXBoaWMsCiAgICBhY3RpdmVCcmFuZCwKICAgIGFjdGl2ZVJvb20sCiAgICBhY3RpdmVOb3RpY2UsCiAgfSwKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgdmlwVXNlcjogZmFsc2UsCiAgICAgIHN1aXRTaG9wczogW10sCiAgICAgIG1lZGlhTGlzdDogW10sCiAgICAgIGdyYXBoaWNEZXRhaWw6ICcnLCAvLyDor6bmg4VodG1s5L+h5oGvCiAgICAgIHRpbWVyOiBudWxsLAogICAgICByZWNvbW1lbmRMaXN0OiBbXSwgLy8g5YW25LuW56S85YyF5o6o6I2QL+aOqOiNkOadg+ebigogICAgICBmbGFnOiB0cnVlLAogICAgICBzaG93UG9wOiBmYWxzZSwgLy8g6Z2e5Lya5ZGY6LSt5Lmw5pe25o+Q56S6CiAgICAgIHJlY29tUGFnZTogMSwgIC8vIOeJueWNlueahOaOqOiNkOadg+ebiuS4iuaLieabtOWkmgogICAgICBoYXNNb3JlOiB0cnVlLCAvLyDnibnljZbnmoTmjqjojZDmnYPnm4rmm7TlpJrmj5DnpLoKICAgICAgYnRuRGlzYWJsZWQ6IGZhbHNlLAogICAgICBjYXNoTWFzazogZmFsc2UsCiAgICAgIHNlbENhc2hyZWQ6IHt9LAogICAgICBzZWxDb25zdW1lcjoge30sCiAgICAgIGNhbGVuZGFyTWFzazogZmFsc2UsIC8vIOaXpeWOhuW8ueeqlwogICAgICBzZWxEYXRlOiB7CiAgICAgICAgc3RhcnRUaW1lOiAnJywKICAgICAgICBlbmRUaW1lOiAnJwogICAgICB9LCAvLyDoh6rmiJHmuLjpgInkuK3nmoTml7bpl7QKICAgICAgdHJhdmVsTW9udGhJbmZvOiB7fSwKICAgICAgY29uZGl0aW9uSW5mbzoge30sIC8vIOWFkeWlluS4reW/g+S/oeaBrwogICAgICB0cmFjdmVsVXNlckxpc3Q6IFtdLAogICAgICByZWZyZXNoOiBmYWxzZSwgLy8g5Yi35paw5pel5Y6G5pWw5o2uCiAgICAgIGRvd25UaW1lOiB7CiAgICAgICAgaG91cjogJzAwJywKICAgICAgICBtaW51dGU6ICcwMCcsCiAgICAgICAgc2Vjb25kOiAnMDAnCiAgICAgIH0sCiAgICAgIHJlYWR5OiBmYWxzZSwKICAgICAgYnRuVGV4dDogJ+eri+WNs+aKoui0rScsCiAgICAgIHNob3dCdG5UeHQ6IHRydWUsCiAgICAgIGZpeGVkRGV0YWlsOnt9LCAvLyDpl6jlupflk4HniYzkurrlnYfkv6Hmga8KICAgICAgcmVtYWluVGltZTogMzk5OTAwMCwKICAgICAgY2hhbm5lbFR5cGU6ICcnLAogICAgICBvcHRpb25zOiB0aGlzLiRyb3V0ZS5xdWVyeSB8fCB7fSwKICAgICAgaW5mbzoge30KICAgIH0KICB9LAogIGNvbXB1dGVkOiB7CiAgICAuLi5tYXBHZXR0ZXJzKFsibG9jYXRpb25JbmZvIiwgInd4VXNlciIsICJsb2NhdGlvbkNpdHkiLCAidmlwQ2FyZEluZm8iLCAidXBkYXRlRmxhZyJdKQogIH0sCiAgbWV0aG9kczogewogICAgLy8g5oyJ6ZKu6aKG5Y+W44CB5byA6YCa44CB6LSt5Lmw562J5pON5L2c5LqL5Lu2CiAgICBoYW5kbGVyRXZlbnQoKSB7CiAgICAgIGlmICh0aGlzLmJ0bkRpc2FibGVkKSByZXR1cm4gLy8g5oyJ6ZKu572u54Gw5pe277yM5peg5rOV54K55Ye76LSt5Lmw5oyJ6ZKuCiAgICAgIGxldCBpbmZvID0gdGhpcy5pbmZvCiAgICAgIGlmIChpbmZvLnN1cHBsaWVyQ29kZSA9PSAnUEFSVFlfWldZJyAmJiBbMywgNCwgNV0uaW5jbHVkZXMoaW5mby52YWxpZGl0eVR5cGUpKSB7CiAgICAgICAgLy8g6Ieq5oiR5ri454m55Y2W5pe2ICYmIOmcgOimgemAieWumuaXpeacnyAgIOW8ueWHuumAieaLqeaXpeWOhgogICAgICAgIGlmICghdGhpcy5jYWxlbmRhck1hc2spIHsKICAgICAgICAgIHRoaXMuY2FsZW5kYXJNYXNrID0gdHJ1ZQogICAgICAgICAgcmV0dXJuCiAgICAgICAgfQogICAgICAgIGlmICghdGhpcy5zZWxEYXRlLnN0YXJ0VGltZSkgeyAvLyDmnKrpgInmi6nml7bpl7QKICAgICAgICAgIHRoaXMuJFRvYXN0KCfor7fpgInmi6nmuLjnjqnml6XmnJ8nKQogICAgICAgICAgdGhpcy5jYWxlbmRhck1hc2sgPSB0cnVlCiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGlmIChpbmZvLnZhbGlkaXR5VHlwZSA9PSA0IHx8IGluZm8udmFsaWRpdHlUeXBlID09IDUpIHsgLy8g5ri45a6i6YCJ5a6a5pel5pyf5bu25ZCOWOacieaViCB8fCDmuLjlrqLpgInlrprml6XmnJ/mjIflrprml7bpl7TmnInmlYgKICAgICAgICAgICAgdGhpcy4kZGlhbG9nLmNvbmZpcm0oewogICAgICAgICAgICAgIHRpdGxlOifnoa7lrprlh7rmuLjml7bpl7Q/JywKICAgICAgICAgICAgICBtZXNzYWdlOmAke3V0aWxzLmZvcm1hdFRpbWUodGhpcy5zZWxEYXRlLnN0YXJ0VGltZSB8fCAwLCAnWVlZWS9NTS9ERCcpfSB+ICR7dXRpbHMuZm9ybWF0VGltZSh0aGlzLnNlbERhdGUuZW5kVGltZSB8fCAwLCAnWVlZWS9NTS9ERCcpfWAsCiAgICAgICAgICAgIH0pLnRoZW4oKCk9PnsKICAgICAgICAgICAgICB0aGlzLnBsYWNlT3JkZXIoKQogICAgICAgICAgICB9KS5jYXRjaCgoKSA9PiB7CiAgICAgICAgICAgICAgICAgIC8vIG9uIGNhbmNlbAogICAgICAgICAgICB9KTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHRoaXMuJGRpYWxvZy5jb25maXJtKHsKICAgICAgICAgICAgICB0aXRsZTon56Gu5a6a5Ye65ri45pe26Ze0PycsCiAgICAgICAgICAgICAgbWVzc2FnZTpgJHt1dGlscy5mb3JtYXRUaW1lKHRoaXMuc2VsRGF0ZS5zdGFydFRpbWUgfHwgMCwgJ1lZWVkvTU0vREQnKX1gLAogICAgICAgICAgICB9KS50aGVuKCgpPT57CiAgICAgICAgICAgICAgdGhpcy5wbGFjZU9yZGVyKCkKICAgICAgICAgICAgfSkuY2F0Y2goKCkgPT4gewogICAgICAgICAgICAgICAgICAvLyBvbiBjYW5jZWwKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIHJldHVybgogICAgICB9CiAgICAgIHRoaXMucGxhY2VPcmRlcigpCiAgICB9LAoKICAgIC8vIOS4i+WNlQogICAgcGxhY2VPcmRlcigpIHsKICAgICAgaWYgKHRoaXMub3B0aW9ucy5oYXNFeGNoYW5nZSAhPSAnJykgewogICAgICBjb25zb2xlLmxvZygn6Kem5Y+R54K55Ye76LSt5LmwMScsIHRoaXMuaW5mby5jaGlsZEVudW1LZXksIHRoaXMuZnJlZSwgdGhpcy5pbmZvLmNhcmRUeXBlKQoKICAgICAgICAvLyDliKTmlq3lhZHlpZbkuK3lv4Pov5vlhaUgIOeri+WNs+WFkeaNogogICAgICAgIGxldCBjb25kaXRpb25JbmZvID0gdGhpcy5jb25kaXRpb25JbmZvCiAgICAgICAgbGV0IHRyYWN2ZWxVc2VyTGlzdCA9IHRoaXMudHJhY3ZlbFVzZXJMaXN0CiAgICAgICAgaWYgKGNvbmRpdGlvbkluZm8uaXNDb25kaXRpb24gJiYgdHJhY3ZlbFVzZXJMaXN0Lmxlbmd0aCA9PSAwKSB7CiAgICAgICAgICAvLyDliKTmlq3mmK/lkKbpnIDmsYLloavlhpnkv6Hmga8KICAgICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHsKICAgICAgICAgICAgbmFtZTogJ3RyYXZlbEluZm9ybWF0aW9uJywKICAgICAgICAgICAgcXVlcnk6IHsKICAgICAgICAgICAgICBhY3RTbjogdGhpcy5vcHRpb25zLmFjdFNuCiAgICAgICAgICAgIH0KICAgICAgICAgIH0pCiAgICAgICAgICByZXR1cm4gCiAgICAgICAgfQogICAgICAgIHRoaXMuZXhjaGFuZ2UoKQogICAgICB9IGVsc2UgaWYgKHRoaXMuaW5mby5jaGlsZEVudW1LZXkgPT0gJ0FDVF9TUEVDSUFMX09GRkVSX1BVUkNIQVNFX0xJTUlUJykgewogICAgICBjb25zb2xlLmxvZygn6Kem5Y+R54K55Ye76LSt5LmwMicsIHRoaXMuaW5mby5jaGlsZEVudW1LZXksIHRoaXMuZnJlZSwgdGhpcy5pbmZvLmNhcmRUeXBlKQoKICAgICAgICAvLyDku47pmZDotK3ov5vlhaUKICAgICAgICB0aGlzLmhhbmRsZXJMaW1pdEV2ZW50KCkKICAgICAgfSBlbHNlIGlmICh0aGlzLmZyZWUgJiYgdGhpcy5pbmZvLmNhcmRUeXBlICE9ICdDQVJEX0RJUkVDVF9SRUNIQVJHRScpIHsKCiAgICAgICAgbGV0IGNvbmRpdGlvbkluZm8gPSB0aGlzLmNvbmRpdGlvbkluZm8KICAgICAgICBsZXQgdHJhY3ZlbFVzZXJMaXN0ID0gdGhpcy50cmFjdmVsVXNlckxpc3QKICAgICAgY29uc29sZS5sb2coJ+inpuWPkeeCueWHu+i0reS5sDMnLCBjb25kaXRpb25JbmZvLmlzQ29uZGl0aW9uLCB0aGlzLmZyZWUsIHRyYWN2ZWxVc2VyTGlzdCkKCiAgICAgICAgaWYgKGNvbmRpdGlvbkluZm8uaXNDb25kaXRpb24gJiYgdHJhY3ZlbFVzZXJMaXN0Lmxlbmd0aCA9PSAwKSB7CiAgICAgICAgICAvLyDliKTmlq3mmK/lkKbpnIDmsYLloavlhpnkv6Hmga8KICAgICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHsKICAgICAgICAgICAgbmFtZTogJ3RyYXZlbEluZm9ybWF0aW9uJywKICAgICAgICAgICAgcXVlcnk6IHsKICAgICAgICAgICAgICBhY3RTbjogdGhpcy5vcHRpb25zLmFjdFNuCiAgICAgICAgICAgIH0KICAgICAgICAgIH0pCiAgICAgICAgICByZXR1cm4KICAgICAgICB9CiAgICAgICAgLy8g5YWN6LS56aKG5Y+WCiAgICAgICAgdGhpcy5nZXRGcmVlKCkKICAgICAgfSBlbHNlIGlmICh0aGlzLm9wZW5fcmVjZWl2ZSkgewogICAgICBjb25zb2xlLmxvZygn6Kem5Y+R54K55Ye76LSt5LmwNCcsIHRoaXMuaW5mby5jaGlsZEVudW1LZXksIHRoaXMuZnJlZSwgdGhpcy5pbmZvLmNhcmRUeXBlKQoKICAgICAgICB0aGlzLm9wZW5SZWNlaXZlKCkKICAgICAgfSBlbHNlIHsKICAgICAgY29uc29sZS5sb2coJ+inpuWPkeeCueWHu+i0reS5sDUnLCB0aGlzLmluZm8uY2hpbGRFbnVtS2V5LCB0aGlzLmZyZWUsIHRoaXMuaW5mby5jYXJkVHlwZSkKCiAgICAgICAgdGhpcy50b0J1eSgpCiAgICAgIH0KICAgIH0sCgogICAgaGFuZGxlckxpbWl0RXZlbnQoKSB7CiAgICAgIGlmICh0aGlzLmluZm8ubGltaXRBY3RTdGF0ZSA9PSAxMikgewogICAgICAgIHRoaXMuJFRvYXN0KCflvZPliY3lkIjovpHpnZ7ov5vooYzkuK3nirbmgIEnKQogICAgICB9IGVsc2UgewogICAgICAgIGlmICh0aGlzLmJ0blRleHQgPT0gJ+eri+WNs+aKoui0rScpIHsKICAgICAgICAgIHRoaXMudG9CdXkoKQogICAgICAgIH0KICAgICAgfQogICAgfSwKCiAgICAvLyDlhZHmjaIKICAgIGV4Y2hhbmdlKCkgewogICAgICBsZXQgaXRlbSA9IHRoaXMuZXhjaGFuZ2VfZGF0YQogICAgICB0aGlzLiRkaWFsb2cuY29uZmlybSh7CiAgICAgICAgdGl0bGU6IGDmmK/lkKbnoa7orqTlhZHmjaIke2l0ZW0uYWN0TmFtZSB8fCAnJ30/YCwKICAgICAgICBtZXNzYWdlOiflhZHmjaLlkI7kuI3lj6/mm7TmlLnkuJTljp/mnInmva7ljaHlsIbkvJrmuIXnqbonLAogICAgICB9KS50aGVuKCgpPT57CiAgICAgICAgdGhpcy5wcmljZUV4Y2hhbmdlKGl0ZW0pCiAgICAgIH0pLmNhdGNoKCgpID0+IHsKICAgICAgICAgICAgLy8gb24gY2FuY2VsCiAgICAgIH0pOwogICAgfSwKCiAgICAvLyDlvIDlp4vlhZHmjaIKICAgIHByaWNlRXhjaGFuZ2UoaXRlbSkgewogICAgICBpZiAodGhpcy5pc0NhbkNsaWNrKSByZXR1cm4KICAgICAgdGhpcy5pc0NhbkNsaWNrID0gdHJ1ZQogICAgICB0aGlzLiRhcGkucHJpY2VfZXhjaGFuZ2UoewogICAgICAgIGFjdFNuOiBpdGVtLmFjdFNuLAogICAgICAgIGF3YXJkSWQ6IGl0ZW0uYXdhcmRJZCwKICAgICAgICBjaXR5SWQ6IHRoaXMubG9jYXRpb25DaXR5LmNpdHlJZCwKICAgICAgICBjaG9vc2VEYXRlOiB0aGlzLnNlbERhdGUuc3RhcnRUaW1lID8gdXRpbHMuZm9ybWF0VGltZSh0aGlzLnNlbERhdGUuc3RhcnRUaW1lIHx8IDAsICdZWVlZTU1ERCcpIDogMCwgLy8g6Ieq5oiR5ri46YCJ5oup5pe26Ze0CiAgICAgICAgdHJhY3ZlbFVzZXJMaXN0OiBKU09OLnN0cmluZ2lmeSh0aGlzLnRyYWN2ZWxVc2VyTGlzdCkKICAgICAgfSkudGhlbihyZXMgPT4gewogICAgICAgIGlmIChyZXMuc3RhdGUpIHsKICAgICAgICAgIHRoaXMubWFzayA9IHRydWUKICAgICAgICAgIHRoaXMudHJhY3ZlbFVzZXJMaXN0ID0gW10KICAgICAgICAgIHRoaXMuJHNhdmUucmVtb3ZlKCdzZXNzaW9uJywgJ3RyYXZlbEluZm9ybWF0aW9uJykKICAgICAgICAgIHRoaXMuaGFuZGxlckJ0bign5bey5YWR5o2iJywgdHJ1ZSkKICAgICAgICAgIC8vIOa4hemZpOeUqOaIt+Whq+WGmeS/oeaBrwogICAgICAgICAgdGhpcy4kc2F2ZS5yZW1vdmUoJ3Nlc3Npb24nLCAndHJhdmVsSW5mb3JtYXRpb24nKQogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB0aGlzLiRUb2FzdChyZXMubWVzc2FnZSkKICAgICAgICB9CiAgICAgIH0pLmZpbmFsbHkoKCkgPT4gewogICAgICAgIHNldFRpbWVvdXQoKCkgPT4gewogICAgICAgICAgdGhpcy5pc0NhbkNsaWNrID0gZmFsc2UKICAgICAgICB9LCAzMDApCiAgICAgIH0pCiAgICB9LAoKICAgIGdvQ2FyZCgpIHsKICAgICAgdGhpcy4kcm91dGVyLnB1c2goewogICAgICAgIG5hbWU6ICdjb3Vwb25MaXN0JwogICAgICB9KQogICAgfSwKCiAgICBjbG9zZSgpIHsKICAgICAgdGhpcy5tYXNrID0gZmFsc2UKICAgIH0sCgogICAgLy8g6Z2e5Lya5ZGY5byA6YCa5bm26aKG5Y+WCiAgICBvcGVuUmVjZWl2ZSgpIHsKICAgICAgdGhpcy4kc2V0KHRoaXMuaW5mbywgJ3NlbGxQcmljZScsIDApCiAgICAgIHRoaXMuJHNldCh0aGlzLmluZm8sICdub1ZpcFByaWNlJywgMCkKICAgICAgbGV0IHJlY2VpdmVUeXBlID0gdGhpcy5vcHRpb25zLmNoYW5uZWxUeXBlID09ICdDSEFOTkVMX0FDVElWSVRZX0xBQkVMX1NIT1cnID8gNCA6IDEKICAgICAgbGV0IGluZm8gPSB0aGlzLmluZm8KICAgICAgaW5mby5zZWxEYXRlID0gdGhpcy5zZWxEYXRlCiAgICAgIGluZm8uZGVzY3JpYmUgPSAnJwogICAgICB0aGlzLiRzYXZlLnNldCgnc2Vzc2lvbicsICdvcmRlckluZm8nLCB0aGlzLmluZm8pCiAgICAgIAogICAgICAvLyDpnZ7kvJrlkZjlvIDpgJrlubbpooblj5YKICAgICAgdGhpcy4kcm91dGVyLnB1c2goewogICAgICAgIG5hbWU6ICdzdWJtaXRPcmRlcicsCiAgICAgICAgcXVlcnk6IHsKICAgICAgICAgIGNvbXBJZDogdGhpcy5vcHRpb25zLmNvbXBJZCB8fCAnJywKICAgICAgICAgIGFjdFNuOiB0aGlzLm9wdGlvbnMuYWN0U24sCiAgICAgICAgICBjaGFubmVsVHlwZTogdGhpcy5vcHRpb25zLmNoYW5uZWxUeXBlLAogICAgICAgICAgcmVjZWl2ZVR5cGU6IHJlY2VpdmVUeXBlCiAgICAgICAgfQogICAgICB9KQogICAgfSwKCiAgICAvLyDllK7ku7fkuLow5pe277yM5YWN6LS56aKGCiAgICBnZXRGcmVlKCkgewogICAgICBsZXQgYWN0RGVhbCA9IG9yZGVyUGF5LmFjdERlYWwoewogICAgICAgIGNpdHlJZDogdGhpcy5sb2NhdGlvbkNpdHkuY2l0eUlkLAogICAgICAgIGFjdFNuOiB0aGlzLm9wdGlvbnMuYWN0U24sCiAgICAgICAgZGVhbE51bTogMSwKICAgICAgICBjaGFubmVsVHlwZTogdGhpcy5vcHRpb25zLmNoYW5uZWxUeXBlLAogICAgICAgIHFyQ29kZTogdGhpcy5vcHRpb25zLnFyQ29kZSB8fCAnJywKICAgICAgICByZWFsRmVlOiAwLAogICAgICAgIHJlY2VpdmVUeXBlOiB0aGlzLm9wdGlvbnMuY2hhbm5lbFR5cGUgPT0gJ0NIQU5ORUxfQUNUSVZJVFlfTEFCRUxfU0hPVycgPyA0IDogMSwgLy8g6I635Y+W5pa55byP77yMMeS8muWRmOmihuWPlu+8jDLkvJrlkZjotK3kubDvvIwz5rig6YGT6LSt5LmwIHYxLjIuMOaUueS4ujEKICAgICAgICBvcGVuVmlwOiBmYWxzZSwgLy/mmK/lkKblvIDpgJrmnIjljaHkvJrlkZjlubbotK3kubAKICAgICAgICBhY3RGZWU6IDAsIC8v5rS75Yqo5pSv5LuY6LS555SoCiAgICAgICAgdmlwRmVlOiAwLAogICAgICAgIHZpcENhcmRJZDogJycsCiAgICAgICAgYnV5VHlwZTogMCwKICAgICAgICBjb21wSWQ6IHRoaXMub3B0aW9ucy5jb21wSWQsIC8vIOWQiOi+kUlkCiAgICAgICAgY2hvb3NlRGF0ZTogdGhpcy5zZWxEYXRlLnN0YXJ0VGltZSA/IHV0aWxzLmZvcm1hdFRpbWUodGhpcy5zZWxEYXRlLnN0YXJ0VGltZSB8fCAwLCAnWVlZWU1NREQnKSA6IDAsIC8vIOiHquaIkea4uOmAieaLqeaXtumXtAogICAgICAgIHRyYWN2ZWxVc2VyTGlzdDogSlNPTi5zdHJpbmdpZnkodGhpcy50cmFjdmVsVXNlckxpc3QpCiAgICAgIH0pCiAgICAgIGlmIChhY3REZWFsKSB7CiAgICAgICAgYWN0RGVhbC50aGVuKHJlcyA9PiB7CiAgICAgICAgICBpZiAocmVzLnN0YXRlKSB7CiAgICAgICAgICAgIHRoaXMudHJhY3ZlbFVzZXJMaXN0ID0gW10KICAgICAgICAgICAgdGhpcy4kc2F2ZS5yZW1vdmUoJ3Nlc3Npb24nLCAndHJhdmVsSW5mb3JtYXRpb24nKQogICAgICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCh7bmFtZTogJ3NwZWNpYWxTYWxlU3VjY2VzcycsIHF1ZXJ5OiB7IHRyYWRlSWQ6IHJlcy5pbmZvLnRyYWRlSWQsIGFjdE5hbWU6IHRoaXMuaW5mby5hY3ROYW1lLCByZWNlaXZlOiAxLCBhY3RTbjogdGhpcy5vcHRpb25zLmFjdFNuLCB2aXBfY2hlY2s6IDB9fSkKICAgICAgICAgIH0KICAgICAgICB9KQogICAgICB9CiAgICB9LAoKICAgIHRvQnV5KCkgewogICAgICBpZiAodGhpcy5pc0NhbkNsaWNrKSByZXR1cm4KICAgICAgdGhpcy5pc0NhbkNsaWNrID0gdHJ1ZQoKICAgICAgbGV0IGluZm8gPSB0aGlzLmluZm8KICAgICAgaW5mby5zZWxEYXRlID0gdGhpcy5zZWxEYXRlCiAgICAgIGluZm8uZGVzY3JpYmUgPSAnJwogICAgICB0aGlzLiRzYXZlLnNldCgnc2Vzc2lvbicsICdvcmRlckluZm8nLCB0aGlzLmluZm8pCiAgICAgIC8vIOWIpOaWreaYr+WQpuacieacquaUr+S7mOeahOiuouWNlQogICAgICB0aGlzLiRhcGkub3JkZXJfdW5wYXkoewogICAgICAgIGFjdFNuOiB0aGlzLm9wdGlvbnMuYWN0U24KICAgICAgfSkudGhlbihyZXMgPT4gewogICAgICAgIGlmIChyZXMuc3RhdGUpIHsKICAgICAgICAgIGlmIChyZXMuaW5mby5leGlzdHNVblBheSkgewogICAgICAgICAgICAvLyDlpoLmnpzlrZjlnKjmnKrmlK/ku5jnmoTorqLljZXvvIzot7PovazliLDorqLljZXliJfooajpobUKICAgICAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goewogICAgICAgICAgICAgIG5hbWU6ICdvcmRlckxpc3QnCiAgICAgICAgICAgIH0pCiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBsZXQgcmVjZWl2ZVR5cGUgPSB0aGlzLm9wdGlvbnMuY2hhbm5lbFR5cGUgPT0gJ0NIQU5ORUxfQUNUSVZJVFlfTEFCRUxfU0hPVycgPyAzIDogMgogICAgICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCh7CiAgICAgICAgICAgICAgbmFtZTogJ3N1Ym1pdE9yZGVyJywKICAgICAgICAgICAgICBxdWVyeTogewogICAgICAgICAgICAgICAgcXJDb2RlOiB0aGlzLm9wdGlvbnMucXJDb2RlIHx8ICcnLAogICAgICAgICAgICAgICAgY29tcElkOiB0aGlzLm9wdGlvbnMuY29tcElkIHx8ICcnLAogICAgICAgICAgICAgICAgYWN0U246IHRoaXMub3B0aW9ucy5hY3RTbiwKICAgICAgICAgICAgICAgIGNoYW5uZWxUeXBlOiB0aGlzLm9wdGlvbnMuY2hhbm5lbFR5cGUsCiAgICAgICAgICAgICAgICByZWNlaXZlVHlwZTogcmVjZWl2ZVR5cGUKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pCiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9KS5maW5hbGx5KCgpID0+IHsKICAgICAgICB0aGlzLmlzQ2FuQ2xpY2sgPSBmYWxzZQogICAgICB9KQogICAgfSwKCiAgICAvLyDliKTmlq3nlKjmiLfotK3kubDkv6Hmga8KICAgIGdldFJlYWxUaW1lSW5mbyhsaW1pdEZyZXF1ZW5jeSkgewogICAgICByZXR1cm4gdGhpcy4kYXBpLnJlYWxUaW1lX2luZm8oewogICAgICAgIGFjdFNuOiB0aGlzLm9wdGlvbnMuYWN0U24KICAgICAgfSkudGhlbihyZXMgPT4gewogICAgICAgIGlmIChyZXMuc3RhdGUpIHsKICAgICAgICAgIHRoaXMucmVhbEluZm8gPSByZXMuaW5mbwogICAgICAgIH0KICAgICAgfSkKICAgIH0sCgogICAgaGFuZGxlckJ0bih0ZXh0LCBkaXNhYmxlZCA9IGZhbHNlKSB7CiAgICAgIHRoaXMuYnRuVGV4dCA9IHRleHQKICAgICAgdGhpcy5idG5EaXNhYmxlZCA9IGRpc2FibGVkCiAgICB9LAoKICAgIGhhbmRsZXJMaW1pdChpbmZvMiwgZmxhZykgewogICAgICAvLyAx5pyq5byA5aeLIDLov5vooYzkuK0gM+W3sue7k+adnwogICAgICBsZXQgY3VycmVudFRpbWUgPSArbmV3IERhdGUoKQogICAgICBpZiAoKGluZm8yLmxpbWl0RW5kVGltZSA8IGN1cnJlbnRUaW1lKSAmJiAoaW5mbzIubGltaXRTdGFydFRpbWUgPCBjdXJyZW50VGltZSkpIHsKICAgICAgICBpbmZvMi50aW1lU3RhdGUgPSAzCiAgICAgIH0gZWxzZSBpZiAoKGluZm8yLmxpbWl0RW5kVGltZSA+IGN1cnJlbnRUaW1lKSAmJiAoaW5mbzIubGltaXRTdGFydFRpbWUgPCBjdXJyZW50VGltZSkpIHsKICAgICAgICBpbmZvMi50aW1lU3RhdGUgPSAyCiAgICAgIH0gZWxzZSBpZiAoaW5mbzIubGltaXRTdGFydFRpbWUgPiBjdXJyZW50VGltZSkgewogICAgICAgIGluZm8yLnRpbWVTdGF0ZSA9IDEKICAgICAgICBsZXQgaGVhZGxpbmUgPSBnZXREYXlOYW1lKGluZm8yLmxpbWl0U3RhcnRUaW1lKQogICAgICAgIHRoaXMuaGVhZGxpbmUgPSBoZWFkbGluZQogICAgICB9CiAgICAgIGlmIChpbmZvMi50aW1lU3RhdGUgIT0gMykgewogICAgICAgIGNsZWFySW50ZXJ2YWwodGhpcy5saW1pdFRpbWVyKQogICAgICAgIHRoaXMubGltaXRUaW1lciA9IHNldEludGVydmFsKCgpID0+IHsKICAgICAgICAgIGxldCBub3dUaW1lID0gK25ldyBEYXRlKCkKICAgICAgICAgIHZhciBjdXRUaW1lID0gMAogICAgICAgICAgaWYgKGluZm8yLnRpbWVTdGF0ZSA9PSAxKSB7CiAgICAgICAgICAgIGN1dFRpbWUgPSBpbmZvMi5saW1pdFN0YXJ0VGltZSAtIG5vd1RpbWUKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIGN1dFRpbWUgPSBpbmZvMi5saW1pdEVuZFRpbWUgLSBub3dUaW1lCiAgICAgICAgICB9CiAgICAgICAgICBsZXQgbGFzdFRpbWUgPSB1dGlscy5jb3VudERvd24zKGN1dFRpbWUpCiAgICAgICAgICB0aGlzLmRvd25UaW1lID0gbGFzdFRpbWUKICAgICAgICAgIGlmIChjdXRUaW1lIDw9IDAgJiYgKGluZm8yLmxpbWl0QWN0U3RhdGUgIT0gMTIpKSB7CiAgICAgICAgICAgIGNsZWFySW50ZXJ2YWwodGhpcy5saW1pdFRpbWVyKQogICAgICAgICAgICB0aGlzLmdldEFjdERldGFpbCgpCgogICAgICAgICAgfQogICAgICAgIH0sIDEwMDApCiAgICAgICAgY29uc29sZS5sb2codGhpcy5kb3duVGltZSwgJ3RoaXMuZG93blRpbWUnKQogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuZG93blRpbWUgPSB7CiAgICAgICAgICBob3VyOiAnMDAnLAogICAgICAgICAgbWludXRlOiAnMDAnLAogICAgICAgICAgc2Vjb25kOiAnMDAnCiAgICAgICAgfQogICAgICB9CiAgICAgIAogICAgICBpZiAoZmxhZykgewogICAgICAgIGNvbnNvbGUubG9nKCdmbGFnJywgaW5mbzIsICc9PT09PT09PT09PT09PScpCiAgICAgICAgLy8g5bey5oqi5a6M5rS75Yqo5by556qXCiAgICAgICAgaWYgKGluZm8yLmxpbWl0QWN0U3RhdGUgPT0gMyB8fCBpbmZvMi5saW1pdEFjdFN0YXRlID09IDIgfHwgIXRoaXMuaW5mby5yZW1haW5OdW0pIHsKICAgICAgICAgIHRoaXMuZ2V0RW5kQWN0aXZlKCkKICAgICAgICB9CiAgICAgIH0KICAgIH0sCgogICAgLy8g6I635Y+W5rS75Yqo6K+m5oOFCiAgICBhc3luYyBnZXRBY3REZXRhaWwoZmxhZykgewogICAgICB0aGlzLiRUb2FzdC5sb2FkaW5nKHsgCiAgICAgICAgbWVzc2FnZTogJ+WKoOi9veS4rS4uLicsCiAgICAgICAgZm9yYmlkQ2xpY2s6IHRydWUsCiAgICAgICAgZHVyYXRpb246IDAKICAgICAgfSkKICAgICAgYXdhaXQgdGhpcy5nZXRTcGVjaWFsSW5mbygpIC8vIOWmguaenOaYr+eJueWNlua0u+WKqOivpuaDhe+8jGNhcmRJZO+8jGRldGFpbElk5LuO54m55Y2W6K+m5oOF6YeM6Z2i6I635Y+WCiAgICAgIGF3YWl0IHRoaXMuZ2V0Q291cERldGFpbCgpOyAvLyDojrflj5bljaHliLjor6bmg4UKICAgICAgYXdhaXQgdGhpcy5nZXRSZWFsVGltZUluZm8oKQogICAgICB0aGlzLmdldFN1aXRTaG9wcygpIC8vIOiOt+WPlumAgueUqOW6l+mTugogICAgICB0aGlzLiRhcGkuYWN0X2RldGFpbCh7CiAgICAgICAgY2hhbm5lbFR5cGU6IHRoaXMub3B0aW9ucy5jaGFubmVsVHlwZSwKICAgICAgICBxckNvZGU6IHRoaXMub3B0aW9ucy5xckNvZGUgfHwgJycsCiAgICAgICAgYWN0U246IHRoaXMub3B0aW9ucy5hY3RTbgogICAgICB9KS50aGVuKGFzeW5jIHJlcyA9PiB7CiAgICAgICAgaWYgKHJlcy5zdGF0ZSkgewogICAgICAgICAgbGV0IGluZm8xID0gdGhpcy5pbmZvCiAgICAgICAgICBsZXQgaW5mbzIgPSByZXMuaW5mbwogICAgICAgICAgbGV0IGNvbnRhdGlvbiA9IChpbmZvMi5idXlMaW1pdCA9PSAxICYmICFpbmZvMi5zZWxsUHJpY2UgJiYgIWluZm8yLm5vVmlwUHJpY2UpIHx8IChpbmZvMi5idXlMaW1pdCA9PSAyICYmICFpbmZvMi5zZWxsUHJpY2UpIC8vIOWIpOaWreW3sumihuWPlueahOeKtuaAgQogICAgICAgICAgCiAgICAgICAgICAvLyDlpITnkIbpmZDml7bnmoTlgJLorqHml7bnrYnpl67popggCiAgICAgICAgICBpZiAoaW5mbzIuY2hpbGRFbnVtS2V5ID09ICdBQ1RfU1BFQ0lBTF9PRkZFUl9QVVJDSEFTRV9MSU1JVCcpIHsKICAgICAgICAgICAgdGhpcy5oYW5kbGVyTGltaXQoaW5mbzIsIGZsYWcpCiAgICAgICAgICB9CiAgICAgICAgICBpbmZvMS5jaGFubmVsVHlwZSA9IHRoaXMub3B0aW9ucy5jaGFubmVsVHlwZSB8fCAnJwogICAgICAgICAgbGV0IGluZm8gPSB7IC4uLmluZm8xLCAuLi5pbmZvMiB9CiAgICAgICAgICB0aGlzLmluZm8gPSBpbmZvCiAgICAgICAgICB0aGlzLnJlbWFpblRpbWUgPSBpbmZvMi5yZW1haW5UaW1lCiAgICAgICAgICB0aGlzLnJlYWR5ID0gdHJ1ZQogICAgICAgICAgY29uc29sZS5sb2codGhpcy5pbmZvLCAnaW5mbzFpbmZvMWluZm8xaW5mbzFpbmZvMScpCiAgICAgICAgICAvLyDoh6rmiJHmuLjnibnljZbml7bpnIDosIPnlKjml6XljobmjqXlj6MgKOWNoeWIuOacieaViOacn+exu+Wei+S4uiAzLDQsNSkKICAgICAgICAgIGlmICh0aGlzLmluZm8uc3VwcGxpZXJDb2RlID09ICdQQVJUWV9aV1knKSB7CiAgICAgICAgICAgIC8vIOiHquaIkea4uOaYvuekuuS8muWRmOS7t++8iOmAieaLqeaXpeacn+WQjui/memHjOeahOS7t+agvOS4jeWPmO+8iQogICAgICAgICAgICB0aGlzLiRzZXQodGhpcy5pbmZvLCAndHJhdmVsUHJpY2UnLCBpbmZvMi5zZWxsUHJpY2UpCiAgICAgICAgICAgIGlmICh0aGlzLnNlbERhdGUuc2VsbFByaWNlIHx8IHRoaXMuc2VsRGF0ZS5zZWxsUHJpY2UgPT0gMCkgeyAvLyDliKTmlq3lt7LpgInmi6nnmoTku7fmoLwKICAgICAgICAgICAgICB0aGlzLiRzZXQodGhpcy5pbmZvLCAnc2VsbFByaWNlJywgdGhpcy5zZWxEYXRlLnNlbGxQcmljZSkKICAgICAgICAgICAgICB0aGlzLiRzZXQodGhpcy5pbmZvLCAnbm9WaXBQcmljZScsIHRoaXMuc2VsRGF0ZS5ub1ZpcFByaWNlKQogICAgICAgICAgICB9CgogICAgICAgICAgICBpZiAoWzMsIDQsIDVdLmluY2x1ZGVzKGluZm8xLnZhbGlkaXR5VHlwZSkpIHsKICAgICAgICAgICAgICAvLyDliKTmlq3pgInlrprml6XmnJ/vvIzmmL7npLrml6XljoYKICAgICAgICAgICAgICAvLyB0aGlzLnRyYXZlbEFjdE1vbnRoKCkKICAgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLmluZm8ubGltaXRUaW1lID4gMCkgewoKICAgICAgICAgICAgICAvLyDliKTmlq3lvZPliY3ml7bpl7TmmK/lkKblj6/otK3kubAgCiAgICAgICAgICAgICAgbGV0IGxpbWl0VGltZSA9IHRoaXMuaW5mby5saW1pdFRpbWUKICAgICAgICAgICAgICBsZXQgZGF0ZSA9IG5ldyBEYXRlKCkKICAgICAgICAgICAgICBsZXQgaCA9IGRhdGUuZ2V0SG91cnMoKSA+IDkgPyBkYXRlLmdldEhvdXJzKCkgKyAnJyA6ICcwJyArIGRhdGUuZ2V0SG91cnMoKQogICAgICAgICAgICAgIHZhciBtID0gZGF0ZS5nZXRNaW51dGVzKCkgPiA5ID8gZGF0ZS5nZXRNaW51dGVzKCkgKyAnJyA6ICcwJyArIGRhdGUuZ2V0TWludXRlcygpCiAgICAgICAgICAgICAgbGV0IGRheVRpbWUgPSBoICsgbQogICAgICAgICAgICAgIGlmIChkYXlUaW1lID4gbGltaXRUaW1lKSB7CiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHsKICAgICAgICAgICAgICAgICAgdGhpcy5oYW5kbGVyQnRuKCflvZPliY3kuI3lj6/otK3kubAnLCB0cnVlKQogICAgICAgICAgICAgICAgfSwgNTAwKQogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgICAgdGhpcy5oYW5kbGVyQnRuKHRoaXMuaW5mby5jYXJkVHlwZSA9PT0gJ0NBUkRfRElSRUNUX1JFQ0hBUkdFJyA/ICfnq4vljbPlhYXlgLwnIDogJ+eri+WNs+i0reS5sCcpCiAgICAgICAgICAvLyDku4XpmZDkvJrlkZjotK3kubDvvIzpnZ7kvJrlkZjmmL7npLoKICAgICAgICAgIGlmIChpbmZvMi5idXlMaW1pdCA9PSAyICYmICF0aGlzLnZpcFVzZXIpIHsKICAgICAgICAgICAgdGhpcy5oYW5kbGVyQnRuKCflvIDpgJrlubbotK3kubAnKQogICAgICAgICAgfQoKICAgICAgICAgIC8vIOS7hemZkOS8muWRmOi0reS5sOS4lOS8muWRmOWUruS7t+S4ujDvvIzpnZ7kvJrlkZjop4bop5IKICAgICAgICAgIGlmIChpbmZvMi5idXlMaW1pdCA9PSAyICYmICFpbmZvMi5zZWxsUHJpY2UgJiYgIXRoaXMudmlwVXNlcikgewogICAgICAgICAgICB0aGlzLmhhbmRsZXJCdG4oJ+W8gOmAmuW5tumihuWPlicpCiAgICAgICAgICAgIHRoaXMub3Blbl9yZWNlaXZlID0gdHJ1ZSAvLyDmoIflv5fmmK/lvIDpgJrlubbpooblj5bmjInpkq4KICAgICAgICAgIH0KICAgICAgICAgIGlmICh0aGlzLmluZm8ucmVtYWluTnVtID4gMCB8fCB0aGlzLmluZm8uY2FyZFR5cGUgPT09ICdDQVJEX0RJUkVDVF9SRUNIQVJHRScpIHsKICAgICAgICAgICAgaWYgKHRoaXMuaW5mby5jaGFubmVsVHlwZSA9PSAnQ0hBTk5FTF9DT05TVU1FUl9DT1VQT04nIHx8IHRoaXMuaW5mby5jaGFubmVsVHlwZSA9PSAnQ0hBTk5FTF9GT1JUVU5FX0NPVVBPTicpIHsKICAgICAgICAgICAgICAvLyDmtojotLnliLjmuKDpgZPml7bvvIzliKTmlq3ljp/ku7cKICAgICAgICAgICAgICBpZiAoaW5mbzIud29ydGggPT0gMCkgewogICAgICAgICAgICAgICAgdGhpcy5oYW5kbGVyQnRuKCfnq4vljbPpooblj5YnKQogICAgICAgICAgICAgICAgdGhpcy5mcmVlID0gdHJ1ZSAvL+WPr+S7peWFjei0uemihuWPlgogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICBpZiAoKCFpbmZvMi5zZWxsUHJpY2UgJiYgdGhpcy52aXBVc2VyKSB8fCAoaW5mbzIuYnV5TGltaXQgPT0gMSAmJiAhaW5mbzIuc2VsbFByaWNlICYmICFpbmZvMi5ub1ZpcFByaWNlKSkgewogICAgICAgICAgICAgICAgdGhpcy5oYW5kbGVyQnRuKCfnq4vljbPpooblj5YnKQogICAgICAgICAgICAgICAgdGhpcy5mcmVlID0gdHJ1ZSAvL+WPr+S7peWFjei0uemihuWPlgogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgICAKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIC8vIOW6k+WtmOS4ujDml7YKICAgICAgICAgICAgaWYgKGNvbnRhdGlvbikgewogICAgICAgICAgICAgIHRoaXMuaGFuZGxlckJ0bign5bey6aKG5a6MJywgdHJ1ZSkKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICB0aGlzLmhhbmRsZXJCdG4oJ+W3suWUrue9hCcsIHRydWUpCiAgICAgICAgICAgIH0KICAgICAgICAgIH0KCiAgICAgICAgICBpZiAoaW5mbzIuYWN0U3RhdGUgPT0gMyB8fCBpbmZvMi5hY3RTdGF0ZSA9PSA0IHx8IGluZm8yLmFjdFN0YXRlID09IDUpIHsKICAgICAgICAgICAgLy/llK7ku7fpg73kuLowCiAgICAgICAgICAgIGlmIChjb250YXRpb24pIHsKICAgICAgICAgICAgICB0aGlzLmhhbmRsZXJCdG4oJ+W3sumihuWujCcsIHRydWUpCiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgdGhpcy5oYW5kbGVyQnRuKCflt7LllK7nvYQnLCB0cnVlKQogICAgICAgICAgICB9CiAgICAgICAgICB9CgogICAgICAgICAgaWYgKGluZm8yLmFjdFN0YXRlID09IDEpIHsKICAgICAgICAgICAgdGhpcy5oYW5kbGVyQnRuKCfmtLvliqjmnKrlvIDlp4snLCB0cnVlKQogICAgICAgICAgfSBlbHNlIGlmIChpbmZvMi5hY3RTdGF0ZSA9PSAyMCkgewogICAgICAgICAgICAvLyDoh6rmiJHmuLjljaHliLjlvZPliY3ml7bpl7TkuI3lj6/otK3kubAKICAgICAgICAgICAgdGhpcy5oYW5kbGVyQnRuKCflvZPliY3kuI3lj6/otK3kubAnLCB0cnVlKQogICAgICAgICAgfQoKICAgICAgICAgIGxldCB0b3RhbE51bSA9IE51bWJlcih0aGlzLnJlYWxJbmZvLnVzZXJCdXlOdW0pICsgTnVtYmVyKHRoaXMucmVhbEluZm8udXNlckZyZWVSZWNlaXZlTnVtKSAvLyDlvZPliY3nlKjmiLfnmoTotK3kubDmlbDph4/lkozpooblj5bmlbDph4/mgLvlkowKCiAgICAgICAgICAvLyDmmK/lkKbpmZDliLbotK3kubAKICAgICAgICAgIGlmIChpbmZvMi5saW1pdFN0YXRlKSB7CiAgICAgICAgICAgIGlmICh0b3RhbE51bSA+PSBpbmZvMi5saW1pdEZyZXF1ZW5jeSkgewoKICAgICAgICAgICAgICAvLyDnlKjmiLfmgLvmiJDlip/otK3kubDmlbDph4/lpKfkuo7pmZDliLbotK3kubDmlbDph48KICAgICAgICAgICAgICB0aGlzLmhhbmRsZXJCdG4oJ+W3sui0reS5sCcsIHRydWUpCiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGlmICgodG90YWxOdW0gPj0gaW5mbzIubGltaXRGcmVxdWVuY3kpICYmIGNvbnRhdGlvbikgewoKICAgICAgICAgICAgICAvLyDlvZPliY3nlKjmiLflvZPliY3mtLvliqjkuK3mgLvlhY3otLnpooblj5bmlbDph4/lpKfkuo7pmZDliLbpooblj5bmlbDph48KICAgICAgICAgICAgICB0aGlzLmhhbmRsZXJCdG4oJ+W3sumihuWPlicsIHRydWUpCiAgICAgICAgICAgIH0KICAgICAgICAgIH0KCiAgICAgICAgICB0aGlzLnNob3dCdG5UeHQgPSB0cnVlCgogICAgICAgICAgCgogICAgICAgICAgLy8gLi4uLi4uLi4uLi4uLi4uLi7kvJjljJbmlrDlop4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uCiAgICAgICAgICAvLyDliKTmlq3ku47pmZDotK3ov5vlhaUKICAgICAgICAgIGlmIChpbmZvMi5jaGlsZEVudW1LZXkgPT0gJ0FDVF9TUEVDSUFMX09GRkVSX1BVUkNIQVNFX0xJTUlUJykgewogICAgICAgICAgICBpZiAoIXRoaXMuaW5mby5yZW1haW5OdW0pIHsKICAgICAgICAgICAgICB0aGlzLmhhbmRsZXJCdG4oJ+W3suaKouWujCcsIHRydWUpCiAgICAgICAgICAgICAgcmV0dXJuCiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKHJlcy5pbmZvLmFjdFN0YXRlID09IDExIHx8IHJlcy5pbmZvLmFjdFN0YXRlID09IDMpIHsKICAgICAgICAgICAgICB0aGlzLmhhbmRsZXJCdG4oJ+W3suaKouWujCcsIHRydWUpCiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgLy8gaWYgKHJlcy5pbmZvLmxpbWl0QWN0U3RhdGUgPT0gOCkgewogICAgICAgICAgICAgIC8vICAgdGhpcy5oYW5kbGVyQnRuKCfpooTnuqbmj5DphpInLCBmYWxzZSkKICAgICAgICAgICAgICAvLyB9IGVsc2UgaWYgKHJlcy5pbmZvLmxpbWl0QWN0U3RhdGUgPT0gOSkgewogICAgICAgICAgICAgIC8vICAgdGhpcy5oYW5kbGVyQnRuKCflt7LpooTnuqYnLCBmYWxzZSkKICAgICAgICAgICAgICAvLyB9IAogICAgICAgICAgICAgIGlmIChyZXMuaW5mby5saW1pdEFjdFN0YXRlID09IDggfHwgcmVzLmluZm8ubGltaXRBY3RTdGF0ZSA9PSA5KSB7CiAgICAgICAgICAgICAgICB0aGlzLmhhbmRsZXJCdG4oJ+acquW8gOWniycsIHRydWUpCiAgICAgICAgICAgICAgfSBlbHNlIGlmIChyZXMuaW5mby5saW1pdEFjdFN0YXRlID09IDEpIHsKICAgICAgICAgICAgICAgIHRoaXMuaGFuZGxlckJ0bign56uL5Y2z5oqi6LStJywgZmFsc2UpCiAgICAgICAgICAgICAgfSBlbHNlIGlmIChyZXMuaW5mby5saW1pdEFjdFN0YXRlID09IDEwKSB7CiAgICAgICAgICAgICAgICB0aGlzLmhhbmRsZXJCdG4oJ+W3sui0reS5sCcsIHRydWUpCiAgICAgICAgICAgICAgfSBlbHNlIGlmIChyZXMuaW5mby5saW1pdEFjdFN0YXRlID09IDMpIHsKICAgICAgICAgICAgICAgIHRoaXMuaGFuZGxlckJ0bign5bey5oqi5a6MJywgdHJ1ZSkKICAgICAgICAgICAgICB9IGVsc2UgaWYgKHJlcy5pbmZvLmxpbWl0QWN0U3RhdGUgPT0gMikgewogICAgICAgICAgICAgICAgdGhpcy5oYW5kbGVyQnRuKCflt7LmiqLlrownLCB0cnVlKQogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgfQoKICAgICAgICAgIC8vIOWIpOaWreS4uuWFkeaNouS4reW/g+i/m+WFpQogICAgICAgICAgaWYgKHRoaXMub3B0aW9ucy5oYXNFeGNoYW5nZSAhPSAnJykgewogICAgICAgICAgICBsZXQgZXhjaGFuZ2VfZGF0YSA9IHRoaXMuZXhjaGFuZ2VfZGF0YSAvLyDlhZHmjaLkuK3lv4PmtLvliqjmlbDmja4KCiAgICAgICAgICAgIGlmIChleGNoYW5nZV9kYXRhLmhhc0V4Y2hhbmdlKSB7CiAgICAgICAgICAgICAgdGhpcy5oYW5kbGVyQnRuKCflt7LlhZHmjaInLCB0cnVlKQogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIGlmIChleGNoYW5nZV9kYXRhLnJlbWFpbk51bSA+IDApIHsKICAgICAgICAgICAgICAgIGlmIChleGNoYW5nZV9kYXRhLnN0YXRlICE9IDIpIHsKICAgICAgICAgICAgICAgICAgdGhpcy5oYW5kbGVyQnRuKCflt7Lnu5PmnZ8nLCB0cnVlKQogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgaWYgKGV4Y2hhbmdlX2RhdGEuY29uZGl0aW9uKSB7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5oYW5kbGVyQnRuKCfnq4vljbPlhZHmjaInLCBmYWxzZSkKICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICB0aGlzLmhhbmRsZXJCdG4oJ+eri+WNs+WFkeaNoicsIHRydWUpCiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgdGhpcy5oYW5kbGVyQnRuKCflt7LlhZHlrownLCB0cnVlKQogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgfQoKICAgICAgICAgIC8vIOWmguaenOmcgOimgeaYvuekuuWAkuiuoeaXtgogICAgICAgICAgaWYgKGluZm8yLnNob3dUaW1lICYmIGluZm8yLmNoaWxkRW51bUtleSAhPSAnQUNUX1NQRUNJQUxfT0ZGRVJfUFVSQ0hBU0VfTElNSVQnKSB7CiAgICAgICAgICAgIC8vIC4uLi4uLi4uLi4uLi4uLi4uLuS8mOWMlue7k+adny4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uCiAgICAgICAgICAgIGNsZWFySW50ZXJ2YWwodGhpcy50aW1lcikKICAgICAgICAgICAgdmFyIHJlbWFpblRpbWUgPSB0aGlzLnJlbWFpblRpbWUKICAgICAgICAgICAgdGhpcy50aW1lciA9IHNldEludGVydmFsKCgpID0+IHsKICAgICAgICAgICAgICBpZiAocmVtYWluVGltZSA+PSAxMDAwKSB7CiAgICAgICAgICAgICAgICByZW1haW5UaW1lIC09IDEwMDAKICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgY2xlYXJJbnRlcnZhbCh0aGlzLnRpbWVyKQogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB0aGlzLnJlbWFpblRpbWUgPSByZW1haW5UaW1lIHx8IDAKICAgICAgICAgICAgfSwgMTAwMCkKICAgICAgICAgIH0KICAgICAgICAgIC8vIHRoaXMuZ2V0Q2FzaE51bSgpIC8vIOiOt+WPluW9k+WJjea0u+WKqOWPr+eUqOaKteaJo+acgOWkp+mHkeminee6ouWMhQogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB0aGlzLmJhY2tfdG8ocmVzKQogICAgICAgIH0KICAgICAgfSkuZmluYWxseSgoKSA9PiB7CiAgICAgICAgdGhpcy4kVG9hc3QuY2xlYXIoKQogICAgICB9KQogICAgfSwKICAgIC8vIOiOt+WPlua0u+WKqOWNoeWIuOivpuaDhQogICAgZ2V0Q291cERldGFpbCgpIHsKICAgICAgcmV0dXJuIHRoaXMuJGFwaS5hY3RfY2FyZF9kZXRhaWwoewogICAgICAgIGNhcmRJZDogdGhpcy5jYXJkSWQsCiAgICAgICAgZGV0YWlsSWQ6IHRoaXMuZGV0YWlsSWQsCiAgICAgICAgYWN0U246IHRoaXMub3B0aW9ucy5hY3RTbgogICAgICB9KS50aGVuKHJlcyA9PiB7CiAgICAgICAgaWYgKHJlcy5zdGF0ZSkgewogICAgICAgICAgdGhpcy5pbmZvID0geyAuLi50aGlzLmluZm8sIC4uLnJlcy5pbmZvIH0KICAgICAgICAgIHRoaXMubWVkaWFMaXN0ID0gcmVzLmluZm8ubWVkaWFMaXN0CiAgICAgICAgICBpZihyZXMuaW5mby5zaG9wU2hvdykgewogICAgICAgICAgICB0aGlzLmdldFN1aXRTaG9wcygpIAogICAgICAgICAgfQogICAgICAgICAgLy8g6Ieq5oiR5ri45Y2h5Yi45pe25ZWG5a626K+m5oOF5pi+56S65Li65Zu+5paH6K+m5oOFCiAgICAgICAgICBpZiAodGhpcy5pbmZvLmRlc2NyaWJlKSB7CiAgICAgICAgICAgIHRoaXMuZ3JhcGhpY0RldGFpbCA9IHRoaXMuaW5mby5kZXNjcmliZQogICAgICAgICAgfQogICAgICAgICAgdGhpcy5nZXRGaXhlZERldGFpbChyZXMuaW5mby5zaG9wU24pIC8vIOiOt+WPluWVhuWutuivpuaDhQogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAvLyB0aGlzLmJhY2tfdG8ocmVzKQogICAgICAgIH0KICAgICAgfSkKICAgIH0sCgoKICAgIC8vIOeJueWNlua0u+WKqOeJueacieS/oeaBrwogICAgZ2V0U3BlY2lhbEluZm8oKSB7CiAgICAgIHJldHVybiB0aGlzLiRhcGkuc3BlY2lhbF9zZWxsX2luZm8oewogICAgICAgIGNoYW5uZWxUeXBlOiB0aGlzLm9wdGlvbnMuY2hhbm5lbFR5cGUgfHwgJycsCiAgICAgICAgcXJDb2RlOiB0aGlzLm9wdGlvbnMucXJDb2RlIHx8ICcnLAogICAgICAgIGFjdFNuOiB0aGlzLm9wdGlvbnMuYWN0U24KICAgICAgfSkudGhlbihyZXMgPT4gewogICAgICAgIGNvbnNvbGUubG9nKCdzcGVjaWFsX3NlbGxfaW5mbycsIHJlcy5pbmZvKQogICAgICAgIGlmIChyZXMuc3RhdGUpIHsKICAgICAgICAgIHRoaXMuY2FyZElkID0gcmVzLmluZm8uY2FyZElkLAogICAgICAgICAgdGhpcy5kZXRhaWxJZCA9IHJlcy5pbmZvLmRldGFpbElkCiAgICAgICAgICB0aGlzLmluZm8gPSB7Li4udGhpcy5pbmZvLCAuLi5yZXMuaW5mb30KICAgICAgICB9IGVsc2UgewogICAgICAgICAgLy8gdGhpcy5iYWNrX3RvKHJlcykKICAgICAgICB9CiAgICAgIH0pCiAgICB9LAoKICAgIC8vIOiOt+WPluWVhuWutuWbuuWumuS/oeaBrwogICAgZ2V0Rml4ZWREZXRhaWwoc2hvcFNuKSB7CiAgICAgIHRoaXMuJGFwaS5zaG9wX2ZpeGVkX2RldGFpbCh7CiAgICAgICAgc2hvcFNuLAogICAgICAgIGxhdDogdGhpcy5sb2NhdGlvbkluZm8ubGF0aXR1ZGUsCiAgICAgICAgbG5nOiB0aGlzLmxvY2F0aW9uSW5mby5sb25naXR1ZGUKICAgICAgfSkudGhlbihyZXMgPT4gewogICAgICAgIGlmIChyZXMuc3RhdGUpIHsKICAgICAgICAgIHRoaXMuZml4ZWREZXRhaWwgPSByZXMuaW5mby5zaG9wCiAgICAgICAgICBpZighdGhpcy5pbmZvLmRlc2NyaWJlKSB7CiAgICAgICAgICAgIHRoaXMuZ3JhcGhpY0RldGFpbCA9IHJlcy5pbmZvLnNob3AuZGV0YWlsCiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9KQogICAgfSwKCiAgICAvLyDlhbPpl63nuqLljIXliJfooagKICAgIGNvbHNlY2FzaE1hc2soKSB7CiAgICAgIHRoaXMuY2FzaE1hc2sgPSAhdGhpcy5jYXNoTWFzawogICAgfSwKCiAgICAvLyDojrflj5bmtLvliqjnuqLljIXlvZPliY3kuqvnlKjmnIDlpKfnuqLljIUKICAgIGdldENhc2hOdW0oKSB7CiAgICAgIHRoaXMuJFRvYXN0LmxvYWRpbmcoeyAKICAgICAgICBtZXNzYWdlOiAn5Yqg6L295LitLi4uJywKICAgICAgICBmb3JiaWRDbGljazogdHJ1ZSwKICAgICAgICBkdXJhdGlvbjogMAogICAgICB9KQogICAgICBsZXQgdmlwX2NoZWNrID0gKCF0aGlzLnZpcFVzZXIgJiYgdGhpcy5pbmZvLmJ1eUxpbWl0ID09IDIpID8gdHJ1ZSA6IGZhbHNlCiAgICAgIGxldCBwcmljZSA9ICh0aGlzLmluZm8uYnV5TGltaXQgPT0gMiB8fCB0aGlzLnZpcFVzZXIpID8gdGhpcy5pbmZvLnNlbGxQcmljZSA6IHRoaXMuaW5mby5ub1ZpcFByaWNlCiAgICAgIAogICAgICB0aGlzLiRhcGkuY2FzaF9yZWRfbGlzdCh7CiAgICAgICAgYWN0U246IHRoaXMub3B0aW9ucy5hY3RTbiwKICAgICAgICBjaXR5SWQ6IHRoaXMubG9jYXRpb25DaXR5LmNpdHlJZCwKICAgICAgICBvcGVuVmlwOiB2aXBfY2hlY2ssIC8vIOaYr+WQpuWLvumAieS8muWRmOWNoQogICAgICAgIHZpcEZlZTogdmlwX2NoZWNrID8gdGhpcy52aXBGZWUgOiAwLCAvLyDkvJrlkZjljaHph5Hpop0KICAgICAgICBhY3RGZWU6IHByaWNlLCAvLyDmtLvliqjph5Hpop0KICAgICAgICBjYXJkSWQ6IHRoaXMuaW5mby5jYXJkSWQsIC8vIOeJueWNluWNoeWIuGlkIHx8IOekvOWMheS8oOepugogICAgICB9KS50aGVuKHJlcyA9PiB7CiAgICAgICAgaWYgKHJlcy5zdGF0ZSkgewogICAgICAgICAgbGV0IHJlZExpc3QgPSByZXMuaW5mby5jYXNoUmVkTGlzdCB8fCBbXQogICAgICAgICAgbGV0IGNvbnN1bWVyQ291cG9uTGlzdCA9IHJlcy5pbmZvLmNvbnN1bWVyQ291cG9uTGlzdCB8fCBbXQogICAgICAgICAgbGV0IHVzYWJsZUxpc3QgPSByZWRMaXN0LmZpbHRlcigoaXRlbSkgPT4gaXRlbS5jdXJyZW50QWJsZVVzZSkgLy8g6L+H5ruk5Y+v55So57qi5YyFCiAgICAgICAgICBsZXQgc29ydFVzYWJsZUxpc3QgPSB1c2FibGVMaXN0LnNvcnQoZnVuY3Rpb24gKGEsIGIpIHsgLy8g6ZmN5bqP5o6S5bqPCiAgICAgICAgICAgIHJldHVybiBiLm1vbmV5IC0gYS5tb25leQogICAgICAgICAgfSkKICAgICAgICAgIHRoaXMuc2VsQ2FzaHJlZCA9IHNvcnRVc2FibGVMaXN0WzBdIC8vIOmAieS4reacgOWkp+e6ouWMhQogICAgICAgICAgaWYgKGNvbnN1bWVyQ291cG9uTGlzdC5sZW5ndGgpIHsKICAgICAgICAgICAgdGhpcy5zZWxDb25zdW1lciA9IGNvbnN1bWVyQ291cG9uTGlzdFswXSB8fCB7fSAvLyDpgInkuK3mtojotLnliLgKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0pLmZpbmFsbHkoKCkgPT4gewogICAgICAgIHRoaXMuJFRvYXN0LmNsZWFyKCkKICAgICAgfSkKICAgIH0sCgogICAgLy8g6I635Y+W5Lya5ZGY5Y2h5pyA5L2O5Lu35qC8CiAgICB2aXBQcmljZSgpIHsKICAgICAgdGhpcy4kYXBpLnYxXzRfdmlwX2xvd1ByaWNlKHsKICAgICAgICB0b3BpY1R5cGU6IDEsCiAgICAgICAgdG9waWNTbjogdGhpcy5vcHRpb25zLmFjdFNuCiAgICAgIH0pLnRoZW4ocmVzID0+IHsKICAgICAgICBpZiAocmVzLnN0YXRlKSB7CiAgICAgICAgICB0aGlzLnZpcEZlZSA9IHJlcy5pbmZvID8gcmVzLmluZm8ubG93UHJpY2UgfHwgMCA6IDAKICAgICAgICB9CiAgICAgIH0pCiAgICB9LAoKICAgIC8vIOWFs+mXree6ouWMheW8ueeql+aXtgogICAgaGFzQ2FjaFJlZExpc3QoeyBkZXRhaWwgfSkgewogICAgICBpZiAoZGV0YWlsICYmIGRldGFpbC5sZW5ndGggPiAwKSB7CiAgICAgICAgLy8g6YeN5paw6K+35rGC57qi5YyF5o6l5Y+jCiAgICAgICAgLy8gdGhpcy5zZWxlY3RDb21wb25lbnQoJyNhY3RpdmVDYXNoJykuZ2V0Q2FzaExpc3QoKQogICAgICAgIHRoaXMuZ2V0Q2FzaE51bSgpCiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5zaG93UGFnZU1vZGVsID0gdHJ1ZQogICAgICB9CiAgICB9LAoKICAgIC8vIOiHquaIkea4uOa0u+WKqOivpuaDhemAieaLqeS7t+agvAogICAgc2VsRGF0ZUxpc3QoaXRlbSkgewogICAgICBsZXQgZGF0ZSA9IHsKICAgICAgICB0ZXh0OiBpdGVtLmRhdGUuc3Vic3RyKDAsIDYpLAogICAgICAgIG1vbnRoOiBpdGVtLmRhdGUuc3Vic3RyKDQsIDIpLAogICAgICAgIHllYXI6IGl0ZW0uZGF0ZS5zdWJzdHIoMCwgNCksCiAgICAgICAgZGF5OiBpdGVtLmRhdGUuc3Vic3RyKDYsIDIpCiAgICAgIH0KICAgICAgdGhpcy4kcmVmcy5jYWxlbmRhci5zaG93Q2FsZW5kYXJEYXRhKGRhdGUpCiAgICAgIHRoaXMub3BlbkNhbGVuZGFyKCkgLy8g5pi+56S65pel5Y6G5by556qXCiAgICB9LAoKICAgIG9wZW5DYWxlbmRhcigpIHsKICAgICAgdGhpcy5jYWxlbmRhck1hc2sgPSB0cnVlCiAgICB9LAoKICAgIGdldFRyYXZlbE1vbnRoSW5mbyAoZGV0YWlsKSB7CiAgICAgIC8vIOaOpeaUtuaXpeWOhuS/oeaBrwogICAgICBpZiAoZGV0YWlsLmRhdGFUeXBlID09ICdpbml0JykgewogICAgICAgIC8vIOaXpeWOhuWIneWni+WMluaVsOaNrgogICAgICAgIHRoaXMudHJhdmVsTW9udGhJbmZvID0gZGV0YWlsCiAgICAgICAgaWYgKGRldGFpbC51bmFibGVCdXkpIHsKICAgICAgICAgIHRoaXMuaGFuZGxlckJ0bign5b2T5YmN5LiN5Y+v6LSt5LmwJywgdHJ1ZSkKICAgICAgICB9CiAgICAgIH0gZWxzZSBpZiAoZGV0YWlsLmRhdGFUeXBlID09ICdzZWxEYXRlJyl7CiAgICAgICAgLy8g6YCJ5oup5pel5Y6G5L+h5oGvCiAgICAgICAgbGV0IGluZm8gPSB0aGlzLmluZm8KICAgICAgICBpbmZvLnNlbGxQcmljZSA9IGRldGFpbC5zZWxsUHJpY2UKICAgICAgICBpbmZvLm5vVmlwUHJpY2UgPSBkZXRhaWwubm9WaXBQcmljZQogICAgICAgIHRoaXMuaW5mbyA9IGluZm8KICAgICAgICB0aGlzLnNlbERhdGUgPSBkZXRhaWwKICAgICAgfQogICAgfSwKCiAgICBnZXRSZWNlaXZlQ29uZGl0aW9uICgpIHsKICAgICAgcmV0dXJuIHRoaXMuJGFwaS5yZWNlaXZlX2NvbmRpdGlvbih7CiAgICAgICAgYWN0U246IHRoaXMub3B0aW9ucy5hY3RTbgogICAgICB9KS50aGVuKHJlcz0+IHsKICAgICAgICBpZiAocmVzLnN0YXRlKSB7CiAgICAgICAgICB0aGlzLmNvbmRpdGlvbkluZm8gPSByZXMuaW5mbwogICAgICAgIH0KICAgICAgfSkKICAgIH0sCiAgfSwKICAKICBjcmVhdGVkKCkgewogICAgY29uc3Qgb3B0aW9ucyA9IHRoaXMuJHJvdXRlLnF1ZXJ5CiAgICBvcHRpb25zLmhhc0V4Y2hhbmdlID0gb3B0aW9ucy5oYXNFeGNoYW5nZSB8fCAnJwogICAgb3B0aW9ucy50eXBlID0gb3B0aW9ucy50eXBlIHx8ICcnCiAgICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zCiAgICBpZiAob3B0aW9ucy5wb3B1cCkgewogICAgICB0aGlzLiRkaWFsb2cuYWxlcnQoewogICAgICAgIHRpdGxlOiAn5o+Q56S6JywKICAgICAgICBtZXNzYWdlOiAn6K6i5Y2V6LaF5pe25bey5Y+W5raI77yM6K+36YeN5paw5LiL5Y2VJywKICAgICAgICBjb25maXJtQnV0dG9uVGV4dDogJ+ehruWumicsCiAgICAgICAgY29uZmlybUJ1dHRvbkNvbG9yOiAnI0Q5MDYzNCcKICAgICAgfSkKICAgIH0KICAgIHRoaXMuZ2V0QWN0RGV0YWlsKHRydWUpCiAgICB0aGlzLnZpcFByaWNlKCkKICAgIGlmICh0aGlzLm9wdGlvbnMuaGFzRXhjaGFuZ2UgIT0gJycpIHsgLy8g5Yik5pat5Li65YWR5o2i5Lit5b+D6L+b5YWlCiAgICAgIHRoaXMuZXhjaGFuZ2VfZGF0YSA9IHRoaXMuJHNhdmUuZ2V0KCdzZXNzaW9uJywgJ2V4Y2hhbmdlX2RhdGEnKSAvLyDlhZHmjaLkuK3lv4PmtLvliqjmlbDmja4KICAgIH0KICAgIHRoaXMuZ2V0UmVjZWl2ZUNvbmRpdGlvbigpIC8vIOaYr+WQpumcgOimgeWhq+WGmeeUqOaIt+S/oeaBr+WPiuWFtuadoeS7tgoKICAgIHRoaXMubmVlZEF1dGggPSB0aGlzLm5lZWRBdXRoCiAgICB0aGlzLmdldEZyZWVCYWcgPSB0aGlzLmdldEZyZWVCYWcKICAgIHRoaXMudmlwVXNlciA9IHRoaXMudmlwQ2FyZEluZm8udmlwVXNlcgogICAgdGhpcy5zZWxDYXNocmVkID0ge30KICAgIGlmICh0aGlzLmFjdERldGFsVXBkYXRlKSB7CiAgICAgIC8vIOWIt+aWsOa0u+WKqOaVsOaNrgogICAgICB0aGlzLmdldEFjdERldGFpbCh0cnVlKQogICAgICB0aGlzLmFjdERldGFsVXBkYXRlID0gZmFsc2UKICAgIH0KCiAgICAvLyDmtLvliqjku7fmoLzliLfmlrAKICAgIGlmKHRoaXMudXBkYXRlRmxhZykgewogICAgICB0aGlzLnJlZnJlc2ggPSB0cnVlCiAgICB9CgogICAgLy8g55So5oi35L+h5oGv5pWw5o2uCiAgICBsZXQgdHJhdmVsSW5mb3JtYXRpb24gPSB0aGlzLiRzYXZlLmdldCgnc2Vzc2lvbicsICd0cmF2ZWxJbmZvcm1hdGlvbicpCiAgICBpZiAodHJhdmVsSW5mb3JtYXRpb24pIHsKICAgICAgdGhpcy50cmFjdmVsVXNlckxpc3QgPSB0cmF2ZWxJbmZvcm1hdGlvbi5mb3JtTGlzdAogICAgICB0aGlzLnNlbERhdGUgPSB0cmF2ZWxJbmZvcm1hdGlvbi5zZWxEYXRlCiAgICAgIAogICAgICBpZiAodGhpcy5vcHRpb25zLmhhc0V4Y2hhbmdlICE9ICcnKSB7CiAgICAgICAgdGhpcy5leGNoYW5nZSgpCiAgICAgIH0gZWxzZSBpZiAodGhpcy5mcmVlKSB7CiAgICAgICAgLy8g5YWN6LS56aKG5Y+WCiAgICAgICAgdGhpcy5nZXRGcmVlKCkKICAgICAgfQogICAgfQogIH0sCiAgYWN0aXZhdGVkKCkgewoKICB9LAogIGRlc3Ryb3llZCgpIHsKICAgIC8vIOa4hemZpOeUqOaIt+Whq+WGmeS/oeaBrwogICAgdGhpcy4kc2F2ZS5yZW1vdmVBcnIoJ3Nlc3Npb24nLCAgWyd0cmF2ZWxJbmZvcm1hdGlvbicsICd1cGRhdGVGbGFnJ10pCiAgfQp9Cg=="},null]}