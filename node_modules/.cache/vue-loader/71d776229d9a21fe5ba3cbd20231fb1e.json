{"remainingRequest":"C:\\Users\\Administrator\\Desktop\\vip_inline_h5\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Administrator\\Desktop\\vip_inline_h5\\src\\views\\active\\giftBag.vue?vue&type=style&index=0&id=6afa47c9&scoped=true&lang=scss&","dependencies":[{"path":"C:\\Users\\Administrator\\Desktop\\vip_inline_h5\\src\\views\\active\\giftBag.vue","mtime":1595415263761},{"path":"C:\\Users\\Administrator\\Desktop\\vip_inline_h5\\node_modules\\css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Administrator\\Desktop\\vip_inline_h5\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"C:\\Users\\Administrator\\Desktop\\vip_inline_h5\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"C:\\Users\\Administrator\\Desktop\\vip_inline_h5\\node_modules\\sass-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Administrator\\Desktop\\vip_inline_h5\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Administrator\\Desktop\\vip_inline_h5\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCi5naWZ0LXRpdGxlewogIGZvbnQtc2l6ZTogMzJweDsKICBjb2xvcjogIzFBMTkxOTsKICBtYXJnaW4tYm90dG9tOiAzMHB4OwogIG1hcmdpbi1yaWdodDogMTJweDsKfQo="},{"version":3,"sources":["giftBag.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA2RA;AACA;AACA;AACA;AACA;AACA","file":"giftBag.vue","sourceRoot":"src/views/active","sourcesContent":["<!--\r\n * @Description: 大礼包\r\n * @Version: 1.0\r\n * @Autor: cherry\r\n * @Date: 2020-07-20 15:49:14\r\n * @LastEditors: cherry\r\n * @LastEditTime: 2020-07-22 18:54:23\r\n--> \r\n<template>\r\n  <div>\r\n    <common-swiper :imgUrls=\"info.mediaList\" urlName=\"img\"></common-swiper>\r\n    <div class=\"act-container\">\r\n      <active-header  \r\n        :info=\"info\" \r\n        :channelType=\"channelType\" \r\n        :selConsumer=\"selConsumer\" \r\n        :showTime=\"showTime\" \r\n        :remainTime=\"remainTime\" \r\n        :btnDisabled=\"btnDisabled\" \r\n        :hasExchange=\"options.hasExchange\">\r\n      </active-header>\r\n      <!-- 现金红包 && 使用规则 -->\r\n      <active-cash id=\"activeCash\" :info=\"info\" :options=\"options\" :actType=\"info.actType\" />\r\n      <!-- 推荐理由 -->\r\n      <active-gift-reason :info=\"info\"></active-gift-reason>\r\n      <!-- 礼包详情 -->\r\n      <active-gift :info=\"info\"></active-gift>\r\n      <!-- 活动须知 -->\r\n      <div class=\"active-panel\">\r\n        <div class='gift-title bold' id=\"rule\">活动须知</div>\r\n        <div class=''><span class=\"actRule\">{{info.actRule}}</span></div>\r\n      </div>\r\n      <!-- 礼包介绍 -->\r\n      <active-graphic :detail=\"info.actExplain\" title=\"礼包介绍\"></active-graphic>\r\n      \r\n    </div>\r\n    <!-- 兑换中心进入时 -->\r\n    <div class='active-footer footer1' v-if='options.hasExchange'>\r\n      <img v-if=\"!btnDisabled\" src='http://doyd.oss-cn-shenzhen.aliyuncs.com/vip_mini_apply/v1.0.0/btn_base_pay1.png'>\r\n      <img v-else src='http://doyd.oss-cn-shenzhen.aliyuncs.com/vip_mini_apply/v1.0.0/btn_unclickable_pay1.png'>\r\n      <div class='flex-v poa footer-text'>\r\n        <button class=\"ft34 tac\" :class=\"btnDisabled ? 'cB5' : 'c99' \"  id=\"STATIS_BUY\">{{btnText}}</button>\r\n      </div>\r\n    </div>\r\n    <!-- 正常活动进入 -->\r\n    <div class=\"footer pof\" v-else>\r\n      <active-footer :info=\"info\" :btnText=\"btnText\" :btnDisabled=\"btnDisabled\" :selCashred=\"selCashred\" :selConsumer=\"selConsumer\" @success=\"getGift\"></active-footer>\r\n    </div>\r\n  </div>\r\n</template>\r\n<script>\r\n  import activeHeader from '@components/active/activeHeader'\r\n  import activeCash from '@components/active/activeCash'\r\n  import activeGift from '@components/active/activeGift'\r\n  import activeGiftReason from '@components/active/activeGiftReason'\r\n  import activeGraphic from '@components/active/activeGraphic'\r\n  import activeFooter from '@components/active/activeFooter'\r\n\r\n  export default {\r\n    name: 'giftBag',\r\n    mixins: [],\r\n    computed: {\r\n    },\r\n    components: {\r\n      activeHeader,\r\n      activeCash,\r\n      activeGift,\r\n      activeGiftReason,\r\n      activeGraphic,\r\n      activeFooter\r\n    },\r\n    data() {\r\n      return {\r\n        selCashred: {},\r\n        btnText: '立即抢购',\r\n        showTime: true,\r\n        remainTime: 3999000,\r\n        selConsumer: {},\r\n        channelType: '',\r\n        btnDisabled: false,\r\n        options: this.$route.query || {},\r\n        info: {\r\n          ableUseWallet: true,\r\n          actBannerList: [{banner: \"https://oss.kdwaimai.com/jkb/vip/15928077200001592807712868_548301.jpeg\"}],\r\n          actEndTime: 1751126399000,\r\n          actExplain: \"<p>cm大礼包勿动</p>\",\r\n          actId: 2493,\r\n          actName: \"cm大礼包勿动\",\r\n          actPic: \"https://oss.kdwaimai.com/jkb/vip/15928077050001592807694507_102445.jpeg\",\r\n          actRecommendReason: \"cm大礼包勿动\",\r\n          actRule: \"cm大礼包勿动\",\r\n          actStartTime: 1592755200000,\r\n          actState: 2,\r\n          actType: \"ACT_GIFT_PACKAGE\",\r\n          backgroundPic: null,\r\n          backgroundType: 0,\r\n          buyLimit: 1,\r\n          cardSum: 1,\r\n          childEnumKey: \"ACT_GIFT_PACKAGE\",\r\n          countDownHour: 0,\r\n          limitActState: null,\r\n          limitCount: null,\r\n          limitEndTime: null,\r\n          limitFrequency: 0,\r\n          limitStartTime: null,\r\n          limitState: false,\r\n          mediaList: [{img: \"https://oss.kdwaimai.com/jkb/vip/15928077200001592807712868_548301.jpeg\",title: null, type: \"img\", video: null}],\r\n          noVipPrice: 2000,\r\n          offBackBuy: 0,\r\n          originalPrice: 24000,\r\n          panicBuyingPrice: 0,\r\n          promotion: 600,\r\n          refreshVipCardInfo: false,\r\n          refundAllow: 2,\r\n          remainTime: 155716940505,\r\n          residueCount: null,\r\n          restrictState: 2,\r\n          sellPrice: 1000,\r\n          showTime: true,\r\n          startRemainTime: 0,\r\n          topPic: null,\r\n          type: null,\r\n          viptake: null,\r\n          wantCnt: 0,\r\n          // 礼包\r\n          cardList: [{\r\n            appointmentTime: 1,\r\n            brandId: 1,\r\n            cardCode: null,\r\n            cardId: 1320,\r\n            cardName: \"订单--33\",\r\n            cardNum: 1,\r\n            cardType: \"CARD_CASH_COUPON\",\r\n            detailId: 1779,\r\n            limitFunds: 0,\r\n            limitStackable: 0,\r\n            limitTimeInterval: \"营业时间可用\",\r\n            shopId: 1371,\r\n            shopName: \"潮生活\",\r\n            shopPic: \"https://oss.kdwaimai.com/jkb/15623210660001562321062860_012352.png\",\r\n            shopSn: \"shop_3asNyP1y3as\",\r\n            shopType: 1,\r\n            stackable: false,\r\n            subscribeState: 0,\r\n            suitShop: \"4店通用\",\r\n            timeType: 2,\r\n            useCondition: 1,\r\n            usePeriod: false\r\n            }],\r\n          channelTrack: null,\r\n          dealNum: 12,\r\n          drawCashOut: 0,\r\n          freeReceiveType: null,\r\n          hasReceiveChannelFreeGift: false,\r\n          hasReceiveFreeGift: false,\r\n          hasReceiveOtherFreeGift: false,\r\n          hasVipCard: false,\r\n          newUser: false,\r\n          packageGiftType: null,\r\n          packageType: 2,\r\n          receiveNum: 12,\r\n          recoveryStock: 0,\r\n          refreshVipCardInfo: false,\r\n          remainNum: 9989,\r\n          showSendVip: null,\r\n          userBuyNum: 0,\r\n          userBuyUseNum: 0,\r\n          userFreeReceiveNum: 0,\r\n          userFreeReceiveUseNum: 0,\r\n          vipCard: null,\r\n          vipUser: true,\r\n          worth: 24000,\r\n        }\r\n      }\r\n    },\r\n    methods: {\r\n      /**\r\n       * 领取或者抢购礼包\r\n          restrictState  是否可购买：1否 2是\r\n          receiveType: 外部渠道{\r\n            购买： 3\r\n            免费领:  1\r\n          }\r\n      */\r\n      getGift() {\r\n        var vipUser = app.globalData.vipCardInfo.vipUser\r\n        var isnewUser = this.data.realInfo.newUser\r\n        let packageGiftType = this.data.info.packageGiftType // 1售卖 2免费领\r\n        let freeReceiveType = this.data.info.freeReceiveType // 1所有人可领取 2仅限新用户 3仅限会员 4仅限非会员\r\n        let restrictState = this.data.info.restrictState\r\n        let channelTrack = this.data.info.channelTrack // 通过这个字段，判断用packageGiftType还是restrictState字段\r\n        var jumpSate = false // 用来判断是否提示仅限某用户领取\r\n        if (freeReceiveType == 1) {\r\n          // 所有人可领取\r\n          jumpSate = true\r\n        } else if (freeReceiveType == 2 && isnewUser) {\r\n          // 判断用户是否为新用户\r\n          jumpSate = true\r\n        } else if (freeReceiveType == 3 && vipUser) {\r\n          // 判断是否仅会员领取\r\n          jumpSate = true\r\n        } else if (freeReceiveType == 4 && !vipUser) {\r\n          // 判断是否仅非会员领取\r\n          jumpSate = true\r\n        }\r\n\r\n        // 如果是开通并领取\r\n        if (this.data.open_receive) {\r\n          this.setData({\r\n            ['info.sellPrice']: 0,\r\n            ['info.noVipPrice']: 0\r\n          })\r\n        }\r\n\r\n        wx.setStorageSync('orderInfo',this.data.info)\r\n        if (this.data.hasExchange != '') {\r\n          // 判断兑奖中心进入 立即兑换\r\n          let conditionInfo = this.data.conditionInfo\r\n          let tracvelUserList = this.data.tracvelUserList\r\n          if (conditionInfo.isCondition && tracvelUserList.length == 0) {\r\n            // 判断是否需求填写信息\r\n            wx.navigateTo({\r\n              url: `/pages/activity/travel_information/travel_information?actSn=${this.options.actSn}`\r\n            })\r\n            return\r\n          }\r\n          if (!this.data.btnDisabled) this.exchange()\r\n        } else if (this.data.info.childEnumKey == 'ACT_GIFT_PACKAGE_PURCHASE_LIMIT') {\r\n          this.handlerLimitEvent()\r\n        } else if (this.data.info.actState == 2) {\r\n          // 判断是否是从外部渠道进入，外部渠道进入时，如果配置用户可购买，非会员也可购买礼包\r\n          let buyLimit = this.data.info.buyLimit\r\n          let sellPrice = this.data.info.sellPrice\r\n          let noVipPrice = this.data.info.noVipPrice\r\n          let buyState = false;\r\n          //  所有人   会 0   非 0\r\n          if (buyLimit == 1 && noVipPrice == 0 && sellPrice == 0){\r\n            buyState = false;\r\n          //  会员身份\r\n          } else if (vipUser && sellPrice > 0){\r\n            buyState = true\r\n          } else if (!vipUser){\r\n            buyState = buyLimit == 2 ? true : noVipPrice > 0 \r\n          }\r\n          if (channelTrack ? packageGiftType == 1 : restrictState == 2) {\r\n            if(buyState){\r\n              // 购买礼包\r\n              // 如果是外部渠道并且是领取状态，receiveType为4，购买状态receiveType为2\r\n              let receiveType = this.data.channelType == 'CHANNEL_ACTIVITY_LABEL_SHOW' && this.data.open_receive ? 4 : 2\r\n              if (buyLimit == 2 && sellPrice == 0) {\r\n                receiveType = 1\r\n              }\r\n              this.orderUnpay(receiveType)    \r\n            } else {\r\n              // 使用字段restrictState判断\r\n              this.receiveGift(4)\r\n            }\r\n          } else if (channelTrack ? packageGiftType == 2 : restrictState == 1) {\r\n            // 免费领\r\n            if (channelTrack) {\r\n              // 使用字段packageGiftType判断\r\n              if (freeReceiveType != 1 && !jumpSate) {\r\n                wx.showToast({\r\n                  title: `仅限${this.data.receiveObj[freeReceiveType]}领取`,\r\n                  icon: 'none'\r\n                })\r\n              } else {\r\n                this.receiveGift(4)\r\n              }\r\n            } else {\r\n              // 使用字段restrictState判断\r\n              this.receiveGift(4)\r\n            }\r\n            \r\n          }\r\n        }\r\n      },\r\n    },\r\n    created() {\r\n    }\r\n  }\r\n</script>\r\n<style scoped lang='scss'>\r\n  .gift-title{\r\n    font-size: 32px;\r\n    color: #1A1919;\r\n    margin-bottom: 30px;\r\n    margin-right: 12px;\r\n  }\r\n</style>"]}]}