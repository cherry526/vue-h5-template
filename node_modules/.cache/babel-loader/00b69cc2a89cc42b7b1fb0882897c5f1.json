{"remainingRequest":"C:\\Users\\Administrator\\Desktop\\vip_inline_h5\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\Administrator\\Desktop\\vip_inline_h5\\src\\mixins\\entranceMixin.js","dependencies":[{"path":"C:\\Users\\Administrator\\Desktop\\vip_inline_h5\\src\\mixins\\entranceMixin.js","mtime":1596705223173},{"path":"C:\\Users\\Administrator\\Desktop\\vip_inline_h5\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Administrator\\Desktop\\vip_inline_h5\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuaW5kZXgtb2YiOwppbXBvcnQgX29iamVjdFNwcmVhZCBmcm9tICJDOi9Vc2Vycy9BZG1pbmlzdHJhdG9yL0Rlc2t0b3AvdmlwX2lubGluZV9oNS9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vb2JqZWN0U3ByZWFkMiI7CgovKg0KICogQERlc2NyaXB0aW9uOiANCiAqIEBWZXJzaW9uOiAxLjANCiAqIEBBdXRvcjogY2hlcnJ5DQogKiBARGF0ZTogMjAyMC0wNy0yNyAxNTo1NDoyOQ0KICogQExhc3RFZGl0b3JzOiBjaGVycnkNCiAqIEBMYXN0RWRpdFRpbWU6IDIwMjAtMDgtMDYgMTc6MDk6MzENCiAqLwppbXBvcnQgeyBtYXBHZXR0ZXJzLCBtYXBBY3Rpb25zLCBtYXBNdXRhdGlvbnMgfSBmcm9tICJ2dWV4IjsKaW1wb3J0IHV0aWxzIGZyb20gJ0B1dGlscy91dGlscyc7CmltcG9ydCBsaW5rUGFnZSBmcm9tICdAL3JvdXRlci9saW5rUGFnZSc7CmltcG9ydCB7IEFVVEhfQVBJIH0gZnJvbSAnQC9jb25maWcvaW5kZXguanMnOwppbXBvcnQgZ2V0V1hTaWduIGZyb20gIkAvdXRpbHMvd3giOyAvLyDpppbpobXnm7jlhbMKCnZhciBlbnRyYW5jZU1peGluID0gewogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4ge307CiAgfSwKICBjb21wdXRlZDogX29iamVjdFNwcmVhZCh7fSwgbWFwR2V0dGVycyhbXSkpLAogIG1ldGhvZHM6IF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKHt9LCBtYXBNdXRhdGlvbnMoJ2luZGV4JywgWydTRVRfV1hVU0VSJywgJ1NFVF9ORUVEQVVUSCcsICdTRVRfVklQQ0FSRElORk8nXSkpLCBtYXBBY3Rpb25zKCdpbmRleCcsIFsvLyDojrflj5blvZPliY3kvY3nva7nu4/nuqzluqbkv6Hmga8KICAnc2V0TG9jYXRpb25DaXR5SW5mbyddKSksIHt9LCB7CiAgICBjaGVja0F1dGg6IGZ1bmN0aW9uIGNoZWNrQXV0aChxdWVyeURhdGEpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIHRoaXMuJGFwaS5jaGVja0F1dGgoKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICAvLyDnrKzkuInmlrnlsI/nqIvluo/lhaXlj6PpppbmrKHmjojmnYMKICAgICAgICBpZiAocmVzLnN0YXRlICYmIHJlcy5pbmZvLm5lZWRBdXRoICYmICFyZXMuaW5mby50b2tlbikgewogICAgICAgICAgX3RoaXMuaW5pdEF1dGgocXVlcnlEYXRhKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgX3RoaXMuJHNhdmUuc2V0KCdzZXNzaW9uJywgJ3Rva2VuJywgcmVzLmluZm8udG9rZW4pOwoKICAgICAgICAgIF90aGlzLmdldEFwcEluaXQoKTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKICAgIGluaXRBdXRoOiBmdW5jdGlvbiBpbml0QXV0aChxdWVyeURhdGEpIHsKICAgICAgdmFyIHNlc3Npb25Ub2tlbiA9IHRoaXMuJHNhdmUuZ2V0KCdzZXNzaW9uJywgJ3Rva2VuJyk7IC8vIOmmluasoeaOiOadgwoKICAgICAgaWYgKCFzZXNzaW9uVG9rZW4pIHsKICAgICAgICAvLyDojrflj5bmjojmnYMKICAgICAgICAvLyBjb25zb2xlLmxvZyh3aW5kb3cubG9jYXRpb24uaHJlZiwgJyB3aW5kb3cubG9jYXRpb24uaHJlZicgKQogICAgICAgIGlmICghfndpbmRvdy5sb2NhdGlvbi5ocmVmLmluZGV4T2YoInRva2VuIikpIHsKICAgICAgICAgIHRoaXMuJHNhdmUuc2V0KCdsb2NhbCcsICdpbml0UGF0aCcsIHdpbmRvdy5sb2NhdGlvbi5ocmVmKTsKICAgICAgICAgIHRoaXMuJHNhdmUuc2V0KCdsb2NhbCcsICdxdWVyeURhdGEnLCBxdWVyeURhdGEpOwogICAgICAgICAgY29uc29sZS5sb2coJ+i3s+i9rOaOiOadgycpOwogICAgICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSBBVVRIX0FQSTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdmFyIHRva2VuID0gcXVlcnlEYXRhLnRva2VuOwoKICAgICAgICAgIGlmICh0b2tlbikgewogICAgICAgICAgICB0aGlzLiRzYXZlLnNldCgnc2Vzc2lvbicsICd0b2tlbicsIHRva2VuKTsKICAgICAgICAgICAgdGhpcy5nZXRBcHBJbml0KCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CiAgICB9LAogICAgaW5pdFBhZ2U6IGZ1bmN0aW9uIGluaXRQYWdlKCkgewogICAgICB2YXIgcXVlcnlEYXRhOwoKICAgICAgaWYgKHdpbmRvdy4kbW9kZSA9PT0gJ2hhc2gnKSB7CiAgICAgICAgcXVlcnlEYXRhID0gdXRpbHMuZ2V0RGF0YSgpOwogICAgICB9IGVsc2UgewogICAgICAgIHF1ZXJ5RGF0YSA9IHV0aWxzLmZvcm1hdFVybFBhcmFtcygpOwogICAgICB9CgogICAgICB2YXIgc2Vzc2lvblRva2VuID0gdGhpcy4kc2F2ZS5nZXQoJ3Nlc3Npb24nLCAndG9rZW4nKTsKICAgICAgY29uc29sZS5sb2coc2Vzc2lvblRva2VuLCBKU09OLnN0cmluZ2lmeShxdWVyeURhdGEpICsgJz09PT09PT09PT09PT09PT09PT09PScgKyB3aW5kb3cubG9jYXRpb24uaHJlZiwgIX53aW5kb3cubG9jYXRpb24uaHJlZi5pbmRleE9mKCJ0b2tlbiIpKTsKCiAgICAgIGlmICghc2Vzc2lvblRva2VuICYmIHF1ZXJ5RGF0YSAmJiBxdWVyeURhdGEuZW50cnlUeXBlID09PSAnSEFJTkFfSDUnICYmICFxdWVyeURhdGEudG9rZW4pIHsKICAgICAgICB0aGlzLmNoZWNrQXV0aChxdWVyeURhdGEpOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuaW5pdEF1dGgocXVlcnlEYXRhKTsKICAgICAgfQogICAgfSwKICAgIGdldFd4SW5pdDogZnVuY3Rpb24gZ2V0V3hJbml0KCkgewogICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgICBnZXRXWFNpZ24oKS50aGVuKGZ1bmN0aW9uICh3eCkgewogICAgICAgICAgY29uc29sZS5sb2cod3gsICctLS0tLS0tLS0tLXd4Jyk7CiAgICAgICAgICB3aW5kb3cuJHd4ID0gd3g7CiAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKHJlcykgewogICAgICAgICAgY29uc29sZS5sb2cocmVzLCAnLS0tLS0tLS0tZ2V0V1hTaWduRXJyb3InKTsKICAgICAgICB9KTsKICAgICAgfSwgNTAwKTsKICAgIH0sCiAgICAvLyDojrflj5bliJ3lp4vljJbkv6Hmga8KICAgIGdldEFwcEluaXQ6IGZ1bmN0aW9uIGdldEFwcEluaXQoKSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwoKICAgICAgLy8g5aSE55CG6Lev55SxdG9rZW4KICAgICAgdmFyIGxhc3R1cmw7CgogICAgICBpZiAod2luZG93LiRtb2RlID09PSAnaGFzaCcpIHsKICAgICAgICBsYXN0dXJsID0gdXRpbHMuZGVsRGF0YSgpOwogICAgICAgIGhpc3RvcnkucmVwbGFjZVN0YXRlKG51bGwsIG51bGwsIGxhc3R1cmwpOwogICAgICAgIHRoaXMuZ2V0V3hJbml0KCk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgbGFzdHVybCA9IHV0aWxzLmRlbGV0ZVVybFBhcmFtcygpOwogICAgICAgIHRoaXMuZ2V0V3hJbml0KCk7CiAgICAgIH0KCiAgICAgIGNvbnNvbGUubG9nKHdpbmRvdy5sb2NhdGlvbi5ocmVmLCAn5aSE55CG6Lev55SxdG9rZW4nKTsKICAgICAgdGhpcy4kYXBpLmFwcEluaXQoKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICBjb25zb2xlLmxvZyhyZXMsICfojrflj5bliJ3lp4vljJbkv6Hmga8tY2hlcnJ5Jyk7IC8vICRldmVudEJ1cy4kZW1pdCgncmVwbGFjZUZsYWcnLCB0cnVlKQogICAgICAgIC8vIOWkhOeQhuWFpeWPo+mAu+i+kQoKICAgICAgICBpZiAocmVzLnN0YXRlKSB7CiAgICAgICAgICB2YXIgX3JlcyRpbmZvID0gcmVzLmluZm8sCiAgICAgICAgICAgICAgX3JlcyRpbmZvJHZpcENhcmRJbmZvID0gX3JlcyRpbmZvLnZpcENhcmRJbmZvLAogICAgICAgICAgICAgIHZpcENhcmRJbmZvID0gX3JlcyRpbmZvJHZpcENhcmRJbmZvID09PSB2b2lkIDAgPyB7fSA6IF9yZXMkaW5mbyR2aXBDYXJkSW5mbywKICAgICAgICAgICAgICB3eFVzZXIgPSBfcmVzJGluZm8ud3hVc2VyLAogICAgICAgICAgICAgIHRhcmdldCA9IF9yZXMkaW5mby50YXJnZXQsCiAgICAgICAgICAgICAgcGFyYW0gPSBfcmVzJGluZm8ucGFyYW07CgogICAgICAgICAgX3RoaXMyLlNFVF9XWFVTRVIod3hVc2VyKTsKCiAgICAgICAgICBfdGhpczIuU0VUX1ZJUENBUkRJTkZPKHZpcENhcmRJbmZvKTsgLy8g5YKo5a2Y5Lya5ZGY5Y2h5L+h5oGvCgoKICAgICAgICAgIGlmICh2aXBDYXJkSW5mby5vbmNlVmlwICYmICF2aXBDYXJkSW5mby52aXBVc2VyKSB7CiAgICAgICAgICAgIHZpcENhcmRJbmZvLmlzRXhwaXJhdGlvbiA9IHRydWU7CiAgICAgICAgICB9CgogICAgICAgICAgcGFyYW0uZW50cmFuY2UgPSB0cnVlOwogICAgICAgICAgY29uc29sZS5sb2cocmVzLmluZm8sIHBhcmFtLCAnOTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5Jyk7CiAgICAgICAgICBsaW5rUGFnZS5saW5rUGFnZSh0YXJnZXQsIHBhcmFtKTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfQogIH0pLAogIG1vdW50ZWQ6IGZ1bmN0aW9uIG1vdW50ZWQoKSB7Ly8gdGhpcy5pbml0UGFnZSgpCiAgfQp9OwpleHBvcnQgZGVmYXVsdCBlbnRyYW5jZU1peGluOw=="},{"version":3,"sources":["C:/Users/Administrator/Desktop/vip_inline_h5/src/mixins/entranceMixin.js"],"names":["mapGetters","mapActions","mapMutations","utils","linkPage","AUTH_API","getWXSign","entranceMixin","data","computed","methods","checkAuth","queryData","$api","then","res","state","info","needAuth","token","initAuth","$save","set","getAppInit","sessionToken","get","window","location","href","indexOf","console","log","initPage","$mode","getData","formatUrlParams","JSON","stringify","entryType","getWxInit","setTimeout","wx","$wx","catch","lasturl","delData","history","replaceState","deleteUrlParams","appInit","vipCardInfo","wxUser","target","param","SET_WXUSER","SET_VIPCARDINFO","onceVip","vipUser","isExpiration","entrance","mounted"],"mappings":"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","sourcesContent":["/*\r\n * @Description: \r\n * @Version: 1.0\r\n * @Autor: cherry\r\n * @Date: 2020-07-27 15:54:29\r\n * @LastEditors: cherry\r\n * @LastEditTime: 2020-08-06 17:09:31\r\n */ \r\nimport { mapGetters, mapActions,  mapMutations } from \"vuex\";\r\nimport utils from '@utils/utils'\r\nimport linkPage from '@/router/linkPage'\r\nimport { AUTH_API } from '@/config/index.js'\r\nimport getWXSign from \"@/utils/wx\"\r\n\r\n// 首页相关\r\nconst entranceMixin = {\r\n  data () {\r\n    return {\r\n      \r\n    }\r\n  },\r\n  computed: {\r\n    ...mapGetters([])\r\n  },\r\n  methods: {\r\n    ...mapMutations('index', [\r\n      'SET_WXUSER',\r\n      'SET_NEEDAUTH',\r\n      'SET_VIPCARDINFO'\r\n    ]),\r\n    ...mapActions('index', [\r\n      // 获取当前位置经纬度信息\r\n      'setLocationCityInfo'\r\n    ]),\r\n    checkAuth(queryData) {\r\n      this.$api.checkAuth().then(res => {\r\n        // 第三方小程序入口首次授权\r\n        if(res.state && res.info.needAuth && !res.info.token) {\r\n          this.initAuth(queryData)\r\n        } else {\r\n          this.$save.set('session', 'token', res.info.token)\r\n          this.getAppInit()\r\n        }\r\n      })\r\n    },\r\n    initAuth(queryData) {\r\n      const sessionToken = this.$save.get('session', 'token')\r\n      // 首次授权\r\n      if (!sessionToken) {\r\n        // 获取授权\r\n        // console.log(window.location.href, ' window.location.href' )\r\n        if (!~window.location.href.indexOf(\"token\")) {\r\n          this.$save.set('local', 'initPath', window.location.href)\r\n          this.$save.set('local', 'queryData', queryData)\r\n          console.log('跳转授权')\r\n          window.location.href = AUTH_API\r\n        } else {\r\n          let token = queryData.token\r\n          if (token) {\r\n            this.$save.set('session', 'token', token)\r\n            this.getAppInit()\r\n          }\r\n        }\r\n      }\r\n    },\r\n    initPage() {\r\n      let queryData\r\n      if(window.$mode === 'hash') {\r\n        queryData = utils.getData()\r\n      } else {\r\n        queryData = utils.formatUrlParams()\r\n      }\r\n      const sessionToken = this.$save.get('session', 'token')\r\n      console.log(sessionToken, JSON.stringify(queryData) + '====================='+ window.location.href, !~window.location.href.indexOf(\"token\") )\r\n      \r\n      if (!sessionToken && queryData && queryData.entryType === 'HAINA_H5' && !queryData.token) {\r\n        this.checkAuth(queryData)\r\n      } else {\r\n        this.initAuth(queryData)\r\n      }\r\n      \r\n\r\n    },\r\n    getWxInit() {\r\n      setTimeout(() => {\r\n        getWXSign().then(wx => {\r\n          console.log(wx, '-----------wx')\r\n          window.$wx = wx\r\n        }).catch(res => {\r\n          console.log(res, '---------getWXSignError')\r\n        })\r\n      }, 500);\r\n    },\r\n    // 获取初始化信息\r\n    getAppInit() {\r\n      // 处理路由token\r\n      let lasturl\r\n      if(window.$mode === 'hash') {\r\n        lasturl = utils.delData()\r\n        history.replaceState(null,null,lasturl)\r\n        this.getWxInit()\r\n      } else {\r\n        lasturl = utils.deleteUrlParams()\r\n        this.getWxInit()\r\n      }\r\n      console.log(window.location.href, '处理路由token')\r\n      this.$api.appInit().then(res => {\r\n        console.log(res, '获取初始化信息-cherry')\r\n        // $eventBus.$emit('replaceFlag', true)\r\n        // 处理入口逻辑\r\n        if(res.state) {\r\n          let {vipCardInfo = {}, wxUser, target, param} = res.info\r\n          this.SET_WXUSER(wxUser)\r\n          this.SET_VIPCARDINFO(vipCardInfo)\r\n          // 储存会员卡信息\r\n          if (vipCardInfo.onceVip && !vipCardInfo.vipUser) {\r\n            vipCardInfo.isExpiration = true\r\n          }\r\n          param.entrance = true\r\n          console.log(res.info, param, '999999999999999999999999')\r\n          linkPage.linkPage(target, param)\r\n        }        \r\n      })\r\n    }\r\n  },\r\n  mounted() {\r\n    // this.initPage()\r\n  },\r\n}\r\nexport default entranceMixin "]}]}