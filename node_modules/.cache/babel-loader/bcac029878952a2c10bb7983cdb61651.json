{"remainingRequest":"C:\\Users\\Administrator\\Desktop\\vip_inline_h5\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\Administrator\\Desktop\\vip_inline_h5\\src\\utils\\wx.js","dependencies":[{"path":"C:\\Users\\Administrator\\Desktop\\vip_inline_h5\\src\\utils\\wx.js","mtime":1594623961838},{"path":"C:\\Users\\Administrator\\Desktop\\vip_inline_h5\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Administrator\\Desktop\\vip_inline_h5\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuaW5kZXgtb2YiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QudG8tc3RyaW5nIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLmV4ZWMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcuc3BsaXQiOwoKLyoNCiAqIEBEZXNjcmlwdGlvbjogDQogKiBAVmVyc2lvbjogMS4wDQogKiBAQXV0b3I6IGNoZXJyeQ0KICogQERhdGU6IDIwMjAtMDYtMTEgMTA6MTE6NTkNCiAqIEBMYXN0RWRpdG9yczogY2hlcnJ5DQogKiBATGFzdEVkaXRUaW1lOiAyMDIwLTA3LTEzIDE1OjA2OjAxDQogKi8KaW1wb3J0IGF4aW9zIGZyb20gJ2F4aW9zJzsKaW1wb3J0IHd4IGZyb20gJ3dlaXhpbi1qcy1zZGsnOwppbXBvcnQgeyBXWF9BUEksIFdYX0FQSVMgfSBmcm9tICdAL2NvbmZpZy9pbmRleC5qcyc7CmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGdldFdYU2lnbigpIHsKICB2YXIgd3hQYXRoID0gd2luZG93LmxvY2F0aW9uLmhyZWYuaW5kZXhPZignaHR0cHMnKSA+IC0xID8gV1hfQVBJUyA6IFdYX0FQSTsKICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgewogICAgLy8g5b+F5aGr77yM6ZyA6KaB5L2/55So55qESlPmjqXlj6PliJfooagKICAgIHZhciBqc0FwaUxpc3QgPSBbJ2Nob29zZVdYUGF5JywgJ2dldExvY2F0aW9uJywgJ29wZW5Mb2NhdGlvbicsICdoaWRlTWVudUl0ZW1zJywgJ2ludm9rZU1pbmlQcm9ncmFtQVBJJywgJ21pbmlQcm9ncmFtJywgJ2Nob29zZUltYWdlJywgJ3VwbG9hZEltYWdlJywgJ2Nsb3NlV2luZG93JywgJ29uTWVudVNoYXJlQXBwTWVzc2FnZScsICdzY2FuUVJDb2RlJ107CiAgICB2YXIgdXJsID0gd2luZG93LmxvY2F0aW9uLmhyZWYuc3BsaXQoJyMnKVswXTsgLy8gbGV0IHVybCA9ICdodHRwOi8vMTA3ZC5rZHdhaW1haS5jb20nCgogICAgYXhpb3MucG9zdCh3eFBhdGgsIHsKICAgICAgdXJsOiB3aW5kb3cuZW5jb2RlVVJJQ29tcG9uZW50KHVybCkKICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICBpZiAocmVzLmRhdGEuc3VjY2VzcykgewogICAgICAgIHdpbmRvdy5zZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgICAgIHZhciBkYXRhID0gcmVzLmRhdGEuZGF0YTsKICAgICAgICAgIHd4LmNvbmZpZyh7CiAgICAgICAgICAgIGRlYnVnOiBmYWxzZSwKICAgICAgICAgICAgLy8g5byA5ZCv6LCD6K+V5qih5byPLOiwg+eUqOeahOaJgOaciWFwaeeahOi/lOWbnuWAvOS8muWcqOWuouaIt+err2FsZXJ05Ye65p2l77yM6Iul6KaB5p+l55yL5Lyg5YWl55qE5Y+C5pWw77yM5Y+v5Lul5ZyocGPnq6/miZPlvIDvvIzlj4LmlbDkv6Hmga/kvJrpgJrov4dsb2fmiZPlh7rvvIzku4XlnKhwY+err+aXtuaJjeS8muaJk+WNsOOAggogICAgICAgICAgICBhcHBJZDogZGF0YS5hcHBpZCwKICAgICAgICAgICAgLy8g5b+F5aGr77yM5LyB5Lia5Y+355qE5ZSv5LiA5qCH6K+G77yM5q2k5aSE5aGr5YaZ5LyB5Lia5Y+3Y29ycGlkCiAgICAgICAgICAgIHRpbWVzdGFtcDogZGF0YS50aW1lc3RhbXAsCiAgICAgICAgICAgIC8vIOW/heWhq++8jOeUn+aIkOetvuWQjeeahOaXtumXtOaIswogICAgICAgICAgICBub25jZVN0cjogZGF0YS5ub25jZXN0ciwKICAgICAgICAgICAgLy8g5b+F5aGr77yM55Sf5oiQ562+5ZCN55qE6ZqP5py65LiyCiAgICAgICAgICAgIHNpZ25hdHVyZTogZGF0YS5zaWduLAogICAgICAgICAgICAvLyDlv4XloavvvIznrb7lkI3vvIzop4HpmYTlvZUxCiAgICAgICAgICAgIGpzQXBpTGlzdDoganNBcGlMaXN0CiAgICAgICAgICB9KTsKICAgICAgICAgIHd4LnJlYWR5KGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICAgICAgLy/oh6rlrprkuYnliIbkuqsKICAgICAgICAgICAgd3gub25NZW51U2hhcmVBcHBNZXNzYWdlKHsKICAgICAgICAgICAgICB0aXRsZTogJ+a9rueUn+a0uycsCiAgICAgICAgICAgICAgLy8g5YiG5Lqr5qCH6aKYCiAgICAgICAgICAgICAgZGVzYzogIua9rueUn+a0uyIsCiAgICAgICAgICAgICAgbGluazogd2luZG93LmxvY2F0aW9uLmhyZWYuc3BsaXQoJyMnKVswXSwKICAgICAgICAgICAgICBpbWdVcmw6ICJodHRwOi8vZG95ZC10ZXN0Lm9zcy1jbi1zaGVuemhlbi5hbGl5dW5jcy5jb20vamtiL3d4bWVkaWEvMjAxODA5MTAvMTUzNjU3MzU3NzEwOC5wbmciLAogICAgICAgICAgICAgIC8vIOWIhuS6q+WbvuaghwogICAgICAgICAgICAgIC8vIHR5cGU6ICcnLCAvLyDliIbkuqvnsbvlnossbXVzaWPjgIF2aWRlb+aIlmxpbmvvvIzkuI3loavpu5jorqTkuLpsaW5rCiAgICAgICAgICAgICAgLy8gZGF0YVVybDogJycsIC8vIOWmguaenHR5cGXmmK9tdXNpY+aIlnZpZGVv77yM5YiZ6KaB5o+Q5L6b5pWw5o2u6ZO+5o6l77yM6buY6K6k5Li656m6CiAgICAgICAgICAgICAgc3VjY2VzczogZnVuY3Rpb24gc3VjY2VzcygpIHsvLyDnlKjmiLfnoa7orqTliIbkuqvlkI7miafooYznmoTlm57osIPlh73mlbAKICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgIGNhbmNlbDogZnVuY3Rpb24gY2FuY2VsKCkgey8vIOeUqOaIt+WPlua2iOWIhuS6q+WQjuaJp+ihjOeahOWbnuiwg+WHveaVsAogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIHJlc29sdmUod3gpOwogICAgICAgICAgfSk7CiAgICAgICAgICB3eC5lcnJvcihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgICAgIHJlamVjdCgnd3gnLCByZXMpOyAvLyBjb25maWfkv6Hmga/pqozor4HlpLHotKXkvJrmiafooYxlcnJvcuWHveaVsO+8jOWmguetvuWQjei/h+acn+WvvOiHtOmqjOivgeWksei0pe+8jOWFt+S9k+mUmeivr+S/oeaBr+WPr+S7peaJk+W8gGNvbmZpZ+eahGRlYnVn5qih5byP5p+l55yL77yM5Lmf5Y+v5Lul5Zyo6L+U5Zue55qEcmVz5Y+C5pWw5Lit5p+l55yL77yM5a+55LqOU1BB5Y+v5Lul5Zyo6L+Z6YeM5pu05paw562+5ZCN44CCCiAgICAgICAgICB9KTsKICAgICAgICB9LCAwKTsKICAgICAgfQogICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycm9yKSB7CiAgICAgIHJlamVjdChlcnJvcik7CiAgICB9KTsKICB9KTsKfQ=="},{"version":3,"sources":["C:/Users/Administrator/Desktop/vip_inline_h5/src/utils/wx.js"],"names":["axios","wx","WX_API","WX_APIS","getWXSign","wxPath","window","location","href","indexOf","Promise","resolve","reject","jsApiList","url","split","post","encodeURIComponent","then","res","data","success","setTimeout","config","debug","appId","appid","timestamp","nonceStr","noncestr","signature","sign","ready","onMenuShareAppMessage","title","desc","link","imgUrl","cancel","error","catch"],"mappings":";;;;;AAAA;;;;;;;;AAQA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,EAAP,MAAe,eAAf;AACA,SAASC,MAAT,EAAiBC,OAAjB,QAAgC,mBAAhC;AAEA,eAAe,SAASC,SAAT,GAAqB;AAClC,MAAIC,MAAM,GAAGC,MAAM,CAACC,QAAP,CAAgBC,IAAhB,CAAqBC,OAArB,CAA6B,OAA7B,IAAwC,CAAC,CAAzC,GAA6CN,OAA7C,GAAuDD,MAApE;AACA,SAAO,IAAIQ,OAAJ,CAAY,UAACC,OAAD,EAAUC,MAAV,EAAqB;AACtC;AACA,QAAMC,SAAS,GAAG,CAChB,aADgB,EAEhB,aAFgB,EAGhB,cAHgB,EAIhB,eAJgB,EAKhB,sBALgB,EAMhB,aANgB,EAOhB,aAPgB,EAQhB,aARgB,EAShB,aATgB,EAUhB,uBAVgB,EAWhB,YAXgB,CAAlB;AAaA,QAAIC,GAAG,GAAGR,MAAM,CAACC,QAAP,CAAgBC,IAAhB,CAAqBO,KAArB,CAA2B,GAA3B,EAAgC,CAAhC,CAAV,CAfsC,CAgBtC;;AACAf,IAAAA,KAAK,CAACgB,IAAN,CAAYX,MAAZ,EAAoB;AAClBS,MAAAA,GAAG,EAAER,MAAM,CAACW,kBAAP,CAA0BH,GAA1B;AADa,KAApB,EAEGI,IAFH,CAEQ,UAASC,GAAT,EAAc;AAClB,UAAGA,GAAG,CAACC,IAAJ,CAASC,OAAZ,EAAqB;AACnBf,QAAAA,MAAM,CAACgB,UAAP,CAAkB,YAAM;AACtB,cAAMF,IAAI,GAAGD,GAAG,CAACC,IAAJ,CAASA,IAAtB;AACAnB,UAAAA,EAAE,CAACsB,MAAH,CAAU;AACRC,YAAAA,KAAK,EAAE,KADC;AACM;AACdC,YAAAA,KAAK,EAAEL,IAAI,CAACM,KAFJ;AAEW;AACnBC,YAAAA,SAAS,EAAEP,IAAI,CAACO,SAHR;AAGmB;AAC3BC,YAAAA,QAAQ,EAAER,IAAI,CAACS,QAJP;AAIiB;AACzBC,YAAAA,SAAS,EAAEV,IAAI,CAACW,IALR;AAKc;AACtBlB,YAAAA,SAAS,EAAEA;AANH,WAAV;AAQAZ,UAAAA,EAAE,CAAC+B,KAAH,CAAS,UAASb,GAAT,EAAc;AACrB;AACAlB,YAAAA,EAAE,CAACgC,qBAAH,CAAyB;AACvBC,cAAAA,KAAK,EAAE,KADgB;AACT;AACdC,cAAAA,IAAI,EAAE,KAFiB;AAGvBC,cAAAA,IAAI,EAAE9B,MAAM,CAACC,QAAP,CAAgBC,IAAhB,CAAqBO,KAArB,CAA2B,GAA3B,EAAgC,CAAhC,CAHiB;AAIvBsB,cAAAA,MAAM,EAAE,sFAJe;AAIyE;AAChG;AACA;AACAhB,cAAAA,OAAO,EAAE,mBAAY,CACjB;AACH,eATsB;AAUvBiB,cAAAA,MAAM,EAAE,kBAAY,CAChB;AACH;AAZsB,aAAzB;AAcA3B,YAAAA,OAAO,CAACV,EAAD,CAAP;AACD,WAjBD;AAkBAA,UAAAA,EAAE,CAACsC,KAAH,CAAS,UAASpB,GAAT,EAAc;AACrBP,YAAAA,MAAM,CAAC,IAAD,EAAMO,GAAN,CAAN,CADqB,CAErB;AACD,WAHD;AAID,SAhCD,EAgCG,CAhCH;AAiCD;AACF,KAtCH,EAuCGqB,KAvCH,CAuCS,UAASD,KAAT,EAAgB;AACrB3B,MAAAA,MAAM,CAAC2B,KAAD,CAAN;AACD,KAzCH;AA0CD,GA3DM,CAAP;AA4DD","sourcesContent":["/*\r\n * @Description: \r\n * @Version: 1.0\r\n * @Autor: cherry\r\n * @Date: 2020-06-11 10:11:59\r\n * @LastEditors: cherry\r\n * @LastEditTime: 2020-07-13 15:06:01\r\n */ \r\nimport axios from 'axios'\r\nimport wx from 'weixin-js-sdk'\r\nimport { WX_API, WX_APIS } from '@/config/index.js'\r\n\r\nexport default function getWXSign() {\r\n  var wxPath = window.location.href.indexOf('https') > -1 ? WX_APIS : WX_API \r\n  return new Promise((resolve, reject) => {\r\n    // 必填，需要使用的JS接口列表\r\n    const jsApiList = [\r\n      'chooseWXPay', \r\n      'getLocation', \r\n      'openLocation', \r\n      'hideMenuItems', \r\n      'invokeMiniProgramAPI',\r\n      'miniProgram', \r\n      'chooseImage',\r\n      'uploadImage', \r\n      'closeWindow',\r\n      'onMenuShareAppMessage',\r\n      'scanQRCode'\r\n    ] \r\n    let url = window.location.href.split('#')[0]\r\n    // let url = 'http://107d.kdwaimai.com'\r\n    axios.post( wxPath, {   \r\n      url: window.encodeURIComponent(url)\r\n    }).then(function(res) {\r\n        if(res.data.success) {\r\n          window.setTimeout(() => {\r\n            const data = res.data.data\r\n            wx.config({\r\n              debug: false, // 开启调试模式,调用的所有api的返回值会在客户端alert出来，若要查看传入的参数，可以在pc端打开，参数信息会通过log打出，仅在pc端时才会打印。\r\n              appId: data.appid, // 必填，企业号的唯一标识，此处填写企业号corpid\r\n              timestamp: data.timestamp, // 必填，生成签名的时间戳\r\n              nonceStr: data.noncestr, // 必填，生成签名的随机串\r\n              signature: data.sign, // 必填，签名，见附录1\r\n              jsApiList: jsApiList\r\n            })\r\n            wx.ready(function(res) {\r\n              //自定义分享\r\n              wx.onMenuShareAppMessage({\r\n                title: '潮生活', // 分享标题\r\n                desc: \"潮生活\",\r\n                link: window.location.href.split('#')[0],\r\n                imgUrl: \"http://doyd-test.oss-cn-shenzhen.aliyuncs.com/jkb/wxmedia/20180910/1536573577108.png\", // 分享图标\r\n                // type: '', // 分享类型,music、video或link，不填默认为link\r\n                // dataUrl: '', // 如果type是music或video，则要提供数据链接，默认为空\r\n                success: function () { \r\n                    // 用户确认分享后执行的回调函数\r\n                },\r\n                cancel: function () { \r\n                    // 用户取消分享后执行的回调函数\r\n                }\r\n              });\r\n              resolve(wx)\r\n            })\r\n            wx.error(function(res) {\r\n              reject('wx',res)\r\n              // config信息验证失败会执行error函数，如签名过期导致验证失败，具体错误信息可以打开config的debug模式查看，也可以在返回的res参数中查看，对于SPA可以在这里更新签名。\r\n            })\r\n          }, 0);\r\n        }\r\n      })\r\n      .catch(function(error) {\r\n        reject(error)\r\n      })\r\n  })\r\n}"]}]}