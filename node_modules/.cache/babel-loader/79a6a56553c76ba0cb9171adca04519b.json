{"remainingRequest":"C:\\Users\\Administrator\\Desktop\\vip_inline_h5\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\Administrator\\Desktop\\vip_inline_h5\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\Users\\Administrator\\Desktop\\vip_inline_h5\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Administrator\\Desktop\\vip_inline_h5\\src\\views\\active\\specialSale.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\Administrator\\Desktop\\vip_inline_h5\\src\\views\\active\\specialSale.vue","mtime":1596793568916},{"path":"C:\\Users\\Administrator\\Desktop\\vip_inline_h5\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Administrator\\Desktop\\vip_inline_h5\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\Administrator\\Desktop\\vip_inline_h5\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Administrator\\Desktop\\vip_inline_h5\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKdmFyIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQgPSByZXF1aXJlKCJDOi9Vc2Vycy9BZG1pbmlzdHJhdG9yL0Rlc2t0b3AvdmlwX2lubGluZV9oNS9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9pbnRlcm9wUmVxdWlyZURlZmF1bHQiKTsKCk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAiX19lc01vZHVsZSIsIHsKICB2YWx1ZTogdHJ1ZQp9KTsKZXhwb3J0cy5kZWZhdWx0ID0gdm9pZCAwOwoKdmFyIF92dWV4ID0gcmVxdWlyZSgidnVleCIpOwoKdmFyIF9zZWNraWxsTWl4aW4gPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoIkAvbWl4aW5zL3NlY2tpbGxNaXhpbiIpKTsKCnZhciBfYWN0aXZlQnJhbmQgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoIkBjb21wb25lbnRzL2FjdGl2ZS9hY3RpdmVCcmFuZCIpKTsKCnZhciBfYWN0aXZlTm90aWNlID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKCJAY29tcG9uZW50cy9hY3RpdmUvYWN0aXZlTm90aWNlIikpOwoKdmFyIF9hY3RpdmVHcmFwaGljID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKCJAY29tcG9uZW50cy9hY3RpdmUvYWN0aXZlR3JhcGhpYyIpKTsKCnZhciBfYWN0aXZlUm9vbSA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZSgiQGNvbXBvbmVudHMvYWN0aXZlL2FjdGl2ZVJvb20iKSk7Cgp2YXIgX2FjdGl2ZUhlYWRlciA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZSgiQGNvbXBvbmVudHMvYWN0aXZlL2FjdGl2ZUhlYWRlciIpKTsKCnZhciBfYWN0aXZlQ291cG9uID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKCJAY29tcG9uZW50cy9hY3RpdmUvYWN0aXZlQ291cG9uIikpOwoKdmFyIF9hY3RpdmVDYXNoID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKCJAY29tcG9uZW50cy9hY3RpdmUvYWN0aXZlQ2FzaCIpKTsKCnZhciBfYWN0aXZlRm9vdGVyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKCJAY29tcG9uZW50cy9hY3RpdmUvYWN0aXZlRm9vdGVyIikpOwoKdmFyIF9hY3RpdmVDYWxlbmRhciA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZSgiQGNvbXBvbmVudHMvYWN0aXZlL2FjdGl2ZUNhbGVuZGFyIikpOwoKdmFyIF91dGlscyA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZSgiQC91dGlscy91dGlscyIpKTsKCnZhciBfcGF5ID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKCJAL3V0aWxzL3BheSIpKTsKCnZhciBfYWN0aXZlID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKCJAL2ZpbHRlcnMvYWN0aXZlIikpOwoKLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KdmFyIF9kZWZhdWx0ID0gewogIG5hbWU6ICdzcGVjaWFsU2FsZScsCiAgbWl4aW5zOiBbX3NlY2tpbGxNaXhpbi5kZWZhdWx0XSwKICBjb21wdXRlZDoge30sCiAgY29tcG9uZW50czogewogICAgYWN0aXZlSGVhZGVyOiBfYWN0aXZlSGVhZGVyLmRlZmF1bHQsCiAgICBhY3RpdmVDb3Vwb246IF9hY3RpdmVDb3Vwb24uZGVmYXVsdCwKICAgIGFjdGl2ZUNhc2g6IF9hY3RpdmVDYXNoLmRlZmF1bHQsCiAgICBhY3RpdmVHcmFwaGljOiBfYWN0aXZlR3JhcGhpYy5kZWZhdWx0LAogICAgYWN0aXZlQnJhbmQ6IF9hY3RpdmVCcmFuZC5kZWZhdWx0LAogICAgYWN0aXZlUm9vbTogX2FjdGl2ZVJvb20uZGVmYXVsdCwKICAgIGFjdGl2ZU5vdGljZTogX2FjdGl2ZU5vdGljZS5kZWZhdWx0LAogICAgYWN0aXZlRm9vdGVyOiBfYWN0aXZlRm9vdGVyLmRlZmF1bHQsCiAgICBhY3RpdmVDYWxlbmRhcjogX2FjdGl2ZUNhbGVuZGFyLmRlZmF1bHQKICB9LAoKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgdmlwVXNlcjogZmFsc2UsCiAgICAgIHN1aXRTaG9wczogW10sCiAgICAgIG1lZGlhTGlzdDogW10sCiAgICAgIGdyYXBoaWNEZXRhaWw6ICcnLAogICAgICAvLyDor6bmg4VodG1s5L+h5oGvCiAgICAgIHRpbWVyOiBudWxsLAogICAgICByZWNvbW1lbmRMaXN0OiBbXSwKICAgICAgLy8g5YW25LuW56S85YyF5o6o6I2QL+aOqOiNkOadg+ebigogICAgICBmbGFnOiB0cnVlLAogICAgICBzaG93UG9wOiBmYWxzZSwKICAgICAgLy8g6Z2e5Lya5ZGY6LSt5Lmw5pe25o+Q56S6CiAgICAgIHJlY29tUGFnZTogMSwKICAgICAgLy8g54m55Y2W55qE5o6o6I2Q5p2D55uK5LiK5ouJ5pu05aSaCiAgICAgIGhhc01vcmU6IHRydWUsCiAgICAgIC8vIOeJueWNlueahOaOqOiNkOadg+ebiuabtOWkmuaPkOekugogICAgICBidG5EaXNhYmxlZDogZmFsc2UsCiAgICAgIGNhc2hNYXNrOiBmYWxzZSwKICAgICAgc2VsQ2FzaHJlZDoge30sCiAgICAgIHNlbENvbnN1bWVyOiB7fSwKICAgICAgY2FsZW5kYXJNYXNrOiBmYWxzZSwKICAgICAgLy8g5pel5Y6G5by556qXCiAgICAgIHNlbERhdGU6IHsKICAgICAgICBzdGFydFRpbWU6ICcnLAogICAgICAgIGVuZFRpbWU6ICcnCiAgICAgIH0sCiAgICAgIC8vIOiHquaIkea4uOmAieS4reeahOaXtumXtAogICAgICB0cmF2ZWxNb250aEluZm86IHt9LAogICAgICBjb25kaXRpb25JbmZvOiB7fSwKICAgICAgLy8g5YWR5aWW5Lit5b+D5L+h5oGvCiAgICAgIHRyYWN2ZWxVc2VyTGlzdDogW10sCiAgICAgIHJlZnJlc2g6IGZhbHNlLAogICAgICAvLyDliLfmlrDml6XljobmlbDmja4KICAgICAgZG93blRpbWU6IHsKICAgICAgICBob3VyOiAnMDAnLAogICAgICAgIG1pbnV0ZTogJzAwJywKICAgICAgICBzZWNvbmQ6ICcwMCcKICAgICAgfSwKICAgICAgcmVhZHk6IGZhbHNlLAogICAgICBidG5UZXh0OiAn56uL5Y2z5oqi6LStJywKICAgICAgc2hvd0J0blR4dDogdHJ1ZSwKICAgICAgZml4ZWREZXRhaWw6IHt9LAogICAgICAvLyDpl6jlupflk4HniYzkurrlnYfkv6Hmga8KICAgICAgcmVtYWluVGltZTogMzk5OTAwMCwKICAgICAgY2hhbm5lbFR5cGU6ICcnLAogICAgICBvcHRpb25zOiB0aGlzLiRyb3V0ZS5xdWVyeSB8fCB7fSwKICAgICAgaW5mbzoge30KICAgIH07CiAgfSwKCiAgY29tcHV0ZWQ6IHsgLi4uKDAsIF92dWV4Lm1hcEdldHRlcnMpKFsibG9jYXRpb25JbmZvIiwgInd4VXNlciIsICJsb2NhdGlvbkNpdHkiLCAidmlwQ2FyZEluZm8iLCAidXBkYXRlRmxhZyJdKQogIH0sCiAgbWV0aG9kczogewogICAgLy8g5oyJ6ZKu6aKG5Y+W44CB5byA6YCa44CB6LSt5Lmw562J5pON5L2c5LqL5Lu2CiAgICBoYW5kbGVyRXZlbnQoKSB7CiAgICAgIGlmICh0aGlzLmJ0bkRpc2FibGVkKSByZXR1cm47IC8vIOaMiemSrue9rueBsOaXtu+8jOaXoOazleeCueWHu+i0reS5sOaMiemSrgoKICAgICAgbGV0IGluZm8gPSB0aGlzLmluZm87CgogICAgICBpZiAoaW5mby5zdXBwbGllckNvZGUgPT0gJ1BBUlRZX1pXWScgJiYgWzMsIDQsIDVdLmluY2x1ZGVzKGluZm8udmFsaWRpdHlUeXBlKSkgewogICAgICAgIC8vIOiHquaIkea4uOeJueWNluaXtiAmJiDpnIDopoHpgInlrprml6XmnJ8gICDlvLnlh7rpgInmi6nml6XljoYKICAgICAgICBpZiAoIXRoaXMuY2FsZW5kYXJNYXNrKSB7CiAgICAgICAgICB0aGlzLmNhbGVuZGFyTWFzayA9IHRydWU7CiAgICAgICAgICByZXR1cm47CiAgICAgICAgfQoKICAgICAgICBpZiAoIXRoaXMuc2VsRGF0ZS5zdGFydFRpbWUpIHsKICAgICAgICAgIC8vIOacqumAieaLqeaXtumXtAogICAgICAgICAgdGhpcy4kVG9hc3QoJ+ivt+mAieaLqea4uOeOqeaXpeacnycpOwogICAgICAgICAgdGhpcy5jYWxlbmRhck1hc2sgPSB0cnVlOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBpZiAoaW5mby52YWxpZGl0eVR5cGUgPT0gNCB8fCBpbmZvLnZhbGlkaXR5VHlwZSA9PSA1KSB7CiAgICAgICAgICAgIC8vIOa4uOWuoumAieWumuaXpeacn+W7tuWQjljmnInmlYggfHwg5ri45a6i6YCJ5a6a5pel5pyf5oyH5a6a5pe26Ze05pyJ5pWICiAgICAgICAgICAgIHRoaXMuJGRpYWxvZy5jb25maXJtKHsKICAgICAgICAgICAgICB0aXRsZTogJ+ehruWumuWHuua4uOaXtumXtD8nLAogICAgICAgICAgICAgIG1lc3NhZ2U6IGAke191dGlscy5kZWZhdWx0LmZvcm1hdFRpbWUodGhpcy5zZWxEYXRlLnN0YXJ0VGltZSB8fCAwLCAnWVlZWS9NTS9ERCcpfSB+ICR7X3V0aWxzLmRlZmF1bHQuZm9ybWF0VGltZSh0aGlzLnNlbERhdGUuZW5kVGltZSB8fCAwLCAnWVlZWS9NTS9ERCcpfWAKICAgICAgICAgICAgfSkudGhlbigoKSA9PiB7CiAgICAgICAgICAgICAgdGhpcy5wbGFjZU9yZGVyKCk7CiAgICAgICAgICAgIH0pLmNhdGNoKCgpID0+IHsvLyBvbiBjYW5jZWwKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICB0aGlzLiRkaWFsb2cuY29uZmlybSh7CiAgICAgICAgICAgICAgdGl0bGU6ICfnoa7lrprlh7rmuLjml7bpl7Q/JywKICAgICAgICAgICAgICBtZXNzYWdlOiBgJHtfdXRpbHMuZGVmYXVsdC5mb3JtYXRUaW1lKHRoaXMuc2VsRGF0ZS5zdGFydFRpbWUgfHwgMCwgJ1lZWVkvTU0vREQnKX1gCiAgICAgICAgICAgIH0pLnRoZW4oKCkgPT4gewogICAgICAgICAgICAgIHRoaXMucGxhY2VPcmRlcigpOwogICAgICAgICAgICB9KS5jYXRjaCgoKSA9PiB7Ly8gb24gY2FuY2VsCiAgICAgICAgICAgIH0pOwogICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICB0aGlzLnBsYWNlT3JkZXIoKTsKICAgIH0sCgogICAgLy8g5LiL5Y2VCiAgICBwbGFjZU9yZGVyKCkgewogICAgICBpZiAodGhpcy5vcHRpb25zLmhhc0V4Y2hhbmdlICE9ICcnKSB7CiAgICAgICAgY29uc29sZS5sb2coJ+inpuWPkeeCueWHu+i0reS5sDEnLCB0aGlzLmluZm8uY2hpbGRFbnVtS2V5LCB0aGlzLmZyZWUsIHRoaXMuaW5mby5jYXJkVHlwZSk7IC8vIOWIpOaWreWFkeWlluS4reW/g+i/m+WFpSAg56uL5Y2z5YWR5o2iCgogICAgICAgIGxldCBjb25kaXRpb25JbmZvID0gdGhpcy5jb25kaXRpb25JbmZvOwogICAgICAgIGxldCB0cmFjdmVsVXNlckxpc3QgPSB0aGlzLnRyYWN2ZWxVc2VyTGlzdDsKCiAgICAgICAgaWYgKGNvbmRpdGlvbkluZm8uaXNDb25kaXRpb24gJiYgdHJhY3ZlbFVzZXJMaXN0Lmxlbmd0aCA9PSAwKSB7CiAgICAgICAgICAvLyDliKTmlq3mmK/lkKbpnIDmsYLloavlhpnkv6Hmga8KICAgICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHsKICAgICAgICAgICAgbmFtZTogJ3RyYXZlbEluZm9ybWF0aW9uJywKICAgICAgICAgICAgcXVlcnk6IHsKICAgICAgICAgICAgICBhY3RTbjogdGhpcy5vcHRpb25zLmFjdFNuCiAgICAgICAgICAgIH0KICAgICAgICAgIH0pOwogICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KCiAgICAgICAgdGhpcy5leGNoYW5nZSgpOwogICAgICB9IGVsc2UgaWYgKHRoaXMuaW5mby5jaGlsZEVudW1LZXkgPT0gJ0FDVF9TUEVDSUFMX09GRkVSX1BVUkNIQVNFX0xJTUlUJykgewogICAgICAgIGNvbnNvbGUubG9nKCfop6blj5Hngrnlh7votK3kubAyJywgdGhpcy5pbmZvLmNoaWxkRW51bUtleSwgdGhpcy5mcmVlLCB0aGlzLmluZm8uY2FyZFR5cGUpOyAvLyDku47pmZDotK3ov5vlhaUKCiAgICAgICAgdGhpcy5oYW5kbGVyTGltaXRFdmVudCgpOwogICAgICB9IGVsc2UgaWYgKHRoaXMuZnJlZSAmJiB0aGlzLmluZm8uY2FyZFR5cGUgIT0gJ0NBUkRfRElSRUNUX1JFQ0hBUkdFJykgewogICAgICAgIGxldCBjb25kaXRpb25JbmZvID0gdGhpcy5jb25kaXRpb25JbmZvOwogICAgICAgIGxldCB0cmFjdmVsVXNlckxpc3QgPSB0aGlzLnRyYWN2ZWxVc2VyTGlzdDsKICAgICAgICBjb25zb2xlLmxvZygn6Kem5Y+R54K55Ye76LSt5LmwMycsIGNvbmRpdGlvbkluZm8uaXNDb25kaXRpb24sIHRoaXMuZnJlZSwgdHJhY3ZlbFVzZXJMaXN0KTsKCiAgICAgICAgaWYgKGNvbmRpdGlvbkluZm8uaXNDb25kaXRpb24gJiYgdHJhY3ZlbFVzZXJMaXN0Lmxlbmd0aCA9PSAwKSB7CiAgICAgICAgICAvLyDliKTmlq3mmK/lkKbpnIDmsYLloavlhpnkv6Hmga8KICAgICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHsKICAgICAgICAgICAgbmFtZTogJ3RyYXZlbEluZm9ybWF0aW9uJywKICAgICAgICAgICAgcXVlcnk6IHsKICAgICAgICAgICAgICBhY3RTbjogdGhpcy5vcHRpb25zLmFjdFNuCiAgICAgICAgICAgIH0KICAgICAgICAgIH0pOwogICAgICAgICAgcmV0dXJuOwogICAgICAgIH0gLy8g5YWN6LS56aKG5Y+WCgoKICAgICAgICB0aGlzLmdldEZyZWUoKTsKICAgICAgfSBlbHNlIGlmICh0aGlzLm9wZW5fcmVjZWl2ZSkgewogICAgICAgIGNvbnNvbGUubG9nKCfop6blj5Hngrnlh7votK3kubA0JywgdGhpcy5pbmZvLmNoaWxkRW51bUtleSwgdGhpcy5mcmVlLCB0aGlzLmluZm8uY2FyZFR5cGUpOwogICAgICAgIHRoaXMub3BlblJlY2VpdmUoKTsKICAgICAgfSBlbHNlIHsKICAgICAgICBjb25zb2xlLmxvZygn6Kem5Y+R54K55Ye76LSt5LmwNScsIHRoaXMuaW5mby5jaGlsZEVudW1LZXksIHRoaXMuZnJlZSwgdGhpcy5pbmZvLmNhcmRUeXBlKTsKICAgICAgICB0aGlzLnRvQnV5KCk7CiAgICAgIH0KICAgIH0sCgogICAgaGFuZGxlckxpbWl0RXZlbnQoKSB7CiAgICAgIGlmICh0aGlzLmluZm8ubGltaXRBY3RTdGF0ZSA9PSAxMikgewogICAgICAgIHRoaXMuJFRvYXN0KCflvZPliY3lkIjovpHpnZ7ov5vooYzkuK3nirbmgIEnKTsKICAgICAgfSBlbHNlIHsKICAgICAgICBpZiAodGhpcy5idG5UZXh0ID09ICfnq4vljbPmiqLotK0nKSB7CiAgICAgICAgICB0aGlzLnRvQnV5KCk7CiAgICAgICAgfQogICAgICB9CiAgICB9LAoKICAgIC8vIOWFkeaNogogICAgZXhjaGFuZ2UoKSB7CiAgICAgIGxldCBpdGVtID0gdGhpcy5leGNoYW5nZV9kYXRhOwogICAgICB0aGlzLiRkaWFsb2cuY29uZmlybSh7CiAgICAgICAgdGl0bGU6IGDmmK/lkKbnoa7orqTlhZHmjaIke2l0ZW0uYWN0TmFtZSB8fCAnJ30/YCwKICAgICAgICBtZXNzYWdlOiAn5YWR5o2i5ZCO5LiN5Y+v5pu05pS55LiU5Y6f5pyJ5r2u5Y2h5bCG5Lya5riF56m6JwogICAgICB9KS50aGVuKCgpID0+IHsKICAgICAgICB0aGlzLnByaWNlRXhjaGFuZ2UoaXRlbSk7CiAgICAgIH0pLmNhdGNoKCgpID0+IHsvLyBvbiBjYW5jZWwKICAgICAgfSk7CiAgICB9LAoKICAgIC8vIOW8gOWni+WFkeaNogogICAgcHJpY2VFeGNoYW5nZShpdGVtKSB7CiAgICAgIGlmICh0aGlzLmlzQ2FuQ2xpY2spIHJldHVybjsKICAgICAgdGhpcy5pc0NhbkNsaWNrID0gdHJ1ZTsKICAgICAgdGhpcy4kYXBpLnByaWNlX2V4Y2hhbmdlKHsKICAgICAgICBhY3RTbjogaXRlbS5hY3RTbiwKICAgICAgICBhd2FyZElkOiBpdGVtLmF3YXJkSWQsCiAgICAgICAgY2l0eUlkOiB0aGlzLmxvY2F0aW9uQ2l0eS5jaXR5SWQsCiAgICAgICAgY2hvb3NlRGF0ZTogdGhpcy5zZWxEYXRlLnN0YXJ0VGltZSA/IF91dGlscy5kZWZhdWx0LmZvcm1hdFRpbWUodGhpcy5zZWxEYXRlLnN0YXJ0VGltZSB8fCAwLCAnWVlZWU1NREQnKSA6IDAsCiAgICAgICAgLy8g6Ieq5oiR5ri46YCJ5oup5pe26Ze0CiAgICAgICAgdHJhY3ZlbFVzZXJMaXN0OiBKU09OLnN0cmluZ2lmeSh0aGlzLnRyYWN2ZWxVc2VyTGlzdCkKICAgICAgfSkudGhlbihyZXMgPT4gewogICAgICAgIGlmIChyZXMuc3RhdGUpIHsKICAgICAgICAgIHRoaXMubWFzayA9IHRydWU7CiAgICAgICAgICB0aGlzLnRyYWN2ZWxVc2VyTGlzdCA9IFtdOwogICAgICAgICAgdGhpcy4kc2F2ZS5yZW1vdmUoJ3Nlc3Npb24nLCAndHJhdmVsSW5mb3JtYXRpb24nKTsKICAgICAgICAgIHRoaXMuaGFuZGxlckJ0bign5bey5YWR5o2iJywgdHJ1ZSk7IC8vIOa4hemZpOeUqOaIt+Whq+WGmeS/oeaBrwoKICAgICAgICAgIHRoaXMuJHNhdmUucmVtb3ZlKCdzZXNzaW9uJywgJ3RyYXZlbEluZm9ybWF0aW9uJyk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHRoaXMuJFRvYXN0KHJlcy5tZXNzYWdlKTsKICAgICAgICB9CiAgICAgIH0pLmZpbmFsbHkoKCkgPT4gewogICAgICAgIHNldFRpbWVvdXQoKCkgPT4gewogICAgICAgICAgdGhpcy5pc0NhbkNsaWNrID0gZmFsc2U7CiAgICAgICAgfSwgMzAwKTsKICAgICAgfSk7CiAgICB9LAoKICAgIGdvQ2FyZCgpIHsKICAgICAgdGhpcy4kcm91dGVyLnB1c2goewogICAgICAgIG5hbWU6ICdjb3Vwb25MaXN0JwogICAgICB9KTsKICAgIH0sCgogICAgY2xvc2UoKSB7CiAgICAgIHRoaXMubWFzayA9IGZhbHNlOwogICAgfSwKCiAgICAvLyDpnZ7kvJrlkZjlvIDpgJrlubbpooblj5YKICAgIG9wZW5SZWNlaXZlKCkgewogICAgICB0aGlzLiRzZXQodGhpcy5pbmZvLCAnc2VsbFByaWNlJywgMCk7CiAgICAgIHRoaXMuJHNldCh0aGlzLmluZm8sICdub1ZpcFByaWNlJywgMCk7CiAgICAgIGxldCByZWNlaXZlVHlwZSA9IHRoaXMub3B0aW9ucy5jaGFubmVsVHlwZSA9PSAnQ0hBTk5FTF9BQ1RJVklUWV9MQUJFTF9TSE9XJyA/IDQgOiAxOwogICAgICBsZXQgaW5mbyA9IHRoaXMuaW5mbzsKICAgICAgaW5mby5zZWxEYXRlID0gdGhpcy5zZWxEYXRlOwogICAgICBpbmZvLmRlc2NyaWJlID0gJyc7CiAgICAgIHRoaXMuJHNhdmUuc2V0KCdzZXNzaW9uJywgJ29yZGVySW5mbycsIHRoaXMuaW5mbyk7IC8vIOmdnuS8muWRmOW8gOmAmuW5tumihuWPlgoKICAgICAgdGhpcy4kcm91dGVyLnB1c2goewogICAgICAgIG5hbWU6ICdzdWJtaXRPcmRlcicsCiAgICAgICAgcXVlcnk6IHsKICAgICAgICAgIGNvbXBJZDogdGhpcy5vcHRpb25zLmNvbXBJZCB8fCAnJywKICAgICAgICAgIGFjdFNuOiB0aGlzLm9wdGlvbnMuYWN0U24sCiAgICAgICAgICBjaGFubmVsVHlwZTogdGhpcy5vcHRpb25zLmNoYW5uZWxUeXBlLAogICAgICAgICAgcmVjZWl2ZVR5cGU6IHJlY2VpdmVUeXBlCiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCgogICAgLy8g5ZSu5Lu35Li6MOaXtu+8jOWFjei0uemihgogICAgZ2V0RnJlZSgpIHsKICAgICAgbGV0IGFjdERlYWwgPSBfcGF5LmRlZmF1bHQuYWN0RGVhbCh7CiAgICAgICAgY2l0eUlkOiB0aGlzLmxvY2F0aW9uQ2l0eS5jaXR5SWQsCiAgICAgICAgYWN0U246IHRoaXMub3B0aW9ucy5hY3RTbiwKICAgICAgICBkZWFsTnVtOiAxLAogICAgICAgIGNoYW5uZWxUeXBlOiB0aGlzLm9wdGlvbnMuY2hhbm5lbFR5cGUsCiAgICAgICAgcXJDb2RlOiB0aGlzLm9wdGlvbnMucXJDb2RlIHx8ICcnLAogICAgICAgIHJlYWxGZWU6IDAsCiAgICAgICAgcmVjZWl2ZVR5cGU6IHRoaXMub3B0aW9ucy5jaGFubmVsVHlwZSA9PSAnQ0hBTk5FTF9BQ1RJVklUWV9MQUJFTF9TSE9XJyA/IDQgOiAxLAogICAgICAgIC8vIOiOt+WPluaWueW8j++8jDHkvJrlkZjpooblj5bvvIwy5Lya5ZGY6LSt5Lmw77yMM+a4oOmBk+i0reS5sCB2MS4yLjDmlLnkuLoxCiAgICAgICAgb3BlblZpcDogZmFsc2UsCiAgICAgICAgLy/mmK/lkKblvIDpgJrmnIjljaHkvJrlkZjlubbotK3kubAKICAgICAgICBhY3RGZWU6IDAsCiAgICAgICAgLy/mtLvliqjmlK/ku5jotLnnlKgKICAgICAgICB2aXBGZWU6IDAsCiAgICAgICAgdmlwQ2FyZElkOiAnJywKICAgICAgICBidXlUeXBlOiAwLAogICAgICAgIGNvbXBJZDogdGhpcy5vcHRpb25zLmNvbXBJZCwKICAgICAgICAvLyDlkIjovpFJZAogICAgICAgIGNob29zZURhdGU6IHRoaXMuc2VsRGF0ZS5zdGFydFRpbWUgPyBfdXRpbHMuZGVmYXVsdC5mb3JtYXRUaW1lKHRoaXMuc2VsRGF0ZS5zdGFydFRpbWUgfHwgMCwgJ1lZWVlNTUREJykgOiAwLAogICAgICAgIC8vIOiHquaIkea4uOmAieaLqeaXtumXtAogICAgICAgIHRyYWN2ZWxVc2VyTGlzdDogSlNPTi5zdHJpbmdpZnkodGhpcy50cmFjdmVsVXNlckxpc3QpCiAgICAgIH0pOwoKICAgICAgaWYgKGFjdERlYWwpIHsKICAgICAgICBhY3REZWFsLnRoZW4ocmVzID0+IHsKICAgICAgICAgIGlmIChyZXMuc3RhdGUpIHsKICAgICAgICAgICAgdGhpcy50cmFjdmVsVXNlckxpc3QgPSBbXTsKICAgICAgICAgICAgdGhpcy4kc2F2ZS5yZW1vdmUoJ3Nlc3Npb24nLCAndHJhdmVsSW5mb3JtYXRpb24nKTsKICAgICAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goewogICAgICAgICAgICAgIG5hbWU6ICdzcGVjaWFsU2FsZVN1Y2Nlc3MnLAogICAgICAgICAgICAgIHF1ZXJ5OiB7CiAgICAgICAgICAgICAgICB0cmFkZUlkOiByZXMuaW5mby50cmFkZUlkLAogICAgICAgICAgICAgICAgYWN0TmFtZTogdGhpcy5pbmZvLmFjdE5hbWUsCiAgICAgICAgICAgICAgICByZWNlaXZlOiAxLAogICAgICAgICAgICAgICAgYWN0U246IHRoaXMub3B0aW9ucy5hY3RTbiwKICAgICAgICAgICAgICAgIHZpcF9jaGVjazogMAogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0sCgogICAgdG9CdXkoKSB7CiAgICAgIGlmICh0aGlzLmlzQ2FuQ2xpY2spIHJldHVybjsKICAgICAgdGhpcy5pc0NhbkNsaWNrID0gdHJ1ZTsKICAgICAgbGV0IGluZm8gPSB0aGlzLmluZm87CiAgICAgIGluZm8uc2VsRGF0ZSA9IHRoaXMuc2VsRGF0ZTsKICAgICAgaW5mby5kZXNjcmliZSA9ICcnOwogICAgICB0aGlzLiRzYXZlLnNldCgnc2Vzc2lvbicsICdvcmRlckluZm8nLCB0aGlzLmluZm8pOyAvLyDliKTmlq3mmK/lkKbmnInmnKrmlK/ku5jnmoTorqLljZUKCiAgICAgIHRoaXMuJGFwaS5vcmRlcl91bnBheSh7CiAgICAgICAgYWN0U246IHRoaXMub3B0aW9ucy5hY3RTbgogICAgICB9KS50aGVuKHJlcyA9PiB7CiAgICAgICAgaWYgKHJlcy5zdGF0ZSkgewogICAgICAgICAgaWYgKHJlcy5pbmZvLmV4aXN0c1VuUGF5KSB7CiAgICAgICAgICAgIC8vIOWmguaenOWtmOWcqOacquaUr+S7mOeahOiuouWNle+8jOi3s+i9rOWIsOiuouWNleWIl+ihqOmhtQogICAgICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCh7CiAgICAgICAgICAgICAgbmFtZTogJ29yZGVyTGlzdCcKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBsZXQgcmVjZWl2ZVR5cGUgPSB0aGlzLm9wdGlvbnMuY2hhbm5lbFR5cGUgPT0gJ0NIQU5ORUxfQUNUSVZJVFlfTEFCRUxfU0hPVycgPyAzIDogMjsKICAgICAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goewogICAgICAgICAgICAgIG5hbWU6ICdzdWJtaXRPcmRlcicsCiAgICAgICAgICAgICAgcXVlcnk6IHsKICAgICAgICAgICAgICAgIHFyQ29kZTogdGhpcy5vcHRpb25zLnFyQ29kZSB8fCAnJywKICAgICAgICAgICAgICAgIGNvbXBJZDogdGhpcy5vcHRpb25zLmNvbXBJZCB8fCAnJywKICAgICAgICAgICAgICAgIGFjdFNuOiB0aGlzLm9wdGlvbnMuYWN0U24sCiAgICAgICAgICAgICAgICBjaGFubmVsVHlwZTogdGhpcy5vcHRpb25zLmNoYW5uZWxUeXBlLAogICAgICAgICAgICAgICAgcmVjZWl2ZVR5cGU6IHJlY2VpdmVUeXBlCiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0pLmZpbmFsbHkoKCkgPT4gewogICAgICAgIHRoaXMuaXNDYW5DbGljayA9IGZhbHNlOwogICAgICB9KTsKICAgIH0sCgogICAgLy8g5Yik5pat55So5oi36LSt5Lmw5L+h5oGvCiAgICBnZXRSZWFsVGltZUluZm8obGltaXRGcmVxdWVuY3kpIHsKICAgICAgcmV0dXJuIHRoaXMuJGFwaS5yZWFsVGltZV9pbmZvKHsKICAgICAgICBhY3RTbjogdGhpcy5vcHRpb25zLmFjdFNuCiAgICAgIH0pLnRoZW4ocmVzID0+IHsKICAgICAgICBpZiAocmVzLnN0YXRlKSB7CiAgICAgICAgICB0aGlzLnJlYWxJbmZvID0gcmVzLmluZm87CiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCgogICAgaGFuZGxlckJ0bih0ZXh0LCBkaXNhYmxlZCA9IGZhbHNlKSB7CiAgICAgIHRoaXMuYnRuVGV4dCA9IHRleHQ7CiAgICAgIHRoaXMuYnRuRGlzYWJsZWQgPSBkaXNhYmxlZDsKICAgIH0sCgogICAgaGFuZGxlckxpbWl0KGluZm8yLCBmbGFnKSB7CiAgICAgIC8vIDHmnKrlvIDlp4sgMui/m+ihjOS4rSAz5bey57uT5p2fCiAgICAgIGxldCBjdXJyZW50VGltZSA9ICtuZXcgRGF0ZSgpOwoKICAgICAgaWYgKGluZm8yLmxpbWl0RW5kVGltZSA8IGN1cnJlbnRUaW1lICYmIGluZm8yLmxpbWl0U3RhcnRUaW1lIDwgY3VycmVudFRpbWUpIHsKICAgICAgICBpbmZvMi50aW1lU3RhdGUgPSAzOwogICAgICB9IGVsc2UgaWYgKGluZm8yLmxpbWl0RW5kVGltZSA+IGN1cnJlbnRUaW1lICYmIGluZm8yLmxpbWl0U3RhcnRUaW1lIDwgY3VycmVudFRpbWUpIHsKICAgICAgICBpbmZvMi50aW1lU3RhdGUgPSAyOwogICAgICB9IGVsc2UgaWYgKGluZm8yLmxpbWl0U3RhcnRUaW1lID4gY3VycmVudFRpbWUpIHsKICAgICAgICBpbmZvMi50aW1lU3RhdGUgPSAxOwogICAgICAgIGxldCBoZWFkbGluZSA9IGdldERheU5hbWUoaW5mbzIubGltaXRTdGFydFRpbWUpOwogICAgICAgIHRoaXMuaGVhZGxpbmUgPSBoZWFkbGluZTsKICAgICAgfQoKICAgICAgaWYgKGluZm8yLnRpbWVTdGF0ZSAhPSAzKSB7CiAgICAgICAgY2xlYXJJbnRlcnZhbCh0aGlzLmxpbWl0VGltZXIpOwogICAgICAgIHRoaXMubGltaXRUaW1lciA9IHNldEludGVydmFsKCgpID0+IHsKICAgICAgICAgIGxldCBub3dUaW1lID0gK25ldyBEYXRlKCk7CiAgICAgICAgICB2YXIgY3V0VGltZSA9IDA7CgogICAgICAgICAgaWYgKGluZm8yLnRpbWVTdGF0ZSA9PSAxKSB7CiAgICAgICAgICAgIGN1dFRpbWUgPSBpbmZvMi5saW1pdFN0YXJ0VGltZSAtIG5vd1RpbWU7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBjdXRUaW1lID0gaW5mbzIubGltaXRFbmRUaW1lIC0gbm93VGltZTsKICAgICAgICAgIH0KCiAgICAgICAgICBsZXQgbGFzdFRpbWUgPSBfdXRpbHMuZGVmYXVsdC5jb3VudERvd24zKGN1dFRpbWUpOwoKICAgICAgICAgIHRoaXMuZG93blRpbWUgPSBsYXN0VGltZTsKCiAgICAgICAgICBpZiAoY3V0VGltZSA8PSAwICYmIGluZm8yLmxpbWl0QWN0U3RhdGUgIT0gMTIpIHsKICAgICAgICAgICAgY2xlYXJJbnRlcnZhbCh0aGlzLmxpbWl0VGltZXIpOwogICAgICAgICAgICB0aGlzLmdldEFjdERldGFpbCgpOwogICAgICAgICAgfQogICAgICAgIH0sIDEwMDApOwogICAgICAgIGNvbnNvbGUubG9nKHRoaXMuZG93blRpbWUsICd0aGlzLmRvd25UaW1lJyk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5kb3duVGltZSA9IHsKICAgICAgICAgIGhvdXI6ICcwMCcsCiAgICAgICAgICBtaW51dGU6ICcwMCcsCiAgICAgICAgICBzZWNvbmQ6ICcwMCcKICAgICAgICB9OwogICAgICB9CgogICAgICBpZiAoZmxhZykgewogICAgICAgIGNvbnNvbGUubG9nKCdmbGFnJywgaW5mbzIsICc9PT09PT09PT09PT09PScpOyAvLyDlt7LmiqLlrozmtLvliqjlvLnnqpcKCiAgICAgICAgaWYgKGluZm8yLmxpbWl0QWN0U3RhdGUgPT0gMyB8fCBpbmZvMi5saW1pdEFjdFN0YXRlID09IDIgfHwgIXRoaXMuaW5mby5yZW1haW5OdW0pIHsKICAgICAgICAgIHRoaXMuZ2V0RW5kQWN0aXZlKCk7CiAgICAgICAgfQogICAgICB9CiAgICB9LAoKICAgIC8vIOiOt+WPlua0u+WKqOivpuaDhQogICAgYXN5bmMgZ2V0QWN0RGV0YWlsKGZsYWcpIHsKICAgICAgdGhpcy4kVG9hc3QubG9hZGluZyh7CiAgICAgICAgbWVzc2FnZTogJ+WKoOi9veS4rS4uLicsCiAgICAgICAgZm9yYmlkQ2xpY2s6IHRydWUsCiAgICAgICAgZHVyYXRpb246IDAKICAgICAgfSk7CiAgICAgIGF3YWl0IHRoaXMuZ2V0U3BlY2lhbEluZm8oKTsgLy8g5aaC5p6c5piv54m55Y2W5rS75Yqo6K+m5oOF77yMY2FyZElk77yMZGV0YWlsSWTku47nibnljZbor6bmg4Xph4zpnaLojrflj5YKCiAgICAgIGF3YWl0IHRoaXMuZ2V0Q291cERldGFpbCgpOyAvLyDojrflj5bljaHliLjor6bmg4UKCiAgICAgIGF3YWl0IHRoaXMuZ2V0UmVhbFRpbWVJbmZvKCk7CiAgICAgIHRoaXMuZ2V0U3VpdFNob3BzKCk7IC8vIOiOt+WPlumAgueUqOW6l+mTugoKICAgICAgdGhpcy4kYXBpLmFjdF9kZXRhaWwoewogICAgICAgIGNoYW5uZWxUeXBlOiB0aGlzLm9wdGlvbnMuY2hhbm5lbFR5cGUsCiAgICAgICAgcXJDb2RlOiB0aGlzLm9wdGlvbnMucXJDb2RlIHx8ICcnLAogICAgICAgIGFjdFNuOiB0aGlzLm9wdGlvbnMuYWN0U24KICAgICAgfSkudGhlbihhc3luYyByZXMgPT4gewogICAgICAgIGlmIChyZXMuc3RhdGUpIHsKICAgICAgICAgIGxldCBpbmZvMSA9IHRoaXMuaW5mbzsKICAgICAgICAgIGxldCBpbmZvMiA9IHJlcy5pbmZvOwogICAgICAgICAgbGV0IGNvbnRhdGlvbiA9IGluZm8yLmJ1eUxpbWl0ID09IDEgJiYgIWluZm8yLnNlbGxQcmljZSAmJiAhaW5mbzIubm9WaXBQcmljZSB8fCBpbmZvMi5idXlMaW1pdCA9PSAyICYmICFpbmZvMi5zZWxsUHJpY2U7IC8vIOWIpOaWreW3sumihuWPlueahOeKtuaAgQogICAgICAgICAgLy8g5aSE55CG6ZmQ5pe255qE5YCS6K6h5pe2562J6Zeu6aKYIAoKICAgICAgICAgIGlmIChpbmZvMi5jaGlsZEVudW1LZXkgPT0gJ0FDVF9TUEVDSUFMX09GRkVSX1BVUkNIQVNFX0xJTUlUJykgewogICAgICAgICAgICB0aGlzLmhhbmRsZXJMaW1pdChpbmZvMiwgZmxhZyk7CiAgICAgICAgICB9CgogICAgICAgICAgaW5mbzEuY2hhbm5lbFR5cGUgPSB0aGlzLm9wdGlvbnMuY2hhbm5lbFR5cGUgfHwgJyc7CiAgICAgICAgICBsZXQgaW5mbyA9IHsgLi4uaW5mbzEsCiAgICAgICAgICAgIC4uLmluZm8yCiAgICAgICAgICB9OwogICAgICAgICAgdGhpcy5pbmZvID0gaW5mbzsKICAgICAgICAgIHRoaXMucmVtYWluVGltZSA9IGluZm8yLnJlbWFpblRpbWU7CiAgICAgICAgICB0aGlzLnJlYWR5ID0gdHJ1ZTsKICAgICAgICAgIGNvbnNvbGUubG9nKHRoaXMuaW5mbywgJ2luZm8xaW5mbzFpbmZvMWluZm8xaW5mbzEnKTsgLy8g6Ieq5oiR5ri454m55Y2W5pe26ZyA6LCD55So5pel5Y6G5o6l5Y+jICjljaHliLjmnInmlYjmnJ/nsbvlnovkuLogMyw0LDUpCgogICAgICAgICAgaWYgKHRoaXMuaW5mby5zdXBwbGllckNvZGUgPT0gJ1BBUlRZX1pXWScpIHsKICAgICAgICAgICAgLy8g6Ieq5oiR5ri45pi+56S65Lya5ZGY5Lu377yI6YCJ5oup5pel5pyf5ZCO6L+Z6YeM55qE5Lu35qC85LiN5Y+Y77yJCiAgICAgICAgICAgIHRoaXMuJHNldCh0aGlzLmluZm8sICd0cmF2ZWxQcmljZScsIGluZm8yLnNlbGxQcmljZSk7CgogICAgICAgICAgICBpZiAodGhpcy5zZWxEYXRlLnNlbGxQcmljZSB8fCB0aGlzLnNlbERhdGUuc2VsbFByaWNlID09IDApIHsKICAgICAgICAgICAgICAvLyDliKTmlq3lt7LpgInmi6nnmoTku7fmoLwKICAgICAgICAgICAgICB0aGlzLiRzZXQodGhpcy5pbmZvLCAnc2VsbFByaWNlJywgdGhpcy5zZWxEYXRlLnNlbGxQcmljZSk7CiAgICAgICAgICAgICAgdGhpcy4kc2V0KHRoaXMuaW5mbywgJ25vVmlwUHJpY2UnLCB0aGlzLnNlbERhdGUubm9WaXBQcmljZSk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGlmIChbMywgNCwgNV0uaW5jbHVkZXMoaW5mbzEudmFsaWRpdHlUeXBlKSkgey8vIOWIpOaWremAieWumuaXpeacn++8jOaYvuekuuaXpeWOhgogICAgICAgICAgICAgIC8vIHRoaXMudHJhdmVsQWN0TW9udGgoKQogICAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMuaW5mby5saW1pdFRpbWUgPiAwKSB7CiAgICAgICAgICAgICAgLy8g5Yik5pat5b2T5YmN5pe26Ze05piv5ZCm5Y+v6LSt5LmwIAogICAgICAgICAgICAgIGxldCBsaW1pdFRpbWUgPSB0aGlzLmluZm8ubGltaXRUaW1lOwogICAgICAgICAgICAgIGxldCBkYXRlID0gbmV3IERhdGUoKTsKICAgICAgICAgICAgICBsZXQgaCA9IGRhdGUuZ2V0SG91cnMoKSA+IDkgPyBkYXRlLmdldEhvdXJzKCkgKyAnJyA6ICcwJyArIGRhdGUuZ2V0SG91cnMoKTsKICAgICAgICAgICAgICB2YXIgbSA9IGRhdGUuZ2V0TWludXRlcygpID4gOSA/IGRhdGUuZ2V0TWludXRlcygpICsgJycgOiAnMCcgKyBkYXRlLmdldE1pbnV0ZXMoKTsKICAgICAgICAgICAgICBsZXQgZGF5VGltZSA9IGggKyBtOwoKICAgICAgICAgICAgICBpZiAoZGF5VGltZSA+IGxpbWl0VGltZSkgewogICAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7CiAgICAgICAgICAgICAgICAgIHRoaXMuaGFuZGxlckJ0bign5b2T5YmN5LiN5Y+v6LSt5LmwJywgdHJ1ZSk7CiAgICAgICAgICAgICAgICB9LCA1MDApOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgfQoKICAgICAgICAgIHRoaXMuaGFuZGxlckJ0bih0aGlzLmluZm8uY2FyZFR5cGUgPT09ICdDQVJEX0RJUkVDVF9SRUNIQVJHRScgPyAn56uL5Y2z5YWF5YC8JyA6ICfnq4vljbPotK3kubAnKTsgLy8g5LuF6ZmQ5Lya5ZGY6LSt5Lmw77yM6Z2e5Lya5ZGY5pi+56S6CgogICAgICAgICAgaWYgKGluZm8yLmJ1eUxpbWl0ID09IDIgJiYgIXRoaXMudmlwVXNlcikgewogICAgICAgICAgICB0aGlzLmhhbmRsZXJCdG4oJ+W8gOmAmuW5tui0reS5sCcpOwogICAgICAgICAgfSAvLyDku4XpmZDkvJrlkZjotK3kubDkuJTkvJrlkZjllK7ku7fkuLow77yM6Z2e5Lya5ZGY6KeG6KeSCgoKICAgICAgICAgIGlmIChpbmZvMi5idXlMaW1pdCA9PSAyICYmICFpbmZvMi5zZWxsUHJpY2UgJiYgIXRoaXMudmlwVXNlcikgewogICAgICAgICAgICB0aGlzLmhhbmRsZXJCdG4oJ+W8gOmAmuW5tumihuWPlicpOwogICAgICAgICAgICB0aGlzLm9wZW5fcmVjZWl2ZSA9IHRydWU7IC8vIOagh+W/l+aYr+W8gOmAmuW5tumihuWPluaMiemSrgogICAgICAgICAgfQoKICAgICAgICAgIGlmICh0aGlzLmluZm8ucmVtYWluTnVtID4gMCB8fCB0aGlzLmluZm8uY2FyZFR5cGUgPT09ICdDQVJEX0RJUkVDVF9SRUNIQVJHRScpIHsKICAgICAgICAgICAgaWYgKHRoaXMuaW5mby5jaGFubmVsVHlwZSA9PSAnQ0hBTk5FTF9DT05TVU1FUl9DT1VQT04nIHx8IHRoaXMuaW5mby5jaGFubmVsVHlwZSA9PSAnQ0hBTk5FTF9GT1JUVU5FX0NPVVBPTicpIHsKICAgICAgICAgICAgICAvLyDmtojotLnliLjmuKDpgZPml7bvvIzliKTmlq3ljp/ku7cKICAgICAgICAgICAgICBpZiAoaW5mbzIud29ydGggPT0gMCkgewogICAgICAgICAgICAgICAgdGhpcy5oYW5kbGVyQnRuKCfnq4vljbPpooblj5YnKTsKICAgICAgICAgICAgICAgIHRoaXMuZnJlZSA9IHRydWU7IC8v5Y+v5Lul5YWN6LS56aKG5Y+WCiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIGlmICghaW5mbzIuc2VsbFByaWNlICYmIHRoaXMudmlwVXNlciB8fCBpbmZvMi5idXlMaW1pdCA9PSAxICYmICFpbmZvMi5zZWxsUHJpY2UgJiYgIWluZm8yLm5vVmlwUHJpY2UpIHsKICAgICAgICAgICAgICAgIHRoaXMuaGFuZGxlckJ0bign56uL5Y2z6aKG5Y+WJyk7CiAgICAgICAgICAgICAgICB0aGlzLmZyZWUgPSB0cnVlOyAvL+WPr+S7peWFjei0uemihuWPlgogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgLy8g5bqT5a2Y5Li6MOaXtgogICAgICAgICAgICBpZiAoY29udGF0aW9uKSB7CiAgICAgICAgICAgICAgdGhpcy5oYW5kbGVyQnRuKCflt7LpooblrownLCB0cnVlKTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICB0aGlzLmhhbmRsZXJCdG4oJ+W3suWUrue9hCcsIHRydWUpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CgogICAgICAgICAgaWYgKGluZm8yLmFjdFN0YXRlID09IDMgfHwgaW5mbzIuYWN0U3RhdGUgPT0gNCB8fCBpbmZvMi5hY3RTdGF0ZSA9PSA1KSB7CiAgICAgICAgICAgIC8v5ZSu5Lu36YO95Li6MAogICAgICAgICAgICBpZiAoY29udGF0aW9uKSB7CiAgICAgICAgICAgICAgdGhpcy5oYW5kbGVyQnRuKCflt7LpooblrownLCB0cnVlKTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICB0aGlzLmhhbmRsZXJCdG4oJ+W3suWUrue9hCcsIHRydWUpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CgogICAgICAgICAgaWYgKGluZm8yLmFjdFN0YXRlID09IDEpIHsKICAgICAgICAgICAgdGhpcy5oYW5kbGVyQnRuKCfmtLvliqjmnKrlvIDlp4snLCB0cnVlKTsKICAgICAgICAgIH0gZWxzZSBpZiAoaW5mbzIuYWN0U3RhdGUgPT0gMjApIHsKICAgICAgICAgICAgLy8g6Ieq5oiR5ri45Y2h5Yi45b2T5YmN5pe26Ze05LiN5Y+v6LSt5LmwCiAgICAgICAgICAgIHRoaXMuaGFuZGxlckJ0bign5b2T5YmN5LiN5Y+v6LSt5LmwJywgdHJ1ZSk7CiAgICAgICAgICB9CgogICAgICAgICAgbGV0IHRvdGFsTnVtID0gTnVtYmVyKHRoaXMucmVhbEluZm8udXNlckJ1eU51bSkgKyBOdW1iZXIodGhpcy5yZWFsSW5mby51c2VyRnJlZVJlY2VpdmVOdW0pOyAvLyDlvZPliY3nlKjmiLfnmoTotK3kubDmlbDph4/lkozpooblj5bmlbDph4/mgLvlkowKICAgICAgICAgIC8vIOaYr+WQpumZkOWItui0reS5sAoKICAgICAgICAgIGlmIChpbmZvMi5saW1pdFN0YXRlKSB7CiAgICAgICAgICAgIGlmICh0b3RhbE51bSA+PSBpbmZvMi5saW1pdEZyZXF1ZW5jeSkgewogICAgICAgICAgICAgIC8vIOeUqOaIt+aAu+aIkOWKn+i0reS5sOaVsOmHj+Wkp+S6jumZkOWItui0reS5sOaVsOmHjwogICAgICAgICAgICAgIHRoaXMuaGFuZGxlckJ0bign5bey6LSt5LmwJywgdHJ1ZSk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGlmICh0b3RhbE51bSA+PSBpbmZvMi5saW1pdEZyZXF1ZW5jeSAmJiBjb250YXRpb24pIHsKICAgICAgICAgICAgICAvLyDlvZPliY3nlKjmiLflvZPliY3mtLvliqjkuK3mgLvlhY3otLnpooblj5bmlbDph4/lpKfkuo7pmZDliLbpooblj5bmlbDph48KICAgICAgICAgICAgICB0aGlzLmhhbmRsZXJCdG4oJ+W3sumihuWPlicsIHRydWUpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CgogICAgICAgICAgdGhpcy5zaG93QnRuVHh0ID0gdHJ1ZTsgLy8gLi4uLi4uLi4uLi4uLi4uLi7kvJjljJbmlrDlop4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uCiAgICAgICAgICAvLyDliKTmlq3ku47pmZDotK3ov5vlhaUKCiAgICAgICAgICBpZiAoaW5mbzIuY2hpbGRFbnVtS2V5ID09ICdBQ1RfU1BFQ0lBTF9PRkZFUl9QVVJDSEFTRV9MSU1JVCcpIHsKICAgICAgICAgICAgaWYgKCF0aGlzLmluZm8ucmVtYWluTnVtKSB7CiAgICAgICAgICAgICAgdGhpcy5oYW5kbGVyQnRuKCflt7LmiqLlrownLCB0cnVlKTsKICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGlmIChyZXMuaW5mby5hY3RTdGF0ZSA9PSAxMSB8fCByZXMuaW5mby5hY3RTdGF0ZSA9PSAzKSB7CiAgICAgICAgICAgICAgdGhpcy5oYW5kbGVyQnRuKCflt7LmiqLlrownLCB0cnVlKTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAvLyBpZiAocmVzLmluZm8ubGltaXRBY3RTdGF0ZSA9PSA4KSB7CiAgICAgICAgICAgICAgLy8gICB0aGlzLmhhbmRsZXJCdG4oJ+mihOe6puaPkOmGkicsIGZhbHNlKQogICAgICAgICAgICAgIC8vIH0gZWxzZSBpZiAocmVzLmluZm8ubGltaXRBY3RTdGF0ZSA9PSA5KSB7CiAgICAgICAgICAgICAgLy8gICB0aGlzLmhhbmRsZXJCdG4oJ+W3sumihOe6picsIGZhbHNlKQogICAgICAgICAgICAgIC8vIH0gCiAgICAgICAgICAgICAgaWYgKHJlcy5pbmZvLmxpbWl0QWN0U3RhdGUgPT0gOCB8fCByZXMuaW5mby5saW1pdEFjdFN0YXRlID09IDkpIHsKICAgICAgICAgICAgICAgIHRoaXMuaGFuZGxlckJ0bign5pyq5byA5aeLJywgdHJ1ZSk7CiAgICAgICAgICAgICAgfSBlbHNlIGlmIChyZXMuaW5mby5saW1pdEFjdFN0YXRlID09IDEpIHsKICAgICAgICAgICAgICAgIHRoaXMuaGFuZGxlckJ0bign56uL5Y2z5oqi6LStJywgZmFsc2UpOwogICAgICAgICAgICAgIH0gZWxzZSBpZiAocmVzLmluZm8ubGltaXRBY3RTdGF0ZSA9PSAxMCkgewogICAgICAgICAgICAgICAgdGhpcy5oYW5kbGVyQnRuKCflt7LotK3kubAnLCB0cnVlKTsKICAgICAgICAgICAgICB9IGVsc2UgaWYgKHJlcy5pbmZvLmxpbWl0QWN0U3RhdGUgPT0gMykgewogICAgICAgICAgICAgICAgdGhpcy5oYW5kbGVyQnRuKCflt7LmiqLlrownLCB0cnVlKTsKICAgICAgICAgICAgICB9IGVsc2UgaWYgKHJlcy5pbmZvLmxpbWl0QWN0U3RhdGUgPT0gMikgewogICAgICAgICAgICAgICAgdGhpcy5oYW5kbGVyQnRuKCflt7LmiqLlrownLCB0cnVlKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgIH0gLy8g5Yik5pat5Li65YWR5o2i5Lit5b+D6L+b5YWlCgoKICAgICAgICAgIGlmICh0aGlzLm9wdGlvbnMuaGFzRXhjaGFuZ2UgIT0gJycpIHsKICAgICAgICAgICAgbGV0IGV4Y2hhbmdlX2RhdGEgPSB0aGlzLmV4Y2hhbmdlX2RhdGE7IC8vIOWFkeaNouS4reW/g+a0u+WKqOaVsOaNrgoKICAgICAgICAgICAgaWYgKGV4Y2hhbmdlX2RhdGEuaGFzRXhjaGFuZ2UpIHsKICAgICAgICAgICAgICB0aGlzLmhhbmRsZXJCdG4oJ+W3suWFkeaNoicsIHRydWUpOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIGlmIChleGNoYW5nZV9kYXRhLnJlbWFpbk51bSA+IDApIHsKICAgICAgICAgICAgICAgIGlmIChleGNoYW5nZV9kYXRhLnN0YXRlICE9IDIpIHsKICAgICAgICAgICAgICAgICAgdGhpcy5oYW5kbGVyQnRuKCflt7Lnu5PmnZ8nLCB0cnVlKTsKICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgIGlmIChleGNoYW5nZV9kYXRhLmNvbmRpdGlvbikgewogICAgICAgICAgICAgICAgICAgIHRoaXMuaGFuZGxlckJ0bign56uL5Y2z5YWR5o2iJywgZmFsc2UpOwogICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgIHRoaXMuaGFuZGxlckJ0bign56uL5Y2z5YWR5o2iJywgdHJ1ZSk7CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgdGhpcy5oYW5kbGVyQnRuKCflt7LlhZHlrownLCB0cnVlKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgIH0gLy8g5aaC5p6c6ZyA6KaB5pi+56S65YCS6K6h5pe2CgoKICAgICAgICAgIGlmIChpbmZvMi5zaG93VGltZSAmJiBpbmZvMi5jaGlsZEVudW1LZXkgIT0gJ0FDVF9TUEVDSUFMX09GRkVSX1BVUkNIQVNFX0xJTUlUJykgewogICAgICAgICAgICAvLyAuLi4uLi4uLi4uLi4uLi4uLi7kvJjljJbnu5PmnZ8uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLgogICAgICAgICAgICBjbGVhckludGVydmFsKHRoaXMudGltZXIpOwogICAgICAgICAgICB2YXIgcmVtYWluVGltZSA9IHRoaXMucmVtYWluVGltZTsKICAgICAgICAgICAgdGhpcy50aW1lciA9IHNldEludGVydmFsKCgpID0+IHsKICAgICAgICAgICAgICBpZiAocmVtYWluVGltZSA+PSAxMDAwKSB7CiAgICAgICAgICAgICAgICByZW1haW5UaW1lIC09IDEwMDA7CiAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIGNsZWFySW50ZXJ2YWwodGhpcy50aW1lcik7CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICB0aGlzLnJlbWFpblRpbWUgPSByZW1haW5UaW1lIHx8IDA7CiAgICAgICAgICAgIH0sIDEwMDApOwogICAgICAgICAgfSAvLyB0aGlzLmdldENhc2hOdW0oKSAvLyDojrflj5blvZPliY3mtLvliqjlj6/nlKjmirXmiaPmnIDlpKfph5Hpop3nuqLljIUKCiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHRoaXMuYmFja190byhyZXMpOwogICAgICAgIH0KICAgICAgfSkuZmluYWxseSgoKSA9PiB7CiAgICAgICAgdGhpcy4kVG9hc3QuY2xlYXIoKTsKICAgICAgfSk7CiAgICB9LAoKICAgIC8vIOiOt+WPlua0u+WKqOWNoeWIuOivpuaDhQogICAgZ2V0Q291cERldGFpbCgpIHsKICAgICAgcmV0dXJuIHRoaXMuJGFwaS5hY3RfY2FyZF9kZXRhaWwoewogICAgICAgIGNhcmRJZDogdGhpcy5jYXJkSWQsCiAgICAgICAgZGV0YWlsSWQ6IHRoaXMuZGV0YWlsSWQsCiAgICAgICAgYWN0U246IHRoaXMub3B0aW9ucy5hY3RTbgogICAgICB9KS50aGVuKHJlcyA9PiB7CiAgICAgICAgaWYgKHJlcy5zdGF0ZSkgewogICAgICAgICAgdGhpcy5pbmZvID0geyAuLi50aGlzLmluZm8sCiAgICAgICAgICAgIC4uLnJlcy5pbmZvCiAgICAgICAgICB9OwogICAgICAgICAgdGhpcy5tZWRpYUxpc3QgPSByZXMuaW5mby5tZWRpYUxpc3Q7CgogICAgICAgICAgaWYgKHJlcy5pbmZvLnNob3BTaG93KSB7CiAgICAgICAgICAgIHRoaXMuZ2V0U3VpdFNob3BzKCk7CiAgICAgICAgICB9IC8vIOiHquaIkea4uOWNoeWIuOaXtuWVhuWutuivpuaDheaYvuekuuS4uuWbvuaWh+ivpuaDhQoKCiAgICAgICAgICBpZiAodGhpcy5pbmZvLmRlc2NyaWJlKSB7CiAgICAgICAgICAgIHRoaXMuZ3JhcGhpY0RldGFpbCA9IHRoaXMuaW5mby5kZXNjcmliZTsKICAgICAgICAgIH0KCiAgICAgICAgICB0aGlzLmdldEZpeGVkRGV0YWlsKHJlcy5pbmZvLnNob3BTbik7IC8vIOiOt+WPluWVhuWutuivpuaDhQogICAgICAgIH0gZWxzZSB7Ly8gdGhpcy5iYWNrX3RvKHJlcykKICAgICAgICAgIH0KICAgICAgfSk7CiAgICB9LAoKICAgIC8vIOeJueWNlua0u+WKqOeJueacieS/oeaBrwogICAgZ2V0U3BlY2lhbEluZm8oKSB7CiAgICAgIHJldHVybiB0aGlzLiRhcGkuc3BlY2lhbF9zZWxsX2luZm8oewogICAgICAgIGNoYW5uZWxUeXBlOiB0aGlzLm9wdGlvbnMuY2hhbm5lbFR5cGUgfHwgJycsCiAgICAgICAgcXJDb2RlOiB0aGlzLm9wdGlvbnMucXJDb2RlIHx8ICcnLAogICAgICAgIGFjdFNuOiB0aGlzLm9wdGlvbnMuYWN0U24KICAgICAgfSkudGhlbihyZXMgPT4gewogICAgICAgIGNvbnNvbGUubG9nKCdzcGVjaWFsX3NlbGxfaW5mbycsIHJlcy5pbmZvKTsKCiAgICAgICAgaWYgKHJlcy5zdGF0ZSkgewogICAgICAgICAgdGhpcy5jYXJkSWQgPSByZXMuaW5mby5jYXJkSWQsIHRoaXMuZGV0YWlsSWQgPSByZXMuaW5mby5kZXRhaWxJZDsKICAgICAgICAgIHRoaXMuaW5mbyA9IHsgLi4udGhpcy5pbmZvLAogICAgICAgICAgICAuLi5yZXMuaW5mbwogICAgICAgICAgfTsKICAgICAgICB9IGVsc2Ugey8vIHRoaXMuYmFja190byhyZXMpCiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCgogICAgLy8g6I635Y+W5ZWG5a625Zu65a6a5L+h5oGvCiAgICBnZXRGaXhlZERldGFpbChzaG9wU24pIHsKICAgICAgdGhpcy4kYXBpLnNob3BfZml4ZWRfZGV0YWlsKHsKICAgICAgICBzaG9wU24sCiAgICAgICAgbGF0OiB0aGlzLmxvY2F0aW9uSW5mby5sYXRpdHVkZSwKICAgICAgICBsbmc6IHRoaXMubG9jYXRpb25JbmZvLmxvbmdpdHVkZQogICAgICB9KS50aGVuKHJlcyA9PiB7CiAgICAgICAgaWYgKHJlcy5zdGF0ZSkgewogICAgICAgICAgdGhpcy5maXhlZERldGFpbCA9IHJlcy5pbmZvLnNob3A7CgogICAgICAgICAgaWYgKCF0aGlzLmluZm8uZGVzY3JpYmUpIHsKICAgICAgICAgICAgdGhpcy5ncmFwaGljRGV0YWlsID0gcmVzLmluZm8uc2hvcC5kZXRhaWw7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCgogICAgLy8g5YWz6Zet57qi5YyF5YiX6KGoCiAgICBjb2xzZWNhc2hNYXNrKCkgewogICAgICB0aGlzLmNhc2hNYXNrID0gIXRoaXMuY2FzaE1hc2s7CiAgICB9LAoKICAgIC8vIOiOt+WPlua0u+WKqOe6ouWMheW9k+WJjeS6q+eUqOacgOWkp+e6ouWMhQogICAgZ2V0Q2FzaE51bSgpIHsKICAgICAgdGhpcy4kVG9hc3QubG9hZGluZyh7CiAgICAgICAgbWVzc2FnZTogJ+WKoOi9veS4rS4uLicsCiAgICAgICAgZm9yYmlkQ2xpY2s6IHRydWUsCiAgICAgICAgZHVyYXRpb246IDAKICAgICAgfSk7CiAgICAgIGxldCB2aXBfY2hlY2sgPSAhdGhpcy52aXBVc2VyICYmIHRoaXMuaW5mby5idXlMaW1pdCA9PSAyID8gdHJ1ZSA6IGZhbHNlOwogICAgICBsZXQgcHJpY2UgPSB0aGlzLmluZm8uYnV5TGltaXQgPT0gMiB8fCB0aGlzLnZpcFVzZXIgPyB0aGlzLmluZm8uc2VsbFByaWNlIDogdGhpcy5pbmZvLm5vVmlwUHJpY2U7CiAgICAgIHRoaXMuJGFwaS5jYXNoX3JlZF9saXN0KHsKICAgICAgICBhY3RTbjogdGhpcy5vcHRpb25zLmFjdFNuLAogICAgICAgIGNpdHlJZDogdGhpcy5sb2NhdGlvbkNpdHkuY2l0eUlkLAogICAgICAgIG9wZW5WaXA6IHZpcF9jaGVjaywKICAgICAgICAvLyDmmK/lkKbli77pgInkvJrlkZjljaEKICAgICAgICB2aXBGZWU6IHZpcF9jaGVjayA/IHRoaXMudmlwRmVlIDogMCwKICAgICAgICAvLyDkvJrlkZjljaHph5Hpop0KICAgICAgICBhY3RGZWU6IHByaWNlLAogICAgICAgIC8vIOa0u+WKqOmHkeminQogICAgICAgIGNhcmRJZDogdGhpcy5pbmZvLmNhcmRJZCAvLyDnibnljZbljaHliLhpZCB8fCDnpLzljIXkvKDnqboKCiAgICAgIH0pLnRoZW4ocmVzID0+IHsKICAgICAgICBpZiAocmVzLnN0YXRlKSB7CiAgICAgICAgICBsZXQgcmVkTGlzdCA9IHJlcy5pbmZvLmNhc2hSZWRMaXN0IHx8IFtdOwogICAgICAgICAgbGV0IGNvbnN1bWVyQ291cG9uTGlzdCA9IHJlcy5pbmZvLmNvbnN1bWVyQ291cG9uTGlzdCB8fCBbXTsKICAgICAgICAgIGxldCB1c2FibGVMaXN0ID0gcmVkTGlzdC5maWx0ZXIoaXRlbSA9PiBpdGVtLmN1cnJlbnRBYmxlVXNlKTsgLy8g6L+H5ruk5Y+v55So57qi5YyFCgogICAgICAgICAgbGV0IHNvcnRVc2FibGVMaXN0ID0gdXNhYmxlTGlzdC5zb3J0KGZ1bmN0aW9uIChhLCBiKSB7CiAgICAgICAgICAgIC8vIOmZjeW6j+aOkuW6jwogICAgICAgICAgICByZXR1cm4gYi5tb25leSAtIGEubW9uZXk7CiAgICAgICAgICB9KTsKICAgICAgICAgIHRoaXMuc2VsQ2FzaHJlZCA9IHNvcnRVc2FibGVMaXN0WzBdOyAvLyDpgInkuK3mnIDlpKfnuqLljIUKCiAgICAgICAgICBpZiAoY29uc3VtZXJDb3Vwb25MaXN0Lmxlbmd0aCkgewogICAgICAgICAgICB0aGlzLnNlbENvbnN1bWVyID0gY29uc3VtZXJDb3Vwb25MaXN0WzBdIHx8IHt9OyAvLyDpgInkuK3mtojotLnliLgKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0pLmZpbmFsbHkoKCkgPT4gewogICAgICAgIHRoaXMuJFRvYXN0LmNsZWFyKCk7CiAgICAgIH0pOwogICAgfSwKCiAgICAvLyDojrflj5bkvJrlkZjljaHmnIDkvY7ku7fmoLwKICAgIHZpcFByaWNlKCkgewogICAgICB0aGlzLiRhcGkudjFfNF92aXBfbG93UHJpY2UoewogICAgICAgIHRvcGljVHlwZTogMSwKICAgICAgICB0b3BpY1NuOiB0aGlzLm9wdGlvbnMuYWN0U24KICAgICAgfSkudGhlbihyZXMgPT4gewogICAgICAgIGlmIChyZXMuc3RhdGUpIHsKICAgICAgICAgIHRoaXMudmlwRmVlID0gcmVzLmluZm8gPyByZXMuaW5mby5sb3dQcmljZSB8fCAwIDogMDsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKCiAgICAvLyDlhbPpl63nuqLljIXlvLnnqpfml7YKICAgIGhhc0NhY2hSZWRMaXN0KHsKICAgICAgZGV0YWlsCiAgICB9KSB7CiAgICAgIGlmIChkZXRhaWwgJiYgZGV0YWlsLmxlbmd0aCA+IDApIHsKICAgICAgICAvLyDph43mlrDor7fmsYLnuqLljIXmjqXlj6MKICAgICAgICAvLyB0aGlzLnNlbGVjdENvbXBvbmVudCgnI2FjdGl2ZUNhc2gnKS5nZXRDYXNoTGlzdCgpCiAgICAgICAgdGhpcy5nZXRDYXNoTnVtKCk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5zaG93UGFnZU1vZGVsID0gdHJ1ZTsKICAgICAgfQogICAgfSwKCiAgICAvLyDoh6rmiJHmuLjmtLvliqjor6bmg4XpgInmi6nku7fmoLwKICAgIHNlbERhdGVMaXN0KGl0ZW0pIHsKICAgICAgbGV0IGRhdGUgPSB7CiAgICAgICAgdGV4dDogaXRlbS5kYXRlLnN1YnN0cigwLCA2KSwKICAgICAgICBtb250aDogaXRlbS5kYXRlLnN1YnN0cig0LCAyKSwKICAgICAgICB5ZWFyOiBpdGVtLmRhdGUuc3Vic3RyKDAsIDQpLAogICAgICAgIGRheTogaXRlbS5kYXRlLnN1YnN0cig2LCAyKQogICAgICB9OwogICAgICB0aGlzLiRyZWZzLmNhbGVuZGFyLnNob3dDYWxlbmRhckRhdGEoZGF0ZSk7CiAgICAgIHRoaXMub3BlbkNhbGVuZGFyKCk7IC8vIOaYvuekuuaXpeWOhuW8ueeqlwogICAgfSwKCiAgICBvcGVuQ2FsZW5kYXIoKSB7CiAgICAgIHRoaXMuY2FsZW5kYXJNYXNrID0gdHJ1ZTsKICAgIH0sCgogICAgZ2V0VHJhdmVsTW9udGhJbmZvKGRldGFpbCkgewogICAgICAvLyDmjqXmlLbml6Xljobkv6Hmga8KICAgICAgaWYgKGRldGFpbC5kYXRhVHlwZSA9PSAnaW5pdCcpIHsKICAgICAgICAvLyDml6XljobliJ3lp4vljJbmlbDmja4KICAgICAgICB0aGlzLnRyYXZlbE1vbnRoSW5mbyA9IGRldGFpbDsKCiAgICAgICAgaWYgKGRldGFpbC51bmFibGVCdXkpIHsKICAgICAgICAgIHRoaXMuaGFuZGxlckJ0bign5b2T5YmN5LiN5Y+v6LSt5LmwJywgdHJ1ZSk7CiAgICAgICAgfQogICAgICB9IGVsc2UgaWYgKGRldGFpbC5kYXRhVHlwZSA9PSAnc2VsRGF0ZScpIHsKICAgICAgICAvLyDpgInmi6nml6Xljobkv6Hmga8KICAgICAgICBsZXQgaW5mbyA9IHRoaXMuaW5mbzsKICAgICAgICBpbmZvLnNlbGxQcmljZSA9IGRldGFpbC5zZWxsUHJpY2U7CiAgICAgICAgaW5mby5ub1ZpcFByaWNlID0gZGV0YWlsLm5vVmlwUHJpY2U7CiAgICAgICAgdGhpcy5pbmZvID0gaW5mbzsKICAgICAgICB0aGlzLnNlbERhdGUgPSBkZXRhaWw7CiAgICAgIH0KICAgIH0sCgogICAgZ2V0UmVjZWl2ZUNvbmRpdGlvbigpIHsKICAgICAgcmV0dXJuIHRoaXMuJGFwaS5yZWNlaXZlX2NvbmRpdGlvbih7CiAgICAgICAgYWN0U246IHRoaXMub3B0aW9ucy5hY3RTbgogICAgICB9KS50aGVuKHJlcyA9PiB7CiAgICAgICAgaWYgKHJlcy5zdGF0ZSkgewogICAgICAgICAgdGhpcy5jb25kaXRpb25JbmZvID0gcmVzLmluZm87CiAgICAgICAgfQogICAgICB9KTsKICAgIH0KCiAgfSwKCiAgY3JlYXRlZCgpIHsKICAgIGNvbnN0IG9wdGlvbnMgPSB0aGlzLiRyb3V0ZS5xdWVyeTsKICAgIG9wdGlvbnMuaGFzRXhjaGFuZ2UgPSBvcHRpb25zLmhhc0V4Y2hhbmdlIHx8ICcnOwogICAgb3B0aW9ucy50eXBlID0gb3B0aW9ucy50eXBlIHx8ICcnOwogICAgdGhpcy5vcHRpb25zID0gb3B0aW9uczsKCiAgICBpZiAob3B0aW9ucy5wb3B1cCkgewogICAgICB0aGlzLiRkaWFsb2cuYWxlcnQoewogICAgICAgIHRpdGxlOiAn5o+Q56S6JywKICAgICAgICBtZXNzYWdlOiAn6K6i5Y2V6LaF5pe25bey5Y+W5raI77yM6K+36YeN5paw5LiL5Y2VJywKICAgICAgICBjb25maXJtQnV0dG9uVGV4dDogJ+ehruWumicsCiAgICAgICAgY29uZmlybUJ1dHRvbkNvbG9yOiAnI0Q5MDYzNCcKICAgICAgfSk7CiAgICB9CgogICAgdGhpcy5nZXRBY3REZXRhaWwodHJ1ZSk7CiAgICB0aGlzLnZpcFByaWNlKCk7CgogICAgaWYgKHRoaXMub3B0aW9ucy5oYXNFeGNoYW5nZSAhPSAnJykgewogICAgICAvLyDliKTmlq3kuLrlhZHmjaLkuK3lv4Pov5vlhaUKICAgICAgdGhpcy5leGNoYW5nZV9kYXRhID0gdGhpcy4kc2F2ZS5nZXQoJ3Nlc3Npb24nLCAnZXhjaGFuZ2VfZGF0YScpOyAvLyDlhZHmjaLkuK3lv4PmtLvliqjmlbDmja4KICAgIH0KCiAgICB0aGlzLmdldFJlY2VpdmVDb25kaXRpb24oKTsgLy8g5piv5ZCm6ZyA6KaB5aGr5YaZ55So5oi35L+h5oGv5Y+K5YW25p2h5Lu2CgogICAgdGhpcy5uZWVkQXV0aCA9IHRoaXMubmVlZEF1dGg7CiAgICB0aGlzLmdldEZyZWVCYWcgPSB0aGlzLmdldEZyZWVCYWc7CiAgICB0aGlzLnZpcFVzZXIgPSB0aGlzLnZpcENhcmRJbmZvLnZpcFVzZXI7CiAgICB0aGlzLnNlbENhc2hyZWQgPSB7fTsKCiAgICBpZiAodGhpcy5hY3REZXRhbFVwZGF0ZSkgewogICAgICAvLyDliLfmlrDmtLvliqjmlbDmja4KICAgICAgdGhpcy5nZXRBY3REZXRhaWwodHJ1ZSk7CiAgICAgIHRoaXMuYWN0RGV0YWxVcGRhdGUgPSBmYWxzZTsKICAgIH0gLy8g5rS75Yqo5Lu35qC85Yi35pawCgoKICAgIGlmICh0aGlzLnVwZGF0ZUZsYWcpIHsKICAgICAgdGhpcy5yZWZyZXNoID0gdHJ1ZTsKICAgIH0gLy8g55So5oi35L+h5oGv5pWw5o2uCgoKICAgIGxldCB0cmF2ZWxJbmZvcm1hdGlvbiA9IHRoaXMuJHNhdmUuZ2V0KCdzZXNzaW9uJywgJ3RyYXZlbEluZm9ybWF0aW9uJyk7CgogICAgaWYgKHRyYXZlbEluZm9ybWF0aW9uKSB7CiAgICAgIHRoaXMudHJhY3ZlbFVzZXJMaXN0ID0gdHJhdmVsSW5mb3JtYXRpb24uZm9ybUxpc3Q7CiAgICAgIHRoaXMuc2VsRGF0ZSA9IHRyYXZlbEluZm9ybWF0aW9uLnNlbERhdGU7CgogICAgICBpZiAodGhpcy5vcHRpb25zLmhhc0V4Y2hhbmdlICE9ICcnKSB7CiAgICAgICAgdGhpcy5leGNoYW5nZSgpOwogICAgICB9IGVsc2UgaWYgKHRoaXMuZnJlZSkgewogICAgICAgIC8vIOWFjei0uemihuWPlgogICAgICAgIHRoaXMuZ2V0RnJlZSgpOwogICAgICB9CiAgICB9CiAgfSwKCiAgYWN0aXZhdGVkKCkge30sCgogIGRlc3Ryb3llZCgpIHsKICAgIC8vIOa4hemZpOeUqOaIt+Whq+WGmeS/oeaBrwogICAgdGhpcy4kc2F2ZS5yZW1vdmVBcnIoJ3Nlc3Npb24nLCBbJ3RyYXZlbEluZm9ybWF0aW9uJywgJ3VwZGF0ZUZsYWcnXSk7CiAgfQoKfTsKZXhwb3J0cy5kZWZhdWx0ID0gX2RlZmF1bHQ7"},null]}