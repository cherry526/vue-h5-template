{"remainingRequest":"C:\\Users\\Administrator\\Desktop\\vip_inline_h5\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\Administrator\\Desktop\\vip_inline_h5\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\Users\\Administrator\\Desktop\\vip_inline_h5\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Administrator\\Desktop\\vip_inline_h5\\src\\views\\active\\giftBag.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\Administrator\\Desktop\\vip_inline_h5\\src\\views\\active\\giftBag.vue","mtime":1596627053467},{"path":"C:\\Users\\Administrator\\Desktop\\vip_inline_h5\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Administrator\\Desktop\\vip_inline_h5\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\Administrator\\Desktop\\vip_inline_h5\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Administrator\\Desktop\\vip_inline_h5\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKdmFyIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQgPSByZXF1aXJlKCJDOi9Vc2Vycy9BZG1pbmlzdHJhdG9yL0Rlc2t0b3AvdmlwX2lubGluZV9oNS9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9pbnRlcm9wUmVxdWlyZURlZmF1bHQiKTsKCk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAiX19lc01vZHVsZSIsIHsKICB2YWx1ZTogdHJ1ZQp9KTsKZXhwb3J0cy5kZWZhdWx0ID0gdm9pZCAwOwoKdmFyIF92dWV4ID0gcmVxdWlyZSgidnVleCIpOwoKdmFyIF9zZWNraWxsTWl4aW4gPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoIkAvbWl4aW5zL3NlY2tpbGxNaXhpbiIpKTsKCnZhciBfYWN0aXZlSGVhZGVyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKCJAY29tcG9uZW50cy9hY3RpdmUvYWN0aXZlSGVhZGVyIikpOwoKdmFyIF9hY3RpdmVDYXNoID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKCJAY29tcG9uZW50cy9hY3RpdmUvYWN0aXZlQ2FzaCIpKTsKCnZhciBfYWN0aXZlR2lmdCA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZSgiQGNvbXBvbmVudHMvYWN0aXZlL2FjdGl2ZUdpZnQiKSk7Cgp2YXIgX2FjdGl2ZUdpZnRSZWFzb24gPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoIkBjb21wb25lbnRzL2FjdGl2ZS9hY3RpdmVHaWZ0UmVhc29uIikpOwoKdmFyIF9hY3RpdmVHcmFwaGljID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKCJAY29tcG9uZW50cy9hY3RpdmUvYWN0aXZlR3JhcGhpYyIpKTsKCnZhciBfYWN0aXZlRm9vdGVyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKCJAY29tcG9uZW50cy9hY3RpdmUvYWN0aXZlRm9vdGVyIikpOwoKdmFyIF9hY3RpdmUgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoIkAvZmlsdGVycy9hY3RpdmUuanMiKSk7Cgp2YXIgX3BheSA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZSgiQC91dGlscy9wYXkiKSk7Cgp2YXIgX3V0aWxzID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKCJAL3V0aWxzL3V0aWxzIikpOwoKLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KdmFyIF9kZWZhdWx0ID0gewogIG5hbWU6ICdnaWZ0QmFnJywKICBtaXhpbnM6IFtfc2Vja2lsbE1peGluLmRlZmF1bHRdLAogIGNvbXB1dGVkOiB7fSwKICBjb21wb25lbnRzOiB7CiAgICBhY3RpdmVIZWFkZXI6IF9hY3RpdmVIZWFkZXIuZGVmYXVsdCwKICAgIGFjdGl2ZUNhc2g6IF9hY3RpdmVDYXNoLmRlZmF1bHQsCiAgICBhY3RpdmVHaWZ0OiBfYWN0aXZlR2lmdC5kZWZhdWx0LAogICAgYWN0aXZlR2lmdFJlYXNvbjogX2FjdGl2ZUdpZnRSZWFzb24uZGVmYXVsdCwKICAgIGFjdGl2ZUdyYXBoaWM6IF9hY3RpdmVHcmFwaGljLmRlZmF1bHQsCiAgICBhY3RpdmVGb290ZXI6IF9hY3RpdmVGb290ZXIuZGVmYXVsdAogIH0sCgogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICByZWFkeTogZmFsc2UsCiAgICAgIHRpbWVyOiBudWxsLAogICAgICBsaW1pdFRpbWVyOiBudWxsLAogICAgICBzaG93UG9wOiBmYWxzZSwKICAgICAgYnRuVGV4dDogJ+eri+WNs+aKoui0rScsCiAgICAgIGhlYWRsaW5lOiAnJywKICAgICAgc2hvd1RpbWU6IHRydWUsCiAgICAgIHJlbWFpblRpbWU6IDAsCiAgICAgIGNoYW5uZWxUeXBlOiAnJywKICAgICAgb3B0aW9uczogdGhpcy4kcm91dGUucXVlcnkgfHwge30sCiAgICAgIGJ0bkRpc2FibGVkOiBmYWxzZSwKICAgICAgLy8g5oyJ6ZKu5piv5ZCm5LiN5Y+v55SoCiAgICAgIGJ0bkZvbnRTaXplOiAnZnQzNCcsCiAgICAgIHNlbENhc2hyZWQ6IHt9LAogICAgICBzZWxDb25zdW1lcjoge30sCiAgICAgIGNvbmRpdGlvbkluZm86IHt9LAogICAgICB0cmFjdmVsVXNlckxpc3Q6IFtdLAogICAgICBzZWxEYXRlOiB7CiAgICAgICAgc3RhcnRUaW1lOiAnJwogICAgICB9LAogICAgICBpbmZvOiB7fSwKICAgICAgcmVjZWl2ZU9iajogewogICAgICAgIDI6ICfmlrDnlKjmiLcnLAogICAgICAgIDM6ICfkvJrlkZgnLAogICAgICAgIDQ6ICfpnZ7kvJrlkZgnCiAgICAgIH0sCiAgICAgIGRvd25UaW1lOiB7CiAgICAgICAgaG91cjogJzAwJywKICAgICAgICBtaW51dGU6ICcwMCcsCiAgICAgICAgc2Vjb25kOiAnMDAnCiAgICAgIH0KICAgIH07CiAgfSwKCiAgY29tcHV0ZWQ6IHsgLi4uKDAsIF92dWV4Lm1hcEdldHRlcnMpKFsibG9jYXRpb25JbmZvIiwgInd4VXNlciIsICJsb2NhdGlvbkNpdHkiLCAidmlwQ2FyZEluZm8iLCAidXBkYXRlR2lmdCJdKQogIH0sCiAgbWV0aG9kczogeyAuLi4oMCwgX3Z1ZXgubWFwTXV0YXRpb25zKSgnYWN0aXZlJywgWydTRVRfVVBEQVRFR0lGVCddKSwKCiAgICAvLyDorr7nva7mj5DphpIKICAgIHJlbWluZFNldChlKSB7fSwKCiAgICBoYW5kbGVyTGltaXQocmVzLCBmbGFnKSB7CiAgICAgIGlmIChyZXMuaW5mby5saW1pdEFjdFN0YXRlID09IDggfHwgcmVzLmluZm8ubGltaXRBY3RTdGF0ZSA9PSA5KSB7CiAgICAgICAgcmVzLmluZm8udGltZVN0YXRlID0gMTsKICAgICAgICB0aGlzLmhlYWRsaW5lID0gX2FjdGl2ZS5kZWZhdWx0LmdldERheU5hbWUocmVzLmluZm8ubGltaXRTdGFydFRpbWUpOwogICAgICB9IGVsc2UgaWYgKHJlcy5pbmZvLmxpbWl0QWN0U3RhdGUgPT0gMSB8fCByZXMuaW5mby5saW1pdEFjdFN0YXRlID09IDMgfHwgcmVzLmluZm8ubGltaXRBY3RTdGF0ZSA9PSAxMCkgewogICAgICAgIHJlcy5pbmZvLnRpbWVTdGF0ZSA9IDI7CiAgICAgIH0gZWxzZSBpZiAocmVzLmluZm8ubGltaXRBY3RTdGF0ZSA9PSAyKSB7CiAgICAgICAgcmVzLmluZm8udGltZVN0YXRlID0gMzsKICAgICAgfSBlbHNlIHsKICAgICAgICAvLyAx5pyq5byA5aeLIDLov5vooYzkuK0gM+W3sue7k+adnwogICAgICAgIGxldCBjdXJyZW50VGltZSA9ICtuZXcgRGF0ZSgpOwoKICAgICAgICBpZiAocmVzLmluZm8ubGltaXRFbmRUaW1lIDwgY3VycmVudFRpbWUgJiYgcmVzLmluZm8ubGltaXRTdGFydFRpbWUgPCBjdXJyZW50VGltZSkgewogICAgICAgICAgcmVzLmluZm8udGltZVN0YXRlID0gMzsKICAgICAgICB9IGVsc2UgaWYgKHJlcy5pbmZvLmxpbWl0RW5kVGltZSA+IGN1cnJlbnRUaW1lICYmIHJlcy5pbmZvLmxpbWl0U3RhcnRUaW1lIDwgY3VycmVudFRpbWUpIHsKICAgICAgICAgIHJlcy5pbmZvLnRpbWVTdGF0ZSA9IDI7CiAgICAgICAgfSBlbHNlIGlmIChyZXMuaW5mby5saW1pdFN0YXJ0VGltZSA+IGN1cnJlbnRUaW1lKSB7CiAgICAgICAgICByZXMuaW5mby50aW1lU3RhdGUgPSAxOwogICAgICAgICAgdGhpcy5oZWFkbGluZSA9IF9hY3RpdmUuZGVmYXVsdC5nZXREYXlOYW1lKHJlcy5pbmZvLmxpbWl0U3RhcnRUaW1lKTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIGlmIChyZXMuaW5mby50aW1lU3RhdGUgIT0gMykgewogICAgICAgIGNsZWFySW50ZXJ2YWwodGhpcy5saW1pdFRpbWVyKTsKICAgICAgICB0aGlzLmxpbWl0VGltZXIgPSBzZXRJbnRlcnZhbCgoKSA9PiB7CiAgICAgICAgICBsZXQgbm93VGltZSA9ICtuZXcgRGF0ZSgpOwogICAgICAgICAgdmFyIGN1dFRpbWUgPSAwOwoKICAgICAgICAgIGlmIChyZXMuaW5mby50aW1lU3RhdGUgPT0gMSkgewogICAgICAgICAgICBjdXRUaW1lID0gcmVzLmluZm8ubGltaXRTdGFydFRpbWUgLSBub3dUaW1lOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgY3V0VGltZSA9IHJlcy5pbmZvLmxpbWl0RW5kVGltZSAtIG5vd1RpbWU7CiAgICAgICAgICB9CgogICAgICAgICAgdGhpcy5kb3duVGltZSA9IF91dGlscy5kZWZhdWx0LmNvdW50RG93bjMoY3V0VGltZSk7CgogICAgICAgICAgaWYgKGN1dFRpbWUgPD0gMCAmJiByZXMuaW5mby5saW1pdEFjdFN0YXRlICE9IDEyKSB7CiAgICAgICAgICAgIGNsZWFySW50ZXJ2YWwodGhpcy5saW1pdFRpbWVyKTsKICAgICAgICAgICAgdGhpcy5nZXRBY3REZXRhaWwoKTsKICAgICAgICAgIH0KICAgICAgICB9LCAxMDAwKTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLmRvd25UaW1lID0gewogICAgICAgICAgaG91cjogJzAwJywKICAgICAgICAgIG1pbnV0ZTogJzAwJywKICAgICAgICAgIHNlY29uZDogJzAwJwogICAgICAgIH07CiAgICAgIH0KCiAgICAgIGNvbnNvbGUubG9nKCdyZXMuLi4uLi4uLi4uLicsIHJlcy5pbmZvLCB0aGlzLmRvd25UaW1lKTsKCiAgICAgIGlmIChmbGFnKSB7CiAgICAgICAgLy8g5bey5oqi5a6M5rS75Yqo5by556qXCiAgICAgICAgaWYgKHJlcy5pbmZvLmxpbWl0QWN0U3RhdGUgPT0gMyB8fCByZXMuaW5mby5saW1pdEFjdFN0YXRlID09IDIgfHwgIXRoaXMuaW5mby5yZW1haW5OdW0pIHsKICAgICAgICAgIHRoaXMuZ2V0RW5kQWN0aXZlKCk7CiAgICAgICAgfQogICAgICB9CiAgICB9LAoKICAgIC8vIOOAguOAguOAguOAguOAguOAguOAguOAguOAguOAguOAguOAguOAguOAguOAguOAguOAguOAguOAguOAguOAguS8mOWMlue7k+adn+OAguOAguOAguOAguOAguOAguOAguOAguOAguOAguOAguOAguOAguOAggogICAgY2xvc2VQb3AoKSB7CiAgICAgIHRoaXMuc2hvd1BvcCA9IGZhbHNlOwogICAgfSwKCiAgICAvLyDnpLzljIXnibnmnInkv6Hmga8KICAgIGdldEdpZnRJbmZvKCkgewogICAgICByZXR1cm4gdGhpcy4kYXBpLmFjdF9naWZ0X2luZm8oewogICAgICAgIGNoYW5uZWxUeXBlOiB0aGlzLmNoYW5uZWxUeXBlLAogICAgICAgIHFyQ29kZTogdGhpcy5xckNvZGUsCiAgICAgICAgYWN0U246IHRoaXMuYWN0U24sCiAgICAgICAgbGF0OiB0aGlzLmxvY2F0aW9uSW5mby5sYXRpdHVkZSwKICAgICAgICBsbmc6IHRoaXMubG9jYXRpb25JbmZvLmxvbmdpdHVkZQogICAgICB9KS50aGVuKHJlcyA9PiB7CiAgICAgICAgaWYgKHJlcy5zdGF0ZSkgewogICAgICAgICAgbGV0IGNhcmRTdW0gPSAwOwogICAgICAgICAgcmVzLmluZm8uY2FyZExpc3QuZm9yRWFjaChpdGVtID0+IHsKICAgICAgICAgICAgY2FyZFN1bSArPSBpdGVtLmNhcmROdW07CiAgICAgICAgICB9KTsKICAgICAgICAgIHRoaXMuaW5mbyA9IE9iamVjdC5hc3NpZ24oewogICAgICAgICAgICBjYXJkU3VtCiAgICAgICAgICB9LCB0aGlzLmluZm8sIHJlcy5pbmZvKTsKCiAgICAgICAgICBpZiAocmVzLmluZm8ucmVtYWluTnVtID09IDApIHsKICAgICAgICAgICAgdGhpcy5oYW5kbGVyQnRuKCflt7LllK7nvYQnLCB0cnVlKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKCiAgICBoYW5kbGVyQnRuKHRleHQsIGRpc2FibGVkID0gZmFsc2UsIGZvbnRTaXplID0gJ2Z0MzQnKSB7CiAgICAgIHRoaXMuYnRuVGV4dCA9IHRleHQ7CiAgICAgIHRoaXMuYnRuRm9udFNpemUgPSBmb250U2l6ZTsKICAgICAgdGhpcy5idG5EaXNhYmxlZCA9IGRpc2FibGVkOwoKICAgICAgaWYgKGRpc2FibGVkKSB7CiAgICAgICAgdGhpcy5zaG93VGltZSA9IGZhbHNlOwogICAgICB9CiAgICB9LAoKICAgIC8vIOWIpOaWreeUqOaIt+i0reS5sOS/oeaBrwogICAgZ2V0UmVhbFRpbWVJbmZvKGxpbWl0RnJlcXVlbmN5KSB7CiAgICAgIHJldHVybiB0aGlzLiRhcGkucmVhbFRpbWVfaW5mbyh7CiAgICAgICAgYWN0U246IHRoaXMuYWN0U24KICAgICAgfSkudGhlbihyZXMgPT4gewogICAgICAgIGlmIChyZXMuc3RhdGUpIHsKICAgICAgICAgIHRoaXMucmVhbEluZm8gPSByZXMuaW5mbzsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKCiAgICBnZXRSZWNlaXZlQ29uZGl0aW9uKCkgewogICAgICByZXR1cm4gdGhpcy4kYXBpLnJlY2VpdmVfY29uZGl0aW9uKHsKICAgICAgICBhY3RTbjogdGhpcy5hY3RTbgogICAgICB9KS50aGVuKHJlcyA9PiB7CiAgICAgICAgaWYgKHJlcy5zdGF0ZSkgewogICAgICAgICAgdGhpcy5jb25kaXRpb25JbmZvID0gcmVzLmluZm87CiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCgogICAgLy8g5aSE55CG56uL5Y2z6aKG5Y+W55qE5oyJ6ZKuCiAgICBoYW5kbGVyUmVjZWl2ZUJ0bigpIHsKICAgICAgbGV0IGhhc1JlY2VpdmVDaGFubmVsRnJlZUdpZnQgPSB0aGlzLmluZm8uaGFzUmVjZWl2ZUNoYW5uZWxGcmVlR2lmdDsKICAgICAgbGV0IGNoYW5uZWxUeXBlID0gdGhpcy5jaGFubmVsVHlwZTsKICAgICAgdGhpcy5oYW5kbGVyQnRuKCfnq4vljbPpooblj5YnKTsKICAgICAgaWYgKGhhc1JlY2VpdmVDaGFubmVsRnJlZUdpZnQgJiYgY2hhbm5lbFR5cGUgPT0gJ0NIQU5ORUxfQUNUSVZJVFlfTEFCRUxfU0hPVycpIHRoaXMuaGFuZGxlckJ0bign6aKG5Y+W5qyh5pWw5bey55So5a6MJywgdHJ1ZSk7CiAgICB9LAoKICAgIC8vIOmAmueUqOa0u+WKqOivpuaDhQogICAgZ2V0QWN0RGV0YWlsKGZsYWcpIHsKICAgICAgdGhpcy4kVG9hc3QubG9hZGluZyh7CiAgICAgICAgbWVzc2FnZTogJ+WKoOi9veS4rS4uLicsCiAgICAgICAgZm9yYmlkQ2xpY2s6IHRydWUsCiAgICAgICAgZHVyYXRpb246IDAKICAgICAgfSk7CiAgICAgIHJldHVybiB0aGlzLiRhcGkuYWN0X2RldGFpbCh7CiAgICAgICAgY2hhbm5lbFR5cGU6IHRoaXMuY2hhbm5lbFR5cGUsCiAgICAgICAgcXJDb2RlOiB0aGlzLnFyQ29kZSwKICAgICAgICBhY3RTbjogdGhpcy5hY3RTbgogICAgICB9KS50aGVuKGFzeW5jIHJlcyA9PiB7CiAgICAgICAgaWYgKHJlcy5zdGF0ZSkgewogICAgICAgICAgdGhpcy5lbnVtS2V5ID0gcmVzLmluZm8uY2hpbGRFbnVtS2V5OwogICAgICAgICAgdGhpcy5zaG93U2hhcmUgPSB0cnVlOyAvLyDlpITnkIbpmZDml7bnmoTlgJLorqHml7bnrYnpl67popggCgogICAgICAgICAgaWYgKHJlcy5pbmZvLmNoaWxkRW51bUtleSA9PSAnQUNUX0dJRlRfUEFDS0FHRV9QVVJDSEFTRV9MSU1JVCcpIHsKICAgICAgICAgICAgdGhpcy5oYW5kbGVyTGltaXQocmVzLCBmbGFnKTsKICAgICAgICAgIH0KCiAgICAgICAgICByZXMuaW5mby5jaGFubmVsVHlwZSA9IHRoaXMuY2hhbm5lbFR5cGUgfHwgJyc7CiAgICAgICAgICB0aGlzLmluZm8gPSBPYmplY3QuYXNzaWduKHt9LCB0aGlzLmluZm8sIHJlcy5pbmZvKTsKICAgICAgICAgIHRoaXMucmVtYWluVGltZSA9IHJlcy5pbmZvLnJlbWFpblRpbWU7CiAgICAgICAgICB0aGlzLnNob3dUaW1lID0gcmVzLmluZm8uc2hvd1RpbWU7CiAgICAgICAgICB0aGlzLnJlYWR5ID0gdHJ1ZTsKICAgICAgICAgIGNvbnNvbGUubG9nKCdpbmZvLi4uLi4uLi4uLicsIHRoaXMuaW5mbyk7IC8vIOaMiemSruaWh+WtlwoKICAgICAgICAgIGxldCB2aXBVc2VyID0gdGhpcy52aXBDYXJkSW5mby52aXBVc2VyOwogICAgICAgICAgdGhpcy52aXBVc2VyID0gdGhpcy52aXBDYXJkSW5mby52aXBVc2VyOwogICAgICAgICAgbGV0IGNoYW5uZWxUeXBlID0gdGhpcy5jaGFubmVsVHlwZTsKICAgICAgICAgIGxldCByZXN0cmljdFN0YXRlID0gdGhpcy5pbmZvLnJlc3RyaWN0U3RhdGU7CiAgICAgICAgICBsZXQgcGFja2FnZUdpZnRUeXBlID0gdGhpcy5pbmZvLnBhY2thZ2VHaWZ0VHlwZTsKICAgICAgICAgIGxldCBoYXNSZWNlaXZlQ2hhbm5lbEZyZWVHaWZ0ID0gdGhpcy5pbmZvLmhhc1JlY2VpdmVDaGFubmVsRnJlZUdpZnQ7CiAgICAgICAgICBsZXQgcmVtYWluTnVtID0gdGhpcy5pbmZvLnJlbWFpbk51bTsKICAgICAgICAgIGxldCBjaGFubmVsVHJhY2sgPSB0aGlzLmluZm8uY2hhbm5lbFRyYWNrOwogICAgICAgICAgbGV0IHNlbGxQcmljZSA9IHRoaXMuaW5mby5zZWxsUHJpY2U7CiAgICAgICAgICBsZXQgbm9WaXBQcmljZSA9IHRoaXMuaW5mby5ub1ZpcFByaWNlOwogICAgICAgICAgbGV0IHN0YXRlID0gcmVzLmluZm8uYWN0U3RhdGU7CiAgICAgICAgICBsZXQgYnV5TGltaXQgPSByZXMuaW5mby5idXlMaW1pdDsKCiAgICAgICAgICBpZiAoc3RhdGUgPT0gMSkgewogICAgICAgICAgICB0aGlzLmhhbmRsZXJCdG4oJ+acquW8gOWniycsIHRydWUpOwogICAgICAgICAgfSBlbHNlIGlmIChzdGF0ZSA9PSAzKSB7CiAgICAgICAgICAgIHRoaXMuaGFuZGxlckJ0bign5bey5ZSu572EJywgdHJ1ZSk7CiAgICAgICAgICB9IGVsc2UgaWYgKHN0YXRlID09IDQpIHsKICAgICAgICAgICAgdGhpcy5oYW5kbGVyQnRuKCflt7Lnu5PmnZ8nLCB0cnVlKTsKICAgICAgICAgIH0gZWxzZSBpZiAoc3RhdGUgPT0gNSkgewogICAgICAgICAgICAvLyAg5Lya5ZGYCiAgICAgICAgICAgIGlmICh2aXBVc2VyKSB7CiAgICAgICAgICAgICAgaWYgKHNlbGxQcmljZSA+IDApIHsKICAgICAgICAgICAgICAgIHRoaXMuaGFuZGxlckJ0bign5bey5ZSu572EJywgdHJ1ZSk7CiAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIHRoaXMuaGFuZGxlckJ0bign6aKG5Y+W5qyh5pWw5bey55So5a6MJywgdHJ1ZSk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIGlmIChidXlMaW1pdCA9PSAxICYmIG5vVmlwUHJpY2UgPiAwKSB7CiAgICAgICAgICAgICAgICB0aGlzLmhhbmRsZXJCdG4oJ+W3suWUrue9hCcsIHRydWUpOwogICAgICAgICAgICAgIH0gZWxzZSBpZiAoYnV5TGltaXQgPT0gMSAmJiBub1ZpcFByaWNlID09IDApIHsKICAgICAgICAgICAgICAgIHRoaXMuaGFuZGxlckJ0bign6aKG5Y+W5qyh5pWw5bey55So5a6MJywgdHJ1ZSk7CiAgICAgICAgICAgICAgfSBlbHNlIGlmIChidXlMaW1pdCA9PSAyKSB7CiAgICAgICAgICAgICAgICB0aGlzLmhhbmRsZXJCdG4oJ+W3suWUrue9hCcsIHRydWUpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgfSAvLyDlpJbpg6jmuKDpgZPov5vlhaUKCgogICAgICAgICAgaWYgKHN0YXRlID09IDIpIHsKICAgICAgICAgICAgLy8gLi4uLi4uLi4uLi4uLi7lpJbpg6jmuKDpgZPnpLzljIXkuLrllK7ljZblnosuLi4uLi4uLi4uLi4uLi4uLi4uLgogICAgICAgICAgICBpZiAoY2hhbm5lbFRyYWNrID8gcGFja2FnZUdpZnRUeXBlID09IDEgOiByZXN0cmljdFN0YXRlID09IDIpIHsKICAgICAgICAgICAgICBpZiAocmVtYWluTnVtID4gMCkgewogICAgICAgICAgICAgICAgdGhpcy5oYW5kbGVyQnRuKCfnq4vljbPotK3kubAnKTsKICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgLy8gIOS8muWRmAogICAgICAgICAgICAgICAgaWYgKHZpcFVzZXIpIHsKICAgICAgICAgICAgICAgICAgaWYgKHNlbGxQcmljZSA+IDApIHsKICAgICAgICAgICAgICAgICAgICB0aGlzLmhhbmRsZXJCdG4oJ+W3suWUrue9hCcsIHRydWUpOwogICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgIHRoaXMuaGFuZGxlckJ0bign6aKG5Y+W5qyh5pWw5bey55So5a6MJywgdHJ1ZSk7CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgIGlmIChidXlMaW1pdCA9PSAxICYmIG5vVmlwUHJpY2UgPiAwKSB7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5oYW5kbGVyQnRuKCflt7LllK7nvYQnLCB0cnVlKTsKICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChidXlMaW1pdCA9PSAxICYmIG5vVmlwUHJpY2UgPT0gMCkgewogICAgICAgICAgICAgICAgICAgIHRoaXMuaGFuZGxlckJ0bign6aKG5Y+W5qyh5pWw5bey55So5a6MJywgdHJ1ZSk7CiAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoYnV5TGltaXQgPT0gMikgewogICAgICAgICAgICAgICAgICAgIHRoaXMuaGFuZGxlckJ0bign5bey5ZSu572EJywgdHJ1ZSk7CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9IC8vIOS7heS8muWRmOWPr+i0reS5sOaXtu+8jOmdnuS8muWRmOaYvuekugoKCiAgICAgICAgICAgICAgaWYgKGJ1eUxpbWl0ID09IDIgJiYgIXZpcFVzZXIpIHsKICAgICAgICAgICAgICAgIHRoaXMuaGFuZGxlckJ0bign5byA6YCa5bm26LSt5LmwJyk7CiAgICAgICAgICAgICAgfSAvLyDku4XkvJrlkZjlj6/otK3kubDvvIzkvJrlkZjku7fkuLow77yM6Z2e5Lya5ZGY6KeG6KeSCgoKICAgICAgICAgICAgICBpZiAoYnV5TGltaXQgPT0gMiAmJiAhc2VsbFByaWNlICYmICF2aXBVc2VyKSB7CiAgICAgICAgICAgICAgICB0aGlzLm9wZW5fcmVjZWl2ZSA9IHRydWU7CiAgICAgICAgICAgICAgICB0aGlzLmhhbmRsZXJCdG4oJ+W8gOmAmuW5tumihuWPlicpOwogICAgICAgICAgICAgIH0gLy8uLi4uLi4uLi4uLi4uLi4uLueri+WNs+mihuWPlueahOaMiemSruW8gOWniy4uLi4uLi4uLi4uLi4uLi4uLi4KICAgICAgICAgICAgICAvLyDku4XkvJrlkZjlj6/otK3kubDvvIzkvJrlkZjku7fkuLow77yM5Lya5ZGY6KeG6KeSCgoKICAgICAgICAgICAgICBpZiAoYnV5TGltaXQgPT0gMiAmJiAhc2VsbFByaWNlICYmIHZpcFVzZXIpIHsKICAgICAgICAgICAgICAgIHRoaXMuaGFuZGxlclJlY2VpdmVCdG4oc3RhdGUpOwogICAgICAgICAgICAgIH0gLy8g5omA5pyJ5Lq65Y+v6LSt5Lmw77yM5Lya5ZGY5Lu344CB6Z2e5Lya5ZGY5Lu36YO95Li6MO+8jOaJgOacieS6uuinhuinkgoKCiAgICAgICAgICAgICAgaWYgKGJ1eUxpbWl0ID09IDEgJiYgIXNlbGxQcmljZSAmJiAhbm9WaXBQcmljZSkgewogICAgICAgICAgICAgICAgdGhpcy5oYW5kbGVyUmVjZWl2ZUJ0bihzdGF0ZSk7CiAgICAgICAgICAgICAgfSAvLyDmiYDmnInkurrlj6/otK3kubDvvIzkvJrlkZjku7fjgIHpnZ7kvJrlkZjku7fpg73kuLow77yM5omA5pyJ5Lq66KeG6KeSCgoKICAgICAgICAgICAgICBpZiAoYnV5TGltaXQgPT0gMSAmJiAhc2VsbFByaWNlICYmICFub1ZpcFByaWNlKSB7CiAgICAgICAgICAgICAgICB0aGlzLmhhbmRsZXJSZWNlaXZlQnRuKHN0YXRlKTsKICAgICAgICAgICAgICB9IC8vIOaJgOacieS6uuWPr+i0reS5sO+8jOS8muWRmOS7t+OAgemdnuS8muWRmOS7t+mDveS4ujDvvIzmiYDmnInkurrop4bop5IKCgogICAgICAgICAgICAgIGlmIChidXlMaW1pdCA9PSAxICYmICFzZWxsUHJpY2UgJiYgdmlwVXNlcikgewogICAgICAgICAgICAgICAgdGhpcy5oYW5kbGVyUmVjZWl2ZUJ0bihzdGF0ZSk7CiAgICAgICAgICAgICAgfSAvLy4uLi4uLi4uLi4uLi4uLi4u56uL5Y2z6aKG5Y+W55qE5oyJ6ZKu57uT5p2fLi4uLi4uLi4uLi4uLi4uLi4uLgoKICAgICAgICAgICAgfSBlbHNlIGlmIChjaGFubmVsVHJhY2sgPyBwYWNrYWdlR2lmdFR5cGUgPT0gMiA6IHJlc3RyaWN0U3RhdGUgPT0gMSkgewogICAgICAgICAgICAgIC8vIC4uLi4uLi4uLi4uLi4u5aSW6YOo5rig6YGT56S85YyF5Li65YWN6LS56aKG5Y+W5Z6LLi4uLi4uLi4uLi4uLi4uLgogICAgICAgICAgICAgIGlmIChyZW1haW5OdW0gPiAwKSB7CiAgICAgICAgICAgICAgICB0aGlzLmhhbmRsZXJCdG4oJ+eri+WNs+mihuWPlicpOwogICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICB0aGlzLmhhbmRsZXJCdG4oJ+W3suWUrue9hCcsIHRydWUpOwogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgaWYgKGhhc1JlY2VpdmVDaGFubmVsRnJlZUdpZnQgJiYgY2hhbm5lbFR5cGUgPT0gJ0NIQU5ORUxfQUNUSVZJVFlfTEFCRUxfU0hPVycpIHsKICAgICAgICAgICAgICAgIHRoaXMuaGFuZGxlckJ0bign6aKG5Y+W5qyh5pWw5bey55So5a6MJywgdHJ1ZSk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9IC8vLi4uLi4uLi4uLi4uLi4uLi4uLi7pooblj5bmrKHmlbDkuI7otK3kubDmrKHmlbDmmK/lkKblt7LnlKjlrowuLi4uLi4uLi4uLi4uLi4uIAoKCiAgICAgICAgICAgIGxldCB0b3RhbE51bSA9IE51bWJlcih0aGlzLnJlYWxJbmZvLnVzZXJCdXlOdW0pICsgTnVtYmVyKHRoaXMucmVhbEluZm8udXNlckZyZWVSZWNlaXZlTnVtKTsgLy8g5b2T5YmN55So5oi355qE6LSt5Lmw5pWw6YeP5ZKM6aKG5Y+W5pWw6YeP5oC75ZKMCgogICAgICAgICAgICBsZXQgY29udGF0aW9uID0gcmVzLmluZm8uYnV5TGltaXQgPT0gMSAmJiAhcmVzLmluZm8uc2VsbFByaWNlICYmICFyZXMuaW5mby5ub1ZpcFByaWNlIHx8IHJlcy5pbmZvLmJ1eUxpbWl0ID09IDIgJiYgIXJlcy5pbmZvLnNlbGxQcmljZTsgLy8g5Yik5pat5bey6aKG5Y+W55qE54q25oCBCiAgICAgICAgICAgIC8vIOWIpOaWreaYr+WQpumZkOWItui0reS5sAoKICAgICAgICAgICAgaWYgKHJlcy5pbmZvLmxpbWl0U3RhdGUpIHsKICAgICAgICAgICAgICBpZiAodG90YWxOdW0gPj0gcmVzLmluZm8ubGltaXRGcmVxdWVuY3kpIHsKICAgICAgICAgICAgICAgIC8vIOeUqOaIt+aAu+aIkOWKn+i0reS5sOaVsOmHj+Wkp+S6jumZkOWItui0reS5sOaVsOmHjwogICAgICAgICAgICAgICAgdGhpcy5oYW5kbGVyQnRuKCflt7LotK3kubAnLCB0cnVlKTsKICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIGlmICh0b3RhbE51bSA+PSByZXMuaW5mby5saW1pdEZyZXF1ZW5jeSAmJiBjb250YXRpb24pIHsKICAgICAgICAgICAgICAgIC8vIOW9k+WJjeeUqOaIt+W9k+WJjea0u+WKqOS4reaAu+WFjei0uemihuWPluaVsOmHj+Wkp+S6jumZkOWItumihuWPluaVsOmHjwogICAgICAgICAgICAgICAgdGhpcy5oYW5kbGVyQnRuKCfpooblj5bmrKHmlbDlt7LnlKjlrownLCB0cnVlKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgIH0gLy8g5Yik5pat5Li65YWR5o2i5Lit5b+D6L+b5YWlCgoKICAgICAgICAgIGlmICh0aGlzLmhhc0V4Y2hhbmdlICE9ICcnKSB7CiAgICAgICAgICAgIGxldCBleGNoYW5nZV9kYXRhID0gdGhpcy5leGNoYW5nZV9kYXRhOyAvLyDlhZHmjaLkuK3lv4PmtLvliqjmlbDmja4KCiAgICAgICAgICAgIGlmIChleGNoYW5nZV9kYXRhLmhhc0V4Y2hhbmdlKSB7CiAgICAgICAgICAgICAgdGhpcy5oYW5kbGVyQnRuKCflt7LlhZHmjaInLCB0cnVlKTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICBpZiAoZXhjaGFuZ2VfZGF0YS5yZW1haW5OdW0gPiAwKSB7CiAgICAgICAgICAgICAgICBpZiAoZXhjaGFuZ2VfZGF0YS5zdGF0ZSAhPSAyKSB7CiAgICAgICAgICAgICAgICAgIHRoaXMuaGFuZGxlckJ0bign5bey57uT5p2fJywgdHJ1ZSk7CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICBpZiAoZXhjaGFuZ2VfZGF0YS5jb25kaXRpb24pIHsKICAgICAgICAgICAgICAgICAgICB0aGlzLmhhbmRsZXJCdG4oJ+eri+WNs+WFkeaNoicsIGZhbHNlKTsKICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICB0aGlzLmhhbmRsZXJCdG4oJ+eri+WNs+WFkeaNoicsIHRydWUpOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIHRoaXMuaGFuZGxlckJ0bign5bey5YWR5a6MJywgdHJ1ZSk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICB9IC8vIC4uLi4uLi4uLi4uLi4uLi4u5LyY5YyW5paw5aKeLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLgogICAgICAgICAgLy8g5Yik5pat5LuO6ZmQ6LSt6L+b5YWlCgoKICAgICAgICAgIGlmICh0aGlzLmluZm8uY2hpbGRFbnVtS2V5ID09ICdBQ1RfR0lGVF9QQUNLQUdFX1BVUkNIQVNFX0xJTUlUJykgewogICAgICAgICAgICAvLyDliKTmlq3mjInpkq7nmoTlsZXnpLoKICAgICAgICAgICAgLy8gMS7mtLvliqjmnKrlvIDlp4sg5pyq6K6+572u5o+Q6YaSIC0tLS0tIOaPkOmGkuaIkS/pooTnuqbmj5DphpIgCiAgICAgICAgICAgIC8vIDIu5rS75Yqo5pyq5byA5aeLIOW3suiuvue9ruaPkOmGkiAtLS0tLSDlt7LpooTnuqYKICAgICAgICAgICAgLy8gMy7mtLvliqjov5vooYzkuK0gLS0tLS0g56uL5Y2z5oqi6LStCiAgICAgICAgICAgIC8vIDQu5rS75Yqo6L+b6KGM5LitIOi0reS5sOasoeaVsOi+vuWIsOS4iumZkC0tLS0tIOW3sui0reS5sAogICAgICAgICAgICAvLyA1Lua0u+WKqOi/m+ihjOS4rSDlupPlrZjkuLowIC0tLS0tIOW3suaKouWujAogICAgICAgICAgICAvLyA2Lua0u+WKqOacquWPkeW4gyDml6Dms5XotK3kubDjgIHorr7nva7mj5DphpIgLS0tLS0g6Iul54K55Ye777yM5YiZdG9hc3Tmj5DnpLrigJzlvZPliY3mtLvliqgv5ZCI6L6R5pyq5Y+R5biD4oCdCiAgICAgICAgICAgIC8vIDcu5rS75Yqo5bey57uT5p2fIC0tLS0tICDlt7LmiqLlrowKICAgICAgICAgICAgaWYgKCF0aGlzLmluZm8ucmVtYWluTnVtKSB7CiAgICAgICAgICAgICAgdGhpcy5oYW5kbGVyQnRuKCflt7LmiqLlrownLCB0cnVlKTsKICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGlmIChyZXMuaW5mby5hY3RTdGF0ZSA9PSAxMSB8fCByZXMuaW5mby5hY3RTdGF0ZSA9PSAzKSB7CiAgICAgICAgICAgICAgdGhpcy5oYW5kbGVyQnRuKCflt7LmiqLlrownLCB0cnVlKTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAvLyBpZiAocmVzLmluZm8ubGltaXRBY3RTdGF0ZSA9PSA4KSB7CiAgICAgICAgICAgICAgLy8gICB0aGlzLmhhbmRsZXJCdG4oJ+mihOe6puaPkOmGkicsIGZhbHNlKQogICAgICAgICAgICAgIC8vIH0gZWxzZSBpZiAocmVzLmluZm8ubGltaXRBY3RTdGF0ZSA9PSA5KSB7CiAgICAgICAgICAgICAgLy8gICB0aGlzLmhhbmRsZXJCdG4oJ+W3sumihOe6picsIGZhbHNlKQogICAgICAgICAgICAgIC8vIH0gCiAgICAgICAgICAgICAgaWYgKHJlcy5pbmZvLmxpbWl0QWN0U3RhdGUgPT0gOCB8fCByZXMuaW5mby5saW1pdEFjdFN0YXRlID09IDkpIHsKICAgICAgICAgICAgICAgIHRoaXMuaGFuZGxlckJ0bign5pyq5byA5aeLJywgdHJ1ZSk7CiAgICAgICAgICAgICAgfSBlbHNlIGlmIChyZXMuaW5mby5saW1pdEFjdFN0YXRlID09IDEpIHsKICAgICAgICAgICAgICAgIHRoaXMuaGFuZGxlckJ0bign56uL5Y2z5oqi6LStJywgZmFsc2UpOwogICAgICAgICAgICAgIH0gZWxzZSBpZiAocmVzLmluZm8ubGltaXRBY3RTdGF0ZSA9PSAxMCkgewogICAgICAgICAgICAgICAgdGhpcy5oYW5kbGVyQnRuKCflt7LotK3kubAnLCB0cnVlKTsKICAgICAgICAgICAgICB9IGVsc2UgaWYgKHJlcy5pbmZvLmxpbWl0QWN0U3RhdGUgPT0gMykgewogICAgICAgICAgICAgICAgdGhpcy5oYW5kbGVyQnRuKCflt7LmiqLlrownLCB0cnVlKTsKICAgICAgICAgICAgICB9IGVsc2UgaWYgKHJlcy5pbmZvLmxpbWl0QWN0U3RhdGUgPT0gMikgewogICAgICAgICAgICAgICAgdGhpcy5oYW5kbGVyQnRuKCflt7LmiqLlrownLCB0cnVlKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KCiAgICAgICAgICB0aGlzLnNob3dCdG5UeHQgPSB0cnVlOyAvLyDlpoLmnpzpnIDopoHmmL7npLrlgJLorqHml7YKCiAgICAgICAgICBpZiAodGhpcy5zaG93VGltZSAmJiB0aGlzLmluZm8uY2hpbGRFbnVtS2V5ICE9ICdBQ1RfR0lGVF9QQUNLQUdFX1BVUkNIQVNFX0xJTUlUJykgewogICAgICAgICAgICBjbGVhckludGVydmFsKHRoaXMudGltZXIpOwogICAgICAgICAgICB2YXIgcmVtYWluVGltZSA9IHJlcy5pbmZvLnJlbWFpblRpbWU7CiAgICAgICAgICAgIHRoaXMudGltZXIgPSBzZXRJbnRlcnZhbCgoKSA9PiB7CiAgICAgICAgICAgICAgaWYgKHJlbWFpblRpbWUgPj0gMTAwMCkgewogICAgICAgICAgICAgICAgcmVtYWluVGltZSAtPSAxMDAwOwogICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICBjbGVhckludGVydmFsKHRoaXMudGltZXIpOwogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgdGhpcy5yZW1haW5UaW1lID0gcmVtYWluVGltZSB8fCAwOwogICAgICAgICAgICB9LCAxMDAwKTsKICAgICAgICAgIH0KCiAgICAgICAgICB0aGlzLmdldENhc2hOdW0oKTsgLy8g6I635Y+W5rS75Yqo57qi5YyF5b2T5YmN5Lqr55So5pyA5aSn57qi5YyFCiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHRoaXMuYmFja190byhyZXMpOwogICAgICAgIH0KICAgICAgfSkuZmluYWxseSgoKSA9PiB7CiAgICAgICAgdGhpcy4kVG9hc3QuY2xlYXIoKTsKICAgICAgfSk7CiAgICB9LAoKICAgIC8vIOmihuWPluekvOWMheaOpeWPo+iwg+eUqAogICAgLy8gcmVjZWl2ZVR5cGUg6I635Y+W5pa55byP77yMMeS8muWRmOmihuWPlu+8jDLkvJrlkZjotK3kubDvvIwz5rig6YGT6LSt5LmwCiAgICByZWNlaXZlR2lmdChyZWNlaXZlVHlwZSA9IDEpIHsKICAgICAgbGV0IGNvbmRpdGlvbkluZm8gPSB0aGlzLmNvbmRpdGlvbkluZm87CiAgICAgIGxldCB0cmFjdmVsVXNlckxpc3QgPSB0aGlzLnRyYWN2ZWxVc2VyTGlzdDsKCiAgICAgIGlmIChjb25kaXRpb25JbmZvLmlzQ29uZGl0aW9uICYmIHRyYWN2ZWxVc2VyTGlzdC5sZW5ndGggPT0gMCkgewogICAgICAgIC8vIOWIpOaWreaYr+WQpumcgOaxguWhq+WGmeS/oeaBrwogICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHsKICAgICAgICAgIG5hbWU6ICd0cmF2ZWxJbmZvcm1hdGlvbicsCiAgICAgICAgICBxdWVyeTogewogICAgICAgICAgICBhY3RTbjogdGhpcy5vcHRpb25zLmFjdFNuCiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICBsZXQgYWN0RGVhbCA9IF9wYXkuZGVmYXVsdC5hY3REZWFsKHsKICAgICAgICBjaXR5SWQ6IHRoaXMubG9jYXRpb25DaXR5LmNpdHlJZCwKICAgICAgICBhY3RTbjogdGhpcy5hY3RTbiwKICAgICAgICBkZWFsTnVtOiAxLAogICAgICAgIGNoYW5uZWxUeXBlOiB0aGlzLmNoYW5uZWxUeXBlLAogICAgICAgIHJlYWxGZWU6IDAsCiAgICAgICAgcmVjZWl2ZVR5cGUsCiAgICAgICAgb3BlblZpcDogZmFsc2UsCiAgICAgICAgLy/mmK/lkKblvIDpgJrmnIjljaHkvJrlkZjlubbotK3kubAKICAgICAgICBhY3RGZWU6IDAsCiAgICAgICAgLy/mtLvliqjmlK/ku5jotLnnlKgKICAgICAgICB2aXBGZWU6IDAsCiAgICAgICAgdmlwQ2FyZElkOiAnJywKICAgICAgICBidXlUeXBlOiAwLAogICAgICAgIHFyQ29kZTogdGhpcy5xckNvZGUsCiAgICAgICAgY29tcElkOiB0aGlzLmNvbXBJZCwKICAgICAgICAvLyDlkIjovpFJZAogICAgICAgIGNob29zZURhdGU6IHRoaXMuc2VsRGF0ZS5zdGFydFRpbWUgPyBfdXRpbHMuZGVmYXVsdC5mb3JtYXRUaW1lKHRoaXMuc2VsRGF0ZS5zdGFydFRpbWUgfHwgMCwgJ1lZWVlNTUREJykgOiAwLAogICAgICAgIC8vIOiHquaIkea4uOmAieaLqeaXtumXtAogICAgICAgIHRyYWN2ZWxVc2VyTGlzdDogSlNPTi5zdHJpbmdpZnkodGhpcy50cmFjdmVsVXNlckxpc3QpCiAgICAgIH0pOwoKICAgICAgaWYgKGFjdERlYWwpIHsKICAgICAgICBhY3REZWFsLnRoZW4ocmVzID0+IHsKICAgICAgICAgIGlmIChyZXMuc3RhdGUpIHsKICAgICAgICAgICAgLy8g5pS55Y+Y5YWo5bGA6IO95ZCm5YWN6LS56aKG5Y+W56S85YyF55qE54q25oCBCiAgICAgICAgICAgIHRoaXMuU0VUX1VQREFURUdJRlQodHJ1ZSk7IC8vIOa4hemZpOeUqOaIt+Whq+WGmeS/oeaBrwoKICAgICAgICAgICAgdGhpcy4kc2F2ZS5yZW1vdmUoJ3Nlc3Npb24nLCAndHJhdmVsSW5mb3JtYXRpb24nKTsKICAgICAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goewogICAgICAgICAgICAgIG5hbWU6ICdnaWZ0QmFnU3VjY2VzcycsCiAgICAgICAgICAgICAgcXVlcnk6IHsKICAgICAgICAgICAgICAgIHRyYWRlSWQ6IHJlcy5pbmZvLnRyYWRlSWQsCiAgICAgICAgICAgICAgICBhY3ROYW1lOiB0aGlzLmluZm8uYWN0TmFtZSwKICAgICAgICAgICAgICAgIHJlY2VpdmU6IDEsCiAgICAgICAgICAgICAgICBhY3RTbjogdGhpcy5hY3RTbgogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7IC8vIOi3s+i9rOmihuWPluaIkOWKn+mhtQogICAgICAgICAgICAvLyB3eC5uYXZpZ2F0ZVRvKHsKICAgICAgICAgICAgLy8gICB1cmw6IGAvcGFnZXMvYWN0aXZpdHkvZ2lmdF9iYWdfZGV0YWlsL3N1Y2Nlc3Mvc3VjY2Vzcz90cmFkZUlkPSR7cmVzLmluZm8udHJhZGVJZH0mYWN0TmFtZT0ke3RoaXMuaW5mby5hY3ROYW1lfSZyZWNlaXZlPTEmYWN0U249JHt0aGlzLmFjdFNufWAsCiAgICAgICAgICAgIC8vICAgc3VjY2VzczogKHJlc3VsdCk9PnsKICAgICAgICAgICAgLy8gICAgIHRoaXMuc2V0RGF0YSh7CiAgICAgICAgICAgIC8vICAgICAgIGlzQ2FuQ2xpY2s6IGZhbHNlIAogICAgICAgICAgICAvLyAgICAgfSkKICAgICAgICAgICAgLy8gICB9CiAgICAgICAgICAgIC8vIH0pOwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICB9CiAgICB9LAoKICAgIC8vIOWIpOaWreaYr+WQpuacieacquaUr+S7mOeahOiuouWNlQogICAgLy8gcmVjZWl2ZVR5cGUg6I635Y+W5pa55byP77yMMeS8muWRmOmihuWPlu+8jDLkvJrlkZjotK3kubDvvIwz5rig6YGT6LSt5LmwCiAgICBvcmRlclVucGF5KHJlY2VpdmVUeXBlKSB7CiAgICAgIHRoaXMuJHNhdmUuc2V0KCdzZXNzaW9uJywgJ29yZGVySW5mbycsIHRoaXMuaW5mbyk7CiAgICAgIGNvbnNvbGUubG9nKCd0aGlzLmluZm8nLCB0aGlzLmluZm8pOwogICAgICBpZiAodGhpcy5pc0NhbkNsaWNrMikgcmV0dXJuOwogICAgICB0aGlzLmlzQ2FuQ2xpY2syID0gdHJ1ZTsKICAgICAgdGhpcy4kYXBpLm9yZGVyX3VucGF5KHsKICAgICAgICBhY3RTbjogdGhpcy5hY3RTbgogICAgICB9KS50aGVuKHJlcyA9PiB7CiAgICAgICAgaWYgKHJlcy5zdGF0ZSkgewogICAgICAgICAgaWYgKHJlcy5pbmZvLmV4aXN0c1VuUGF5KSB7CiAgICAgICAgICAgIC8vIOWmguaenOWtmOWcqOacquaUr+S7mOeahOiuouWNle+8jOi3s+i9rOWIsOiuouWNleWIl+ihqOmhtQogICAgICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCh7CiAgICAgICAgICAgICAgbmFtZTogJ29yZGVyTGlzdCcKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICB0aGlzLmp1bXBTdWJtaXQocmVjZWl2ZVR5cGUpOwogICAgICAgICAgICB0aGlzLmlzQ2FuQ2xpY2syID0gZmFsc2U7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9KS5jYXRjaCgoKSA9PiB7CiAgICAgICAgdGhpcy5pc0NhbkNsaWNrMiA9IGZhbHNlOwogICAgICB9KTsKICAgIH0sCgogICAgLy8g6Lez6L2s6LSt5Lmw6aG16Z2iCiAgICBqdW1wU3VibWl0KHJlY2VpdmVUeXBlKSB7CiAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHsKICAgICAgICBuYW1lOiAnc3VibWl0T3JkZXInLAogICAgICAgIHF1ZXJ5OiB7CiAgICAgICAgICBxckNvZGU6IHRoaXMub3B0aW9ucy5xckNvZGUgfHwgJycsCiAgICAgICAgICBjb21wSWQ6IHRoaXMub3B0aW9ucy5jb21wSWQgfHwgJycsCiAgICAgICAgICBhY3RTbjogdGhpcy5vcHRpb25zLmFjdFNuLAogICAgICAgICAgY2hhbm5lbFR5cGU6IHRoaXMub3B0aW9ucy5jaGFubmVsVHlwZSwKICAgICAgICAgIHJlY2VpdmVUeXBlOiByZWNlaXZlVHlwZQogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAoKICAgIC8vIOmdnuS8muWRmOW8gOmAmuW5tumihuWPlgogICAgb3BlblJlY2VpdmUoKSB7CiAgICAgIHRoaXMuJHNldCh0aGlzLmluZm8sICdzZWxsUHJpY2UnLCAwKTsKICAgICAgdGhpcy4kc2V0KHRoaXMuaW5mbywgJ25vVmlwUHJpY2UnLCAwKTsKICAgICAgdGhpcy4kc2F2ZS5zZXQoJ3Nlc3Npb24nLCAnb3JkZXJJbmZvJywgdGhpcy5pbmZvKTsgLy8g6Z2e5Lya5ZGY5byA6YCa5bm26aKG5Y+WCgogICAgICBsZXQgcmVjZWl2ZVR5cGUgPSB0aGlzLmNoYW5uZWxUeXBlID09ICdDSEFOTkVMX0FDVElWSVRZX0xBQkVMX1NIT1cnID8gNCA6IDE7CiAgICAgIHRoaXMuanVtcFN1Ym1pdChyZWNlaXZlVHlwZSk7CiAgICB9LAoKICAgIGhhbmRsZXJMaW1pdEV2ZW50KCkgewogICAgICBpZiAodGhpcy5pbmZvLmxpbWl0QWN0U3RhdGUgPT0gMTIpIHsKICAgICAgICB0aGlzLiRUb2FzdCgn5b2T5YmN5ZCI6L6R6Z2e6L+b6KGM5Lit54q25oCBJyk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgaWYgKHRoaXMuYnRuVGV4dCA9PSAn56uL5Y2z5oqi6LStJykgewogICAgICAgICAgdGhpcy4kc2F2ZS5zZXQoJ3Nlc3Npb24nLCAnb3JkZXJJbmZvJywgdGhpcy5pbmZvKTsKICAgICAgICAgIHRoaXMuanVtcFN1Ym1pdCgyKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0sCgogICAgLyoqCiAgICAqIOmihuWPluaIluiAheaKoui0reekvOWMhQogICAgICAgIHJlc3RyaWN0U3RhdGUgIOaYr+WQpuWPr+i0reS5sO+8mjHlkKYgMuaYrwogICAgICAgIHJlY2VpdmVUeXBlOiDlpJbpg6jmuKDpgZN7CiAgICAgICAgICDotK3kubDvvJogMwogICAgICAgICAg5YWN6LS56aKGOiAgMQogICAgICAgIH0KICAgICovCiAgICBnZXRHaWZ0KCkgewogICAgICB2YXIgdmlwVXNlciA9IHRoaXMudmlwQ2FyZEluZm8udmlwVXNlcjsKICAgICAgdmFyIGlzbmV3VXNlciA9IHRoaXMucmVhbEluZm8ubmV3VXNlcjsKICAgICAgbGV0IHBhY2thZ2VHaWZ0VHlwZSA9IHRoaXMuaW5mby5wYWNrYWdlR2lmdFR5cGU7IC8vIDHllK7ljZYgMuWFjei0uemihgoKICAgICAgbGV0IGZyZWVSZWNlaXZlVHlwZSA9IHRoaXMuaW5mby5mcmVlUmVjZWl2ZVR5cGU7IC8vIDHmiYDmnInkurrlj6/pooblj5YgMuS7hemZkOaWsOeUqOaItyAz5LuF6ZmQ5Lya5ZGYIDTku4XpmZDpnZ7kvJrlkZgKCiAgICAgIGxldCByZXN0cmljdFN0YXRlID0gdGhpcy5pbmZvLnJlc3RyaWN0U3RhdGU7CiAgICAgIGxldCBjaGFubmVsVHJhY2sgPSB0aGlzLmluZm8uY2hhbm5lbFRyYWNrOyAvLyDpgJrov4fov5nkuKrlrZfmrrXvvIzliKTmlq3nlKhwYWNrYWdlR2lmdFR5cGXov5jmmK9yZXN0cmljdFN0YXRl5a2X5q61CgogICAgICB2YXIganVtcFNhdGUgPSBmYWxzZTsgLy8g55So5p2l5Yik5pat5piv5ZCm5o+Q56S65LuF6ZmQ5p+Q55So5oi36aKG5Y+WCgogICAgICBpZiAoZnJlZVJlY2VpdmVUeXBlID09IDEpIHsKICAgICAgICAvLyDmiYDmnInkurrlj6/pooblj5YKICAgICAgICBqdW1wU2F0ZSA9IHRydWU7CiAgICAgIH0gZWxzZSBpZiAoZnJlZVJlY2VpdmVUeXBlID09IDIgJiYgaXNuZXdVc2VyKSB7CiAgICAgICAgLy8g5Yik5pat55So5oi35piv5ZCm5Li65paw55So5oi3CiAgICAgICAganVtcFNhdGUgPSB0cnVlOwogICAgICB9IGVsc2UgaWYgKGZyZWVSZWNlaXZlVHlwZSA9PSAzICYmIHZpcFVzZXIpIHsKICAgICAgICAvLyDliKTmlq3mmK/lkKbku4XkvJrlkZjpooblj5YKICAgICAgICBqdW1wU2F0ZSA9IHRydWU7CiAgICAgIH0gZWxzZSBpZiAoZnJlZVJlY2VpdmVUeXBlID09IDQgJiYgIXZpcFVzZXIpIHsKICAgICAgICAvLyDliKTmlq3mmK/lkKbku4XpnZ7kvJrlkZjpooblj5YKICAgICAgICBqdW1wU2F0ZSA9IHRydWU7CiAgICAgIH0gLy8g5aaC5p6c5piv5byA6YCa5bm26aKG5Y+WCgoKICAgICAgaWYgKHRoaXMub3Blbl9yZWNlaXZlKSB7CiAgICAgICAgdGhpcy4kc2V0KHRoaXMuaW5mbywgJ3NlbGxQcmljZScsIDApOwogICAgICAgIHRoaXMuJHNldCh0aGlzLmluZm8sICdub1ZpcFByaWNlJywgMCk7CiAgICAgIH0KCiAgICAgIHRoaXMuJHNhdmUuc2V0KCdzZXNzaW9uJywgJ29yZGVySW5mbycsIHRoaXMuaW5mbyk7CgogICAgICBpZiAodGhpcy5oYXNFeGNoYW5nZSAhPSAnJykgewogICAgICAgIC8vIOWIpOaWreWFkeWlluS4reW/g+i/m+WFpSDnq4vljbPlhZHmjaIKICAgICAgICBsZXQgY29uZGl0aW9uSW5mbyA9IHRoaXMuY29uZGl0aW9uSW5mbzsKICAgICAgICBsZXQgdHJhY3ZlbFVzZXJMaXN0ID0gdGhpcy50cmFjdmVsVXNlckxpc3Q7CgogICAgICAgIGlmIChjb25kaXRpb25JbmZvLmlzQ29uZGl0aW9uICYmIHRyYWN2ZWxVc2VyTGlzdC5sZW5ndGggPT0gMCkgewogICAgICAgICAgLy8g5Yik5pat5piv5ZCm6ZyA5rGC5aGr5YaZ5L+h5oGvCiAgICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCh7CiAgICAgICAgICAgIG5hbWU6ICd0cmF2ZWxJbmZvcm1hdGlvbicsCiAgICAgICAgICAgIHF1ZXJ5OiB7CiAgICAgICAgICAgICAgYWN0U246IHRoaXMub3B0aW9ucy5hY3RTbgogICAgICAgICAgICB9CiAgICAgICAgICB9KTsKICAgICAgICAgIHJldHVybjsKICAgICAgICB9CgogICAgICAgIGlmICghdGhpcy5idG5EaXNhYmxlZCkgdGhpcy5leGNoYW5nZSgpOwogICAgICB9IGVsc2UgaWYgKHRoaXMuaW5mby5jaGlsZEVudW1LZXkgPT0gJ0FDVF9HSUZUX1BBQ0tBR0VfUFVSQ0hBU0VfTElNSVQnKSB7CiAgICAgICAgdGhpcy5oYW5kbGVyTGltaXRFdmVudCgpOwogICAgICB9IGVsc2UgaWYgKHRoaXMuaW5mby5hY3RTdGF0ZSA9PSAyKSB7CiAgICAgICAgLy8g5Yik5pat5piv5ZCm5piv5LuO5aSW6YOo5rig6YGT6L+b5YWl77yM5aSW6YOo5rig6YGT6L+b5YWl5pe277yM5aaC5p6c6YWN572u55So5oi35Y+v6LSt5Lmw77yM6Z2e5Lya5ZGY5Lmf5Y+v6LSt5Lmw56S85YyFCiAgICAgICAgbGV0IGJ1eUxpbWl0ID0gdGhpcy5pbmZvLmJ1eUxpbWl0OwogICAgICAgIGxldCBzZWxsUHJpY2UgPSB0aGlzLmluZm8uc2VsbFByaWNlOwogICAgICAgIGxldCBub1ZpcFByaWNlID0gdGhpcy5pbmZvLm5vVmlwUHJpY2U7CiAgICAgICAgbGV0IGJ1eVN0YXRlID0gZmFsc2U7IC8vICDmiYDmnInkurogICDkvJogMCAgIOmdniAwCgogICAgICAgIGlmIChidXlMaW1pdCA9PSAxICYmIG5vVmlwUHJpY2UgPT0gMCAmJiBzZWxsUHJpY2UgPT0gMCkgewogICAgICAgICAgYnV5U3RhdGUgPSBmYWxzZTsgLy8gIOS8muWRmOi6q+S7vQogICAgICAgIH0gZWxzZSBpZiAodmlwVXNlciAmJiBzZWxsUHJpY2UgPiAwKSB7CiAgICAgICAgICBidXlTdGF0ZSA9IHRydWU7CiAgICAgICAgfSBlbHNlIGlmICghdmlwVXNlcikgewogICAgICAgICAgYnV5U3RhdGUgPSBidXlMaW1pdCA9PSAyID8gdHJ1ZSA6IG5vVmlwUHJpY2UgPiAwOwogICAgICAgIH0KCiAgICAgICAgaWYgKGNoYW5uZWxUcmFjayA/IHBhY2thZ2VHaWZ0VHlwZSA9PSAxIDogcmVzdHJpY3RTdGF0ZSA9PSAyKSB7CiAgICAgICAgICBpZiAoYnV5U3RhdGUpIHsKICAgICAgICAgICAgLy8g6LSt5Lmw56S85YyFCiAgICAgICAgICAgIC8vIOWmguaenOaYr+WklumDqOa4oOmBk+W5tuS4lOaYr+mihuWPlueKtuaAge+8jHJlY2VpdmVUeXBl5Li6NO+8jOi0reS5sOeKtuaAgXJlY2VpdmVUeXBl5Li6MgogICAgICAgICAgICBsZXQgcmVjZWl2ZVR5cGUgPSB0aGlzLmNoYW5uZWxUeXBlID09ICdDSEFOTkVMX0FDVElWSVRZX0xBQkVMX1NIT1cnICYmIHRoaXMub3Blbl9yZWNlaXZlID8gNCA6IDI7CgogICAgICAgICAgICBpZiAoYnV5TGltaXQgPT0gMiAmJiBzZWxsUHJpY2UgPT0gMCkgewogICAgICAgICAgICAgIHJlY2VpdmVUeXBlID0gMTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgdGhpcy5vcmRlclVucGF5KHJlY2VpdmVUeXBlKTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIC8vIOS9v+eUqOWtl+autXJlc3RyaWN0U3RhdGXliKTmlq0KICAgICAgICAgICAgdGhpcy5yZWNlaXZlR2lmdCg0KTsKICAgICAgICAgIH0KICAgICAgICB9IGVsc2UgaWYgKGNoYW5uZWxUcmFjayA/IHBhY2thZ2VHaWZ0VHlwZSA9PSAyIDogcmVzdHJpY3RTdGF0ZSA9PSAxKSB7CiAgICAgICAgICAvLyDlhY3otLnpooYKICAgICAgICAgIGlmIChjaGFubmVsVHJhY2spIHsKICAgICAgICAgICAgLy8g5L2/55So5a2X5q61cGFja2FnZUdpZnRUeXBl5Yik5patCiAgICAgICAgICAgIGlmIChmcmVlUmVjZWl2ZVR5cGUgIT0gMSAmJiAhanVtcFNhdGUpIHsKICAgICAgICAgICAgICB0aGlzLiRUb2FzdChg5LuF6ZmQJHt0aGlzLnJlY2VpdmVPYmpbZnJlZVJlY2VpdmVUeXBlXX3pooblj5ZgKTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICB0aGlzLnJlY2VpdmVHaWZ0KDQpOwogICAgICAgICAgICB9CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAvLyDkvb/nlKjlrZfmrrVyZXN0cmljdFN0YXRl5Yik5patCiAgICAgICAgICAgIHRoaXMucmVjZWl2ZUdpZnQoNCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CiAgICB9LAoKICAgIC8vIOWFkeaNogogICAgZXhjaGFuZ2UoKSB7CiAgICAgIGxldCBpdGVtID0gdGhpcy5leGNoYW5nZV9kYXRhOwogICAgICB0aGlzLiRkaWFsb2cuY29uZmlybSh7CiAgICAgICAgdGl0bGU6IGDmmK/lkKbnoa7orqTlhZHmjaIke2l0ZW0uYWN0TmFtZSB8fCAnJ30/YCwKICAgICAgICBtZXNzYWdlOiAn5YWR5o2i5ZCO5LiN5Y+v5pu05pS55LiU5Y6f5pyJ5r2u5Y2h5bCG5Lya5riF56m6JwogICAgICB9KS50aGVuKCgpID0+IHsKICAgICAgICB0aGlzLnByaWNlRXhjaGFuZ2UoaXRlbSk7CiAgICAgIH0pLmNhdGNoKCgpID0+IHsvLyBvbiBjYW5jZWwKICAgICAgfSk7CiAgICB9LAoKICAgIC8vIOW8gOWni+WFkeaNogogICAgcHJpY2VFeGNoYW5nZShpdGVtKSB7CiAgICAgIGlmICh0aGlzLmNhbkNsaWNrKSByZXR1cm47CiAgICAgIHRoaXMuY2FuQ2xpY2sgPSB0cnVlOwogICAgICB0aGlzLiRhcGkucHJpY2VfZXhjaGFuZ2UoewogICAgICAgIGFjdFNuOiBpdGVtLmFjdFNuLAogICAgICAgIGF3YXJkSWQ6IGl0ZW0uYXdhcmRJZCwKICAgICAgICBjaXR5SWQ6IHRoaXMubG9jYXRpb25DaXR5LmNpdHlJZCwKICAgICAgICBjaG9vc2VEYXRlOiB0aGlzLnNlbERhdGUuc3RhcnRUaW1lID8gX3V0aWxzLmRlZmF1bHQuZm9ybWF0VGltZSh0aGlzLnNlbERhdGUuc3RhcnRUaW1lIHx8IDAsICdZWVlZTU1ERCcpIDogMCwKICAgICAgICAvLyDoh6rmiJHmuLjpgInmi6nml7bpl7QKICAgICAgICB0cmFjdmVsVXNlckxpc3Q6IEpTT04uc3RyaW5naWZ5KHRoaXMudHJhY3ZlbFVzZXJMaXN0KQogICAgICB9KS50aGVuKHJlcyA9PiB7CiAgICAgICAgaWYgKHJlcy5zdGF0ZSkgewogICAgICAgICAgdGhpcy5tYXNrID0gdHJ1ZTsKICAgICAgICAgIHRoaXMuaGFuZGxlckJ0bign5bey5YWR5o2iJywgdHJ1ZSk7IC8vIOa4hemZpOeUqOaIt+Whq+WGmeS/oeaBrwoKICAgICAgICAgIHRoaXMuJHNhdmUucmVtb3ZlKCdzZXNzaW9uJywgJ3RyYXZlbEluZm9ybWF0aW9uJyk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHRoaXMuJFRvYXN0KHJlcy5tZXNzYWdlKTsKICAgICAgICB9CiAgICAgIH0pLmZpbmFsbHkoKCkgPT4gewogICAgICAgIHNldFRpbWVvdXQoKCkgPT4gewogICAgICAgICAgdGhpcy5jYW5DbGljayA9IGZhbHNlOwogICAgICAgIH0sIDMwMCk7CiAgICAgIH0pOwogICAgfSwKCiAgICBnb0NhcmQoKSB7CiAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHsKICAgICAgICBuYW1lOiAnY291cG9uTGlzdCcKICAgICAgfSk7CiAgICB9LAoKICAgIGNsb3NlKCkgewogICAgICB0aGlzLm1hc2sgPSBmYWxzZTsKICAgIH0sCgogICAgLy8g6I635Y+W5Lya5ZGY5Y2h5pyA5L2O5Lu35qC8CiAgICB2aXBQcmljZSgpIHsKICAgICAgdGhpcy4kYXBpLmxvd19wcmljZSh7fSkudGhlbihyZXMgPT4gewogICAgICAgIGlmIChyZXMuc3RhdGUpIHsKICAgICAgICAgIHRoaXMubG93UHJpY2UgPSByZXMuaW5mby5sb3dQcmljZTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKCiAgICBzaG93T3JkZXJUaXAoKSB7CiAgICAgIHRoaXMuJGRpYWxvZy5hbGVydCh7CiAgICAgICAgdGl0bGU6ICfmj5DnpLonLAogICAgICAgIG1lc3NhZ2U6ICforqLljZXotoXml7blt7Llj5bmtojvvIzor7fph43mlrDkuIvljZUnLAogICAgICAgIGNvbmZpcm1CdXR0b25UZXh0OiAn56Gu5a6aJywKICAgICAgICBjb25maXJtQnV0dG9uQ29sb3I6ICcjRDkwNjM0JwogICAgICB9KTsKICAgIH0sCgogICAgdG9Kb2luKCkgewogICAgICB0aGlzLiRyb3V0ZXIucHVzaCh7CiAgICAgICAgbmFtZTogJ2pvaW5WaXAnLAogICAgICAgIHF1ZXJ5OiB7CiAgICAgICAgICBjaGFubmVsVHlwZTogdGhpcy5jaGFubmVsVHlwZQogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAoKICAgIC8vIOWFs+mXree6ouWMheWIl+ihqAogICAgY29sc2VjYXNoTWFzaygpIHsKICAgICAgdGhpcy5jYXNoTWFzayA9ICF0aGlzLmNhc2hNYXNrOwogICAgfSwKCiAgICAvLyDojrflj5bmtLvliqjnuqLljIXlvZPliY3kuqvnlKjmnIDlpKfnuqLljIUKICAgIGdldENhc2hOdW0oKSB7CiAgICAgIGxldCB2aXBfY2hlY2sgPSAhdGhpcy52aXBVc2VyICYmIHRoaXMuaW5mby5idXlMaW1pdCA9PSAyID8gdHJ1ZSA6IGZhbHNlOwogICAgICBsZXQgcHJpY2UgPSB0aGlzLmluZm8uYnV5TGltaXQgPT0gMiB8fCB0aGlzLnZpcFVzZXIgPyB0aGlzLmluZm8uc2VsbFByaWNlIDogdGhpcy5pbmZvLm5vVmlwUHJpY2U7CiAgICAgIHRoaXMuJGFwaS5jYXNoX3JlZF9saXN0KHsKICAgICAgICBhY3RTbjogdGhpcy5hY3RTbiwKICAgICAgICBjaXR5SWQ6IHRoaXMubG9jYXRpb25DaXR5LmNpdHlJZCwKICAgICAgICBvcGVuVmlwOiB2aXBfY2hlY2ssCiAgICAgICAgLy8g5piv5ZCm5Yu+6YCJ5Lya5ZGY5Y2hCiAgICAgICAgdmlwRmVlOiB2aXBfY2hlY2sgPyB0aGlzLmxvd1ByaWNlIDogMCwKICAgICAgICAvLyDkvJrlkZjljaHph5Hpop0KICAgICAgICBhY3RGZWU6IHByaWNlLAogICAgICAgIC8vIOa0u+WKqOmHkeminQogICAgICAgIGNhcmRJZDogIiIgLy8g54m55Y2W5Y2h5Yi4aWQgfHwg56S85YyF5Lyg56m6CgogICAgICB9KS50aGVuKHJlcyA9PiB7CiAgICAgICAgaWYgKHJlcy5zdGF0ZSkgewogICAgICAgICAgbGV0IHJlZExpc3QgPSByZXMuaW5mby5jYXNoUmVkTGlzdCB8fCBbXTsKICAgICAgICAgIGxldCBjb25zdW1lckNvdXBvbkxpc3QgPSByZXMuaW5mby5jb25zdW1lckNvdXBvbkxpc3QgfHwgW107CiAgICAgICAgICBsZXQgdXNhYmxlTGlzdCA9IHJlZExpc3QuZmlsdGVyKGl0ZW0gPT4gaXRlbS5jdXJyZW50QWJsZVVzZSk7IC8vIOi/h+a7pOWPr+eUqOe6ouWMhQoKICAgICAgICAgIGxldCBzb3J0VXNhYmxlTGlzdCA9IHVzYWJsZUxpc3Quc29ydChmdW5jdGlvbiAoYSwgYikgewogICAgICAgICAgICAvLyDpmY3luo/mjpLluo8KICAgICAgICAgICAgcmV0dXJuIGIubW9uZXkgLSBhLm1vbmV5OwogICAgICAgICAgfSk7CiAgICAgICAgICB0aGlzLnNlbENhc2hyZWQgPSBzb3J0VXNhYmxlTGlzdFswXSB8fCB7fTsgLy8g6YCJ5Lit5pyA5aSn57qi5YyFCgogICAgICAgICAgaWYgKGNvbnN1bWVyQ291cG9uTGlzdC5sZW5ndGgpIHsKICAgICAgICAgICAgdGhpcy5zZWxDb25zdW1lciA9IGNvbnN1bWVyQ291cG9uTGlzdFswXSB8fCB7fTsgLy8g6YCJ5Lit5raI6LS55Yi4CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9KS5maW5hbGx5KCgpID0+IHt9KTsKICAgIH0sCgogICAgaGFzQ2FjaFJlZExpc3QoewogICAgICBkZXRhaWwKICAgIH0pIHsKICAgICAgaWYgKGRldGFpbCAmJiBkZXRhaWwubGVuZ3RoID4gMCkgewogICAgICAgIC8vIOmHjeaWsOivt+axgue6ouWMheaOpeWPowogICAgICAgIHRoaXMuc2VsZWN0Q29tcG9uZW50KCcjYWN0aXZlQ2FzaCcpLmdldENhc2hMaXN0KCk7CiAgICAgICAgdGhpcy5nZXRDYXNoTnVtKCk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5zaG93UGFnZU1vZGVsID0gdHJ1ZTsKICAgICAgfQogICAgfSwKCiAgICAvKioKICAgICAqIOmihuWPluaIluiAheaKoui0reekvOWMhQogICAgICAgIHJlc3RyaWN0U3RhdGUgIOaYr+WQpuWPr+i0reS5sO+8mjHlkKYgMuaYrwogICAgICAgIHJlY2VpdmVUeXBlOiDlpJbpg6jmuKDpgZN7CiAgICAgICAgICDotK3kubDvvJogMwogICAgICAgICAg5YWN6LS56aKGOiAgMQogICAgICAgIH0KICAgICovCiAgICBnZXRHaWZ0KCkgewogICAgICB2YXIgdmlwVXNlciA9IHRoaXMudmlwQ2FyZEluZm8udmlwVXNlcjsKICAgICAgdmFyIGlzbmV3VXNlciA9IHRoaXMucmVhbEluZm8ubmV3VXNlcjsKICAgICAgbGV0IHBhY2thZ2VHaWZ0VHlwZSA9IHRoaXMuaW5mby5wYWNrYWdlR2lmdFR5cGU7IC8vIDHllK7ljZYgMuWFjei0uemihgoKICAgICAgbGV0IGZyZWVSZWNlaXZlVHlwZSA9IHRoaXMuaW5mby5mcmVlUmVjZWl2ZVR5cGU7IC8vIDHmiYDmnInkurrlj6/pooblj5YgMuS7hemZkOaWsOeUqOaItyAz5LuF6ZmQ5Lya5ZGYIDTku4XpmZDpnZ7kvJrlkZgKCiAgICAgIGxldCByZXN0cmljdFN0YXRlID0gdGhpcy5pbmZvLnJlc3RyaWN0U3RhdGU7CiAgICAgIGxldCBjaGFubmVsVHJhY2sgPSB0aGlzLmluZm8uY2hhbm5lbFRyYWNrOyAvLyDpgJrov4fov5nkuKrlrZfmrrXvvIzliKTmlq3nlKhwYWNrYWdlR2lmdFR5cGXov5jmmK9yZXN0cmljdFN0YXRl5a2X5q61CgogICAgICB2YXIganVtcFNhdGUgPSBmYWxzZTsgLy8g55So5p2l5Yik5pat5piv5ZCm5o+Q56S65LuF6ZmQ5p+Q55So5oi36aKG5Y+WCgogICAgICBpZiAoZnJlZVJlY2VpdmVUeXBlID09IDEpIHsKICAgICAgICAvLyDmiYDmnInkurrlj6/pooblj5YKICAgICAgICBqdW1wU2F0ZSA9IHRydWU7CiAgICAgIH0gZWxzZSBpZiAoZnJlZVJlY2VpdmVUeXBlID09IDIgJiYgaXNuZXdVc2VyKSB7CiAgICAgICAgLy8g5Yik5pat55So5oi35piv5ZCm5Li65paw55So5oi3CiAgICAgICAganVtcFNhdGUgPSB0cnVlOwogICAgICB9IGVsc2UgaWYgKGZyZWVSZWNlaXZlVHlwZSA9PSAzICYmIHZpcFVzZXIpIHsKICAgICAgICAvLyDliKTmlq3mmK/lkKbku4XkvJrlkZjpooblj5YKICAgICAgICBqdW1wU2F0ZSA9IHRydWU7CiAgICAgIH0gZWxzZSBpZiAoZnJlZVJlY2VpdmVUeXBlID09IDQgJiYgIXZpcFVzZXIpIHsKICAgICAgICAvLyDliKTmlq3mmK/lkKbku4XpnZ7kvJrlkZjpooblj5YKICAgICAgICBqdW1wU2F0ZSA9IHRydWU7CiAgICAgIH0gLy8g5aaC5p6c5piv5byA6YCa5bm26aKG5Y+WCgoKICAgICAgaWYgKHRoaXMub3Blbl9yZWNlaXZlKSB7CiAgICAgICAgdGhpcy4kc2V0KHRoaXMuaW5mbywgJ3NlbGxQcmljZScsIDApOwogICAgICAgIHRoaXMuJHNldCh0aGlzLmluZm8sICdub1ZpcFByaWNlJywgMCk7CiAgICAgIH0KCiAgICAgIHRoaXMuJHNhdmUuc2V0KCdzZXNzaW9uJywgJ29yZGVySW5mbycsIHRoaXMuaW5mbyk7CgogICAgICBpZiAodGhpcy5oYXNFeGNoYW5nZSAhPSAnJykgewogICAgICAgIC8vIOWIpOaWreWFkeWlluS4reW/g+i/m+WFpSDnq4vljbPlhZHmjaIKICAgICAgICBsZXQgY29uZGl0aW9uSW5mbyA9IHRoaXMuY29uZGl0aW9uSW5mbzsKICAgICAgICBsZXQgdHJhY3ZlbFVzZXJMaXN0ID0gdGhpcy50cmFjdmVsVXNlckxpc3Q7CgogICAgICAgIGlmIChjb25kaXRpb25JbmZvLmlzQ29uZGl0aW9uICYmIHRyYWN2ZWxVc2VyTGlzdC5sZW5ndGggPT0gMCkgewogICAgICAgICAgLy8g5Yik5pat5piv5ZCm6ZyA5rGC5aGr5YaZ5L+h5oGvCiAgICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCh7CiAgICAgICAgICAgIG5hbWU6ICd0cmF2ZWxJbmZvcm1hdGlvbicsCiAgICAgICAgICAgIHF1ZXJ5OiB7CiAgICAgICAgICAgICAgYWN0U246IHRoaXMub3B0aW9ucy5hY3RTbgogICAgICAgICAgICB9CiAgICAgICAgICB9KTsKICAgICAgICAgIHJldHVybjsKICAgICAgICB9CgogICAgICAgIGlmICghdGhpcy5idG5EaXNhYmxlZCkgdGhpcy5leGNoYW5nZSgpOwogICAgICB9IGVsc2UgaWYgKHRoaXMuaW5mby5jaGlsZEVudW1LZXkgPT0gJ0FDVF9HSUZUX1BBQ0tBR0VfUFVSQ0hBU0VfTElNSVQnKSB7CiAgICAgICAgdGhpcy5oYW5kbGVyTGltaXRFdmVudCgpOwogICAgICB9IGVsc2UgaWYgKHRoaXMuaW5mby5hY3RTdGF0ZSA9PSAyKSB7CiAgICAgICAgLy8g5Yik5pat5piv5ZCm5piv5LuO5aSW6YOo5rig6YGT6L+b5YWl77yM5aSW6YOo5rig6YGT6L+b5YWl5pe277yM5aaC5p6c6YWN572u55So5oi35Y+v6LSt5Lmw77yM6Z2e5Lya5ZGY5Lmf5Y+v6LSt5Lmw56S85YyFCiAgICAgICAgbGV0IGJ1eUxpbWl0ID0gdGhpcy5pbmZvLmJ1eUxpbWl0OwogICAgICAgIGxldCBzZWxsUHJpY2UgPSB0aGlzLmluZm8uc2VsbFByaWNlOwogICAgICAgIGxldCBub1ZpcFByaWNlID0gdGhpcy5pbmZvLm5vVmlwUHJpY2U7CiAgICAgICAgbGV0IGJ1eVN0YXRlID0gZmFsc2U7IC8vICDmiYDmnInkurogICDkvJogMCAgIOmdniAwCgogICAgICAgIGlmIChidXlMaW1pdCA9PSAxICYmIG5vVmlwUHJpY2UgPT0gMCAmJiBzZWxsUHJpY2UgPT0gMCkgewogICAgICAgICAgYnV5U3RhdGUgPSBmYWxzZTsgLy8gIOS8muWRmOi6q+S7vQogICAgICAgIH0gZWxzZSBpZiAodmlwVXNlciAmJiBzZWxsUHJpY2UgPiAwKSB7CiAgICAgICAgICBidXlTdGF0ZSA9IHRydWU7CiAgICAgICAgfSBlbHNlIGlmICghdmlwVXNlcikgewogICAgICAgICAgYnV5U3RhdGUgPSBidXlMaW1pdCA9PSAyID8gdHJ1ZSA6IG5vVmlwUHJpY2UgPiAwOwogICAgICAgIH0KCiAgICAgICAgaWYgKGNoYW5uZWxUcmFjayA/IHBhY2thZ2VHaWZ0VHlwZSA9PSAxIDogcmVzdHJpY3RTdGF0ZSA9PSAyKSB7CiAgICAgICAgICBpZiAoYnV5U3RhdGUpIHsKICAgICAgICAgICAgLy8g6LSt5Lmw56S85YyFCiAgICAgICAgICAgIC8vIOWmguaenOaYr+WklumDqOa4oOmBk+W5tuS4lOaYr+mihuWPlueKtuaAge+8jHJlY2VpdmVUeXBl5Li6NO+8jOi0reS5sOeKtuaAgXJlY2VpdmVUeXBl5Li6MgogICAgICAgICAgICBsZXQgcmVjZWl2ZVR5cGUgPSB0aGlzLmNoYW5uZWxUeXBlID09ICdDSEFOTkVMX0FDVElWSVRZX0xBQkVMX1NIT1cnICYmIHRoaXMub3Blbl9yZWNlaXZlID8gNCA6IDI7CgogICAgICAgICAgICBpZiAoYnV5TGltaXQgPT0gMiAmJiBzZWxsUHJpY2UgPT0gMCkgewogICAgICAgICAgICAgIHJlY2VpdmVUeXBlID0gMTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgdGhpcy5vcmRlclVucGF5KHJlY2VpdmVUeXBlKTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIC8vIOS9v+eUqOWtl+autXJlc3RyaWN0U3RhdGXliKTmlq0KICAgICAgICAgICAgdGhpcy5yZWNlaXZlR2lmdCg0KTsKICAgICAgICAgIH0KICAgICAgICB9IGVsc2UgaWYgKGNoYW5uZWxUcmFjayA/IHBhY2thZ2VHaWZ0VHlwZSA9PSAyIDogcmVzdHJpY3RTdGF0ZSA9PSAxKSB7CiAgICAgICAgICAvLyDlhY3otLnpooYKICAgICAgICAgIGlmIChjaGFubmVsVHJhY2spIHsKICAgICAgICAgICAgLy8g5L2/55So5a2X5q61cGFja2FnZUdpZnRUeXBl5Yik5patCiAgICAgICAgICAgIGlmIChmcmVlUmVjZWl2ZVR5cGUgIT0gMSAmJiAhanVtcFNhdGUpIHsKICAgICAgICAgICAgICB0aGlzLiRUb2FzdChg5LuF6ZmQJHt0aGlzLnJlY2VpdmVPYmpbZnJlZVJlY2VpdmVUeXBlXX3pooblj5ZgKTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICB0aGlzLnJlY2VpdmVHaWZ0KDQpOwogICAgICAgICAgICB9CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAvLyDkvb/nlKjlrZfmrrVyZXN0cmljdFN0YXRl5Yik5patCiAgICAgICAgICAgIHRoaXMucmVjZWl2ZUdpZnQoNCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CiAgICB9CgogIH0sCgogIGFzeW5jIGNyZWF0ZWQoKSB7CiAgICB0aGlzLm9wdGlvbnMgPSB0aGlzLiRyb3V0ZS5xdWVyeTsKICAgIHRoaXMuYWN0U24gPSB0aGlzLm9wdGlvbnMuYWN0U247CiAgICB0aGlzLnFyQ29kZSA9IHRoaXMub3B0aW9ucy5xckNvZGUgfHwgJyc7CiAgICB0aGlzLmNoYW5uZWxUeXBlID0gdGhpcy5vcHRpb25zLmNoYW5uZWxUeXBlIHx8ICcnOwogICAgdGhpcy5jb21wSWQgPSB0aGlzLm9wdGlvbnMuY29tcElkIHx8ICcnOwogICAgdGhpcy5oYXNFeGNoYW5nZSA9IHRoaXMub3B0aW9ucy5oYXNFeGNoYW5nZSB8fCAnJzsKICAgIGF3YWl0IHRoaXMuZ2V0UmVhbFRpbWVJbmZvKCk7CgogICAgaWYgKHRoaXMub3B0aW9ucy5wb3B1cCkgewogICAgICB0aGlzLnNob3dPcmRlclRpcCgpOwogICAgfQoKICAgIGlmICh0aGlzLmhhc0V4Y2hhbmdlICE9ICIiKSB7CiAgICAgIC8vIOWIpOaWreS4uuWFkeaNouS4reW/g+i/m+WFpQogICAgICB0aGlzLmV4Y2hhbmdlX2RhdGEgPSB0aGlzLiRzYXZlLmdldCgnc2Vzc2lvbicsICdleGNoYW5nZV9kYXRhJyk7IC8vIOWFkeaNouS4reW/g+a0u+WKqOaVsOaNrgogICAgfQoKICAgIHRoaXMuZ2V0UmVjZWl2ZUNvbmRpdGlvbigpOyAvLyDmmK/lkKbpnIDopoHloavlhpnnlKjmiLfkv6Hmga/lj4rlhbbmnaHku7YKCiAgICB0aGlzLnZpcFByaWNlKCk7CiAgICBhd2FpdCB0aGlzLmdldEdpZnRJbmZvKCk7CiAgICBhd2FpdCB0aGlzLmdldEFjdERldGFpbCh0cnVlKTsKICB9Cgp9OwpleHBvcnRzLmRlZmF1bHQgPSBfZGVmYXVsdDs="},null]}