{"remainingRequest":"C:\\Users\\Administrator\\Desktop\\vip_inline_h5\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\Administrator\\Desktop\\vip_inline_h5\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\Users\\Administrator\\Desktop\\vip_inline_h5\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Administrator\\Desktop\\vip_inline_h5\\src\\views\\active\\giftBag.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\Administrator\\Desktop\\vip_inline_h5\\src\\views\\active\\giftBag.vue","mtime":1599552294439},{"path":"C:\\Users\\Administrator\\Desktop\\vip_inline_h5\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Administrator\\Desktop\\vip_inline_h5\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\Administrator\\Desktop\\vip_inline_h5\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Administrator\\Desktop\\vip_inline_h5\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKdmFyIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQgPSByZXF1aXJlKCJDOi9Vc2Vycy9BZG1pbmlzdHJhdG9yL0Rlc2t0b3AvdmlwX2lubGluZV9oNS9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9pbnRlcm9wUmVxdWlyZURlZmF1bHQiKTsKCk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAiX19lc01vZHVsZSIsIHsKICB2YWx1ZTogdHJ1ZQp9KTsKZXhwb3J0cy5kZWZhdWx0ID0gdm9pZCAwOwoKdmFyIF92dWV4ID0gcmVxdWlyZSgidnVleCIpOwoKdmFyIF9zZWNraWxsTWl4aW4gPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoIkAvbWl4aW5zL3NlY2tpbGxNaXhpbiIpKTsKCnZhciBfYWN0aXZlSGVhZGVyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKCJAY29tcG9uZW50cy9hY3RpdmUvYWN0aXZlSGVhZGVyIikpOwoKdmFyIF9hY3RpdmVDYXNoID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKCJAY29tcG9uZW50cy9hY3RpdmUvYWN0aXZlQ2FzaCIpKTsKCnZhciBfYWN0aXZlR2lmdCA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZSgiQGNvbXBvbmVudHMvYWN0aXZlL2FjdGl2ZUdpZnQiKSk7Cgp2YXIgX2FjdGl2ZUdpZnRSZWFzb24gPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoIkBjb21wb25lbnRzL2FjdGl2ZS9hY3RpdmVHaWZ0UmVhc29uIikpOwoKdmFyIF9hY3RpdmVHcmFwaGljID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKCJAY29tcG9uZW50cy9hY3RpdmUvYWN0aXZlR3JhcGhpYyIpKTsKCnZhciBfYWN0aXZlRm9vdGVyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKCJAY29tcG9uZW50cy9hY3RpdmUvYWN0aXZlRm9vdGVyIikpOwoKdmFyIF9hY3RpdmUgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoIkAvZmlsdGVycy9hY3RpdmUuanMiKSk7Cgp2YXIgX3BheSA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZSgiQC91dGlscy9wYXkiKSk7Cgp2YXIgX3V0aWxzID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKCJAL3V0aWxzL3V0aWxzIikpOwoKLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8gaW1wb3J0IHNoYXJlTWl4aW4gZnJvbSAnQC9taXhpbnMvc2hhcmVNaXhpbicgCnZhciBfZGVmYXVsdCA9IHsKICBuYW1lOiAnZ2lmdEJhZycsCiAgLy8gbWl4aW5zOiBbc2Vja2lsbE1peGluLCBzaGFyZU1peGluXSwKICBtaXhpbnM6IFtfc2Vja2lsbE1peGluLmRlZmF1bHRdLAogIGNvbXB1dGVkOiB7fSwKICBjb21wb25lbnRzOiB7CiAgICBhY3RpdmVIZWFkZXI6IF9hY3RpdmVIZWFkZXIuZGVmYXVsdCwKICAgIGFjdGl2ZUNhc2g6IF9hY3RpdmVDYXNoLmRlZmF1bHQsCiAgICBhY3RpdmVHaWZ0OiBfYWN0aXZlR2lmdC5kZWZhdWx0LAogICAgYWN0aXZlR2lmdFJlYXNvbjogX2FjdGl2ZUdpZnRSZWFzb24uZGVmYXVsdCwKICAgIGFjdGl2ZUdyYXBoaWM6IF9hY3RpdmVHcmFwaGljLmRlZmF1bHQsCiAgICBhY3RpdmVGb290ZXI6IF9hY3RpdmVGb290ZXIuZGVmYXVsdAogIH0sCgogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICByZWFkeTogZmFsc2UsCiAgICAgIHRpbWVyOiBudWxsLAogICAgICBsaW1pdFRpbWVyOiBudWxsLAogICAgICBzaG93UG9wOiBmYWxzZSwKICAgICAgYnRuVGV4dDogJ+eri+WNs+aKoui0rScsCiAgICAgIGhlYWRsaW5lOiAnJywKICAgICAgc2hvd1RpbWU6IHRydWUsCiAgICAgIHJlbWFpblRpbWU6IDAsCiAgICAgIGNoYW5uZWxUeXBlOiAnJywKICAgICAgb3B0aW9uczogdGhpcy4kcm91dGUucXVlcnkgfHwge30sCiAgICAgIGJ0bkRpc2FibGVkOiBmYWxzZSwKICAgICAgLy8g5oyJ6ZKu5piv5ZCm5LiN5Y+v55SoCiAgICAgIGJ0bkZvbnRTaXplOiAnZnQzNCcsCiAgICAgIHNlbENhc2hyZWQ6IHt9LAogICAgICBzZWxDb25zdW1lcjoge30sCiAgICAgIGNvbmRpdGlvbkluZm86IHt9LAogICAgICB0cmFjdmVsVXNlckxpc3Q6IFtdLAogICAgICBzZWxEYXRlOiB7CiAgICAgICAgc3RhcnRUaW1lOiAnJwogICAgICB9LAogICAgICBpbmZvOiB7fSwKICAgICAgcmVjZWl2ZU9iajogewogICAgICAgIDI6ICfmlrDnlKjmiLcnLAogICAgICAgIDM6ICfkvJrlkZgnLAogICAgICAgIDQ6ICfpnZ7kvJrlkZgnCiAgICAgIH0sCiAgICAgIGRvd25UaW1lOiB7CiAgICAgICAgaG91cjogJzAwJywKICAgICAgICBtaW51dGU6ICcwMCcsCiAgICAgICAgc2Vjb25kOiAnMDAnCiAgICAgIH0sCiAgICAgIHBUeXBlOiAnQUNUX0dJRlRfUEFDS0FHRScsCiAgICAgIHNoYXJlQ2xvc2U6IHRydWUsCiAgICAgIHNoYXJlSW5mb1NlbGY6IHt9CiAgICB9OwogIH0sCgogIGNvbXB1dGVkOiB7IC4uLigwLCBfdnVleC5tYXBHZXR0ZXJzKShbImxvY2F0aW9uSW5mbyIsICJ3eFVzZXIiLCAibG9jYXRpb25DaXR5IiwgInZpcENhcmRJbmZvIiwgInVwZGF0ZUdpZnQiXSkKICB9LAogIG1ldGhvZHM6IHsgLi4uKDAsIF92dWV4Lm1hcE11dGF0aW9ucykoJ2FjdGl2ZScsIFsnU0VUX1VQREFURUdJRlQnXSksCgogICAgLy8g6K6+572u5o+Q6YaSCiAgICByZW1pbmRTZXQoZSkge30sCgogICAgaGFuZGxlckxpbWl0KHJlcywgZmxhZykgewogICAgICBpZiAocmVzLmluZm8ubGltaXRBY3RTdGF0ZSA9PSA4IHx8IHJlcy5pbmZvLmxpbWl0QWN0U3RhdGUgPT0gOSkgewogICAgICAgIHJlcy5pbmZvLnRpbWVTdGF0ZSA9IDE7CiAgICAgICAgdGhpcy5oZWFkbGluZSA9IF9hY3RpdmUuZGVmYXVsdC5nZXREYXlOYW1lKHJlcy5pbmZvLmxpbWl0U3RhcnRUaW1lKTsKICAgICAgfSBlbHNlIGlmIChyZXMuaW5mby5saW1pdEFjdFN0YXRlID09IDEgfHwgcmVzLmluZm8ubGltaXRBY3RTdGF0ZSA9PSAzIHx8IHJlcy5pbmZvLmxpbWl0QWN0U3RhdGUgPT0gMTApIHsKICAgICAgICByZXMuaW5mby50aW1lU3RhdGUgPSAyOwogICAgICB9IGVsc2UgaWYgKHJlcy5pbmZvLmxpbWl0QWN0U3RhdGUgPT0gMikgewogICAgICAgIHJlcy5pbmZvLnRpbWVTdGF0ZSA9IDM7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgLy8gMeacquW8gOWniyAy6L+b6KGM5LitIDPlt7Lnu5PmnZ8KICAgICAgICBsZXQgY3VycmVudFRpbWUgPSArbmV3IERhdGUoKTsKCiAgICAgICAgaWYgKHJlcy5pbmZvLmxpbWl0RW5kVGltZSA8IGN1cnJlbnRUaW1lICYmIHJlcy5pbmZvLmxpbWl0U3RhcnRUaW1lIDwgY3VycmVudFRpbWUpIHsKICAgICAgICAgIHJlcy5pbmZvLnRpbWVTdGF0ZSA9IDM7CiAgICAgICAgfSBlbHNlIGlmIChyZXMuaW5mby5saW1pdEVuZFRpbWUgPiBjdXJyZW50VGltZSAmJiByZXMuaW5mby5saW1pdFN0YXJ0VGltZSA8IGN1cnJlbnRUaW1lKSB7CiAgICAgICAgICByZXMuaW5mby50aW1lU3RhdGUgPSAyOwogICAgICAgIH0gZWxzZSBpZiAocmVzLmluZm8ubGltaXRTdGFydFRpbWUgPiBjdXJyZW50VGltZSkgewogICAgICAgICAgcmVzLmluZm8udGltZVN0YXRlID0gMTsKICAgICAgICAgIHRoaXMuaGVhZGxpbmUgPSBfYWN0aXZlLmRlZmF1bHQuZ2V0RGF5TmFtZShyZXMuaW5mby5saW1pdFN0YXJ0VGltZSk7CiAgICAgICAgfQogICAgICB9CgogICAgICBpZiAocmVzLmluZm8udGltZVN0YXRlICE9IDMpIHsKICAgICAgICBjbGVhckludGVydmFsKHRoaXMubGltaXRUaW1lcik7CiAgICAgICAgdGhpcy5saW1pdFRpbWVyID0gc2V0SW50ZXJ2YWwoKCkgPT4gewogICAgICAgICAgbGV0IG5vd1RpbWUgPSArbmV3IERhdGUoKTsKICAgICAgICAgIHZhciBjdXRUaW1lID0gMDsKCiAgICAgICAgICBpZiAocmVzLmluZm8udGltZVN0YXRlID09IDEpIHsKICAgICAgICAgICAgY3V0VGltZSA9IHJlcy5pbmZvLmxpbWl0U3RhcnRUaW1lIC0gbm93VGltZTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIGN1dFRpbWUgPSByZXMuaW5mby5saW1pdEVuZFRpbWUgLSBub3dUaW1lOwogICAgICAgICAgfQoKICAgICAgICAgIHRoaXMuZG93blRpbWUgPSBfdXRpbHMuZGVmYXVsdC5jb3VudERvd24zKGN1dFRpbWUpOwoKICAgICAgICAgIGlmIChjdXRUaW1lIDw9IDAgJiYgcmVzLmluZm8ubGltaXRBY3RTdGF0ZSAhPSAxMikgewogICAgICAgICAgICBjbGVhckludGVydmFsKHRoaXMubGltaXRUaW1lcik7CiAgICAgICAgICAgIHRoaXMuZ2V0QWN0RGV0YWlsKCk7CiAgICAgICAgICB9CiAgICAgICAgfSwgMTAwMCk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5kb3duVGltZSA9IHsKICAgICAgICAgIGhvdXI6ICcwMCcsCiAgICAgICAgICBtaW51dGU6ICcwMCcsCiAgICAgICAgICBzZWNvbmQ6ICcwMCcKICAgICAgICB9OwogICAgICB9CgogICAgICBjb25zb2xlLmxvZygncmVzLi4uLi4uLi4uLi4nLCByZXMuaW5mbywgdGhpcy5kb3duVGltZSk7CgogICAgICBpZiAoZmxhZykgewogICAgICAgIC8vIOW3suaKouWujOa0u+WKqOW8ueeqlwogICAgICAgIGlmIChyZXMuaW5mby5saW1pdEFjdFN0YXRlID09IDMgfHwgcmVzLmluZm8ubGltaXRBY3RTdGF0ZSA9PSAyIHx8ICF0aGlzLmluZm8ucmVtYWluTnVtKSB7CiAgICAgICAgICB0aGlzLmdldEVuZEFjdGl2ZSgpOwogICAgICAgIH0KICAgICAgfQogICAgfSwKCiAgICAvLyDjgILjgILjgILjgILjgILjgILjgILjgILjgILjgILjgILjgILjgILjgILjgILjgILjgILjgILjgILjgILjgILkvJjljJbnu5PmnZ/jgILjgILjgILjgILjgILjgILjgILjgILjgILjgILjgILjgILjgILjgIIKICAgIGNsb3NlUG9wKCkgewogICAgICB0aGlzLnNob3dQb3AgPSBmYWxzZTsKICAgIH0sCgogICAgLy8g56S85YyF54m55pyJ5L+h5oGvCiAgICBnZXRHaWZ0SW5mbygpIHsKICAgICAgcmV0dXJuIHRoaXMuJGFwaS5hY3RfZ2lmdF9pbmZvKHsKICAgICAgICBjaGFubmVsVHlwZTogdGhpcy5jaGFubmVsVHlwZSwKICAgICAgICBxckNvZGU6IHRoaXMucXJDb2RlLAogICAgICAgIGFjdFNuOiB0aGlzLmFjdFNuLAogICAgICAgIGxhdDogdGhpcy5sb2NhdGlvbkluZm8ubGF0aXR1ZGUsCiAgICAgICAgbG5nOiB0aGlzLmxvY2F0aW9uSW5mby5sb25naXR1ZGUKICAgICAgfSkudGhlbihyZXMgPT4gewogICAgICAgIGlmIChyZXMuc3RhdGUpIHsKICAgICAgICAgIGxldCBjYXJkU3VtID0gMDsKICAgICAgICAgIHJlcy5pbmZvLmNhcmRMaXN0LmZvckVhY2goaXRlbSA9PiB7CiAgICAgICAgICAgIGNhcmRTdW0gKz0gaXRlbS5jYXJkTnVtOwogICAgICAgICAgfSk7CiAgICAgICAgICB0aGlzLmluZm8gPSBPYmplY3QuYXNzaWduKHsKICAgICAgICAgICAgY2FyZFN1bQogICAgICAgICAgfSwgdGhpcy5pbmZvLCByZXMuaW5mbyk7CgogICAgICAgICAgaWYgKHJlcy5pbmZvLnJlbWFpbk51bSA9PSAwKSB7CiAgICAgICAgICAgIHRoaXMuaGFuZGxlckJ0bign5bey5ZSu572EJywgdHJ1ZSk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCgogICAgaGFuZGxlckJ0bih0ZXh0LCBkaXNhYmxlZCA9IGZhbHNlLCBmb250U2l6ZSA9ICdmdDM0JykgewogICAgICB0aGlzLmJ0blRleHQgPSB0ZXh0OwogICAgICB0aGlzLmJ0bkZvbnRTaXplID0gZm9udFNpemU7CiAgICAgIHRoaXMuYnRuRGlzYWJsZWQgPSBkaXNhYmxlZDsKCiAgICAgIGlmIChkaXNhYmxlZCkgewogICAgICAgIHRoaXMuc2hvd1RpbWUgPSBmYWxzZTsKICAgICAgfQogICAgfSwKCiAgICAvLyDliKTmlq3nlKjmiLfotK3kubDkv6Hmga8KICAgIGdldFJlYWxUaW1lSW5mbyhsaW1pdEZyZXF1ZW5jeSkgewogICAgICByZXR1cm4gdGhpcy4kYXBpLnJlYWxUaW1lX2luZm8oewogICAgICAgIGFjdFNuOiB0aGlzLmFjdFNuCiAgICAgIH0pLnRoZW4ocmVzID0+IHsKICAgICAgICBpZiAocmVzLnN0YXRlKSB7CiAgICAgICAgICB0aGlzLnJlYWxJbmZvID0gcmVzLmluZm87CiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCgogICAgZ2V0UmVjZWl2ZUNvbmRpdGlvbigpIHsKICAgICAgcmV0dXJuIHRoaXMuJGFwaS5yZWNlaXZlX2NvbmRpdGlvbih7CiAgICAgICAgYWN0U246IHRoaXMuYWN0U24KICAgICAgfSkudGhlbihyZXMgPT4gewogICAgICAgIGlmIChyZXMuc3RhdGUpIHsKICAgICAgICAgIHRoaXMuY29uZGl0aW9uSW5mbyA9IHJlcy5pbmZvOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAoKICAgIC8vIOWkhOeQhueri+WNs+mihuWPlueahOaMiemSrgogICAgaGFuZGxlclJlY2VpdmVCdG4oKSB7CiAgICAgIGxldCBoYXNSZWNlaXZlQ2hhbm5lbEZyZWVHaWZ0ID0gdGhpcy5pbmZvLmhhc1JlY2VpdmVDaGFubmVsRnJlZUdpZnQ7CiAgICAgIGxldCBjaGFubmVsVHlwZSA9IHRoaXMuY2hhbm5lbFR5cGU7CiAgICAgIHRoaXMuaGFuZGxlckJ0bign56uL5Y2z6aKG5Y+WJyk7CiAgICAgIGlmIChoYXNSZWNlaXZlQ2hhbm5lbEZyZWVHaWZ0ICYmIGNoYW5uZWxUeXBlID09ICdDSEFOTkVMX0FDVElWSVRZX0xBQkVMX1NIT1cnKSB0aGlzLmhhbmRsZXJCdG4oJ+mihuWPluasoeaVsOW3sueUqOWujCcsIHRydWUpOwogICAgfSwKCiAgICAvLyDpgJrnlKjmtLvliqjor6bmg4UKICAgIGdldEFjdERldGFpbChmbGFnKSB7CiAgICAgIHRoaXMuJFRvYXN0LmxvYWRpbmcoewogICAgICAgIG1lc3NhZ2U6ICfliqDovb3kuK0uLi4nLAogICAgICAgIGZvcmJpZENsaWNrOiB0cnVlLAogICAgICAgIGR1cmF0aW9uOiAwCiAgICAgIH0pOwogICAgICByZXR1cm4gdGhpcy4kYXBpLmFjdF9kZXRhaWwoewogICAgICAgIGNoYW5uZWxUeXBlOiB0aGlzLmNoYW5uZWxUeXBlLAogICAgICAgIHFyQ29kZTogdGhpcy5xckNvZGUsCiAgICAgICAgYWN0U246IHRoaXMuYWN0U24KICAgICAgfSkudGhlbihhc3luYyByZXMgPT4gewogICAgICAgIGlmIChyZXMuc3RhdGUpIHsKICAgICAgICAgIHRoaXMuc2hvd1NoYXJlID0gdHJ1ZTsKICAgICAgICAgIHRoaXMuZW51bUtleSA9IHJlcy5pbmZvLmNoaWxkRW51bUtleTsKICAgICAgICAgIHRoaXMuc2hhcmVJbmZvU2VsZiA9IHsKICAgICAgICAgICAgZGVzYzogcmVzLmluZm8uYWN0TmFtZSB8fCAn5aSn56S85YyFJwogICAgICAgICAgfTsgLy8gdGhpcy5zaGFyZVBhZ2UoKQogICAgICAgICAgLy8g5aSE55CG6ZmQ5pe255qE5YCS6K6h5pe2562J6Zeu6aKYIAoKICAgICAgICAgIGlmIChyZXMuaW5mby5jaGlsZEVudW1LZXkgPT0gJ0FDVF9HSUZUX1BBQ0tBR0VfUFVSQ0hBU0VfTElNSVQnKSB7CiAgICAgICAgICAgIHRoaXMuaGFuZGxlckxpbWl0KHJlcywgZmxhZyk7CiAgICAgICAgICB9CgogICAgICAgICAgcmVzLmluZm8uY2hhbm5lbFR5cGUgPSB0aGlzLmNoYW5uZWxUeXBlIHx8ICcnOwogICAgICAgICAgdGhpcy5pbmZvID0gT2JqZWN0LmFzc2lnbih7fSwgdGhpcy5pbmZvLCByZXMuaW5mbyk7CiAgICAgICAgICB0aGlzLnJlbWFpblRpbWUgPSByZXMuaW5mby5yZW1haW5UaW1lOwogICAgICAgICAgdGhpcy5zaG93VGltZSA9IHJlcy5pbmZvLnNob3dUaW1lOwogICAgICAgICAgdGhpcy5yZWFkeSA9IHRydWU7CiAgICAgICAgICBjb25zb2xlLmxvZygnaW5mby4uLi4uLi4uLi4nLCB0aGlzLmluZm8pOyAvLyDmjInpkq7mloflrZcKCiAgICAgICAgICBsZXQgdmlwVXNlciA9IHRoaXMudmlwQ2FyZEluZm8udmlwVXNlcjsKICAgICAgICAgIHRoaXMudmlwVXNlciA9IHRoaXMudmlwQ2FyZEluZm8udmlwVXNlcjsKICAgICAgICAgIGxldCBjaGFubmVsVHlwZSA9IHRoaXMuY2hhbm5lbFR5cGU7CiAgICAgICAgICBsZXQgcmVzdHJpY3RTdGF0ZSA9IHRoaXMuaW5mby5yZXN0cmljdFN0YXRlOwogICAgICAgICAgbGV0IHBhY2thZ2VHaWZ0VHlwZSA9IHRoaXMuaW5mby5wYWNrYWdlR2lmdFR5cGU7CiAgICAgICAgICBsZXQgaGFzUmVjZWl2ZUNoYW5uZWxGcmVlR2lmdCA9IHRoaXMuaW5mby5oYXNSZWNlaXZlQ2hhbm5lbEZyZWVHaWZ0OwogICAgICAgICAgbGV0IHJlbWFpbk51bSA9IHRoaXMuaW5mby5yZW1haW5OdW07CiAgICAgICAgICBsZXQgY2hhbm5lbFRyYWNrID0gdGhpcy5pbmZvLmNoYW5uZWxUcmFjazsKICAgICAgICAgIGxldCBzZWxsUHJpY2UgPSB0aGlzLmluZm8uc2VsbFByaWNlOwogICAgICAgICAgbGV0IG5vVmlwUHJpY2UgPSB0aGlzLmluZm8ubm9WaXBQcmljZTsKICAgICAgICAgIGxldCBzdGF0ZSA9IHJlcy5pbmZvLmFjdFN0YXRlOwogICAgICAgICAgbGV0IGJ1eUxpbWl0ID0gcmVzLmluZm8uYnV5TGltaXQ7CgogICAgICAgICAgaWYgKHN0YXRlID09IDEpIHsKICAgICAgICAgICAgdGhpcy5oYW5kbGVyQnRuKCfmnKrlvIDlp4snLCB0cnVlKTsKICAgICAgICAgIH0gZWxzZSBpZiAoc3RhdGUgPT0gMykgewogICAgICAgICAgICB0aGlzLmhhbmRsZXJCdG4oJ+W3suWUrue9hCcsIHRydWUpOwogICAgICAgICAgfSBlbHNlIGlmIChzdGF0ZSA9PSA0KSB7CiAgICAgICAgICAgIHRoaXMuaGFuZGxlckJ0bign5bey57uT5p2fJywgdHJ1ZSk7CiAgICAgICAgICB9IGVsc2UgaWYgKHN0YXRlID09IDUpIHsKICAgICAgICAgICAgLy8gIOS8muWRmAogICAgICAgICAgICBpZiAodmlwVXNlcikgewogICAgICAgICAgICAgIGlmIChzZWxsUHJpY2UgPiAwKSB7CiAgICAgICAgICAgICAgICB0aGlzLmhhbmRsZXJCdG4oJ+W3suWUrue9hCcsIHRydWUpOwogICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICB0aGlzLmhhbmRsZXJCdG4oJ+mihuWPluasoeaVsOW3sueUqOWujCcsIHRydWUpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICBpZiAoYnV5TGltaXQgPT0gMSAmJiBub1ZpcFByaWNlID4gMCkgewogICAgICAgICAgICAgICAgdGhpcy5oYW5kbGVyQnRuKCflt7LllK7nvYQnLCB0cnVlKTsKICAgICAgICAgICAgICB9IGVsc2UgaWYgKGJ1eUxpbWl0ID09IDEgJiYgbm9WaXBQcmljZSA9PSAwKSB7CiAgICAgICAgICAgICAgICB0aGlzLmhhbmRsZXJCdG4oJ+mihuWPluasoeaVsOW3sueUqOWujCcsIHRydWUpOwogICAgICAgICAgICAgIH0gZWxzZSBpZiAoYnV5TGltaXQgPT0gMikgewogICAgICAgICAgICAgICAgdGhpcy5oYW5kbGVyQnRuKCflt7LllK7nvYQnLCB0cnVlKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgIH0gLy8g5aSW6YOo5rig6YGT6L+b5YWlCgoKICAgICAgICAgIGlmIChzdGF0ZSA9PSAyKSB7CiAgICAgICAgICAgIC8vIC4uLi4uLi4uLi4uLi4u5aSW6YOo5rig6YGT56S85YyF5Li65ZSu5Y2W5Z6LLi4uLi4uLi4uLi4uLi4uLi4uLi4KICAgICAgICAgICAgaWYgKGNoYW5uZWxUcmFjayA/IHBhY2thZ2VHaWZ0VHlwZSA9PSAxIDogcmVzdHJpY3RTdGF0ZSA9PSAyKSB7CiAgICAgICAgICAgICAgaWYgKHJlbWFpbk51bSA+IDApIHsKICAgICAgICAgICAgICAgIHRoaXMuaGFuZGxlckJ0bign56uL5Y2z6LSt5LmwJyk7CiAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIC8vICDkvJrlkZgKICAgICAgICAgICAgICAgIGlmICh2aXBVc2VyKSB7CiAgICAgICAgICAgICAgICAgIGlmIChzZWxsUHJpY2UgPiAwKSB7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5oYW5kbGVyQnRuKCflt7LllK7nvYQnLCB0cnVlKTsKICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICB0aGlzLmhhbmRsZXJCdG4oJ+mihuWPluasoeaVsOW3sueUqOWujCcsIHRydWUpOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICBpZiAoYnV5TGltaXQgPT0gMSAmJiBub1ZpcFByaWNlID4gMCkgewogICAgICAgICAgICAgICAgICAgIHRoaXMuaGFuZGxlckJ0bign5bey5ZSu572EJywgdHJ1ZSk7CiAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoYnV5TGltaXQgPT0gMSAmJiBub1ZpcFByaWNlID09IDApIHsKICAgICAgICAgICAgICAgICAgICB0aGlzLmhhbmRsZXJCdG4oJ+mihuWPluasoeaVsOW3sueUqOWujCcsIHRydWUpOwogICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGJ1eUxpbWl0ID09IDIpIHsKICAgICAgICAgICAgICAgICAgICB0aGlzLmhhbmRsZXJCdG4oJ+W3suWUrue9hCcsIHRydWUpOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfSAvLyDku4XkvJrlkZjlj6/otK3kubDml7bvvIzpnZ7kvJrlkZjmmL7npLoKCgogICAgICAgICAgICAgIGlmIChidXlMaW1pdCA9PSAyICYmICF2aXBVc2VyKSB7CiAgICAgICAgICAgICAgICB0aGlzLmhhbmRsZXJCdG4oJ+W8gOmAmuW5tui0reS5sCcpOwogICAgICAgICAgICAgIH0gLy8g5LuF5Lya5ZGY5Y+v6LSt5Lmw77yM5Lya5ZGY5Lu35Li6MO+8jOmdnuS8muWRmOinhuinkgoKCiAgICAgICAgICAgICAgaWYgKGJ1eUxpbWl0ID09IDIgJiYgIXNlbGxQcmljZSAmJiAhdmlwVXNlcikgewogICAgICAgICAgICAgICAgdGhpcy5vcGVuX3JlY2VpdmUgPSB0cnVlOwogICAgICAgICAgICAgICAgdGhpcy5oYW5kbGVyQnRuKCflvIDpgJrlubbpooblj5YnKTsKICAgICAgICAgICAgICB9IC8vLi4uLi4uLi4uLi4uLi4uLi7nq4vljbPpooblj5bnmoTmjInpkq7lvIDlp4suLi4uLi4uLi4uLi4uLi4uLi4uCiAgICAgICAgICAgICAgLy8g5LuF5Lya5ZGY5Y+v6LSt5Lmw77yM5Lya5ZGY5Lu35Li6MO+8jOS8muWRmOinhuinkgoKCiAgICAgICAgICAgICAgaWYgKGJ1eUxpbWl0ID09IDIgJiYgIXNlbGxQcmljZSAmJiB2aXBVc2VyKSB7CiAgICAgICAgICAgICAgICB0aGlzLmhhbmRsZXJSZWNlaXZlQnRuKHN0YXRlKTsKICAgICAgICAgICAgICB9IC8vIOaJgOacieS6uuWPr+i0reS5sO+8jOS8muWRmOS7t+OAgemdnuS8muWRmOS7t+mDveS4ujDvvIzmiYDmnInkurrop4bop5IKCgogICAgICAgICAgICAgIGlmIChidXlMaW1pdCA9PSAxICYmICFzZWxsUHJpY2UgJiYgIW5vVmlwUHJpY2UpIHsKICAgICAgICAgICAgICAgIHRoaXMuaGFuZGxlclJlY2VpdmVCdG4oc3RhdGUpOwogICAgICAgICAgICAgIH0gLy8g5omA5pyJ5Lq65Y+v6LSt5Lmw77yM5Lya5ZGY5Lu344CB6Z2e5Lya5ZGY5Lu36YO95Li6MO+8jOaJgOacieS6uuinhuinkgoKCiAgICAgICAgICAgICAgaWYgKGJ1eUxpbWl0ID09IDEgJiYgIXNlbGxQcmljZSAmJiAhbm9WaXBQcmljZSkgewogICAgICAgICAgICAgICAgdGhpcy5oYW5kbGVyUmVjZWl2ZUJ0bihzdGF0ZSk7CiAgICAgICAgICAgICAgfSAvLyDmiYDmnInkurrlj6/otK3kubDvvIzkvJrlkZjku7fjgIHpnZ7kvJrlkZjku7fpg73kuLow77yM5omA5pyJ5Lq66KeG6KeSCgoKICAgICAgICAgICAgICBpZiAoYnV5TGltaXQgPT0gMSAmJiAhc2VsbFByaWNlICYmIHZpcFVzZXIpIHsKICAgICAgICAgICAgICAgIHRoaXMuaGFuZGxlclJlY2VpdmVCdG4oc3RhdGUpOwogICAgICAgICAgICAgIH0gLy8uLi4uLi4uLi4uLi4uLi4uLueri+WNs+mihuWPlueahOaMiemSrue7k+adny4uLi4uLi4uLi4uLi4uLi4uLi4KCiAgICAgICAgICAgIH0gZWxzZSBpZiAoY2hhbm5lbFRyYWNrID8gcGFja2FnZUdpZnRUeXBlID09IDIgOiByZXN0cmljdFN0YXRlID09IDEpIHsKICAgICAgICAgICAgICAvLyAuLi4uLi4uLi4uLi4uLuWklumDqOa4oOmBk+ekvOWMheS4uuWFjei0uemihuWPluWeiy4uLi4uLi4uLi4uLi4uLi4KICAgICAgICAgICAgICBpZiAocmVtYWluTnVtID4gMCkgewogICAgICAgICAgICAgICAgdGhpcy5oYW5kbGVyQnRuKCfnq4vljbPpooblj5YnKTsKICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgdGhpcy5oYW5kbGVyQnRuKCflt7LllK7nvYQnLCB0cnVlKTsKICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIGlmIChoYXNSZWNlaXZlQ2hhbm5lbEZyZWVHaWZ0ICYmIGNoYW5uZWxUeXBlID09ICdDSEFOTkVMX0FDVElWSVRZX0xBQkVMX1NIT1cnKSB7CiAgICAgICAgICAgICAgICB0aGlzLmhhbmRsZXJCdG4oJ+mihuWPluasoeaVsOW3sueUqOWujCcsIHRydWUpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSAvLy4uLi4uLi4uLi4uLi4uLi4uLi4u6aKG5Y+W5qyh5pWw5LiO6LSt5Lmw5qyh5pWw5piv5ZCm5bey55So5a6MLi4uLi4uLi4uLi4uLi4uLiAKCgogICAgICAgICAgICBsZXQgdG90YWxOdW0gPSBOdW1iZXIodGhpcy5yZWFsSW5mby51c2VyQnV5TnVtKSArIE51bWJlcih0aGlzLnJlYWxJbmZvLnVzZXJGcmVlUmVjZWl2ZU51bSk7IC8vIOW9k+WJjeeUqOaIt+eahOi0reS5sOaVsOmHj+WSjOmihuWPluaVsOmHj+aAu+WSjAoKICAgICAgICAgICAgbGV0IGNvbnRhdGlvbiA9IHJlcy5pbmZvLmJ1eUxpbWl0ID09IDEgJiYgIXJlcy5pbmZvLnNlbGxQcmljZSAmJiAhcmVzLmluZm8ubm9WaXBQcmljZSB8fCByZXMuaW5mby5idXlMaW1pdCA9PSAyICYmICFyZXMuaW5mby5zZWxsUHJpY2U7IC8vIOWIpOaWreW3sumihuWPlueahOeKtuaAgQogICAgICAgICAgICAvLyDliKTmlq3mmK/lkKbpmZDliLbotK3kubAKCiAgICAgICAgICAgIGlmIChyZXMuaW5mby5saW1pdFN0YXRlKSB7CiAgICAgICAgICAgICAgaWYgKHRvdGFsTnVtID49IHJlcy5pbmZvLmxpbWl0RnJlcXVlbmN5KSB7CiAgICAgICAgICAgICAgICAvLyDnlKjmiLfmgLvmiJDlip/otK3kubDmlbDph4/lpKfkuo7pmZDliLbotK3kubDmlbDph48KICAgICAgICAgICAgICAgIHRoaXMuaGFuZGxlckJ0bign5bey6LSt5LmwJywgdHJ1ZSk7CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICBpZiAodG90YWxOdW0gPj0gcmVzLmluZm8ubGltaXRGcmVxdWVuY3kgJiYgY29udGF0aW9uKSB7CiAgICAgICAgICAgICAgICAvLyDlvZPliY3nlKjmiLflvZPliY3mtLvliqjkuK3mgLvlhY3otLnpooblj5bmlbDph4/lpKfkuo7pmZDliLbpooblj5bmlbDph48KICAgICAgICAgICAgICAgIHRoaXMuaGFuZGxlckJ0bign6aKG5Y+W5qyh5pWw5bey55So5a6MJywgdHJ1ZSk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICB9IC8vIOWIpOaWreS4uuWFkeaNouS4reW/g+i/m+WFpQoKCiAgICAgICAgICBpZiAodGhpcy5oYXNFeGNoYW5nZSAhPSAnJykgewogICAgICAgICAgICBsZXQgZXhjaGFuZ2VfZGF0YSA9IHRoaXMuZXhjaGFuZ2VfZGF0YTsgLy8g5YWR5o2i5Lit5b+D5rS75Yqo5pWw5o2uCgogICAgICAgICAgICBpZiAoZXhjaGFuZ2VfZGF0YS5oYXNFeGNoYW5nZSkgewogICAgICAgICAgICAgIHRoaXMuaGFuZGxlckJ0bign5bey5YWR5o2iJywgdHJ1ZSk7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgaWYgKGV4Y2hhbmdlX2RhdGEucmVtYWluTnVtID4gMCkgewogICAgICAgICAgICAgICAgaWYgKGV4Y2hhbmdlX2RhdGEuc3RhdGUgIT0gMikgewogICAgICAgICAgICAgICAgICB0aGlzLmhhbmRsZXJCdG4oJ+W3sue7k+adnycsIHRydWUpOwogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgaWYgKGV4Y2hhbmdlX2RhdGEuY29uZGl0aW9uKSB7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5oYW5kbGVyQnRuKCfnq4vljbPlhZHmjaInLCBmYWxzZSk7CiAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5oYW5kbGVyQnRuKCfnq4vljbPlhZHmjaInLCB0cnVlKTsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICB0aGlzLmhhbmRsZXJCdG4oJ+W3suWFkeWujCcsIHRydWUpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgfSAvLyAuLi4uLi4uLi4uLi4uLi4uLuS8mOWMluaWsOWini4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4KICAgICAgICAgIC8vIOWIpOaWreS7jumZkOi0rei/m+WFpQoKCiAgICAgICAgICBpZiAodGhpcy5pbmZvLmNoaWxkRW51bUtleSA9PSAnQUNUX0dJRlRfUEFDS0FHRV9QVVJDSEFTRV9MSU1JVCcpIHsKICAgICAgICAgICAgLy8g5Yik5pat5oyJ6ZKu55qE5bGV56S6CiAgICAgICAgICAgIC8vIDEu5rS75Yqo5pyq5byA5aeLIOacquiuvue9ruaPkOmGkiAtLS0tLSDmj5DphpLmiJEv6aKE57qm5o+Q6YaSIAogICAgICAgICAgICAvLyAyLua0u+WKqOacquW8gOWniyDlt7Lorr7nva7mj5DphpIgLS0tLS0g5bey6aKE57qmCiAgICAgICAgICAgIC8vIDMu5rS75Yqo6L+b6KGM5LitIC0tLS0tIOeri+WNs+aKoui0rQogICAgICAgICAgICAvLyA0Lua0u+WKqOi/m+ihjOS4rSDotK3kubDmrKHmlbDovr7liLDkuIrpmZAtLS0tLSDlt7LotK3kubAKICAgICAgICAgICAgLy8gNS7mtLvliqjov5vooYzkuK0g5bqT5a2Y5Li6MCAtLS0tLSDlt7LmiqLlrowKICAgICAgICAgICAgLy8gNi7mtLvliqjmnKrlj5HluIMg5peg5rOV6LSt5Lmw44CB6K6+572u5o+Q6YaSIC0tLS0tIOiLpeeCueWHu++8jOWImXRvYXN05o+Q56S64oCc5b2T5YmN5rS75YqoL+WQiOi+keacquWPkeW4g+KAnQogICAgICAgICAgICAvLyA3Lua0u+WKqOW3sue7k+adnyAtLS0tLSAg5bey5oqi5a6MCiAgICAgICAgICAgIGlmICghdGhpcy5pbmZvLnJlbWFpbk51bSkgewogICAgICAgICAgICAgIHRoaXMuaGFuZGxlckJ0bign5bey5oqi5a6MJywgdHJ1ZSk7CiAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICB9CgogICAgICAgICAgICBpZiAocmVzLmluZm8uYWN0U3RhdGUgPT0gMTEgfHwgcmVzLmluZm8uYWN0U3RhdGUgPT0gMykgewogICAgICAgICAgICAgIHRoaXMuaGFuZGxlckJ0bign5bey5oqi5a6MJywgdHJ1ZSk7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgLy8gaWYgKHJlcy5pbmZvLmxpbWl0QWN0U3RhdGUgPT0gOCkgewogICAgICAgICAgICAgIC8vICAgdGhpcy5oYW5kbGVyQnRuKCfpooTnuqbmj5DphpInLCBmYWxzZSkKICAgICAgICAgICAgICAvLyB9IGVsc2UgaWYgKHJlcy5pbmZvLmxpbWl0QWN0U3RhdGUgPT0gOSkgewogICAgICAgICAgICAgIC8vICAgdGhpcy5oYW5kbGVyQnRuKCflt7LpooTnuqYnLCBmYWxzZSkKICAgICAgICAgICAgICAvLyB9IAogICAgICAgICAgICAgIGlmIChyZXMuaW5mby5saW1pdEFjdFN0YXRlID09IDggfHwgcmVzLmluZm8ubGltaXRBY3RTdGF0ZSA9PSA5KSB7CiAgICAgICAgICAgICAgICB0aGlzLmhhbmRsZXJCdG4oJ+acquW8gOWniycsIHRydWUpOwogICAgICAgICAgICAgIH0gZWxzZSBpZiAocmVzLmluZm8ubGltaXRBY3RTdGF0ZSA9PSAxKSB7CiAgICAgICAgICAgICAgICB0aGlzLmhhbmRsZXJCdG4oJ+eri+WNs+aKoui0rScsIGZhbHNlKTsKICAgICAgICAgICAgICB9IGVsc2UgaWYgKHJlcy5pbmZvLmxpbWl0QWN0U3RhdGUgPT0gMTApIHsKICAgICAgICAgICAgICAgIHRoaXMuaGFuZGxlckJ0bign5bey6LSt5LmwJywgdHJ1ZSk7CiAgICAgICAgICAgICAgfSBlbHNlIGlmIChyZXMuaW5mby5saW1pdEFjdFN0YXRlID09IDMpIHsKICAgICAgICAgICAgICAgIHRoaXMuaGFuZGxlckJ0bign5bey5oqi5a6MJywgdHJ1ZSk7CiAgICAgICAgICAgICAgfSBlbHNlIGlmIChyZXMuaW5mby5saW1pdEFjdFN0YXRlID09IDIpIHsKICAgICAgICAgICAgICAgIHRoaXMuaGFuZGxlckJ0bign5bey5oqi5a6MJywgdHJ1ZSk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICB9CgogICAgICAgICAgdGhpcy5zaG93QnRuVHh0ID0gdHJ1ZTsgLy8g5aaC5p6c6ZyA6KaB5pi+56S65YCS6K6h5pe2CgogICAgICAgICAgaWYgKHRoaXMuc2hvd1RpbWUgJiYgdGhpcy5pbmZvLmNoaWxkRW51bUtleSAhPSAnQUNUX0dJRlRfUEFDS0FHRV9QVVJDSEFTRV9MSU1JVCcpIHsKICAgICAgICAgICAgY2xlYXJJbnRlcnZhbCh0aGlzLnRpbWVyKTsKICAgICAgICAgICAgdmFyIHJlbWFpblRpbWUgPSByZXMuaW5mby5yZW1haW5UaW1lOwogICAgICAgICAgICB0aGlzLnRpbWVyID0gc2V0SW50ZXJ2YWwoKCkgPT4gewogICAgICAgICAgICAgIGlmIChyZW1haW5UaW1lID49IDEwMDApIHsKICAgICAgICAgICAgICAgIHJlbWFpblRpbWUgLT0gMTAwMDsKICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgY2xlYXJJbnRlcnZhbCh0aGlzLnRpbWVyKTsKICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIHRoaXMucmVtYWluVGltZSA9IHJlbWFpblRpbWUgfHwgMDsKICAgICAgICAgICAgfSwgMTAwMCk7CiAgICAgICAgICB9CgogICAgICAgICAgdGhpcy5nZXRDYXNoTnVtKCk7IC8vIOiOt+WPlua0u+WKqOe6ouWMheW9k+WJjeS6q+eUqOacgOWkp+e6ouWMhQogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB0aGlzLmJhY2tfdG8ocmVzKTsKICAgICAgICB9CiAgICAgIH0pLmZpbmFsbHkoKCkgPT4gewogICAgICAgIHRoaXMuJFRvYXN0LmNsZWFyKCk7CiAgICAgIH0pOwogICAgfSwKCiAgICAvLyDpooblj5bnpLzljIXmjqXlj6PosIPnlKgKICAgIC8vIHJlY2VpdmVUeXBlIOiOt+WPluaWueW8j++8jDHkvJrlkZjpooblj5bvvIwy5Lya5ZGY6LSt5Lmw77yMM+a4oOmBk+i0reS5sAogICAgcmVjZWl2ZUdpZnQocmVjZWl2ZVR5cGUgPSAxKSB7CiAgICAgIGxldCBjb25kaXRpb25JbmZvID0gdGhpcy5jb25kaXRpb25JbmZvOwogICAgICBsZXQgdHJhY3ZlbFVzZXJMaXN0ID0gdGhpcy50cmFjdmVsVXNlckxpc3Q7CgogICAgICBpZiAoY29uZGl0aW9uSW5mby5pc0NvbmRpdGlvbiAmJiB0cmFjdmVsVXNlckxpc3QubGVuZ3RoID09IDApIHsKICAgICAgICAvLyDliKTmlq3mmK/lkKbpnIDmsYLloavlhpnkv6Hmga8KICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCh7CiAgICAgICAgICBuYW1lOiAndHJhdmVsSW5mb3JtYXRpb24nLAogICAgICAgICAgcXVlcnk6IHsKICAgICAgICAgICAgYWN0U246IHRoaXMub3B0aW9ucy5hY3RTbgogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgbGV0IGFjdERlYWwgPSBfcGF5LmRlZmF1bHQuYWN0RGVhbCh7CiAgICAgICAgY2l0eUlkOiB0aGlzLmxvY2F0aW9uQ2l0eS5jaXR5SWQsCiAgICAgICAgYWN0U246IHRoaXMuYWN0U24sCiAgICAgICAgZGVhbE51bTogMSwKICAgICAgICBjaGFubmVsVHlwZTogdGhpcy5jaGFubmVsVHlwZSwKICAgICAgICByZWFsRmVlOiAwLAogICAgICAgIHJlY2VpdmVUeXBlLAogICAgICAgIG9wZW5WaXA6IGZhbHNlLAogICAgICAgIC8v5piv5ZCm5byA6YCa5pyI5Y2h5Lya5ZGY5bm26LSt5LmwCiAgICAgICAgYWN0RmVlOiAwLAogICAgICAgIC8v5rS75Yqo5pSv5LuY6LS555SoCiAgICAgICAgdmlwRmVlOiAwLAogICAgICAgIHZpcENhcmRJZDogJycsCiAgICAgICAgYnV5VHlwZTogMCwKICAgICAgICBxckNvZGU6IHRoaXMucXJDb2RlLAogICAgICAgIGNvbXBJZDogdGhpcy5jb21wSWQsCiAgICAgICAgLy8g5ZCI6L6RSWQKICAgICAgICBjaG9vc2VEYXRlOiB0aGlzLnNlbERhdGUuc3RhcnRUaW1lID8gX3V0aWxzLmRlZmF1bHQuZm9ybWF0VGltZSh0aGlzLnNlbERhdGUuc3RhcnRUaW1lIHx8IDAsICdZWVlZTU1ERCcpIDogMCwKICAgICAgICAvLyDoh6rmiJHmuLjpgInmi6nml7bpl7QKICAgICAgICB0cmFjdmVsVXNlckxpc3Q6IEpTT04uc3RyaW5naWZ5KHRoaXMudHJhY3ZlbFVzZXJMaXN0KQogICAgICB9KTsKCiAgICAgIGlmIChhY3REZWFsKSB7CiAgICAgICAgYWN0RGVhbC50aGVuKHJlcyA9PiB7CiAgICAgICAgICBpZiAocmVzLnN0YXRlKSB7CiAgICAgICAgICAgIC8vIOaUueWPmOWFqOWxgOiDveWQpuWFjei0uemihuWPluekvOWMheeahOeKtuaAgQogICAgICAgICAgICB0aGlzLlNFVF9VUERBVEVHSUZUKHRydWUpOyAvLyDmuIXpmaTnlKjmiLfloavlhpnkv6Hmga8KCiAgICAgICAgICAgIHRoaXMuJHNhdmUucmVtb3ZlKCdzZXNzaW9uJywgJ3RyYXZlbEluZm9ybWF0aW9uJyk7CiAgICAgICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHsKICAgICAgICAgICAgICBuYW1lOiAnZ2lmdEJhZ1N1Y2Nlc3MnLAogICAgICAgICAgICAgIHF1ZXJ5OiB7CiAgICAgICAgICAgICAgICB0cmFkZUlkOiByZXMuaW5mby50cmFkZUlkLAogICAgICAgICAgICAgICAgYWN0TmFtZTogdGhpcy5pbmZvLmFjdE5hbWUsCiAgICAgICAgICAgICAgICByZWNlaXZlOiAxLAogICAgICAgICAgICAgICAgYWN0U246IHRoaXMuYWN0U24KICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOyAvLyDot7Povazpooblj5bmiJDlip/pobUKICAgICAgICAgICAgLy8gd3gubmF2aWdhdGVUbyh7CiAgICAgICAgICAgIC8vICAgdXJsOiBgL3BhZ2VzL2FjdGl2aXR5L2dpZnRfYmFnX2RldGFpbC9zdWNjZXNzL3N1Y2Nlc3M/dHJhZGVJZD0ke3Jlcy5pbmZvLnRyYWRlSWR9JmFjdE5hbWU9JHt0aGlzLmluZm8uYWN0TmFtZX0mcmVjZWl2ZT0xJmFjdFNuPSR7dGhpcy5hY3RTbn1gLAogICAgICAgICAgICAvLyAgIHN1Y2Nlc3M6IChyZXN1bHQpPT57CiAgICAgICAgICAgIC8vICAgICB0aGlzLnNldERhdGEoewogICAgICAgICAgICAvLyAgICAgICBpc0NhbkNsaWNrOiBmYWxzZSAKICAgICAgICAgICAgLy8gICAgIH0pCiAgICAgICAgICAgIC8vICAgfQogICAgICAgICAgICAvLyB9KTsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgfQogICAgfSwKCiAgICAvLyDliKTmlq3mmK/lkKbmnInmnKrmlK/ku5jnmoTorqLljZUKICAgIC8vIHJlY2VpdmVUeXBlIOiOt+WPluaWueW8j++8jDHkvJrlkZjpooblj5bvvIwy5Lya5ZGY6LSt5Lmw77yMM+a4oOmBk+i0reS5sAogICAgb3JkZXJVbnBheShyZWNlaXZlVHlwZSkgewogICAgICB0aGlzLiRzYXZlLnNldCgnc2Vzc2lvbicsICdvcmRlckluZm8nLCB0aGlzLmluZm8pOwogICAgICBjb25zb2xlLmxvZygndGhpcy5pbmZvJywgdGhpcy5pbmZvKTsKICAgICAgaWYgKHRoaXMuaXNDYW5DbGljazIpIHJldHVybjsKICAgICAgdGhpcy5pc0NhbkNsaWNrMiA9IHRydWU7CiAgICAgIHRoaXMuJGFwaS5vcmRlcl91bnBheSh7CiAgICAgICAgYWN0U246IHRoaXMuYWN0U24KICAgICAgfSkudGhlbihyZXMgPT4gewogICAgICAgIGlmIChyZXMuc3RhdGUpIHsKICAgICAgICAgIGlmIChyZXMuaW5mby5leGlzdHNVblBheSkgewogICAgICAgICAgICAvLyDlpoLmnpzlrZjlnKjmnKrmlK/ku5jnmoTorqLljZXvvIzot7PovazliLDorqLljZXliJfooajpobUKICAgICAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goewogICAgICAgICAgICAgIG5hbWU6ICdvcmRlckxpc3QnCiAgICAgICAgICAgIH0pOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgdGhpcy5qdW1wU3VibWl0KHJlY2VpdmVUeXBlKTsKICAgICAgICAgICAgdGhpcy5pc0NhbkNsaWNrMiA9IGZhbHNlOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSkuY2F0Y2goKCkgPT4gewogICAgICAgIHRoaXMuaXNDYW5DbGljazIgPSBmYWxzZTsKICAgICAgfSk7CiAgICB9LAoKICAgIC8vIOi3s+i9rOi0reS5sOmhtemdogogICAganVtcFN1Ym1pdChyZWNlaXZlVHlwZSkgewogICAgICB0aGlzLiRyb3V0ZXIucHVzaCh7CiAgICAgICAgbmFtZTogJ3N1Ym1pdE9yZGVyJywKICAgICAgICBxdWVyeTogewogICAgICAgICAgcXJDb2RlOiB0aGlzLm9wdGlvbnMucXJDb2RlIHx8ICcnLAogICAgICAgICAgY29tcElkOiB0aGlzLm9wdGlvbnMuY29tcElkIHx8ICcnLAogICAgICAgICAgYWN0U246IHRoaXMub3B0aW9ucy5hY3RTbiwKICAgICAgICAgIGNoYW5uZWxUeXBlOiB0aGlzLm9wdGlvbnMuY2hhbm5lbFR5cGUsCiAgICAgICAgICByZWNlaXZlVHlwZTogcmVjZWl2ZVR5cGUKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKCiAgICAvLyDpnZ7kvJrlkZjlvIDpgJrlubbpooblj5YKICAgIG9wZW5SZWNlaXZlKCkgewogICAgICB0aGlzLiRzZXQodGhpcy5pbmZvLCAnc2VsbFByaWNlJywgMCk7CiAgICAgIHRoaXMuJHNldCh0aGlzLmluZm8sICdub1ZpcFByaWNlJywgMCk7CiAgICAgIHRoaXMuJHNhdmUuc2V0KCdzZXNzaW9uJywgJ29yZGVySW5mbycsIHRoaXMuaW5mbyk7IC8vIOmdnuS8muWRmOW8gOmAmuW5tumihuWPlgoKICAgICAgbGV0IHJlY2VpdmVUeXBlID0gdGhpcy5jaGFubmVsVHlwZSA9PSAnQ0hBTk5FTF9BQ1RJVklUWV9MQUJFTF9TSE9XJyA/IDQgOiAxOwogICAgICB0aGlzLmp1bXBTdWJtaXQocmVjZWl2ZVR5cGUpOwogICAgfSwKCiAgICBoYW5kbGVyTGltaXRFdmVudCgpIHsKICAgICAgaWYgKHRoaXMuaW5mby5saW1pdEFjdFN0YXRlID09IDEyKSB7CiAgICAgICAgdGhpcy4kVG9hc3QoJ+W9k+WJjeWQiOi+kemdnui/m+ihjOS4reeKtuaAgScpOwogICAgICB9IGVsc2UgewogICAgICAgIGlmICh0aGlzLmJ0blRleHQgPT0gJ+eri+WNs+aKoui0rScpIHsKICAgICAgICAgIHRoaXMuJHNhdmUuc2V0KCdzZXNzaW9uJywgJ29yZGVySW5mbycsIHRoaXMuaW5mbyk7CiAgICAgICAgICB0aGlzLmp1bXBTdWJtaXQoMik7CiAgICAgICAgfQogICAgICB9CiAgICB9LAoKICAgIC8qKgogICAgKiDpooblj5bmiJbogIXmiqLotK3npLzljIUKICAgICAgICByZXN0cmljdFN0YXRlICDmmK/lkKblj6/otK3kubDvvJox5ZCmIDLmmK8KICAgICAgICByZWNlaXZlVHlwZTog5aSW6YOo5rig6YGTewogICAgICAgICAg6LSt5Lmw77yaIDMKICAgICAgICAgIOWFjei0uemihjogIDEKICAgICAgICB9CiAgICAqLwogICAgZ2V0R2lmdCgpIHsKICAgICAgdmFyIHZpcFVzZXIgPSB0aGlzLnZpcENhcmRJbmZvLnZpcFVzZXI7CiAgICAgIHZhciBpc25ld1VzZXIgPSB0aGlzLnJlYWxJbmZvLm5ld1VzZXI7CiAgICAgIGxldCBwYWNrYWdlR2lmdFR5cGUgPSB0aGlzLmluZm8ucGFja2FnZUdpZnRUeXBlOyAvLyAx5ZSu5Y2WIDLlhY3otLnpooYKCiAgICAgIGxldCBmcmVlUmVjZWl2ZVR5cGUgPSB0aGlzLmluZm8uZnJlZVJlY2VpdmVUeXBlOyAvLyAx5omA5pyJ5Lq65Y+v6aKG5Y+WIDLku4XpmZDmlrDnlKjmiLcgM+S7hemZkOS8muWRmCA05LuF6ZmQ6Z2e5Lya5ZGYCgogICAgICBsZXQgcmVzdHJpY3RTdGF0ZSA9IHRoaXMuaW5mby5yZXN0cmljdFN0YXRlOwogICAgICBsZXQgY2hhbm5lbFRyYWNrID0gdGhpcy5pbmZvLmNoYW5uZWxUcmFjazsgLy8g6YCa6L+H6L+Z5Liq5a2X5q6177yM5Yik5pat55SocGFja2FnZUdpZnRUeXBl6L+Y5pivcmVzdHJpY3RTdGF0ZeWtl+autQoKICAgICAgdmFyIGp1bXBTYXRlID0gZmFsc2U7IC8vIOeUqOadpeWIpOaWreaYr+WQpuaPkOekuuS7hemZkOafkOeUqOaIt+mihuWPlgoKICAgICAgaWYgKGZyZWVSZWNlaXZlVHlwZSA9PSAxKSB7CiAgICAgICAgLy8g5omA5pyJ5Lq65Y+v6aKG5Y+WCiAgICAgICAganVtcFNhdGUgPSB0cnVlOwogICAgICB9IGVsc2UgaWYgKGZyZWVSZWNlaXZlVHlwZSA9PSAyICYmIGlzbmV3VXNlcikgewogICAgICAgIC8vIOWIpOaWreeUqOaIt+aYr+WQpuS4uuaWsOeUqOaItwogICAgICAgIGp1bXBTYXRlID0gdHJ1ZTsKICAgICAgfSBlbHNlIGlmIChmcmVlUmVjZWl2ZVR5cGUgPT0gMyAmJiB2aXBVc2VyKSB7CiAgICAgICAgLy8g5Yik5pat5piv5ZCm5LuF5Lya5ZGY6aKG5Y+WCiAgICAgICAganVtcFNhdGUgPSB0cnVlOwogICAgICB9IGVsc2UgaWYgKGZyZWVSZWNlaXZlVHlwZSA9PSA0ICYmICF2aXBVc2VyKSB7CiAgICAgICAgLy8g5Yik5pat5piv5ZCm5LuF6Z2e5Lya5ZGY6aKG5Y+WCiAgICAgICAganVtcFNhdGUgPSB0cnVlOwogICAgICB9IC8vIOWmguaenOaYr+W8gOmAmuW5tumihuWPlgoKCiAgICAgIGlmICh0aGlzLm9wZW5fcmVjZWl2ZSkgewogICAgICAgIHRoaXMuJHNldCh0aGlzLmluZm8sICdzZWxsUHJpY2UnLCAwKTsKICAgICAgICB0aGlzLiRzZXQodGhpcy5pbmZvLCAnbm9WaXBQcmljZScsIDApOwogICAgICB9CgogICAgICB0aGlzLiRzYXZlLnNldCgnc2Vzc2lvbicsICdvcmRlckluZm8nLCB0aGlzLmluZm8pOwoKICAgICAgaWYgKHRoaXMuaGFzRXhjaGFuZ2UgIT0gJycpIHsKICAgICAgICAvLyDliKTmlq3lhZHlpZbkuK3lv4Pov5vlhaUg56uL5Y2z5YWR5o2iCiAgICAgICAgbGV0IGNvbmRpdGlvbkluZm8gPSB0aGlzLmNvbmRpdGlvbkluZm87CiAgICAgICAgbGV0IHRyYWN2ZWxVc2VyTGlzdCA9IHRoaXMudHJhY3ZlbFVzZXJMaXN0OwoKICAgICAgICBpZiAoY29uZGl0aW9uSW5mby5pc0NvbmRpdGlvbiAmJiB0cmFjdmVsVXNlckxpc3QubGVuZ3RoID09IDApIHsKICAgICAgICAgIC8vIOWIpOaWreaYr+WQpumcgOaxguWhq+WGmeS/oeaBrwogICAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goewogICAgICAgICAgICBuYW1lOiAndHJhdmVsSW5mb3JtYXRpb24nLAogICAgICAgICAgICBxdWVyeTogewogICAgICAgICAgICAgIGFjdFNuOiB0aGlzLm9wdGlvbnMuYWN0U24KICAgICAgICAgICAgfQogICAgICAgICAgfSk7CiAgICAgICAgICByZXR1cm47CiAgICAgICAgfQoKICAgICAgICBpZiAoIXRoaXMuYnRuRGlzYWJsZWQpIHRoaXMuZXhjaGFuZ2UoKTsKICAgICAgfSBlbHNlIGlmICh0aGlzLmluZm8uY2hpbGRFbnVtS2V5ID09ICdBQ1RfR0lGVF9QQUNLQUdFX1BVUkNIQVNFX0xJTUlUJykgewogICAgICAgIHRoaXMuaGFuZGxlckxpbWl0RXZlbnQoKTsKICAgICAgfSBlbHNlIGlmICh0aGlzLmluZm8uYWN0U3RhdGUgPT0gMikgewogICAgICAgIC8vIOWIpOaWreaYr+WQpuaYr+S7juWklumDqOa4oOmBk+i/m+WFpe+8jOWklumDqOa4oOmBk+i/m+WFpeaXtu+8jOWmguaenOmFjee9rueUqOaIt+WPr+i0reS5sO+8jOmdnuS8muWRmOS5n+WPr+i0reS5sOekvOWMhQogICAgICAgIGxldCBidXlMaW1pdCA9IHRoaXMuaW5mby5idXlMaW1pdDsKICAgICAgICBsZXQgc2VsbFByaWNlID0gdGhpcy5pbmZvLnNlbGxQcmljZTsKICAgICAgICBsZXQgbm9WaXBQcmljZSA9IHRoaXMuaW5mby5ub1ZpcFByaWNlOwogICAgICAgIGxldCBidXlTdGF0ZSA9IGZhbHNlOyAvLyAg5omA5pyJ5Lq6ICAg5LyaIDAgICDpnZ4gMAoKICAgICAgICBpZiAoYnV5TGltaXQgPT0gMSAmJiBub1ZpcFByaWNlID09IDAgJiYgc2VsbFByaWNlID09IDApIHsKICAgICAgICAgIGJ1eVN0YXRlID0gZmFsc2U7IC8vICDkvJrlkZjouqvku70KICAgICAgICB9IGVsc2UgaWYgKHZpcFVzZXIgJiYgc2VsbFByaWNlID4gMCkgewogICAgICAgICAgYnV5U3RhdGUgPSB0cnVlOwogICAgICAgIH0gZWxzZSBpZiAoIXZpcFVzZXIpIHsKICAgICAgICAgIGJ1eVN0YXRlID0gYnV5TGltaXQgPT0gMiA/IHRydWUgOiBub1ZpcFByaWNlID4gMDsKICAgICAgICB9CgogICAgICAgIGlmIChjaGFubmVsVHJhY2sgPyBwYWNrYWdlR2lmdFR5cGUgPT0gMSA6IHJlc3RyaWN0U3RhdGUgPT0gMikgewogICAgICAgICAgaWYgKGJ1eVN0YXRlKSB7CiAgICAgICAgICAgIC8vIOi0reS5sOekvOWMhQogICAgICAgICAgICAvLyDlpoLmnpzmmK/lpJbpg6jmuKDpgZPlubbkuJTmmK/pooblj5bnirbmgIHvvIxyZWNlaXZlVHlwZeS4ujTvvIzotK3kubDnirbmgIFyZWNlaXZlVHlwZeS4ujIKICAgICAgICAgICAgbGV0IHJlY2VpdmVUeXBlID0gdGhpcy5jaGFubmVsVHlwZSA9PSAnQ0hBTk5FTF9BQ1RJVklUWV9MQUJFTF9TSE9XJyAmJiB0aGlzLm9wZW5fcmVjZWl2ZSA/IDQgOiAyOwoKICAgICAgICAgICAgaWYgKGJ1eUxpbWl0ID09IDIgJiYgc2VsbFByaWNlID09IDApIHsKICAgICAgICAgICAgICByZWNlaXZlVHlwZSA9IDE7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHRoaXMub3JkZXJVbnBheShyZWNlaXZlVHlwZSk7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAvLyDkvb/nlKjlrZfmrrVyZXN0cmljdFN0YXRl5Yik5patCiAgICAgICAgICAgIHRoaXMucmVjZWl2ZUdpZnQoNCk7CiAgICAgICAgICB9CiAgICAgICAgfSBlbHNlIGlmIChjaGFubmVsVHJhY2sgPyBwYWNrYWdlR2lmdFR5cGUgPT0gMiA6IHJlc3RyaWN0U3RhdGUgPT0gMSkgewogICAgICAgICAgLy8g5YWN6LS56aKGCiAgICAgICAgICBpZiAoY2hhbm5lbFRyYWNrKSB7CiAgICAgICAgICAgIC8vIOS9v+eUqOWtl+autXBhY2thZ2VHaWZ0VHlwZeWIpOaWrQogICAgICAgICAgICBpZiAoZnJlZVJlY2VpdmVUeXBlICE9IDEgJiYgIWp1bXBTYXRlKSB7CiAgICAgICAgICAgICAgdGhpcy4kVG9hc3QoYOS7hemZkCR7dGhpcy5yZWNlaXZlT2JqW2ZyZWVSZWNlaXZlVHlwZV196aKG5Y+WYCk7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgdGhpcy5yZWNlaXZlR2lmdCg0KTsKICAgICAgICAgICAgfQogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgLy8g5L2/55So5a2X5q61cmVzdHJpY3RTdGF0ZeWIpOaWrQogICAgICAgICAgICB0aGlzLnJlY2VpdmVHaWZ0KDQpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQogICAgfSwKCiAgICAvLyDlhZHmjaIKICAgIGV4Y2hhbmdlKCkgewogICAgICBsZXQgaXRlbSA9IHRoaXMuZXhjaGFuZ2VfZGF0YTsKICAgICAgdGhpcy4kZGlhbG9nLmNvbmZpcm0oewogICAgICAgIHRpdGxlOiBg5piv5ZCm56Gu6K6k5YWR5o2iJHtpdGVtLmFjdE5hbWUgfHwgJyd9P2AsCiAgICAgICAgbWVzc2FnZTogJ+WFkeaNouWQjuS4jeWPr+abtOaUueS4lOWOn+aciea9ruWNoeWwhuS8mua4heepuicKICAgICAgfSkudGhlbigoKSA9PiB7CiAgICAgICAgdGhpcy5wcmljZUV4Y2hhbmdlKGl0ZW0pOwogICAgICB9KS5jYXRjaCgoKSA9PiB7Ly8gb24gY2FuY2VsCiAgICAgIH0pOwogICAgfSwKCiAgICAvLyDlvIDlp4vlhZHmjaIKICAgIHByaWNlRXhjaGFuZ2UoaXRlbSkgewogICAgICBpZiAodGhpcy5jYW5DbGljaykgcmV0dXJuOwogICAgICB0aGlzLmNhbkNsaWNrID0gdHJ1ZTsKICAgICAgdGhpcy4kYXBpLnByaWNlX2V4Y2hhbmdlKHsKICAgICAgICBhY3RTbjogaXRlbS5hY3RTbiwKICAgICAgICBhd2FyZElkOiBpdGVtLmF3YXJkSWQsCiAgICAgICAgY2l0eUlkOiB0aGlzLmxvY2F0aW9uQ2l0eS5jaXR5SWQsCiAgICAgICAgY2hvb3NlRGF0ZTogdGhpcy5zZWxEYXRlLnN0YXJ0VGltZSA/IF91dGlscy5kZWZhdWx0LmZvcm1hdFRpbWUodGhpcy5zZWxEYXRlLnN0YXJ0VGltZSB8fCAwLCAnWVlZWU1NREQnKSA6IDAsCiAgICAgICAgLy8g6Ieq5oiR5ri46YCJ5oup5pe26Ze0CiAgICAgICAgdHJhY3ZlbFVzZXJMaXN0OiBKU09OLnN0cmluZ2lmeSh0aGlzLnRyYWN2ZWxVc2VyTGlzdCkKICAgICAgfSkudGhlbihyZXMgPT4gewogICAgICAgIGlmIChyZXMuc3RhdGUpIHsKICAgICAgICAgIHRoaXMubWFzayA9IHRydWU7CiAgICAgICAgICB0aGlzLmhhbmRsZXJCdG4oJ+W3suWFkeaNoicsIHRydWUpOyAvLyDmuIXpmaTnlKjmiLfloavlhpnkv6Hmga8KCiAgICAgICAgICB0aGlzLiRzYXZlLnJlbW92ZSgnc2Vzc2lvbicsICd0cmF2ZWxJbmZvcm1hdGlvbicpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB0aGlzLiRUb2FzdChyZXMubWVzc2FnZSk7CiAgICAgICAgfQogICAgICB9KS5maW5hbGx5KCgpID0+IHsKICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHsKICAgICAgICAgIHRoaXMuY2FuQ2xpY2sgPSBmYWxzZTsKICAgICAgICB9LCAzMDApOwogICAgICB9KTsKICAgIH0sCgogICAgZ29DYXJkKCkgewogICAgICB0aGlzLiRyb3V0ZXIucHVzaCh7CiAgICAgICAgbmFtZTogJ2NvdXBvbkxpc3QnCiAgICAgIH0pOwogICAgfSwKCiAgICBjbG9zZSgpIHsKICAgICAgdGhpcy5tYXNrID0gZmFsc2U7CiAgICB9LAoKICAgIC8vIOiOt+WPluS8muWRmOWNoeacgOS9juS7t+agvAogICAgdmlwUHJpY2UoKSB7CiAgICAgIHRoaXMuJGFwaS5sb3dfcHJpY2Uoe30pLnRoZW4ocmVzID0+IHsKICAgICAgICBpZiAocmVzLnN0YXRlKSB7CiAgICAgICAgICB0aGlzLmxvd1ByaWNlID0gcmVzLmluZm8ubG93UHJpY2U7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCgogICAgc2hvd09yZGVyVGlwKCkgewogICAgICB0aGlzLiRkaWFsb2cuYWxlcnQoewogICAgICAgIHRpdGxlOiAn5o+Q56S6JywKICAgICAgICBtZXNzYWdlOiAn6K6i5Y2V6LaF5pe25bey5Y+W5raI77yM6K+36YeN5paw5LiL5Y2VJywKICAgICAgICBjb25maXJtQnV0dG9uVGV4dDogJ+ehruWumicsCiAgICAgICAgY29uZmlybUJ1dHRvbkNvbG9yOiAnI0Q5MDYzNCcKICAgICAgfSk7CiAgICB9LAoKICAgIHRvSm9pbigpIHsKICAgICAgdGhpcy4kcm91dGVyLnB1c2goewogICAgICAgIG5hbWU6ICdqb2luVmlwJywKICAgICAgICBxdWVyeTogewogICAgICAgICAgY2hhbm5lbFR5cGU6IHRoaXMuY2hhbm5lbFR5cGUKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKCiAgICAvLyDlhbPpl63nuqLljIXliJfooagKICAgIGNvbHNlY2FzaE1hc2soKSB7CiAgICAgIHRoaXMuY2FzaE1hc2sgPSAhdGhpcy5jYXNoTWFzazsKICAgIH0sCgogICAgLy8g6I635Y+W5rS75Yqo57qi5YyF5b2T5YmN5Lqr55So5pyA5aSn57qi5YyFCiAgICBnZXRDYXNoTnVtKCkgewogICAgICBsZXQgdmlwX2NoZWNrID0gIXRoaXMudmlwVXNlciAmJiB0aGlzLmluZm8uYnV5TGltaXQgPT0gMiA/IHRydWUgOiBmYWxzZTsKICAgICAgbGV0IHByaWNlID0gdGhpcy5pbmZvLmJ1eUxpbWl0ID09IDIgfHwgdGhpcy52aXBVc2VyID8gdGhpcy5pbmZvLnNlbGxQcmljZSA6IHRoaXMuaW5mby5ub1ZpcFByaWNlOwogICAgICB0aGlzLiRhcGkuY2FzaF9yZWRfbGlzdCh7CiAgICAgICAgYWN0U246IHRoaXMuYWN0U24sCiAgICAgICAgY2l0eUlkOiB0aGlzLmxvY2F0aW9uQ2l0eS5jaXR5SWQsCiAgICAgICAgb3BlblZpcDogdmlwX2NoZWNrLAogICAgICAgIC8vIOaYr+WQpuWLvumAieS8muWRmOWNoQogICAgICAgIHZpcEZlZTogdmlwX2NoZWNrID8gdGhpcy5sb3dQcmljZSA6IDAsCiAgICAgICAgLy8g5Lya5ZGY5Y2h6YeR6aKdCiAgICAgICAgYWN0RmVlOiBwcmljZSwKICAgICAgICAvLyDmtLvliqjph5Hpop0KICAgICAgICBjYXJkSWQ6ICIiIC8vIOeJueWNluWNoeWIuGlkIHx8IOekvOWMheS8oOepugoKICAgICAgfSkudGhlbihyZXMgPT4gewogICAgICAgIGlmIChyZXMuc3RhdGUpIHsKICAgICAgICAgIGxldCByZWRMaXN0ID0gcmVzLmluZm8uY2FzaFJlZExpc3QgfHwgW107CiAgICAgICAgICBsZXQgY29uc3VtZXJDb3Vwb25MaXN0ID0gcmVzLmluZm8uY29uc3VtZXJDb3Vwb25MaXN0IHx8IFtdOwogICAgICAgICAgbGV0IHVzYWJsZUxpc3QgPSByZWRMaXN0LmZpbHRlcihpdGVtID0+IGl0ZW0uY3VycmVudEFibGVVc2UpOyAvLyDov4fmu6Tlj6/nlKjnuqLljIUKCiAgICAgICAgICBsZXQgc29ydFVzYWJsZUxpc3QgPSB1c2FibGVMaXN0LnNvcnQoZnVuY3Rpb24gKGEsIGIpIHsKICAgICAgICAgICAgLy8g6ZmN5bqP5o6S5bqPCiAgICAgICAgICAgIHJldHVybiBiLm1vbmV5IC0gYS5tb25leTsKICAgICAgICAgIH0pOwogICAgICAgICAgdGhpcy5zZWxDYXNocmVkID0gc29ydFVzYWJsZUxpc3RbMF0gfHwge307IC8vIOmAieS4reacgOWkp+e6ouWMhQoKICAgICAgICAgIGlmIChjb25zdW1lckNvdXBvbkxpc3QubGVuZ3RoKSB7CiAgICAgICAgICAgIHRoaXMuc2VsQ29uc3VtZXIgPSBjb25zdW1lckNvdXBvbkxpc3RbMF0gfHwge307IC8vIOmAieS4rea2iOi0ueWIuAogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSkuZmluYWxseSgoKSA9PiB7fSk7CiAgICB9LAoKICAgIGhhc0NhY2hSZWRMaXN0KHsKICAgICAgZGV0YWlsCiAgICB9KSB7CiAgICAgIGlmIChkZXRhaWwgJiYgZGV0YWlsLmxlbmd0aCA+IDApIHsKICAgICAgICAvLyDph43mlrDor7fmsYLnuqLljIXmjqXlj6MKICAgICAgICB0aGlzLnNlbGVjdENvbXBvbmVudCgnI2FjdGl2ZUNhc2gnKS5nZXRDYXNoTGlzdCgpOwogICAgICAgIHRoaXMuZ2V0Q2FzaE51bSgpOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuc2hvd1BhZ2VNb2RlbCA9IHRydWU7CiAgICAgIH0KICAgIH0sCgogICAgLyoqCiAgICAgKiDpooblj5bmiJbogIXmiqLotK3npLzljIUKICAgICAgICByZXN0cmljdFN0YXRlICDmmK/lkKblj6/otK3kubDvvJox5ZCmIDLmmK8KICAgICAgICByZWNlaXZlVHlwZTog5aSW6YOo5rig6YGTewogICAgICAgICAg6LSt5Lmw77yaIDMKICAgICAgICAgIOWFjei0uemihjogIDEKICAgICAgICB9CiAgICAqLwogICAgZ2V0R2lmdCgpIHsKICAgICAgdmFyIHZpcFVzZXIgPSB0aGlzLnZpcENhcmRJbmZvLnZpcFVzZXI7CiAgICAgIHZhciBpc25ld1VzZXIgPSB0aGlzLnJlYWxJbmZvLm5ld1VzZXI7CiAgICAgIGxldCBwYWNrYWdlR2lmdFR5cGUgPSB0aGlzLmluZm8ucGFja2FnZUdpZnRUeXBlOyAvLyAx5ZSu5Y2WIDLlhY3otLnpooYKCiAgICAgIGxldCBmcmVlUmVjZWl2ZVR5cGUgPSB0aGlzLmluZm8uZnJlZVJlY2VpdmVUeXBlOyAvLyAx5omA5pyJ5Lq65Y+v6aKG5Y+WIDLku4XpmZDmlrDnlKjmiLcgM+S7hemZkOS8muWRmCA05LuF6ZmQ6Z2e5Lya5ZGYCgogICAgICBsZXQgcmVzdHJpY3RTdGF0ZSA9IHRoaXMuaW5mby5yZXN0cmljdFN0YXRlOwogICAgICBsZXQgY2hhbm5lbFRyYWNrID0gdGhpcy5pbmZvLmNoYW5uZWxUcmFjazsgLy8g6YCa6L+H6L+Z5Liq5a2X5q6177yM5Yik5pat55SocGFja2FnZUdpZnRUeXBl6L+Y5pivcmVzdHJpY3RTdGF0ZeWtl+autQoKICAgICAgdmFyIGp1bXBTYXRlID0gZmFsc2U7IC8vIOeUqOadpeWIpOaWreaYr+WQpuaPkOekuuS7hemZkOafkOeUqOaIt+mihuWPlgoKICAgICAgaWYgKGZyZWVSZWNlaXZlVHlwZSA9PSAxKSB7CiAgICAgICAgLy8g5omA5pyJ5Lq65Y+v6aKG5Y+WCiAgICAgICAganVtcFNhdGUgPSB0cnVlOwogICAgICB9IGVsc2UgaWYgKGZyZWVSZWNlaXZlVHlwZSA9PSAyICYmIGlzbmV3VXNlcikgewogICAgICAgIC8vIOWIpOaWreeUqOaIt+aYr+WQpuS4uuaWsOeUqOaItwogICAgICAgIGp1bXBTYXRlID0gdHJ1ZTsKICAgICAgfSBlbHNlIGlmIChmcmVlUmVjZWl2ZVR5cGUgPT0gMyAmJiB2aXBVc2VyKSB7CiAgICAgICAgLy8g5Yik5pat5piv5ZCm5LuF5Lya5ZGY6aKG5Y+WCiAgICAgICAganVtcFNhdGUgPSB0cnVlOwogICAgICB9IGVsc2UgaWYgKGZyZWVSZWNlaXZlVHlwZSA9PSA0ICYmICF2aXBVc2VyKSB7CiAgICAgICAgLy8g5Yik5pat5piv5ZCm5LuF6Z2e5Lya5ZGY6aKG5Y+WCiAgICAgICAganVtcFNhdGUgPSB0cnVlOwogICAgICB9IC8vIOWmguaenOaYr+W8gOmAmuW5tumihuWPlgoKCiAgICAgIGlmICh0aGlzLm9wZW5fcmVjZWl2ZSkgewogICAgICAgIHRoaXMuJHNldCh0aGlzLmluZm8sICdzZWxsUHJpY2UnLCAwKTsKICAgICAgICB0aGlzLiRzZXQodGhpcy5pbmZvLCAnbm9WaXBQcmljZScsIDApOwogICAgICB9CgogICAgICB0aGlzLiRzYXZlLnNldCgnc2Vzc2lvbicsICdvcmRlckluZm8nLCB0aGlzLmluZm8pOwoKICAgICAgaWYgKHRoaXMuaGFzRXhjaGFuZ2UgIT0gJycpIHsKICAgICAgICAvLyDliKTmlq3lhZHlpZbkuK3lv4Pov5vlhaUg56uL5Y2z5YWR5o2iCiAgICAgICAgbGV0IGNvbmRpdGlvbkluZm8gPSB0aGlzLmNvbmRpdGlvbkluZm87CiAgICAgICAgbGV0IHRyYWN2ZWxVc2VyTGlzdCA9IHRoaXMudHJhY3ZlbFVzZXJMaXN0OwoKICAgICAgICBpZiAoY29uZGl0aW9uSW5mby5pc0NvbmRpdGlvbiAmJiB0cmFjdmVsVXNlckxpc3QubGVuZ3RoID09IDApIHsKICAgICAgICAgIC8vIOWIpOaWreaYr+WQpumcgOaxguWhq+WGmeS/oeaBrwogICAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goewogICAgICAgICAgICBuYW1lOiAndHJhdmVsSW5mb3JtYXRpb24nLAogICAgICAgICAgICBxdWVyeTogewogICAgICAgICAgICAgIGFjdFNuOiB0aGlzLm9wdGlvbnMuYWN0U24KICAgICAgICAgICAgfQogICAgICAgICAgfSk7CiAgICAgICAgICByZXR1cm47CiAgICAgICAgfQoKICAgICAgICBpZiAoIXRoaXMuYnRuRGlzYWJsZWQpIHRoaXMuZXhjaGFuZ2UoKTsKICAgICAgfSBlbHNlIGlmICh0aGlzLmluZm8uY2hpbGRFbnVtS2V5ID09ICdBQ1RfR0lGVF9QQUNLQUdFX1BVUkNIQVNFX0xJTUlUJykgewogICAgICAgIHRoaXMuaGFuZGxlckxpbWl0RXZlbnQoKTsKICAgICAgfSBlbHNlIGlmICh0aGlzLmluZm8uYWN0U3RhdGUgPT0gMikgewogICAgICAgIC8vIOWIpOaWreaYr+WQpuaYr+S7juWklumDqOa4oOmBk+i/m+WFpe+8jOWklumDqOa4oOmBk+i/m+WFpeaXtu+8jOWmguaenOmFjee9rueUqOaIt+WPr+i0reS5sO+8jOmdnuS8muWRmOS5n+WPr+i0reS5sOekvOWMhQogICAgICAgIGxldCBidXlMaW1pdCA9IHRoaXMuaW5mby5idXlMaW1pdDsKICAgICAgICBsZXQgc2VsbFByaWNlID0gdGhpcy5pbmZvLnNlbGxQcmljZTsKICAgICAgICBsZXQgbm9WaXBQcmljZSA9IHRoaXMuaW5mby5ub1ZpcFByaWNlOwogICAgICAgIGxldCBidXlTdGF0ZSA9IGZhbHNlOyAvLyAg5omA5pyJ5Lq6ICAg5LyaIDAgICDpnZ4gMAoKICAgICAgICBpZiAoYnV5TGltaXQgPT0gMSAmJiBub1ZpcFByaWNlID09IDAgJiYgc2VsbFByaWNlID09IDApIHsKICAgICAgICAgIGJ1eVN0YXRlID0gZmFsc2U7IC8vICDkvJrlkZjouqvku70KICAgICAgICB9IGVsc2UgaWYgKHZpcFVzZXIgJiYgc2VsbFByaWNlID4gMCkgewogICAgICAgICAgYnV5U3RhdGUgPSB0cnVlOwogICAgICAgIH0gZWxzZSBpZiAoIXZpcFVzZXIpIHsKICAgICAgICAgIGJ1eVN0YXRlID0gYnV5TGltaXQgPT0gMiA/IHRydWUgOiBub1ZpcFByaWNlID4gMDsKICAgICAgICB9CgogICAgICAgIGlmIChjaGFubmVsVHJhY2sgPyBwYWNrYWdlR2lmdFR5cGUgPT0gMSA6IHJlc3RyaWN0U3RhdGUgPT0gMikgewogICAgICAgICAgaWYgKGJ1eVN0YXRlKSB7CiAgICAgICAgICAgIC8vIOi0reS5sOekvOWMhQogICAgICAgICAgICAvLyDlpoLmnpzmmK/lpJbpg6jmuKDpgZPlubbkuJTmmK/pooblj5bnirbmgIHvvIxyZWNlaXZlVHlwZeS4ujTvvIzotK3kubDnirbmgIFyZWNlaXZlVHlwZeS4ujIKICAgICAgICAgICAgbGV0IHJlY2VpdmVUeXBlID0gdGhpcy5jaGFubmVsVHlwZSA9PSAnQ0hBTk5FTF9BQ1RJVklUWV9MQUJFTF9TSE9XJyAmJiB0aGlzLm9wZW5fcmVjZWl2ZSA/IDQgOiAyOwoKICAgICAgICAgICAgaWYgKGJ1eUxpbWl0ID09IDIgJiYgc2VsbFByaWNlID09IDApIHsKICAgICAgICAgICAgICByZWNlaXZlVHlwZSA9IDE7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHRoaXMub3JkZXJVbnBheShyZWNlaXZlVHlwZSk7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAvLyDkvb/nlKjlrZfmrrVyZXN0cmljdFN0YXRl5Yik5patCiAgICAgICAgICAgIHRoaXMucmVjZWl2ZUdpZnQoNCk7CiAgICAgICAgICB9CiAgICAgICAgfSBlbHNlIGlmIChjaGFubmVsVHJhY2sgPyBwYWNrYWdlR2lmdFR5cGUgPT0gMiA6IHJlc3RyaWN0U3RhdGUgPT0gMSkgewogICAgICAgICAgLy8g5YWN6LS56aKGCiAgICAgICAgICBpZiAoY2hhbm5lbFRyYWNrKSB7CiAgICAgICAgICAgIC8vIOS9v+eUqOWtl+autXBhY2thZ2VHaWZ0VHlwZeWIpOaWrQogICAgICAgICAgICBpZiAoZnJlZVJlY2VpdmVUeXBlICE9IDEgJiYgIWp1bXBTYXRlKSB7CiAgICAgICAgICAgICAgdGhpcy4kVG9hc3QoYOS7hemZkCR7dGhpcy5yZWNlaXZlT2JqW2ZyZWVSZWNlaXZlVHlwZV196aKG5Y+WYCk7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgdGhpcy5yZWNlaXZlR2lmdCg0KTsKICAgICAgICAgICAgfQogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgLy8g5L2/55So5a2X5q61cmVzdHJpY3RTdGF0ZeWIpOaWrQogICAgICAgICAgICB0aGlzLnJlY2VpdmVHaWZ0KDQpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQogICAgfQoKICB9LAoKICBhc3luYyBjcmVhdGVkKCkgewogICAgdGhpcy5vcHRpb25zID0gdGhpcy4kcm91dGUucXVlcnk7CiAgICB0aGlzLmFjdFNuID0gdGhpcy5vcHRpb25zLmFjdFNuOwogICAgdGhpcy5xckNvZGUgPSB0aGlzLm9wdGlvbnMucXJDb2RlIHx8ICcnOwogICAgdGhpcy5jaGFubmVsVHlwZSA9IHRoaXMub3B0aW9ucy5jaGFubmVsVHlwZSB8fCAnJzsKICAgIHRoaXMuY29tcElkID0gdGhpcy5vcHRpb25zLmNvbXBJZCB8fCAnJzsKICAgIHRoaXMuaGFzRXhjaGFuZ2UgPSB0aGlzLm9wdGlvbnMuaGFzRXhjaGFuZ2UgfHwgJyc7CiAgICBhd2FpdCB0aGlzLmdldFJlYWxUaW1lSW5mbygpOwoKICAgIGlmICh0aGlzLm9wdGlvbnMucG9wdXApIHsKICAgICAgdGhpcy5zaG93T3JkZXJUaXAoKTsKICAgIH0KCiAgICBpZiAodGhpcy5oYXNFeGNoYW5nZSAhPSAiIikgewogICAgICAvLyDliKTmlq3kuLrlhZHmjaLkuK3lv4Pov5vlhaUKICAgICAgdGhpcy5leGNoYW5nZV9kYXRhID0gdGhpcy4kc2F2ZS5nZXQoJ3Nlc3Npb24nLCAnZXhjaGFuZ2VfZGF0YScpOyAvLyDlhZHmjaLkuK3lv4PmtLvliqjmlbDmja4KICAgIH0KCiAgICB0aGlzLmdldFJlY2VpdmVDb25kaXRpb24oKTsgLy8g5piv5ZCm6ZyA6KaB5aGr5YaZ55So5oi35L+h5oGv5Y+K5YW25p2h5Lu2CgogICAgdGhpcy52aXBQcmljZSgpOwogICAgYXdhaXQgdGhpcy5nZXRHaWZ0SW5mbygpOwogICAgYXdhaXQgdGhpcy5nZXRBY3REZXRhaWwodHJ1ZSk7CiAgfQoKfTsKZXhwb3J0cy5kZWZhdWx0ID0gX2RlZmF1bHQ7"},null]}