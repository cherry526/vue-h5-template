{"remainingRequest":"C:\\Users\\Administrator\\Desktop\\vip_inline_h5\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\Administrator\\Desktop\\vip_inline_h5\\src\\plugins\\wxqrcode.js","dependencies":[{"path":"C:\\Users\\Administrator\\Desktop\\vip_inline_h5\\src\\plugins\\wxqrcode.js","mtime":1597889072490},{"path":"C:\\Users\\Administrator\\Desktop\\vip_inline_h5\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Administrator\\Desktop\\vip_inline_h5\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuY29uY2F0IjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuaW5kZXgtb2YiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QudG8tc3RyaW5nIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLmV4ZWMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcubWF0Y2giOwoKLyoqDQogKiBxcmNvZGUNCiAqIEBwYXJhbSB0eXBlTnVtYmVyIDEgdG8gNDANCiAqIEBwYXJhbSBlcnJvckNvcnJlY3RMZXZlbCAnTCcsJ00nLCdRJywnSCcNCiAqLwp2YXIgcXJjb2RlID0gZnVuY3Rpb24gcXJjb2RlKHR5cGVOdW1iZXIsIGVycm9yQ29ycmVjdExldmVsKSB7CiAgdmFyIFBBRDAgPSAweEVDOwogIHZhciBQQUQxID0gMHgxMTsKICB2YXIgX3R5cGVOdW1iZXIgPSB0eXBlTnVtYmVyOwogIHZhciBfZXJyb3JDb3JyZWN0TGV2ZWwgPSBRUkVycm9yQ29ycmVjdExldmVsW2Vycm9yQ29ycmVjdExldmVsXTsKICB2YXIgX21vZHVsZXMgPSBudWxsOwogIHZhciBfbW9kdWxlQ291bnQgPSAwOwogIHZhciBfZGF0YUNhY2hlID0gbnVsbDsKCiAgdmFyIF9kYXRhTGlzdCA9IG5ldyBBcnJheSgpOwoKICB2YXIgX3RoaXMgPSB7fTsKCiAgdmFyIG1ha2VJbXBsID0gZnVuY3Rpb24gbWFrZUltcGwodGVzdCwgbWFza1BhdHRlcm4pIHsKICAgIF9tb2R1bGVDb3VudCA9IF90eXBlTnVtYmVyICogNCArIDE3OwoKICAgIF9tb2R1bGVzID0gZnVuY3Rpb24gKG1vZHVsZUNvdW50KSB7CiAgICAgIHZhciBtb2R1bGVzID0gbmV3IEFycmF5KG1vZHVsZUNvdW50KTsKCiAgICAgIGZvciAodmFyIHJvdyA9IDA7IHJvdyA8IG1vZHVsZUNvdW50OyByb3cgKz0gMSkgewogICAgICAgIG1vZHVsZXNbcm93XSA9IG5ldyBBcnJheShtb2R1bGVDb3VudCk7CgogICAgICAgIGZvciAodmFyIGNvbCA9IDA7IGNvbCA8IG1vZHVsZUNvdW50OyBjb2wgKz0gMSkgewogICAgICAgICAgbW9kdWxlc1tyb3ddW2NvbF0gPSBudWxsOwogICAgICAgIH0KICAgICAgfQoKICAgICAgcmV0dXJuIG1vZHVsZXM7CiAgICB9KF9tb2R1bGVDb3VudCk7CgogICAgc2V0dXBQb3NpdGlvblByb2JlUGF0dGVybigwLCAwKTsKICAgIHNldHVwUG9zaXRpb25Qcm9iZVBhdHRlcm4oX21vZHVsZUNvdW50IC0gNywgMCk7CiAgICBzZXR1cFBvc2l0aW9uUHJvYmVQYXR0ZXJuKDAsIF9tb2R1bGVDb3VudCAtIDcpOwogICAgc2V0dXBQb3NpdGlvbkFkanVzdFBhdHRlcm4oKTsKICAgIHNldHVwVGltaW5nUGF0dGVybigpOwogICAgc2V0dXBUeXBlSW5mbyh0ZXN0LCBtYXNrUGF0dGVybik7CgogICAgaWYgKF90eXBlTnVtYmVyID49IDcpIHsKICAgICAgc2V0dXBUeXBlTnVtYmVyKHRlc3QpOwogICAgfQoKICAgIGlmIChfZGF0YUNhY2hlID09IG51bGwpIHsKICAgICAgX2RhdGFDYWNoZSA9IGNyZWF0ZURhdGEoX3R5cGVOdW1iZXIsIF9lcnJvckNvcnJlY3RMZXZlbCwgX2RhdGFMaXN0KTsKICAgIH0KCiAgICBtYXBEYXRhKF9kYXRhQ2FjaGUsIG1hc2tQYXR0ZXJuKTsKICB9OwoKICB2YXIgc2V0dXBQb3NpdGlvblByb2JlUGF0dGVybiA9IGZ1bmN0aW9uIHNldHVwUG9zaXRpb25Qcm9iZVBhdHRlcm4ocm93LCBjb2wpIHsKICAgIGZvciAodmFyIHIgPSAtMTsgciA8PSA3OyByICs9IDEpIHsKICAgICAgaWYgKHJvdyArIHIgPD0gLTEgfHwgX21vZHVsZUNvdW50IDw9IHJvdyArIHIpIGNvbnRpbnVlOwoKICAgICAgZm9yICh2YXIgYyA9IC0xOyBjIDw9IDc7IGMgKz0gMSkgewogICAgICAgIGlmIChjb2wgKyBjIDw9IC0xIHx8IF9tb2R1bGVDb3VudCA8PSBjb2wgKyBjKSBjb250aW51ZTsKCiAgICAgICAgaWYgKDAgPD0gciAmJiByIDw9IDYgJiYgKGMgPT0gMCB8fCBjID09IDYpIHx8IDAgPD0gYyAmJiBjIDw9IDYgJiYgKHIgPT0gMCB8fCByID09IDYpIHx8IDIgPD0gciAmJiByIDw9IDQgJiYgMiA8PSBjICYmIGMgPD0gNCkgewogICAgICAgICAgX21vZHVsZXNbcm93ICsgcl1bY29sICsgY10gPSB0cnVlOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBfbW9kdWxlc1tyb3cgKyByXVtjb2wgKyBjXSA9IGZhbHNlOwogICAgICAgIH0KICAgICAgfQogICAgfQogIH07CgogIHZhciBnZXRCZXN0TWFza1BhdHRlcm4gPSBmdW5jdGlvbiBnZXRCZXN0TWFza1BhdHRlcm4oKSB7CiAgICB2YXIgbWluTG9zdFBvaW50ID0gMDsKICAgIHZhciBwYXR0ZXJuID0gMDsKCiAgICBmb3IgKHZhciBpID0gMDsgaSA8IDg7IGkgKz0gMSkgewogICAgICBtYWtlSW1wbCh0cnVlLCBpKTsKICAgICAgdmFyIGxvc3RQb2ludCA9IFFSVXRpbC5nZXRMb3N0UG9pbnQoX3RoaXMpOwoKICAgICAgaWYgKGkgPT0gMCB8fCBtaW5Mb3N0UG9pbnQgPiBsb3N0UG9pbnQpIHsKICAgICAgICBtaW5Mb3N0UG9pbnQgPSBsb3N0UG9pbnQ7CiAgICAgICAgcGF0dGVybiA9IGk7CiAgICAgIH0KICAgIH0KCiAgICByZXR1cm4gcGF0dGVybjsKICB9OwoKICB2YXIgc2V0dXBUaW1pbmdQYXR0ZXJuID0gZnVuY3Rpb24gc2V0dXBUaW1pbmdQYXR0ZXJuKCkgewogICAgZm9yICh2YXIgciA9IDg7IHIgPCBfbW9kdWxlQ291bnQgLSA4OyByICs9IDEpIHsKICAgICAgaWYgKF9tb2R1bGVzW3JdWzZdICE9IG51bGwpIHsKICAgICAgICBjb250aW51ZTsKICAgICAgfQoKICAgICAgX21vZHVsZXNbcl1bNl0gPSByICUgMiA9PSAwOwogICAgfQoKICAgIGZvciAodmFyIGMgPSA4OyBjIDwgX21vZHVsZUNvdW50IC0gODsgYyArPSAxKSB7CiAgICAgIGlmIChfbW9kdWxlc1s2XVtjXSAhPSBudWxsKSB7CiAgICAgICAgY29udGludWU7CiAgICAgIH0KCiAgICAgIF9tb2R1bGVzWzZdW2NdID0gYyAlIDIgPT0gMDsKICAgIH0KICB9OwoKICB2YXIgc2V0dXBQb3NpdGlvbkFkanVzdFBhdHRlcm4gPSBmdW5jdGlvbiBzZXR1cFBvc2l0aW9uQWRqdXN0UGF0dGVybigpIHsKICAgIHZhciBwb3MgPSBRUlV0aWwuZ2V0UGF0dGVyblBvc2l0aW9uKF90eXBlTnVtYmVyKTsKCiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHBvcy5sZW5ndGg7IGkgKz0gMSkgewogICAgICBmb3IgKHZhciBqID0gMDsgaiA8IHBvcy5sZW5ndGg7IGogKz0gMSkgewogICAgICAgIHZhciByb3cgPSBwb3NbaV07CiAgICAgICAgdmFyIGNvbCA9IHBvc1tqXTsKCiAgICAgICAgaWYgKF9tb2R1bGVzW3Jvd11bY29sXSAhPSBudWxsKSB7CiAgICAgICAgICBjb250aW51ZTsKICAgICAgICB9CgogICAgICAgIGZvciAodmFyIHIgPSAtMjsgciA8PSAyOyByICs9IDEpIHsKICAgICAgICAgIGZvciAodmFyIGMgPSAtMjsgYyA8PSAyOyBjICs9IDEpIHsKICAgICAgICAgICAgaWYgKHIgPT0gLTIgfHwgciA9PSAyIHx8IGMgPT0gLTIgfHwgYyA9PSAyIHx8IHIgPT0gMCAmJiBjID09IDApIHsKICAgICAgICAgICAgICBfbW9kdWxlc1tyb3cgKyByXVtjb2wgKyBjXSA9IHRydWU7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgX21vZHVsZXNbcm93ICsgcl1bY29sICsgY10gPSBmYWxzZTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQogICAgfQogIH07CgogIHZhciBzZXR1cFR5cGVOdW1iZXIgPSBmdW5jdGlvbiBzZXR1cFR5cGVOdW1iZXIodGVzdCkgewogICAgdmFyIGJpdHMgPSBRUlV0aWwuZ2V0QkNIVHlwZU51bWJlcihfdHlwZU51bWJlcik7CgogICAgZm9yICh2YXIgaSA9IDA7IGkgPCAxODsgaSArPSAxKSB7CiAgICAgIHZhciBtb2QgPSAhdGVzdCAmJiAoYml0cyA+PiBpICYgMSkgPT0gMTsKICAgICAgX21vZHVsZXNbTWF0aC5mbG9vcihpIC8gMyldW2kgJSAzICsgX21vZHVsZUNvdW50IC0gOCAtIDNdID0gbW9kOwogICAgfQoKICAgIGZvciAodmFyIGkgPSAwOyBpIDwgMTg7IGkgKz0gMSkgewogICAgICB2YXIgbW9kID0gIXRlc3QgJiYgKGJpdHMgPj4gaSAmIDEpID09IDE7CiAgICAgIF9tb2R1bGVzW2kgJSAzICsgX21vZHVsZUNvdW50IC0gOCAtIDNdW01hdGguZmxvb3IoaSAvIDMpXSA9IG1vZDsKICAgIH0KICB9OwoKICB2YXIgc2V0dXBUeXBlSW5mbyA9IGZ1bmN0aW9uIHNldHVwVHlwZUluZm8odGVzdCwgbWFza1BhdHRlcm4pIHsKICAgIHZhciBkYXRhID0gX2Vycm9yQ29ycmVjdExldmVsIDw8IDMgfCBtYXNrUGF0dGVybjsKICAgIHZhciBiaXRzID0gUVJVdGlsLmdldEJDSFR5cGVJbmZvKGRhdGEpOwogICAgLyoqdmVydGljYWwgKi8KCiAgICBmb3IgKHZhciBpID0gMDsgaSA8IDE1OyBpICs9IDEpIHsKICAgICAgdmFyIG1vZCA9ICF0ZXN0ICYmIChiaXRzID4+IGkgJiAxKSA9PSAxOwoKICAgICAgaWYgKGkgPCA2KSB7CiAgICAgICAgX21vZHVsZXNbaV1bOF0gPSBtb2Q7CiAgICAgIH0gZWxzZSBpZiAoaSA8IDgpIHsKICAgICAgICBfbW9kdWxlc1tpICsgMV1bOF0gPSBtb2Q7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgX21vZHVsZXNbX21vZHVsZUNvdW50IC0gMTUgKyBpXVs4XSA9IG1vZDsKICAgICAgfQogICAgfQogICAgLyoqaG9yaXpvbnRhbCAqLwoKCiAgICBmb3IgKHZhciBpID0gMDsgaSA8IDE1OyBpICs9IDEpIHsKICAgICAgdmFyIG1vZCA9ICF0ZXN0ICYmIChiaXRzID4+IGkgJiAxKSA9PSAxOwoKICAgICAgaWYgKGkgPCA4KSB7CiAgICAgICAgX21vZHVsZXNbOF1bX21vZHVsZUNvdW50IC0gaSAtIDFdID0gbW9kOwogICAgICB9IGVsc2UgaWYgKGkgPCA5KSB7CiAgICAgICAgX21vZHVsZXNbOF1bMTUgLSBpIC0gMSArIDFdID0gbW9kOwogICAgICB9IGVsc2UgewogICAgICAgIF9tb2R1bGVzWzhdWzE1IC0gaSAtIDFdID0gbW9kOwogICAgICB9CiAgICB9CiAgICAvKipmaXhlZCBtb2R1bGUgKi8KCgogICAgX21vZHVsZXNbX21vZHVsZUNvdW50IC0gOF1bOF0gPSAhdGVzdDsKICB9OwoKICB2YXIgbWFwRGF0YSA9IGZ1bmN0aW9uIG1hcERhdGEoZGF0YSwgbWFza1BhdHRlcm4pIHsKICAgIHZhciBpbmMgPSAtMTsKICAgIHZhciByb3cgPSBfbW9kdWxlQ291bnQgLSAxOwogICAgdmFyIGJpdEluZGV4ID0gNzsKICAgIHZhciBieXRlSW5kZXggPSAwOwogICAgdmFyIG1hc2tGdW5jID0gUVJVdGlsLmdldE1hc2tGdW5jdGlvbihtYXNrUGF0dGVybik7CgogICAgZm9yICh2YXIgY29sID0gX21vZHVsZUNvdW50IC0gMTsgY29sID4gMDsgY29sIC09IDIpIHsKICAgICAgaWYgKGNvbCA9PSA2KSBjb2wgLT0gMTsKCiAgICAgIHdoaWxlICh0cnVlKSB7CiAgICAgICAgZm9yICh2YXIgYyA9IDA7IGMgPCAyOyBjICs9IDEpIHsKICAgICAgICAgIGlmIChfbW9kdWxlc1tyb3ddW2NvbCAtIGNdID09IG51bGwpIHsKICAgICAgICAgICAgdmFyIGRhcmsgPSBmYWxzZTsKCiAgICAgICAgICAgIGlmIChieXRlSW5kZXggPCBkYXRhLmxlbmd0aCkgewogICAgICAgICAgICAgIGRhcmsgPSAoZGF0YVtieXRlSW5kZXhdID4+PiBiaXRJbmRleCAmIDEpID09IDE7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHZhciBtYXNrID0gbWFza0Z1bmMocm93LCBjb2wgLSBjKTsKCiAgICAgICAgICAgIGlmIChtYXNrKSB7CiAgICAgICAgICAgICAgZGFyayA9ICFkYXJrOwogICAgICAgICAgICB9CgogICAgICAgICAgICBfbW9kdWxlc1tyb3ddW2NvbCAtIGNdID0gZGFyazsKICAgICAgICAgICAgYml0SW5kZXggLT0gMTsKCiAgICAgICAgICAgIGlmIChiaXRJbmRleCA9PSAtMSkgewogICAgICAgICAgICAgIGJ5dGVJbmRleCArPSAxOwogICAgICAgICAgICAgIGJpdEluZGV4ID0gNzsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgcm93ICs9IGluYzsKCiAgICAgICAgaWYgKHJvdyA8IDAgfHwgX21vZHVsZUNvdW50IDw9IHJvdykgewogICAgICAgICAgcm93IC09IGluYzsKICAgICAgICAgIGluYyA9IC1pbmM7CiAgICAgICAgICBicmVhazsKICAgICAgICB9CiAgICAgIH0KICAgIH0KICB9OwoKICB2YXIgY3JlYXRlQnl0ZXMgPSBmdW5jdGlvbiBjcmVhdGVCeXRlcyhidWZmZXIsIHJzQmxvY2tzKSB7CiAgICB2YXIgb2Zmc2V0ID0gMDsKICAgIHZhciBtYXhEY0NvdW50ID0gMDsKICAgIHZhciBtYXhFY0NvdW50ID0gMDsKICAgIHZhciBkY2RhdGEgPSBuZXcgQXJyYXkocnNCbG9ja3MubGVuZ3RoKTsKICAgIHZhciBlY2RhdGEgPSBuZXcgQXJyYXkocnNCbG9ja3MubGVuZ3RoKTsKCiAgICBmb3IgKHZhciByID0gMDsgciA8IHJzQmxvY2tzLmxlbmd0aDsgciArPSAxKSB7CiAgICAgIHZhciBkY0NvdW50ID0gcnNCbG9ja3Nbcl0uZGF0YUNvdW50OwogICAgICB2YXIgZWNDb3VudCA9IHJzQmxvY2tzW3JdLnRvdGFsQ291bnQgLSBkY0NvdW50OwogICAgICBtYXhEY0NvdW50ID0gTWF0aC5tYXgobWF4RGNDb3VudCwgZGNDb3VudCk7CiAgICAgIG1heEVjQ291bnQgPSBNYXRoLm1heChtYXhFY0NvdW50LCBlY0NvdW50KTsKICAgICAgZGNkYXRhW3JdID0gbmV3IEFycmF5KGRjQ291bnQpOwoKICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBkY2RhdGFbcl0ubGVuZ3RoOyBpICs9IDEpIHsKICAgICAgICBkY2RhdGFbcl1baV0gPSAweGZmICYgYnVmZmVyLmdldEJ1ZmZlcigpW2kgKyBvZmZzZXRdOwogICAgICB9CgogICAgICBvZmZzZXQgKz0gZGNDb3VudDsKICAgICAgdmFyIHJzUG9seSA9IFFSVXRpbC5nZXRFcnJvckNvcnJlY3RQb2x5bm9taWFsKGVjQ291bnQpOwogICAgICB2YXIgcmF3UG9seSA9IHFyUG9seW5vbWlhbChkY2RhdGFbcl0sIHJzUG9seS5nZXRMZW5ndGgoKSAtIDEpOwogICAgICB2YXIgbW9kUG9seSA9IHJhd1BvbHkubW9kKHJzUG9seSk7CiAgICAgIGVjZGF0YVtyXSA9IG5ldyBBcnJheShyc1BvbHkuZ2V0TGVuZ3RoKCkgLSAxKTsKCiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZWNkYXRhW3JdLmxlbmd0aDsgaSArPSAxKSB7CiAgICAgICAgdmFyIG1vZEluZGV4ID0gaSArIG1vZFBvbHkuZ2V0TGVuZ3RoKCkgLSBlY2RhdGFbcl0ubGVuZ3RoOwogICAgICAgIGVjZGF0YVtyXVtpXSA9IG1vZEluZGV4ID49IDAgPyBtb2RQb2x5LmdldEF0KG1vZEluZGV4KSA6IDA7CiAgICAgIH0KICAgIH0KCiAgICB2YXIgdG90YWxDb2RlQ291bnQgPSAwOwoKICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcnNCbG9ja3MubGVuZ3RoOyBpICs9IDEpIHsKICAgICAgdG90YWxDb2RlQ291bnQgKz0gcnNCbG9ja3NbaV0udG90YWxDb3VudDsKICAgIH0KCiAgICB2YXIgZGF0YSA9IG5ldyBBcnJheSh0b3RhbENvZGVDb3VudCk7CiAgICB2YXIgaW5kZXggPSAwOwoKICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbWF4RGNDb3VudDsgaSArPSAxKSB7CiAgICAgIGZvciAodmFyIHIgPSAwOyByIDwgcnNCbG9ja3MubGVuZ3RoOyByICs9IDEpIHsKICAgICAgICBpZiAoaSA8IGRjZGF0YVtyXS5sZW5ndGgpIHsKICAgICAgICAgIGRhdGFbaW5kZXhdID0gZGNkYXRhW3JdW2ldOwogICAgICAgICAgaW5kZXggKz0gMTsKICAgICAgICB9CiAgICAgIH0KICAgIH0KCiAgICBmb3IgKHZhciBpID0gMDsgaSA8IG1heEVjQ291bnQ7IGkgKz0gMSkgewogICAgICBmb3IgKHZhciByID0gMDsgciA8IHJzQmxvY2tzLmxlbmd0aDsgciArPSAxKSB7CiAgICAgICAgaWYgKGkgPCBlY2RhdGFbcl0ubGVuZ3RoKSB7CiAgICAgICAgICBkYXRhW2luZGV4XSA9IGVjZGF0YVtyXVtpXTsKICAgICAgICAgIGluZGV4ICs9IDE7CiAgICAgICAgfQogICAgICB9CiAgICB9CgogICAgcmV0dXJuIGRhdGE7CiAgfTsKCiAgdmFyIGNyZWF0ZURhdGEgPSBmdW5jdGlvbiBjcmVhdGVEYXRhKHR5cGVOdW1iZXIsIGVycm9yQ29ycmVjdExldmVsLCBkYXRhTGlzdCkgewogICAgdmFyIHJzQmxvY2tzID0gUVJSU0Jsb2NrLmdldFJTQmxvY2tzKHR5cGVOdW1iZXIsIGVycm9yQ29ycmVjdExldmVsKTsKICAgIHZhciBidWZmZXIgPSBxckJpdEJ1ZmZlcigpOwoKICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZGF0YUxpc3QubGVuZ3RoOyBpICs9IDEpIHsKICAgICAgdmFyIGRhdGEgPSBkYXRhTGlzdFtpXTsKICAgICAgYnVmZmVyLnB1dChkYXRhLmdldE1vZGUoKSwgNCk7CiAgICAgIGJ1ZmZlci5wdXQoZGF0YS5nZXRMZW5ndGgoKSwgUVJVdGlsLmdldExlbmd0aEluQml0cyhkYXRhLmdldE1vZGUoKSwgdHlwZU51bWJlcikpOwogICAgICBkYXRhLndyaXRlKGJ1ZmZlcik7CiAgICB9CiAgICAvKipjYWxjIG51bSBtYXggZGF0YS4gKi8KCgogICAgdmFyIHRvdGFsRGF0YUNvdW50ID0gMDsKCiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHJzQmxvY2tzLmxlbmd0aDsgaSArPSAxKSB7CiAgICAgIHRvdGFsRGF0YUNvdW50ICs9IHJzQmxvY2tzW2ldLmRhdGFDb3VudDsKICAgIH0KCiAgICBpZiAoYnVmZmVyLmdldExlbmd0aEluQml0cygpID4gdG90YWxEYXRhQ291bnQgKiA4KSB7CiAgICAgIHRocm93IG5ldyBFcnJvcignY29kZSBsZW5ndGggb3ZlcmZsb3cuICgnICsgYnVmZmVyLmdldExlbmd0aEluQml0cygpICsgJz4nICsgdG90YWxEYXRhQ291bnQgKiA4ICsgJyknKTsKICAgIH0KICAgIC8qKmVuZCBjb2RlICovCgoKICAgIGlmIChidWZmZXIuZ2V0TGVuZ3RoSW5CaXRzKCkgKyA0IDw9IHRvdGFsRGF0YUNvdW50ICogOCkgewogICAgICBidWZmZXIucHV0KDAsIDQpOwogICAgfQogICAgLyoqIHBhZGRpbmcgKi8KCgogICAgd2hpbGUgKGJ1ZmZlci5nZXRMZW5ndGhJbkJpdHMoKSAlIDggIT0gMCkgewogICAgICBidWZmZXIucHV0Qml0KGZhbHNlKTsKICAgIH0KICAgIC8qKnBhZGRpbmcgKi8KCgogICAgd2hpbGUgKHRydWUpIHsKICAgICAgaWYgKGJ1ZmZlci5nZXRMZW5ndGhJbkJpdHMoKSA+PSB0b3RhbERhdGFDb3VudCAqIDgpIHsKICAgICAgICBicmVhazsKICAgICAgfQoKICAgICAgYnVmZmVyLnB1dChQQUQwLCA4KTsKCiAgICAgIGlmIChidWZmZXIuZ2V0TGVuZ3RoSW5CaXRzKCkgPj0gdG90YWxEYXRhQ291bnQgKiA4KSB7CiAgICAgICAgYnJlYWs7CiAgICAgIH0KCiAgICAgIGJ1ZmZlci5wdXQoUEFEMSwgOCk7CiAgICB9CgogICAgcmV0dXJuIGNyZWF0ZUJ5dGVzKGJ1ZmZlciwgcnNCbG9ja3MpOwogIH07CgogIF90aGlzLmFkZERhdGEgPSBmdW5jdGlvbiAoZGF0YSkgewogICAgdmFyIG5ld0RhdGEgPSBxcjhCaXRCeXRlKGRhdGEpOwoKICAgIF9kYXRhTGlzdC5wdXNoKG5ld0RhdGEpOwoKICAgIF9kYXRhQ2FjaGUgPSBudWxsOwogIH07CgogIF90aGlzLmlzRGFyayA9IGZ1bmN0aW9uIChyb3csIGNvbCkgewogICAgaWYgKHJvdyA8IDAgfHwgX21vZHVsZUNvdW50IDw9IHJvdyB8fCBjb2wgPCAwIHx8IF9tb2R1bGVDb3VudCA8PSBjb2wpIHsKICAgICAgdGhyb3cgbmV3IEVycm9yKHJvdyArICcsJyArIGNvbCk7CiAgICB9CgogICAgcmV0dXJuIF9tb2R1bGVzW3Jvd11bY29sXTsKICB9OwoKICBfdGhpcy5nZXRNb2R1bGVDb3VudCA9IGZ1bmN0aW9uICgpIHsKICAgIHJldHVybiBfbW9kdWxlQ291bnQ7CiAgfTsKCiAgX3RoaXMubWFrZSA9IGZ1bmN0aW9uICgpIHsKICAgIG1ha2VJbXBsKGZhbHNlLCBnZXRCZXN0TWFza1BhdHRlcm4oKSk7CiAgfTsKCiAgX3RoaXMuY3JlYXRlVGFibGVUYWcgPSBmdW5jdGlvbiAoY2VsbFNpemUsIG1hcmdpbikgewogICAgY2VsbFNpemUgPSBjZWxsU2l6ZSB8fCAyOwogICAgbWFyZ2luID0gdHlwZW9mIG1hcmdpbiA9PSAndW5kZWZpbmVkJyA/IGNlbGxTaXplICogNCA6IG1hcmdpbjsKICAgIHZhciBxckh0bWwgPSAnJzsKICAgIHFySHRtbCArPSAnPHRhYmxlIHN0eWxlPSInOwogICAgcXJIdG1sICs9ICcgYm9yZGVyLXdpZHRoOiAwcHg7IGJvcmRlci1zdHlsZTogbm9uZTsnOwogICAgcXJIdG1sICs9ICcgYm9yZGVyLWNvbGxhcHNlOiBjb2xsYXBzZTsnOwogICAgcXJIdG1sICs9ICcgcGFkZGluZzogMHB4OyBtYXJnaW46ICcgKyBtYXJnaW4gKyAncHg7JzsKICAgIHFySHRtbCArPSAnIj4nOwogICAgcXJIdG1sICs9ICc8dGJvZHk+JzsKCiAgICBmb3IgKHZhciByID0gMDsgciA8IF90aGlzLmdldE1vZHVsZUNvdW50KCk7IHIgKz0gMSkgewogICAgICBxckh0bWwgKz0gJzx0cj4nOwoKICAgICAgZm9yICh2YXIgYyA9IDA7IGMgPCBfdGhpcy5nZXRNb2R1bGVDb3VudCgpOyBjICs9IDEpIHsKICAgICAgICBxckh0bWwgKz0gJzx0ZCBzdHlsZT0iJzsKICAgICAgICBxckh0bWwgKz0gJyBib3JkZXItd2lkdGg6IDBweDsgYm9yZGVyLXN0eWxlOiBub25lOyc7CiAgICAgICAgcXJIdG1sICs9ICcgYm9yZGVyLWNvbGxhcHNlOiBjb2xsYXBzZTsnOwogICAgICAgIHFySHRtbCArPSAnIHBhZGRpbmc6IDBweDsgbWFyZ2luOiAwcHg7JzsKICAgICAgICBxckh0bWwgKz0gJyB3aWR0aDogJyArIGNlbGxTaXplICsgJ3B4Oyc7CiAgICAgICAgcXJIdG1sICs9ICcgaGVpZ2h0OiAnICsgY2VsbFNpemUgKyAncHg7JzsKICAgICAgICBxckh0bWwgKz0gJyBiYWNrZ3JvdW5kLWNvbG9yOiAnOwogICAgICAgIHFySHRtbCArPSBfdGhpcy5pc0RhcmsociwgYykgPyAnIzAwMDAwMCcgOiAnI2ZmZmZmZic7CiAgICAgICAgcXJIdG1sICs9ICc7JzsKICAgICAgICBxckh0bWwgKz0gJyIvPic7CiAgICAgIH0KCiAgICAgIHFySHRtbCArPSAnPC90cj4nOwogICAgfQoKICAgIHFySHRtbCArPSAnPC90Ym9keT4nOwogICAgcXJIdG1sICs9ICc8L3RhYmxlPic7CiAgICByZXR1cm4gcXJIdG1sOwogIH07CgogIF90aGlzLmNyZWF0ZUltZ1RhZyA9IGZ1bmN0aW9uIChjZWxsU2l6ZSwgbWFyZ2luLCBzaXplKSB7CiAgICBjZWxsU2l6ZSA9IGNlbGxTaXplIHx8IDI7CiAgICBtYXJnaW4gPSB0eXBlb2YgbWFyZ2luID09ICd1bmRlZmluZWQnID8gY2VsbFNpemUgKiA0IDogbWFyZ2luOwogICAgdmFyIG1pbiA9IG1hcmdpbjsKICAgIHZhciBtYXggPSBfdGhpcy5nZXRNb2R1bGVDb3VudCgpICogY2VsbFNpemUgKyBtYXJnaW47CiAgICByZXR1cm4gY3JlYXRlSW1nVGFnKHNpemUsIHNpemUsIGZ1bmN0aW9uICh4LCB5KSB7CiAgICAgIGlmIChtaW4gPD0geCAmJiB4IDwgbWF4ICYmIG1pbiA8PSB5ICYmIHkgPCBtYXgpIHsKICAgICAgICB2YXIgYyA9IE1hdGguZmxvb3IoKHggLSBtaW4pIC8gY2VsbFNpemUpOwogICAgICAgIHZhciByID0gTWF0aC5mbG9vcigoeSAtIG1pbikgLyBjZWxsU2l6ZSk7CiAgICAgICAgcmV0dXJuIF90aGlzLmlzRGFyayhyLCBjKSA/IDAgOiAxOwogICAgICB9IGVsc2UgewogICAgICAgIHJldHVybiAxOwogICAgICB9CiAgICB9KTsKICB9OwoKICByZXR1cm4gX3RoaXM7Cn07Ci8qKiANCi8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQovLyBxcmNvZGUuc3RyaW5nVG9CeXRlcw0KLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCiovCgoKcXJjb2RlLnN0cmluZ1RvQnl0ZXMgPSBmdW5jdGlvbiAocykgewogIHZhciBieXRlcyA9IG5ldyBBcnJheSgpOwoKICBmb3IgKHZhciBpID0gMDsgaSA8IHMubGVuZ3RoOyBpICs9IDEpIHsKICAgIHZhciBjID0gcy5jaGFyQ29kZUF0KGkpOwogICAgYnl0ZXMucHVzaChjICYgMHhmZik7CiAgfQoKICByZXR1cm4gYnl0ZXM7Cn07Ci8qKg0KLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCi8vIHFyY29kZS5jcmVhdGVTdHJpbmdUb0J5dGVzDQovLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KICovCgovKioNCiAqIEBwYXJhbSB1bmljb2RlRGF0YSBiYXNlNjQgc3RyaW5nIG9mIGJ5dGUgYXJyYXkuDQogKiBbMTZiaXQgVW5pY29kZV0sWzE2Yml0IEJ5dGVzXSwgLi4uDQogKiBAcGFyYW0gbnVtQ2hhcnMNCiAqLwoKCnFyY29kZS5jcmVhdGVTdHJpbmdUb0J5dGVzID0gZnVuY3Rpb24gKHVuaWNvZGVEYXRhLCBudW1DaGFycykgewogIC8qKiBjcmVhdGUgY29udmVyc2lvbiBtYXAuICovCiAgdmFyIHVuaWNvZGVNYXAgPSBmdW5jdGlvbiAoKSB7CiAgICB2YXIgYmluID0gYmFzZTY0RGVjb2RlSW5wdXRTdHJlYW0odW5pY29kZURhdGEpOwoKICAgIHZhciByZWFkID0gZnVuY3Rpb24gcmVhZCgpIHsKICAgICAgdmFyIGIgPSBiaW4ucmVhZCgpOwogICAgICBpZiAoYiA9PSAtMSkgdGhyb3cgbmV3IEVycm9yKCk7CiAgICAgIHJldHVybiBiOwogICAgfTsKCiAgICB2YXIgY291bnQgPSAwOwogICAgdmFyIHVuaWNvZGVNYXAgPSB7fTsKCiAgICB3aGlsZSAodHJ1ZSkgewogICAgICB2YXIgYjAgPSBiaW4ucmVhZCgpOwogICAgICBpZiAoYjAgPT0gLTEpIGJyZWFrOwogICAgICB2YXIgYjEgPSByZWFkKCk7CiAgICAgIHZhciBiMiA9IHJlYWQoKTsKICAgICAgdmFyIGIzID0gcmVhZCgpOwogICAgICB2YXIgayA9IFN0cmluZy5mcm9tQ2hhckNvZGUoYjAgPDwgOCB8IGIxKTsKICAgICAgdmFyIHYgPSBiMiA8PCA4IHwgYjM7CiAgICAgIHVuaWNvZGVNYXBba10gPSB2OwogICAgICBjb3VudCArPSAxOwogICAgfQoKICAgIGlmIChjb3VudCAhPSBudW1DaGFycykgewogICAgICB0aHJvdyBuZXcgRXJyb3IoY291bnQgKyAnICE9ICcgKyBudW1DaGFycyk7CiAgICB9CgogICAgcmV0dXJuIHVuaWNvZGVNYXA7CiAgfSgpOwoKICB2YXIgdW5rbm93bkNoYXIgPSAnPycuY2hhckNvZGVBdCgwKTsKICByZXR1cm4gZnVuY3Rpb24gKHMpIHsKICAgIHZhciBieXRlcyA9IG5ldyBBcnJheSgpOwoKICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcy5sZW5ndGg7IGkgKz0gMSkgewogICAgICB2YXIgYyA9IHMuY2hhckNvZGVBdChpKTsKCiAgICAgIGlmIChjIDwgMTI4KSB7CiAgICAgICAgYnl0ZXMucHVzaChjKTsKICAgICAgfSBlbHNlIHsKICAgICAgICB2YXIgYiA9IHVuaWNvZGVNYXBbcy5jaGFyQXQoaSldOwoKICAgICAgICBpZiAodHlwZW9mIGIgPT0gJ251bWJlcicpIHsKICAgICAgICAgIGlmICgoYiAmIDB4ZmYpID09IGIpIHsKICAgICAgICAgICAgLyoqMWJ5dGUgKi8KICAgICAgICAgICAgYnl0ZXMucHVzaChiKTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIC8qKiAyYnl0ZXMgKi8KICAgICAgICAgICAgYnl0ZXMucHVzaChiID4+PiA4KTsKICAgICAgICAgICAgYnl0ZXMucHVzaChiICYgMHhmZik7CiAgICAgICAgICB9CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGJ5dGVzLnB1c2godW5rbm93bkNoYXIpOwogICAgICAgIH0KICAgICAgfQogICAgfQoKICAgIHJldHVybiBieXRlczsKICB9Owp9OwovKiogDQovLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KLy8gUVJNb2RlDQovLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KKi8KCgp2YXIgUVJNb2RlID0gewogIE1PREVfTlVNQkVSOiAxIDw8IDAsCiAgTU9ERV9BTFBIQV9OVU06IDEgPDwgMSwKICBNT0RFXzhCSVRfQllURTogMSA8PCAyLAogIE1PREVfS0FOSkk6IDEgPDwgMwp9OwovKiogDQovLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KLy8gUVJFcnJvckNvcnJlY3RMZXZlbA0KLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCiovCgp2YXIgUVJFcnJvckNvcnJlY3RMZXZlbCA9IHsKICBMOiAxLAogIE06IDAsCiAgUTogMywKICBIOiAyCn07Ci8qKiANCi8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQovLyBRUk1hc2tQYXR0ZXJuDQovLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KKi8KCnZhciBRUk1hc2tQYXR0ZXJuID0gewogIFBBVFRFUk4wMDA6IDAsCiAgUEFUVEVSTjAwMTogMSwKICBQQVRURVJOMDEwOiAyLAogIFBBVFRFUk4wMTE6IDMsCiAgUEFUVEVSTjEwMDogNCwKICBQQVRURVJOMTAxOiA1LAogIFBBVFRFUk4xMTA6IDYsCiAgUEFUVEVSTjExMTogNwp9OwovKiogDQovLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KLy8gUVJVdGlsDQovLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KKi8KCnZhciBRUlV0aWwgPSBmdW5jdGlvbiAoKSB7CiAgdmFyIFBBVFRFUk5fUE9TSVRJT05fVEFCTEUgPSBbW10sIFs2LCAxOF0sIFs2LCAyMl0sIFs2LCAyNl0sIFs2LCAzMF0sIFs2LCAzNF0sIFs2LCAyMiwgMzhdLCBbNiwgMjQsIDQyXSwgWzYsIDI2LCA0Nl0sIFs2LCAyOCwgNTBdLCBbNiwgMzAsIDU0XSwgWzYsIDMyLCA1OF0sIFs2LCAzNCwgNjJdLCBbNiwgMjYsIDQ2LCA2Nl0sIFs2LCAyNiwgNDgsIDcwXSwgWzYsIDI2LCA1MCwgNzRdLCBbNiwgMzAsIDU0LCA3OF0sIFs2LCAzMCwgNTYsIDgyXSwgWzYsIDMwLCA1OCwgODZdLCBbNiwgMzQsIDYyLCA5MF0sIFs2LCAyOCwgNTAsIDcyLCA5NF0sIFs2LCAyNiwgNTAsIDc0LCA5OF0sIFs2LCAzMCwgNTQsIDc4LCAxMDJdLCBbNiwgMjgsIDU0LCA4MCwgMTA2XSwgWzYsIDMyLCA1OCwgODQsIDExMF0sIFs2LCAzMCwgNTgsIDg2LCAxMTRdLCBbNiwgMzQsIDYyLCA5MCwgMTE4XSwgWzYsIDI2LCA1MCwgNzQsIDk4LCAxMjJdLCBbNiwgMzAsIDU0LCA3OCwgMTAyLCAxMjZdLCBbNiwgMjYsIDUyLCA3OCwgMTA0LCAxMzBdLCBbNiwgMzAsIDU2LCA4MiwgMTA4LCAxMzRdLCBbNiwgMzQsIDYwLCA4NiwgMTEyLCAxMzhdLCBbNiwgMzAsIDU4LCA4NiwgMTE0LCAxNDJdLCBbNiwgMzQsIDYyLCA5MCwgMTE4LCAxNDZdLCBbNiwgMzAsIDU0LCA3OCwgMTAyLCAxMjYsIDE1MF0sIFs2LCAyNCwgNTAsIDc2LCAxMDIsIDEyOCwgMTU0XSwgWzYsIDI4LCA1NCwgODAsIDEwNiwgMTMyLCAxNThdLCBbNiwgMzIsIDU4LCA4NCwgMTEwLCAxMzYsIDE2Ml0sIFs2LCAyNiwgNTQsIDgyLCAxMTAsIDEzOCwgMTY2XSwgWzYsIDMwLCA1OCwgODYsIDExNCwgMTQyLCAxNzBdXTsKICB2YXIgRzE1ID0gMSA8PCAxMCB8IDEgPDwgOCB8IDEgPDwgNSB8IDEgPDwgNCB8IDEgPDwgMiB8IDEgPDwgMSB8IDEgPDwgMDsKICB2YXIgRzE4ID0gMSA8PCAxMiB8IDEgPDwgMTEgfCAxIDw8IDEwIHwgMSA8PCA5IHwgMSA8PCA4IHwgMSA8PCA1IHwgMSA8PCAyIHwgMSA8PCAwOwogIHZhciBHMTVfTUFTSyA9IDEgPDwgMTQgfCAxIDw8IDEyIHwgMSA8PCAxMCB8IDEgPDwgNCB8IDEgPDwgMTsKICB2YXIgX3RoaXMgPSB7fTsKCiAgdmFyIGdldEJDSERpZ2l0ID0gZnVuY3Rpb24gZ2V0QkNIRGlnaXQoZGF0YSkgewogICAgdmFyIGRpZ2l0ID0gMDsKCiAgICB3aGlsZSAoZGF0YSAhPSAwKSB7CiAgICAgIGRpZ2l0ICs9IDE7CiAgICAgIGRhdGEgPj4+PSAxOwogICAgfQoKICAgIHJldHVybiBkaWdpdDsKICB9OwoKICBfdGhpcy5nZXRCQ0hUeXBlSW5mbyA9IGZ1bmN0aW9uIChkYXRhKSB7CiAgICB2YXIgZCA9IGRhdGEgPDwgMTA7CgogICAgd2hpbGUgKGdldEJDSERpZ2l0KGQpIC0gZ2V0QkNIRGlnaXQoRzE1KSA+PSAwKSB7CiAgICAgIGQgXj0gRzE1IDw8IGdldEJDSERpZ2l0KGQpIC0gZ2V0QkNIRGlnaXQoRzE1KTsKICAgIH0KCiAgICByZXR1cm4gKGRhdGEgPDwgMTAgfCBkKSBeIEcxNV9NQVNLOwogIH07CgogIF90aGlzLmdldEJDSFR5cGVOdW1iZXIgPSBmdW5jdGlvbiAoZGF0YSkgewogICAgdmFyIGQgPSBkYXRhIDw8IDEyOwoKICAgIHdoaWxlIChnZXRCQ0hEaWdpdChkKSAtIGdldEJDSERpZ2l0KEcxOCkgPj0gMCkgewogICAgICBkIF49IEcxOCA8PCBnZXRCQ0hEaWdpdChkKSAtIGdldEJDSERpZ2l0KEcxOCk7CiAgICB9CgogICAgcmV0dXJuIGRhdGEgPDwgMTIgfCBkOwogIH07CgogIF90aGlzLmdldFBhdHRlcm5Qb3NpdGlvbiA9IGZ1bmN0aW9uICh0eXBlTnVtYmVyKSB7CiAgICByZXR1cm4gUEFUVEVSTl9QT1NJVElPTl9UQUJMRVt0eXBlTnVtYmVyIC0gMV07CiAgfTsKCiAgX3RoaXMuZ2V0TWFza0Z1bmN0aW9uID0gZnVuY3Rpb24gKG1hc2tQYXR0ZXJuKSB7CiAgICBzd2l0Y2ggKG1hc2tQYXR0ZXJuKSB7CiAgICAgIGNhc2UgUVJNYXNrUGF0dGVybi5QQVRURVJOMDAwOgogICAgICAgIHJldHVybiBmdW5jdGlvbiAoaSwgaikgewogICAgICAgICAgcmV0dXJuIChpICsgaikgJSAyID09IDA7CiAgICAgICAgfTsKCiAgICAgIGNhc2UgUVJNYXNrUGF0dGVybi5QQVRURVJOMDAxOgogICAgICAgIHJldHVybiBmdW5jdGlvbiAoaSwgaikgewogICAgICAgICAgcmV0dXJuIGkgJSAyID09IDA7CiAgICAgICAgfTsKCiAgICAgIGNhc2UgUVJNYXNrUGF0dGVybi5QQVRURVJOMDEwOgogICAgICAgIHJldHVybiBmdW5jdGlvbiAoaSwgaikgewogICAgICAgICAgcmV0dXJuIGogJSAzID09IDA7CiAgICAgICAgfTsKCiAgICAgIGNhc2UgUVJNYXNrUGF0dGVybi5QQVRURVJOMDExOgogICAgICAgIHJldHVybiBmdW5jdGlvbiAoaSwgaikgewogICAgICAgICAgcmV0dXJuIChpICsgaikgJSAzID09IDA7CiAgICAgICAgfTsKCiAgICAgIGNhc2UgUVJNYXNrUGF0dGVybi5QQVRURVJOMTAwOgogICAgICAgIHJldHVybiBmdW5jdGlvbiAoaSwgaikgewogICAgICAgICAgcmV0dXJuIChNYXRoLmZsb29yKGkgLyAyKSArIE1hdGguZmxvb3IoaiAvIDMpKSAlIDIgPT0gMDsKICAgICAgICB9OwoKICAgICAgY2FzZSBRUk1hc2tQYXR0ZXJuLlBBVFRFUk4xMDE6CiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChpLCBqKSB7CiAgICAgICAgICByZXR1cm4gaSAqIGogJSAyICsgaSAqIGogJSAzID09IDA7CiAgICAgICAgfTsKCiAgICAgIGNhc2UgUVJNYXNrUGF0dGVybi5QQVRURVJOMTEwOgogICAgICAgIHJldHVybiBmdW5jdGlvbiAoaSwgaikgewogICAgICAgICAgcmV0dXJuIChpICogaiAlIDIgKyBpICogaiAlIDMpICUgMiA9PSAwOwogICAgICAgIH07CgogICAgICBjYXNlIFFSTWFza1BhdHRlcm4uUEFUVEVSTjExMToKICAgICAgICByZXR1cm4gZnVuY3Rpb24gKGksIGopIHsKICAgICAgICAgIHJldHVybiAoaSAqIGogJSAzICsgKGkgKyBqKSAlIDIpICUgMiA9PSAwOwogICAgICAgIH07CgogICAgICBkZWZhdWx0OgogICAgICAgIHRocm93IG5ldyBFcnJvcignYmFkIG1hc2tQYXR0ZXJuOicgKyBtYXNrUGF0dGVybik7CiAgICB9CiAgfTsKCiAgX3RoaXMuZ2V0RXJyb3JDb3JyZWN0UG9seW5vbWlhbCA9IGZ1bmN0aW9uIChlcnJvckNvcnJlY3RMZW5ndGgpIHsKICAgIHZhciBhID0gcXJQb2x5bm9taWFsKFsxXSwgMCk7CgogICAgZm9yICh2YXIgaSA9IDA7IGkgPCBlcnJvckNvcnJlY3RMZW5ndGg7IGkgKz0gMSkgewogICAgICBhID0gYS5tdWx0aXBseShxclBvbHlub21pYWwoWzEsIFFSTWF0aC5nZXhwKGkpXSwgMCkpOwogICAgfQoKICAgIHJldHVybiBhOwogIH07CgogIF90aGlzLmdldExlbmd0aEluQml0cyA9IGZ1bmN0aW9uIChtb2RlLCB0eXBlKSB7CiAgICBpZiAoMSA8PSB0eXBlICYmIHR5cGUgPCAxMCkgewogICAgICAvKioxIC0gOSAqLwogICAgICBzd2l0Y2ggKG1vZGUpIHsKICAgICAgICBjYXNlIFFSTW9kZS5NT0RFX05VTUJFUjoKICAgICAgICAgIHJldHVybiAxMDsKCiAgICAgICAgY2FzZSBRUk1vZGUuTU9ERV9BTFBIQV9OVU06CiAgICAgICAgICByZXR1cm4gOTsKCiAgICAgICAgY2FzZSBRUk1vZGUuTU9ERV84QklUX0JZVEU6CiAgICAgICAgICByZXR1cm4gODsKCiAgICAgICAgY2FzZSBRUk1vZGUuTU9ERV9LQU5KSToKICAgICAgICAgIHJldHVybiA4OwoKICAgICAgICBkZWZhdWx0OgogICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdtb2RlOicgKyBtb2RlKTsKICAgICAgfQogICAgfSBlbHNlIGlmICh0eXBlIDwgMjcpIHsKICAgICAgLyoqMTAgLSAyNiAqLwogICAgICBzd2l0Y2ggKG1vZGUpIHsKICAgICAgICBjYXNlIFFSTW9kZS5NT0RFX05VTUJFUjoKICAgICAgICAgIHJldHVybiAxMjsKCiAgICAgICAgY2FzZSBRUk1vZGUuTU9ERV9BTFBIQV9OVU06CiAgICAgICAgICByZXR1cm4gMTE7CgogICAgICAgIGNhc2UgUVJNb2RlLk1PREVfOEJJVF9CWVRFOgogICAgICAgICAgcmV0dXJuIDE2OwoKICAgICAgICBjYXNlIFFSTW9kZS5NT0RFX0tBTkpJOgogICAgICAgICAgcmV0dXJuIDEwOwoKICAgICAgICBkZWZhdWx0OgogICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdtb2RlOicgKyBtb2RlKTsKICAgICAgfQogICAgfSBlbHNlIGlmICh0eXBlIDwgNDEpIHsKICAgICAgLyoqMjcgLSA0MCAqLwogICAgICBzd2l0Y2ggKG1vZGUpIHsKICAgICAgICBjYXNlIFFSTW9kZS5NT0RFX05VTUJFUjoKICAgICAgICAgIHJldHVybiAxNDsKCiAgICAgICAgY2FzZSBRUk1vZGUuTU9ERV9BTFBIQV9OVU06CiAgICAgICAgICByZXR1cm4gMTM7CgogICAgICAgIGNhc2UgUVJNb2RlLk1PREVfOEJJVF9CWVRFOgogICAgICAgICAgcmV0dXJuIDE2OwoKICAgICAgICBjYXNlIFFSTW9kZS5NT0RFX0tBTkpJOgogICAgICAgICAgcmV0dXJuIDEyOwoKICAgICAgICBkZWZhdWx0OgogICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdtb2RlOicgKyBtb2RlKTsKICAgICAgfQogICAgfSBlbHNlIHsKICAgICAgdGhyb3cgbmV3IEVycm9yKCd0eXBlOicgKyB0eXBlKTsKICAgIH0KICB9OwoKICBfdGhpcy5nZXRMb3N0UG9pbnQgPSBmdW5jdGlvbiAocXJjb2RlKSB7CiAgICB2YXIgbW9kdWxlQ291bnQgPSBxcmNvZGUuZ2V0TW9kdWxlQ291bnQoKTsKICAgIHZhciBsb3N0UG9pbnQgPSAwOwogICAgLyoqTEVWRUwxICovCgogICAgZm9yICh2YXIgcm93ID0gMDsgcm93IDwgbW9kdWxlQ291bnQ7IHJvdyArPSAxKSB7CiAgICAgIGZvciAodmFyIGNvbCA9IDA7IGNvbCA8IG1vZHVsZUNvdW50OyBjb2wgKz0gMSkgewogICAgICAgIHZhciBzYW1lQ291bnQgPSAwOwogICAgICAgIHZhciBkYXJrID0gcXJjb2RlLmlzRGFyayhyb3csIGNvbCk7CgogICAgICAgIGZvciAodmFyIHIgPSAtMTsgciA8PSAxOyByICs9IDEpIHsKICAgICAgICAgIGlmIChyb3cgKyByIDwgMCB8fCBtb2R1bGVDb3VudCA8PSByb3cgKyByKSB7CiAgICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgICAgfQoKICAgICAgICAgIGZvciAodmFyIGMgPSAtMTsgYyA8PSAxOyBjICs9IDEpIHsKICAgICAgICAgICAgaWYgKGNvbCArIGMgPCAwIHx8IG1vZHVsZUNvdW50IDw9IGNvbCArIGMpIHsKICAgICAgICAgICAgICBjb250aW51ZTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgaWYgKHIgPT0gMCAmJiBjID09IDApIHsKICAgICAgICAgICAgICBjb250aW51ZTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgaWYgKGRhcmsgPT0gcXJjb2RlLmlzRGFyayhyb3cgKyByLCBjb2wgKyBjKSkgewogICAgICAgICAgICAgIHNhbWVDb3VudCArPSAxOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBpZiAoc2FtZUNvdW50ID4gNSkgewogICAgICAgICAgbG9zdFBvaW50ICs9IDMgKyBzYW1lQ291bnQgLSA1OwogICAgICAgIH0KICAgICAgfQogICAgfQoKICAgIDsKICAgIC8qKkxFVkVMMiAqLwoKICAgIGZvciAodmFyIHJvdyA9IDA7IHJvdyA8IG1vZHVsZUNvdW50IC0gMTsgcm93ICs9IDEpIHsKICAgICAgZm9yICh2YXIgY29sID0gMDsgY29sIDwgbW9kdWxlQ291bnQgLSAxOyBjb2wgKz0gMSkgewogICAgICAgIHZhciBjb3VudCA9IDA7CiAgICAgICAgaWYgKHFyY29kZS5pc0Rhcmsocm93LCBjb2wpKSBjb3VudCArPSAxOwogICAgICAgIGlmIChxcmNvZGUuaXNEYXJrKHJvdyArIDEsIGNvbCkpIGNvdW50ICs9IDE7CiAgICAgICAgaWYgKHFyY29kZS5pc0Rhcmsocm93LCBjb2wgKyAxKSkgY291bnQgKz0gMTsKICAgICAgICBpZiAocXJjb2RlLmlzRGFyayhyb3cgKyAxLCBjb2wgKyAxKSkgY291bnQgKz0gMTsKCiAgICAgICAgaWYgKGNvdW50ID09IDAgfHwgY291bnQgPT0gNCkgewogICAgICAgICAgbG9zdFBvaW50ICs9IDM7CiAgICAgICAgfQogICAgICB9CiAgICB9CiAgICAvKipMRVZFTDMgKi8KCgogICAgZm9yICh2YXIgcm93ID0gMDsgcm93IDwgbW9kdWxlQ291bnQ7IHJvdyArPSAxKSB7CiAgICAgIGZvciAodmFyIGNvbCA9IDA7IGNvbCA8IG1vZHVsZUNvdW50IC0gNjsgY29sICs9IDEpIHsKICAgICAgICBpZiAocXJjb2RlLmlzRGFyayhyb3csIGNvbCkgJiYgIXFyY29kZS5pc0Rhcmsocm93LCBjb2wgKyAxKSAmJiBxcmNvZGUuaXNEYXJrKHJvdywgY29sICsgMikgJiYgcXJjb2RlLmlzRGFyayhyb3csIGNvbCArIDMpICYmIHFyY29kZS5pc0Rhcmsocm93LCBjb2wgKyA0KSAmJiAhcXJjb2RlLmlzRGFyayhyb3csIGNvbCArIDUpICYmIHFyY29kZS5pc0Rhcmsocm93LCBjb2wgKyA2KSkgewogICAgICAgICAgbG9zdFBvaW50ICs9IDQwOwogICAgICAgIH0KICAgICAgfQogICAgfQoKICAgIGZvciAodmFyIGNvbCA9IDA7IGNvbCA8IG1vZHVsZUNvdW50OyBjb2wgKz0gMSkgewogICAgICBmb3IgKHZhciByb3cgPSAwOyByb3cgPCBtb2R1bGVDb3VudCAtIDY7IHJvdyArPSAxKSB7CiAgICAgICAgaWYgKHFyY29kZS5pc0Rhcmsocm93LCBjb2wpICYmICFxcmNvZGUuaXNEYXJrKHJvdyArIDEsIGNvbCkgJiYgcXJjb2RlLmlzRGFyayhyb3cgKyAyLCBjb2wpICYmIHFyY29kZS5pc0Rhcmsocm93ICsgMywgY29sKSAmJiBxcmNvZGUuaXNEYXJrKHJvdyArIDQsIGNvbCkgJiYgIXFyY29kZS5pc0Rhcmsocm93ICsgNSwgY29sKSAmJiBxcmNvZGUuaXNEYXJrKHJvdyArIDYsIGNvbCkpIHsKICAgICAgICAgIGxvc3RQb2ludCArPSA0MDsKICAgICAgICB9CiAgICAgIH0KICAgIH0KICAgIC8qKkxFVkVMNCAqLwoKCiAgICB2YXIgZGFya0NvdW50ID0gMDsKCiAgICBmb3IgKHZhciBjb2wgPSAwOyBjb2wgPCBtb2R1bGVDb3VudDsgY29sICs9IDEpIHsKICAgICAgZm9yICh2YXIgcm93ID0gMDsgcm93IDwgbW9kdWxlQ291bnQ7IHJvdyArPSAxKSB7CiAgICAgICAgaWYgKHFyY29kZS5pc0Rhcmsocm93LCBjb2wpKSB7CiAgICAgICAgICBkYXJrQ291bnQgKz0gMTsKICAgICAgICB9CiAgICAgIH0KICAgIH0KCiAgICB2YXIgcmF0aW8gPSBNYXRoLmFicygxMDAgKiBkYXJrQ291bnQgLyBtb2R1bGVDb3VudCAvIG1vZHVsZUNvdW50IC0gNTApIC8gNTsKICAgIGxvc3RQb2ludCArPSByYXRpbyAqIDEwOwogICAgcmV0dXJuIGxvc3RQb2ludDsKICB9OwoKICByZXR1cm4gX3RoaXM7Cn0oKTsKLyoqIA0KLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCi8vIFFSTWF0aA0KLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCiovCgoKdmFyIFFSTWF0aCA9IGZ1bmN0aW9uICgpIHsKICB2YXIgRVhQX1RBQkxFID0gbmV3IEFycmF5KDI1Nik7CiAgdmFyIExPR19UQUJMRSA9IG5ldyBBcnJheSgyNTYpOwogIC8qKiBpbml0aWFsaXplIHRhYmxlcyovCgogIGZvciAodmFyIGkgPSAwOyBpIDwgODsgaSArPSAxKSB7CiAgICBFWFBfVEFCTEVbaV0gPSAxIDw8IGk7CiAgfQoKICBmb3IgKHZhciBpID0gODsgaSA8IDI1NjsgaSArPSAxKSB7CiAgICBFWFBfVEFCTEVbaV0gPSBFWFBfVEFCTEVbaSAtIDRdIF4gRVhQX1RBQkxFW2kgLSA1XSBeIEVYUF9UQUJMRVtpIC0gNl0gXiBFWFBfVEFCTEVbaSAtIDhdOwogIH0KCiAgZm9yICh2YXIgaSA9IDA7IGkgPCAyNTU7IGkgKz0gMSkgewogICAgTE9HX1RBQkxFW0VYUF9UQUJMRVtpXV0gPSBpOwogIH0KCiAgdmFyIF90aGlzID0ge307CgogIF90aGlzLmdsb2cgPSBmdW5jdGlvbiAobikgewogICAgaWYgKG4gPCAxKSB7CiAgICAgIHRocm93IG5ldyBFcnJvcignZ2xvZygnICsgbiArICcpJyk7CiAgICB9CgogICAgcmV0dXJuIExPR19UQUJMRVtuXTsKICB9OwoKICBfdGhpcy5nZXhwID0gZnVuY3Rpb24gKG4pIHsKICAgIHdoaWxlIChuIDwgMCkgewogICAgICBuICs9IDI1NTsKICAgIH0KCiAgICB3aGlsZSAobiA+PSAyNTYpIHsKICAgICAgbiAtPSAyNTU7CiAgICB9CgogICAgcmV0dXJuIEVYUF9UQUJMRVtuXTsKICB9OwoKICByZXR1cm4gX3RoaXM7Cn0oKTsKLyoqIA0KLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCi8vIHFyUG9seW5vbWlhbA0KLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCiovCgoKZnVuY3Rpb24gcXJQb2x5bm9taWFsKG51bSwgc2hpZnQpIHsKICBpZiAodHlwZW9mIG51bS5sZW5ndGggPT0gJ3VuZGVmaW5lZCcpIHsKICAgIHRocm93IG5ldyBFcnJvcihudW0ubGVuZ3RoICsgJy8nICsgc2hpZnQpOwogIH0KCiAgdmFyIF9udW0gPSBmdW5jdGlvbiAoKSB7CiAgICB2YXIgb2Zmc2V0ID0gMDsKCiAgICB3aGlsZSAob2Zmc2V0IDwgbnVtLmxlbmd0aCAmJiBudW1bb2Zmc2V0XSA9PSAwKSB7CiAgICAgIG9mZnNldCArPSAxOwogICAgfQoKICAgIHZhciBfbnVtID0gbmV3IEFycmF5KG51bS5sZW5ndGggLSBvZmZzZXQgKyBzaGlmdCk7CgogICAgZm9yICh2YXIgaSA9IDA7IGkgPCBudW0ubGVuZ3RoIC0gb2Zmc2V0OyBpICs9IDEpIHsKICAgICAgX251bVtpXSA9IG51bVtpICsgb2Zmc2V0XTsKICAgIH0KCiAgICByZXR1cm4gX251bTsKICB9KCk7CgogIHZhciBfdGhpcyA9IHt9OwoKICBfdGhpcy5nZXRBdCA9IGZ1bmN0aW9uIChpbmRleCkgewogICAgcmV0dXJuIF9udW1baW5kZXhdOwogIH07CgogIF90aGlzLmdldExlbmd0aCA9IGZ1bmN0aW9uICgpIHsKICAgIHJldHVybiBfbnVtLmxlbmd0aDsKICB9OwoKICBfdGhpcy5tdWx0aXBseSA9IGZ1bmN0aW9uIChlKSB7CiAgICB2YXIgbnVtID0gbmV3IEFycmF5KF90aGlzLmdldExlbmd0aCgpICsgZS5nZXRMZW5ndGgoKSAtIDEpOwoKICAgIGZvciAodmFyIGkgPSAwOyBpIDwgX3RoaXMuZ2V0TGVuZ3RoKCk7IGkgKz0gMSkgewogICAgICBmb3IgKHZhciBqID0gMDsgaiA8IGUuZ2V0TGVuZ3RoKCk7IGogKz0gMSkgewogICAgICAgIG51bVtpICsgal0gXj0gUVJNYXRoLmdleHAoUVJNYXRoLmdsb2coX3RoaXMuZ2V0QXQoaSkpICsgUVJNYXRoLmdsb2coZS5nZXRBdChqKSkpOwogICAgICB9CiAgICB9CgogICAgcmV0dXJuIHFyUG9seW5vbWlhbChudW0sIDApOwogIH07CgogIF90aGlzLm1vZCA9IGZ1bmN0aW9uIChlKSB7CiAgICBpZiAoX3RoaXMuZ2V0TGVuZ3RoKCkgLSBlLmdldExlbmd0aCgpIDwgMCkgewogICAgICByZXR1cm4gX3RoaXM7CiAgICB9CgogICAgdmFyIHJhdGlvID0gUVJNYXRoLmdsb2coX3RoaXMuZ2V0QXQoMCkpIC0gUVJNYXRoLmdsb2coZS5nZXRBdCgwKSk7CiAgICB2YXIgbnVtID0gbmV3IEFycmF5KF90aGlzLmdldExlbmd0aCgpKTsKCiAgICBmb3IgKHZhciBpID0gMDsgaSA8IF90aGlzLmdldExlbmd0aCgpOyBpICs9IDEpIHsKICAgICAgbnVtW2ldID0gX3RoaXMuZ2V0QXQoaSk7CiAgICB9CgogICAgZm9yICh2YXIgaSA9IDA7IGkgPCBlLmdldExlbmd0aCgpOyBpICs9IDEpIHsKICAgICAgbnVtW2ldIF49IFFSTWF0aC5nZXhwKFFSTWF0aC5nbG9nKGUuZ2V0QXQoaSkpICsgcmF0aW8pOwogICAgfSAvLyByZWN1cnNpdmUgY2FsbAoKCiAgICByZXR1cm4gcXJQb2x5bm9taWFsKG51bSwgMCkubW9kKGUpOwogIH07CgogIHJldHVybiBfdGhpczsKfQoKOwovKiogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQovLyBRUlJTQmxvY2sNCi8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQoqLwoKdmFyIFFSUlNCbG9jayA9IGZ1bmN0aW9uICgpIHsKICAvKiogIFsxOiBbTCwgTSwgUSwgSF0sIC4uXSovCiAgdmFyIFJTX0JMT0NLX1RBQkxFID0gW1sxLCAyNiwgMTldLCBbMSwgMjYsIDE2XSwgWzEsIDI2LCAxM10sIFsxLCAyNiwgOV0sIFsxLCA0NCwgMzRdLCBbMSwgNDQsIDI4XSwgWzEsIDQ0LCAyMl0sIFsxLCA0NCwgMTZdLCBbMSwgNzAsIDU1XSwgWzEsIDcwLCA0NF0sIFsyLCAzNSwgMTddLCBbMiwgMzUsIDEzXSwgWzEsIDEwMCwgODBdLCBbMiwgNTAsIDMyXSwgWzIsIDUwLCAyNF0sIFs0LCAyNSwgOV0sIFsxLCAxMzQsIDEwOF0sIFsyLCA2NywgNDNdLCBbMiwgMzMsIDE1LCAyLCAzNCwgMTZdLCBbMiwgMzMsIDExLCAyLCAzNCwgMTJdLCBbMiwgODYsIDY4XSwgWzQsIDQzLCAyN10sIFs0LCA0MywgMTldLCBbNCwgNDMsIDE1XSwgWzIsIDk4LCA3OF0sIFs0LCA0OSwgMzFdLCBbMiwgMzIsIDE0LCA0LCAzMywgMTVdLCBbNCwgMzksIDEzLCAxLCA0MCwgMTRdLCBbMiwgMTIxLCA5N10sIFsyLCA2MCwgMzgsIDIsIDYxLCAzOV0sIFs0LCA0MCwgMTgsIDIsIDQxLCAxOV0sIFs0LCA0MCwgMTQsIDIsIDQxLCAxNV0sIFsyLCAxNDYsIDExNl0sIFszLCA1OCwgMzYsIDIsIDU5LCAzN10sIFs0LCAzNiwgMTYsIDQsIDM3LCAxN10sIFs0LCAzNiwgMTIsIDQsIDM3LCAxM10sIFsyLCA4NiwgNjgsIDIsIDg3LCA2OV0sIFs0LCA2OSwgNDMsIDEsIDcwLCA0NF0sIFs2LCA0MywgMTksIDIsIDQ0LCAyMF0sIFs2LCA0MywgMTUsIDIsIDQ0LCAxNl0sIFs0LCAxMDEsIDgxXSwgWzEsIDgwLCA1MCwgNCwgODEsIDUxXSwgWzQsIDUwLCAyMiwgNCwgNTEsIDIzXSwgWzMsIDM2LCAxMiwgOCwgMzcsIDEzXSwgWzIsIDExNiwgOTIsIDIsIDExNywgOTNdLCBbNiwgNTgsIDM2LCAyLCA1OSwgMzddLCBbNCwgNDYsIDIwLCA2LCA0NywgMjFdLCBbNywgNDIsIDE0LCA0LCA0MywgMTVdLCBbNCwgMTMzLCAxMDddLCBbOCwgNTksIDM3LCAxLCA2MCwgMzhdLCBbOCwgNDQsIDIwLCA0LCA0NSwgMjFdLCBbMTIsIDMzLCAxMSwgNCwgMzQsIDEyXSwgWzMsIDE0NSwgMTE1LCAxLCAxNDYsIDExNl0sIFs0LCA2NCwgNDAsIDUsIDY1LCA0MV0sIFsxMSwgMzYsIDE2LCA1LCAzNywgMTddLCBbMTEsIDM2LCAxMiwgNSwgMzcsIDEzXSwgWzUsIDEwOSwgODcsIDEsIDExMCwgODhdLCBbNSwgNjUsIDQxLCA1LCA2NiwgNDJdLCBbNSwgNTQsIDI0LCA3LCA1NSwgMjVdLCBbMTEsIDM2LCAxMl0sIFs1LCAxMjIsIDk4LCAxLCAxMjMsIDk5XSwgWzcsIDczLCA0NSwgMywgNzQsIDQ2XSwgWzE1LCA0MywgMTksIDIsIDQ0LCAyMF0sIFszLCA0NSwgMTUsIDEzLCA0NiwgMTZdLCBbMSwgMTM1LCAxMDcsIDUsIDEzNiwgMTA4XSwgWzEwLCA3NCwgNDYsIDEsIDc1LCA0N10sIFsxLCA1MCwgMjIsIDE1LCA1MSwgMjNdLCBbMiwgNDIsIDE0LCAxNywgNDMsIDE1XSwgWzUsIDE1MCwgMTIwLCAxLCAxNTEsIDEyMV0sIFs5LCA2OSwgNDMsIDQsIDcwLCA0NF0sIFsxNywgNTAsIDIyLCAxLCA1MSwgMjNdLCBbMiwgNDIsIDE0LCAxOSwgNDMsIDE1XSwgWzMsIDE0MSwgMTEzLCA0LCAxNDIsIDExNF0sIFszLCA3MCwgNDQsIDExLCA3MSwgNDVdLCBbMTcsIDQ3LCAyMSwgNCwgNDgsIDIyXSwgWzksIDM5LCAxMywgMTYsIDQwLCAxNF0sIFszLCAxMzUsIDEwNywgNSwgMTM2LCAxMDhdLCBbMywgNjcsIDQxLCAxMywgNjgsIDQyXSwgWzE1LCA1NCwgMjQsIDUsIDU1LCAyNV0sIFsxNSwgNDMsIDE1LCAxMCwgNDQsIDE2XSwgWzQsIDE0NCwgMTE2LCA0LCAxNDUsIDExN10sIFsxNywgNjgsIDQyXSwgWzE3LCA1MCwgMjIsIDYsIDUxLCAyM10sIFsxOSwgNDYsIDE2LCA2LCA0NywgMTddLCBbMiwgMTM5LCAxMTEsIDcsIDE0MCwgMTEyXSwgWzE3LCA3NCwgNDZdLCBbNywgNTQsIDI0LCAxNiwgNTUsIDI1XSwgWzM0LCAzNywgMTNdLCBbNCwgMTUxLCAxMjEsIDUsIDE1MiwgMTIyXSwgWzQsIDc1LCA0NywgMTQsIDc2LCA0OF0sIFsxMSwgNTQsIDI0LCAxNCwgNTUsIDI1XSwgWzE2LCA0NSwgMTUsIDE0LCA0NiwgMTZdLCBbNiwgMTQ3LCAxMTcsIDQsIDE0OCwgMTE4XSwgWzYsIDczLCA0NSwgMTQsIDc0LCA0Nl0sIFsxMSwgNTQsIDI0LCAxNiwgNTUsIDI1XSwgWzMwLCA0NiwgMTYsIDIsIDQ3LCAxN10sIFs4LCAxMzIsIDEwNiwgNCwgMTMzLCAxMDddLCBbOCwgNzUsIDQ3LCAxMywgNzYsIDQ4XSwgWzcsIDU0LCAyNCwgMjIsIDU1LCAyNV0sIFsyMiwgNDUsIDE1LCAxMywgNDYsIDE2XSwgWzEwLCAxNDIsIDExNCwgMiwgMTQzLCAxMTVdLCBbMTksIDc0LCA0NiwgNCwgNzUsIDQ3XSwgWzI4LCA1MCwgMjIsIDYsIDUxLCAyM10sIFszMywgNDYsIDE2LCA0LCA0NywgMTddLCBbOCwgMTUyLCAxMjIsIDQsIDE1MywgMTIzXSwgWzIyLCA3MywgNDUsIDMsIDc0LCA0Nl0sIFs4LCA1MywgMjMsIDI2LCA1NCwgMjRdLCBbMTIsIDQ1LCAxNSwgMjgsIDQ2LCAxNl0sIFszLCAxNDcsIDExNywgMTAsIDE0OCwgMTE4XSwgWzMsIDczLCA0NSwgMjMsIDc0LCA0Nl0sIFs0LCA1NCwgMjQsIDMxLCA1NSwgMjVdLCBbMTEsIDQ1LCAxNSwgMzEsIDQ2LCAxNl0sIFs3LCAxNDYsIDExNiwgNywgMTQ3LCAxMTddLCBbMjEsIDczLCA0NSwgNywgNzQsIDQ2XSwgWzEsIDUzLCAyMywgMzcsIDU0LCAyNF0sIFsxOSwgNDUsIDE1LCAyNiwgNDYsIDE2XSwgWzUsIDE0NSwgMTE1LCAxMCwgMTQ2LCAxMTZdLCBbMTksIDc1LCA0NywgMTAsIDc2LCA0OF0sIFsxNSwgNTQsIDI0LCAyNSwgNTUsIDI1XSwgWzIzLCA0NSwgMTUsIDI1LCA0NiwgMTZdLCBbMTMsIDE0NSwgMTE1LCAzLCAxNDYsIDExNl0sIFsyLCA3NCwgNDYsIDI5LCA3NSwgNDddLCBbNDIsIDU0LCAyNCwgMSwgNTUsIDI1XSwgWzIzLCA0NSwgMTUsIDI4LCA0NiwgMTZdLCBbMTcsIDE0NSwgMTE1XSwgWzEwLCA3NCwgNDYsIDIzLCA3NSwgNDddLCBbMTAsIDU0LCAyNCwgMzUsIDU1LCAyNV0sIFsxOSwgNDUsIDE1LCAzNSwgNDYsIDE2XSwgWzE3LCAxNDUsIDExNSwgMSwgMTQ2LCAxMTZdLCBbMTQsIDc0LCA0NiwgMjEsIDc1LCA0N10sIFsyOSwgNTQsIDI0LCAxOSwgNTUsIDI1XSwgWzExLCA0NSwgMTUsIDQ2LCA0NiwgMTZdLCBbMTMsIDE0NSwgMTE1LCA2LCAxNDYsIDExNl0sIFsxNCwgNzQsIDQ2LCAyMywgNzUsIDQ3XSwgWzQ0LCA1NCwgMjQsIDcsIDU1LCAyNV0sIFs1OSwgNDYsIDE2LCAxLCA0NywgMTddLCBbMTIsIDE1MSwgMTIxLCA3LCAxNTIsIDEyMl0sIFsxMiwgNzUsIDQ3LCAyNiwgNzYsIDQ4XSwgWzM5LCA1NCwgMjQsIDE0LCA1NSwgMjVdLCBbMjIsIDQ1LCAxNSwgNDEsIDQ2LCAxNl0sIFs2LCAxNTEsIDEyMSwgMTQsIDE1MiwgMTIyXSwgWzYsIDc1LCA0NywgMzQsIDc2LCA0OF0sIFs0NiwgNTQsIDI0LCAxMCwgNTUsIDI1XSwgWzIsIDQ1LCAxNSwgNjQsIDQ2LCAxNl0sIFsxNywgMTUyLCAxMjIsIDQsIDE1MywgMTIzXSwgWzI5LCA3NCwgNDYsIDE0LCA3NSwgNDddLCBbNDksIDU0LCAyNCwgMTAsIDU1LCAyNV0sIFsyNCwgNDUsIDE1LCA0NiwgNDYsIDE2XSwgWzQsIDE1MiwgMTIyLCAxOCwgMTUzLCAxMjNdLCBbMTMsIDc0LCA0NiwgMzIsIDc1LCA0N10sIFs0OCwgNTQsIDI0LCAxNCwgNTUsIDI1XSwgWzQyLCA0NSwgMTUsIDMyLCA0NiwgMTZdLCBbMjAsIDE0NywgMTE3LCA0LCAxNDgsIDExOF0sIFs0MCwgNzUsIDQ3LCA3LCA3NiwgNDhdLCBbNDMsIDU0LCAyNCwgMjIsIDU1LCAyNV0sIFsxMCwgNDUsIDE1LCA2NywgNDYsIDE2XSwgWzE5LCAxNDgsIDExOCwgNiwgMTQ5LCAxMTldLCBbMTgsIDc1LCA0NywgMzEsIDc2LCA0OF0sIFszNCwgNTQsIDI0LCAzNCwgNTUsIDI1XSwgWzIwLCA0NSwgMTUsIDYxLCA0NiwgMTZdXTsKCiAgdmFyIHFyUlNCbG9jayA9IGZ1bmN0aW9uIHFyUlNCbG9jayh0b3RhbENvdW50LCBkYXRhQ291bnQpIHsKICAgIHZhciBfdGhpcyA9IHt9OwogICAgX3RoaXMudG90YWxDb3VudCA9IHRvdGFsQ291bnQ7CiAgICBfdGhpcy5kYXRhQ291bnQgPSBkYXRhQ291bnQ7CiAgICByZXR1cm4gX3RoaXM7CiAgfTsKCiAgdmFyIF90aGlzID0ge307CgogIHZhciBnZXRSc0Jsb2NrVGFibGUgPSBmdW5jdGlvbiBnZXRSc0Jsb2NrVGFibGUodHlwZU51bWJlciwgZXJyb3JDb3JyZWN0TGV2ZWwpIHsKICAgIHN3aXRjaCAoZXJyb3JDb3JyZWN0TGV2ZWwpIHsKICAgICAgY2FzZSBRUkVycm9yQ29ycmVjdExldmVsLkw6CiAgICAgICAgcmV0dXJuIFJTX0JMT0NLX1RBQkxFWyh0eXBlTnVtYmVyIC0gMSkgKiA0ICsgMF07CgogICAgICBjYXNlIFFSRXJyb3JDb3JyZWN0TGV2ZWwuTToKICAgICAgICByZXR1cm4gUlNfQkxPQ0tfVEFCTEVbKHR5cGVOdW1iZXIgLSAxKSAqIDQgKyAxXTsKCiAgICAgIGNhc2UgUVJFcnJvckNvcnJlY3RMZXZlbC5ROgogICAgICAgIHJldHVybiBSU19CTE9DS19UQUJMRVsodHlwZU51bWJlciAtIDEpICogNCArIDJdOwoKICAgICAgY2FzZSBRUkVycm9yQ29ycmVjdExldmVsLkg6CiAgICAgICAgcmV0dXJuIFJTX0JMT0NLX1RBQkxFWyh0eXBlTnVtYmVyIC0gMSkgKiA0ICsgM107CgogICAgICBkZWZhdWx0OgogICAgICAgIHJldHVybiB1bmRlZmluZWQ7CiAgICB9CiAgfTsKCiAgX3RoaXMuZ2V0UlNCbG9ja3MgPSBmdW5jdGlvbiAodHlwZU51bWJlciwgZXJyb3JDb3JyZWN0TGV2ZWwpIHsKICAgIHZhciByc0Jsb2NrID0gZ2V0UnNCbG9ja1RhYmxlKHR5cGVOdW1iZXIsIGVycm9yQ29ycmVjdExldmVsKTsKCiAgICBpZiAodHlwZW9mIHJzQmxvY2sgPT0gJ3VuZGVmaW5lZCcpIHsKICAgICAgdGhyb3cgbmV3IEVycm9yKCdiYWQgcnMgYmxvY2sgQCB0eXBlTnVtYmVyOicgKyB0eXBlTnVtYmVyICsgJy9lcnJvckNvcnJlY3RMZXZlbDonICsgZXJyb3JDb3JyZWN0TGV2ZWwpOwogICAgfQoKICAgIHZhciBsZW5ndGggPSByc0Jsb2NrLmxlbmd0aCAvIDM7CiAgICB2YXIgbGlzdCA9IG5ldyBBcnJheSgpOwoKICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuZ3RoOyBpICs9IDEpIHsKICAgICAgdmFyIGNvdW50ID0gcnNCbG9ja1tpICogMyArIDBdOwogICAgICB2YXIgdG90YWxDb3VudCA9IHJzQmxvY2tbaSAqIDMgKyAxXTsKICAgICAgdmFyIGRhdGFDb3VudCA9IHJzQmxvY2tbaSAqIDMgKyAyXTsKCiAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgY291bnQ7IGogKz0gMSkgewogICAgICAgIGxpc3QucHVzaChxclJTQmxvY2sodG90YWxDb3VudCwgZGF0YUNvdW50KSk7CiAgICAgIH0KICAgIH0KCiAgICByZXR1cm4gbGlzdDsKICB9OwoKICByZXR1cm4gX3RoaXM7Cn0oKTsKLyoqIA0KICAvLyBxckJpdEJ1ZmZlcg0KKi8KCgp2YXIgcXJCaXRCdWZmZXIgPSBmdW5jdGlvbiBxckJpdEJ1ZmZlcigpIHsKICB2YXIgX2J1ZmZlciA9IG5ldyBBcnJheSgpOwoKICB2YXIgX2xlbmd0aCA9IDA7CiAgdmFyIF90aGlzID0ge307CgogIF90aGlzLmdldEJ1ZmZlciA9IGZ1bmN0aW9uICgpIHsKICAgIHJldHVybiBfYnVmZmVyOwogIH07CgogIF90aGlzLmdldEF0ID0gZnVuY3Rpb24gKGluZGV4KSB7CiAgICB2YXIgYnVmSW5kZXggPSBNYXRoLmZsb29yKGluZGV4IC8gOCk7CiAgICByZXR1cm4gKF9idWZmZXJbYnVmSW5kZXhdID4+PiA3IC0gaW5kZXggJSA4ICYgMSkgPT0gMTsKICB9OwoKICBfdGhpcy5wdXQgPSBmdW5jdGlvbiAobnVtLCBsZW5ndGgpIHsKICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuZ3RoOyBpICs9IDEpIHsKICAgICAgX3RoaXMucHV0Qml0KChudW0gPj4+IGxlbmd0aCAtIGkgLSAxICYgMSkgPT0gMSk7CiAgICB9CiAgfTsKCiAgX3RoaXMuZ2V0TGVuZ3RoSW5CaXRzID0gZnVuY3Rpb24gKCkgewogICAgcmV0dXJuIF9sZW5ndGg7CiAgfTsKCiAgX3RoaXMucHV0Qml0ID0gZnVuY3Rpb24gKGJpdCkgewogICAgdmFyIGJ1ZkluZGV4ID0gTWF0aC5mbG9vcihfbGVuZ3RoIC8gOCk7CgogICAgaWYgKF9idWZmZXIubGVuZ3RoIDw9IGJ1ZkluZGV4KSB7CiAgICAgIF9idWZmZXIucHVzaCgwKTsKICAgIH0KCiAgICBpZiAoYml0KSB7CiAgICAgIF9idWZmZXJbYnVmSW5kZXhdIHw9IDB4ODAgPj4+IF9sZW5ndGggJSA4OwogICAgfQoKICAgIF9sZW5ndGggKz0gMTsKICB9OwoKICByZXR1cm4gX3RoaXM7Cn07Ci8qKiANCi8vIHFyOEJpdEJ5dGUNCiovCgoKdmFyIHFyOEJpdEJ5dGUgPSBmdW5jdGlvbiBxcjhCaXRCeXRlKGRhdGEpIHsKICB2YXIgX21vZGUgPSBRUk1vZGUuTU9ERV84QklUX0JZVEU7CiAgdmFyIF9kYXRhID0gZGF0YTsKICB2YXIgX3BhcnNlZERhdGEgPSBbXTsKICB2YXIgX3RoaXMgPSB7fTsKICAvKiogIEFkZGVkIHRvIHN1cHBvcnQgVVRGLTggQ2hhcmFjdGVycyovCgogIGZvciAodmFyIGkgPSAwLCBsID0gX2RhdGEubGVuZ3RoOyBpIDwgbDsgaSsrKSB7CiAgICB2YXIgYnl0ZUFycmF5ID0gW107CgogICAgdmFyIGNvZGUgPSBfZGF0YS5jaGFyQ29kZUF0KGkpOwoKICAgIGlmIChjb2RlID4gMHgxMDAwMCkgewogICAgICBieXRlQXJyYXlbMF0gPSAweEYwIHwgKGNvZGUgJiAweDFDMDAwMCkgPj4+IDE4OwogICAgICBieXRlQXJyYXlbMV0gPSAweDgwIHwgKGNvZGUgJiAweDNGMDAwKSA+Pj4gMTI7CiAgICAgIGJ5dGVBcnJheVsyXSA9IDB4ODAgfCAoY29kZSAmIDB4RkMwKSA+Pj4gNjsKICAgICAgYnl0ZUFycmF5WzNdID0gMHg4MCB8IGNvZGUgJiAweDNGOwogICAgfSBlbHNlIGlmIChjb2RlID4gMHg4MDApIHsKICAgICAgYnl0ZUFycmF5WzBdID0gMHhFMCB8IChjb2RlICYgMHhGMDAwKSA+Pj4gMTI7CiAgICAgIGJ5dGVBcnJheVsxXSA9IDB4ODAgfCAoY29kZSAmIDB4RkMwKSA+Pj4gNjsKICAgICAgYnl0ZUFycmF5WzJdID0gMHg4MCB8IGNvZGUgJiAweDNGOwogICAgfSBlbHNlIGlmIChjb2RlID4gMHg4MCkgewogICAgICBieXRlQXJyYXlbMF0gPSAweEMwIHwgKGNvZGUgJiAweDdDMCkgPj4+IDY7CiAgICAgIGJ5dGVBcnJheVsxXSA9IDB4ODAgfCBjb2RlICYgMHgzRjsKICAgIH0gZWxzZSB7CiAgICAgIGJ5dGVBcnJheVswXSA9IGNvZGU7CiAgICB9CiAgICAvKiogRml4IFVuaWNvZGUgY29ycnVwdGlvbiBidWcqLwoKCiAgICBfcGFyc2VkRGF0YS5wdXNoKGJ5dGVBcnJheSk7CiAgfQoKICBfcGFyc2VkRGF0YSA9IEFycmF5LnByb3RvdHlwZS5jb25jYXQuYXBwbHkoW10sIF9wYXJzZWREYXRhKTsKCiAgaWYgKF9wYXJzZWREYXRhLmxlbmd0aCAhPSBfZGF0YS5sZW5ndGgpIHsKICAgIF9wYXJzZWREYXRhLnVuc2hpZnQoMTkxKTsKCiAgICBfcGFyc2VkRGF0YS51bnNoaWZ0KDE4Nyk7CgogICAgX3BhcnNlZERhdGEudW5zaGlmdCgyMzkpOwogIH0KCiAgdmFyIF9ieXRlcyA9IF9wYXJzZWREYXRhOwoKICBfdGhpcy5nZXRNb2RlID0gZnVuY3Rpb24gKCkgewogICAgcmV0dXJuIF9tb2RlOwogIH07CgogIF90aGlzLmdldExlbmd0aCA9IGZ1bmN0aW9uIChidWZmZXIpIHsKICAgIHJldHVybiBfYnl0ZXMubGVuZ3RoOwogIH07CgogIF90aGlzLndyaXRlID0gZnVuY3Rpb24gKGJ1ZmZlcikgewogICAgZm9yICh2YXIgaSA9IDA7IGkgPCBfYnl0ZXMubGVuZ3RoOyBpICs9IDEpIHsKICAgICAgYnVmZmVyLnB1dChfYnl0ZXNbaV0sIDgpOwogICAgfQogIH07CgogIHJldHVybiBfdGhpczsKfTsKLyoqIEdJRiBTdXBwb3J0IGV0Yy4qLwoKLyoqDQogKiAvLyBieXRlQXJyYXlPdXRwdXRTdHJlYW0NCiAqLwoKCnZhciBieXRlQXJyYXlPdXRwdXRTdHJlYW0gPSBmdW5jdGlvbiBieXRlQXJyYXlPdXRwdXRTdHJlYW0oKSB7CiAgdmFyIF9ieXRlcyA9IG5ldyBBcnJheSgpOwoKICB2YXIgX3RoaXMgPSB7fTsKCiAgX3RoaXMud3JpdGVCeXRlID0gZnVuY3Rpb24gKGIpIHsKICAgIF9ieXRlcy5wdXNoKGIgJiAweGZmKTsKICB9OwoKICBfdGhpcy53cml0ZVNob3J0ID0gZnVuY3Rpb24gKGkpIHsKICAgIF90aGlzLndyaXRlQnl0ZShpKTsKCiAgICBfdGhpcy53cml0ZUJ5dGUoaSA+Pj4gOCk7CiAgfTsKCiAgX3RoaXMud3JpdGVCeXRlcyA9IGZ1bmN0aW9uIChiLCBvZmYsIGxlbikgewogICAgb2ZmID0gb2ZmIHx8IDA7CiAgICBsZW4gPSBsZW4gfHwgYi5sZW5ndGg7CgogICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW47IGkgKz0gMSkgewogICAgICBfdGhpcy53cml0ZUJ5dGUoYltpICsgb2ZmXSk7CiAgICB9CiAgfTsKCiAgX3RoaXMud3JpdGVTdHJpbmcgPSBmdW5jdGlvbiAocykgewogICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzLmxlbmd0aDsgaSArPSAxKSB7CiAgICAgIF90aGlzLndyaXRlQnl0ZShzLmNoYXJDb2RlQXQoaSkpOwogICAgfQogIH07CgogIF90aGlzLnRvQnl0ZUFycmF5ID0gZnVuY3Rpb24gKCkgewogICAgcmV0dXJuIF9ieXRlczsKICB9OwoKICBfdGhpcy50b1N0cmluZyA9IGZ1bmN0aW9uICgpIHsKICAgIHZhciBzID0gJyc7CiAgICBzICs9ICdbJzsKCiAgICBmb3IgKHZhciBpID0gMDsgaSA8IF9ieXRlcy5sZW5ndGg7IGkgKz0gMSkgewogICAgICBpZiAoaSA+IDApIHsKICAgICAgICBzICs9ICcsJzsKICAgICAgfQoKICAgICAgcyArPSBfYnl0ZXNbaV07CiAgICB9CgogICAgcyArPSAnXSc7CiAgICByZXR1cm4gczsKICB9OwoKICByZXR1cm4gX3RoaXM7Cn07Ci8qKiANCi8vIGJhc2U2NEVuY29kZU91dHB1dFN0cmVhbQ0KKi8KCgp2YXIgYmFzZTY0RW5jb2RlT3V0cHV0U3RyZWFtID0gZnVuY3Rpb24gYmFzZTY0RW5jb2RlT3V0cHV0U3RyZWFtKCkgewogIHZhciBfYnVmZmVyID0gMDsKICB2YXIgX2J1ZmxlbiA9IDA7CiAgdmFyIF9sZW5ndGggPSAwOwogIHZhciBfYmFzZTY0ID0gJyc7CiAgdmFyIF90aGlzID0ge307CgogIHZhciB3cml0ZUVuY29kZWQgPSBmdW5jdGlvbiB3cml0ZUVuY29kZWQoYikgewogICAgX2Jhc2U2NCArPSBTdHJpbmcuZnJvbUNoYXJDb2RlKGVuY29kZShiICYgMHgzZikpOwogIH07CgogIHZhciBlbmNvZGUgPSBmdW5jdGlvbiBlbmNvZGUobikgewogICAgaWYgKG4gPCAwKSB7CiAgICAgIC8qKmVycm9yLiAqLwogICAgfSBlbHNlIGlmIChuIDwgMjYpIHsKICAgICAgcmV0dXJuIDB4NDEgKyBuOwogICAgfSBlbHNlIGlmIChuIDwgNTIpIHsKICAgICAgcmV0dXJuIDB4NjEgKyAobiAtIDI2KTsKICAgIH0gZWxzZSBpZiAobiA8IDYyKSB7CiAgICAgIHJldHVybiAweDMwICsgKG4gLSA1Mik7CiAgICB9IGVsc2UgaWYgKG4gPT0gNjIpIHsKICAgICAgcmV0dXJuIDB4MmI7CiAgICB9IGVsc2UgaWYgKG4gPT0gNjMpIHsKICAgICAgcmV0dXJuIDB4MmY7CiAgICB9CgogICAgdGhyb3cgbmV3IEVycm9yKCduOicgKyBuKTsKICB9OwoKICBfdGhpcy53cml0ZUJ5dGUgPSBmdW5jdGlvbiAobikgewogICAgX2J1ZmZlciA9IF9idWZmZXIgPDwgOCB8IG4gJiAweGZmOwogICAgX2J1ZmxlbiArPSA4OwogICAgX2xlbmd0aCArPSAxOwoKICAgIHdoaWxlIChfYnVmbGVuID49IDYpIHsKICAgICAgd3JpdGVFbmNvZGVkKF9idWZmZXIgPj4+IF9idWZsZW4gLSA2KTsKICAgICAgX2J1ZmxlbiAtPSA2OwogICAgfQogIH07CgogIF90aGlzLmZsdXNoID0gZnVuY3Rpb24gKCkgewogICAgaWYgKF9idWZsZW4gPiAwKSB7CiAgICAgIHdyaXRlRW5jb2RlZChfYnVmZmVyIDw8IDYgLSBfYnVmbGVuKTsKICAgICAgX2J1ZmZlciA9IDA7CiAgICAgIF9idWZsZW4gPSAwOwogICAgfQoKICAgIGlmIChfbGVuZ3RoICUgMyAhPSAwKSB7CiAgICAgIC8qKnBhZGRpbmcgKi8KICAgICAgdmFyIHBhZGxlbiA9IDMgLSBfbGVuZ3RoICUgMzsKCiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcGFkbGVuOyBpICs9IDEpIHsKICAgICAgICBfYmFzZTY0ICs9ICc9JzsKICAgICAgfQogICAgfQogIH07CgogIF90aGlzLnRvU3RyaW5nID0gZnVuY3Rpb24gKCkgewogICAgcmV0dXJuIF9iYXNlNjQ7CiAgfTsKCiAgcmV0dXJuIF90aGlzOwp9OwovKiogDQovLyBiYXNlNjREZWNvZGVJbnB1dFN0cmVhbQ0KKi8KCgp2YXIgYmFzZTY0RGVjb2RlSW5wdXRTdHJlYW0gPSBmdW5jdGlvbiBiYXNlNjREZWNvZGVJbnB1dFN0cmVhbShzdHIpIHsKICB2YXIgX3N0ciA9IHN0cjsKICB2YXIgX3BvcyA9IDA7CiAgdmFyIF9idWZmZXIgPSAwOwogIHZhciBfYnVmbGVuID0gMDsKICB2YXIgX3RoaXMgPSB7fTsKCiAgX3RoaXMucmVhZCA9IGZ1bmN0aW9uICgpIHsKICAgIHdoaWxlIChfYnVmbGVuIDwgOCkgewogICAgICBpZiAoX3BvcyA+PSBfc3RyLmxlbmd0aCkgewogICAgICAgIGlmIChfYnVmbGVuID09IDApIHsKICAgICAgICAgIHJldHVybiAtMTsKICAgICAgICB9CgogICAgICAgIHRocm93IG5ldyBFcnJvcigndW5leHBlY3RlZCBlbmQgb2YgZmlsZS4vJyArIF9idWZsZW4pOwogICAgICB9CgogICAgICB2YXIgYyA9IF9zdHIuY2hhckF0KF9wb3MpOwoKICAgICAgX3BvcyArPSAxOwoKICAgICAgaWYgKGMgPT0gJz0nKSB7CiAgICAgICAgX2J1ZmxlbiA9IDA7CiAgICAgICAgcmV0dXJuIC0xOwogICAgICB9IGVsc2UgaWYgKGMubWF0Y2goL15ccyQvKSkgewogICAgICAgIC8qKiBpZ25vcmUgaWYgd2hpdGVzcGFjZS4gKi8KICAgICAgICBjb250aW51ZTsKICAgICAgfQoKICAgICAgX2J1ZmZlciA9IF9idWZmZXIgPDwgNiB8IGRlY29kZShjLmNoYXJDb2RlQXQoMCkpOwogICAgICBfYnVmbGVuICs9IDY7CiAgICB9CgogICAgdmFyIG4gPSBfYnVmZmVyID4+PiBfYnVmbGVuIC0gOCAmIDB4ZmY7CiAgICBfYnVmbGVuIC09IDg7CiAgICByZXR1cm4gbjsKICB9OwoKICB2YXIgZGVjb2RlID0gZnVuY3Rpb24gZGVjb2RlKGMpIHsKICAgIGlmICgweDQxIDw9IGMgJiYgYyA8PSAweDVhKSB7CiAgICAgIHJldHVybiBjIC0gMHg0MTsKICAgIH0gZWxzZSBpZiAoMHg2MSA8PSBjICYmIGMgPD0gMHg3YSkgewogICAgICByZXR1cm4gYyAtIDB4NjEgKyAyNjsKICAgIH0gZWxzZSBpZiAoMHgzMCA8PSBjICYmIGMgPD0gMHgzOSkgewogICAgICByZXR1cm4gYyAtIDB4MzAgKyA1MjsKICAgIH0gZWxzZSBpZiAoYyA9PSAweDJiKSB7CiAgICAgIHJldHVybiA2MjsKICAgIH0gZWxzZSBpZiAoYyA9PSAweDJmKSB7CiAgICAgIHJldHVybiA2MzsKICAgIH0gZWxzZSB7CiAgICAgIHRocm93IG5ldyBFcnJvcignYzonICsgYyk7CiAgICB9CiAgfTsKCiAgcmV0dXJuIF90aGlzOwp9OwovKioNCi8vIGdpZkltYWdlIChCL1cpDQogKi8KCgp2YXIgZ2lmSW1hZ2UgPSBmdW5jdGlvbiBnaWZJbWFnZSh3aWR0aCwgaGVpZ2h0KSB7CiAgdmFyIF93aWR0aCA9IHdpZHRoOwogIHZhciBfaGVpZ2h0ID0gaGVpZ2h0OwoKICB2YXIgX2RhdGEgPSBuZXcgQXJyYXkod2lkdGggKiBoZWlnaHQpOwoKICB2YXIgX3RoaXMgPSB7fTsKCiAgX3RoaXMuc2V0UGl4ZWwgPSBmdW5jdGlvbiAoeCwgeSwgcGl4ZWwpIHsKICAgIF9kYXRhW3kgKiBfd2lkdGggKyB4XSA9IHBpeGVsOwogIH07CgogIF90aGlzLndyaXRlID0gZnVuY3Rpb24gKG91dCkgewogICAgLyoqIEdJRiBTaWduYXR1cmUqLwogICAgb3V0LndyaXRlU3RyaW5nKCdHSUY4N2EnKTsKICAgIC8qKlNjcmVlbiBEZXNjcmlwdG9yICovCgogICAgb3V0LndyaXRlU2hvcnQoX3dpZHRoKTsKICAgIG91dC53cml0ZVNob3J0KF9oZWlnaHQpOwogICAgb3V0LndyaXRlQnl0ZSgweDgwKTsKICAgIC8qKjJiaXQgKi8KCiAgICBvdXQud3JpdGVCeXRlKDApOwogICAgb3V0LndyaXRlQnl0ZSgwKTsKICAgIC8qKkdsb2JhbCBDb2xvciBNYXAgKi8KCiAgICAvKipibGFjayAqLwoKICAgIG91dC53cml0ZUJ5dGUoMHgwMCk7CiAgICBvdXQud3JpdGVCeXRlKDB4MDApOwogICAgb3V0LndyaXRlQnl0ZSgweDAwKTsKICAgIC8qKiB3aGl0ZSAqLwoKICAgIG91dC53cml0ZUJ5dGUoMHhmZik7CiAgICBvdXQud3JpdGVCeXRlKDB4ZmYpOwogICAgb3V0LndyaXRlQnl0ZSgweGZmKTsKICAgIC8qKkltYWdlIERlc2NyaXB0b3IgKi8KCiAgICBvdXQud3JpdGVTdHJpbmcoJywnKTsKICAgIG91dC53cml0ZVNob3J0KDApOwogICAgb3V0LndyaXRlU2hvcnQoMCk7CiAgICBvdXQud3JpdGVTaG9ydChfd2lkdGgpOwogICAgb3V0LndyaXRlU2hvcnQoX2hlaWdodCk7CiAgICBvdXQud3JpdGVCeXRlKDApOwogICAgLyoqUmFzdGVyIERhdGEgKi8KCiAgICB2YXIgbHp3TWluQ29kZVNpemUgPSAyOwogICAgdmFyIHJhc3RlciA9IGdldExaV1Jhc3RlcihsendNaW5Db2RlU2l6ZSk7CiAgICBvdXQud3JpdGVCeXRlKGx6d01pbkNvZGVTaXplKTsKICAgIHZhciBvZmZzZXQgPSAwOwoKICAgIHdoaWxlIChyYXN0ZXIubGVuZ3RoIC0gb2Zmc2V0ID4gMjU1KSB7CiAgICAgIG91dC53cml0ZUJ5dGUoMjU1KTsKICAgICAgb3V0LndyaXRlQnl0ZXMocmFzdGVyLCBvZmZzZXQsIDI1NSk7CiAgICAgIG9mZnNldCArPSAyNTU7CiAgICB9CgogICAgb3V0LndyaXRlQnl0ZShyYXN0ZXIubGVuZ3RoIC0gb2Zmc2V0KTsKICAgIG91dC53cml0ZUJ5dGVzKHJhc3Rlciwgb2Zmc2V0LCByYXN0ZXIubGVuZ3RoIC0gb2Zmc2V0KTsKICAgIG91dC53cml0ZUJ5dGUoMHgwMCk7CiAgICAvKioNCiAgICAgICogR0lGIFRlcm1pbmF0b3IgKi8KCiAgICBvdXQud3JpdGVTdHJpbmcoJzsnKTsKICB9OwoKICB2YXIgYml0T3V0cHV0U3RyZWFtID0gZnVuY3Rpb24gYml0T3V0cHV0U3RyZWFtKG91dCkgewogICAgdmFyIF9vdXQgPSBvdXQ7CiAgICB2YXIgX2JpdExlbmd0aCA9IDA7CiAgICB2YXIgX2JpdEJ1ZmZlciA9IDA7CiAgICB2YXIgX3RoaXMgPSB7fTsKCiAgICBfdGhpcy53cml0ZSA9IGZ1bmN0aW9uIChkYXRhLCBsZW5ndGgpIHsKICAgICAgaWYgKGRhdGEgPj4+IGxlbmd0aCAhPSAwKSB7CiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdsZW5ndGggb3ZlcicpOwogICAgICB9CgogICAgICB3aGlsZSAoX2JpdExlbmd0aCArIGxlbmd0aCA+PSA4KSB7CiAgICAgICAgX291dC53cml0ZUJ5dGUoMHhmZiAmIChkYXRhIDw8IF9iaXRMZW5ndGggfCBfYml0QnVmZmVyKSk7CgogICAgICAgIGxlbmd0aCAtPSA4IC0gX2JpdExlbmd0aDsKICAgICAgICBkYXRhID4+Pj0gOCAtIF9iaXRMZW5ndGg7CiAgICAgICAgX2JpdEJ1ZmZlciA9IDA7CiAgICAgICAgX2JpdExlbmd0aCA9IDA7CiAgICAgIH0KCiAgICAgIF9iaXRCdWZmZXIgPSBkYXRhIDw8IF9iaXRMZW5ndGggfCBfYml0QnVmZmVyOwogICAgICBfYml0TGVuZ3RoID0gX2JpdExlbmd0aCArIGxlbmd0aDsKICAgIH07CgogICAgX3RoaXMuZmx1c2ggPSBmdW5jdGlvbiAoKSB7CiAgICAgIGlmIChfYml0TGVuZ3RoID4gMCkgewogICAgICAgIF9vdXQud3JpdGVCeXRlKF9iaXRCdWZmZXIpOwogICAgICB9CiAgICB9OwoKICAgIHJldHVybiBfdGhpczsKICB9OwoKICB2YXIgZ2V0TFpXUmFzdGVyID0gZnVuY3Rpb24gZ2V0TFpXUmFzdGVyKGx6d01pbkNvZGVTaXplKSB7CiAgICB2YXIgY2xlYXJDb2RlID0gMSA8PCBsendNaW5Db2RlU2l6ZTsKICAgIHZhciBlbmRDb2RlID0gKDEgPDwgbHp3TWluQ29kZVNpemUpICsgMTsKICAgIHZhciBiaXRMZW5ndGggPSBsendNaW5Db2RlU2l6ZSArIDE7CiAgICAvKiogDQogICAgICAqIFNldHVwIExaV1RhYmxlDQogICAgICovCgogICAgdmFyIHRhYmxlID0gbHp3VGFibGUoKTsKCiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGNsZWFyQ29kZTsgaSArPSAxKSB7CiAgICAgIHRhYmxlLmFkZChTdHJpbmcuZnJvbUNoYXJDb2RlKGkpKTsKICAgIH0KCiAgICB0YWJsZS5hZGQoU3RyaW5nLmZyb21DaGFyQ29kZShjbGVhckNvZGUpKTsKICAgIHRhYmxlLmFkZChTdHJpbmcuZnJvbUNoYXJDb2RlKGVuZENvZGUpKTsKICAgIHZhciBieXRlT3V0ID0gYnl0ZUFycmF5T3V0cHV0U3RyZWFtKCk7CiAgICB2YXIgYml0T3V0ID0gYml0T3V0cHV0U3RyZWFtKGJ5dGVPdXQpOwogICAgLyoqIA0KICAgICAgKiAgY2xlYXIgY29kZQ0KICAgICAqLwoKICAgIGJpdE91dC53cml0ZShjbGVhckNvZGUsIGJpdExlbmd0aCk7CiAgICB2YXIgZGF0YUluZGV4ID0gMDsKICAgIHZhciBzID0gU3RyaW5nLmZyb21DaGFyQ29kZShfZGF0YVtkYXRhSW5kZXhdKTsKICAgIGRhdGFJbmRleCArPSAxOwoKICAgIHdoaWxlIChkYXRhSW5kZXggPCBfZGF0YS5sZW5ndGgpIHsKICAgICAgdmFyIGMgPSBTdHJpbmcuZnJvbUNoYXJDb2RlKF9kYXRhW2RhdGFJbmRleF0pOwogICAgICBkYXRhSW5kZXggKz0gMTsKCiAgICAgIGlmICh0YWJsZS5jb250YWlucyhzICsgYykpIHsKICAgICAgICBzID0gcyArIGM7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgYml0T3V0LndyaXRlKHRhYmxlLmluZGV4T2YocyksIGJpdExlbmd0aCk7CgogICAgICAgIGlmICh0YWJsZS5zaXplKCkgPCAweGZmZikgewogICAgICAgICAgaWYgKHRhYmxlLnNpemUoKSA9PSAxIDw8IGJpdExlbmd0aCkgewogICAgICAgICAgICBiaXRMZW5ndGggKz0gMTsKICAgICAgICAgIH0KCiAgICAgICAgICB0YWJsZS5hZGQocyArIGMpOwogICAgICAgIH0KCiAgICAgICAgcyA9IGM7CiAgICAgIH0KICAgIH0KCiAgICBiaXRPdXQud3JpdGUodGFibGUuaW5kZXhPZihzKSwgYml0TGVuZ3RoKTsKICAgIC8qKiANCiAgICAgICogZW5kIGNvZGUNCiAgICAgICogKi8KCiAgICBiaXRPdXQud3JpdGUoZW5kQ29kZSwgYml0TGVuZ3RoKTsKICAgIGJpdE91dC5mbHVzaCgpOwogICAgcmV0dXJuIGJ5dGVPdXQudG9CeXRlQXJyYXkoKTsKICB9OwoKICB2YXIgbHp3VGFibGUgPSBmdW5jdGlvbiBsendUYWJsZSgpIHsKICAgIHZhciBfbWFwID0ge307CiAgICB2YXIgX3NpemUgPSAwOwogICAgdmFyIF90aGlzID0ge307CgogICAgX3RoaXMuYWRkID0gZnVuY3Rpb24gKGtleSkgewogICAgICBpZiAoX3RoaXMuY29udGFpbnMoa2V5KSkgewogICAgICAgIHRocm93IG5ldyBFcnJvcignZHVwIGtleTonICsga2V5KTsKICAgICAgfQoKICAgICAgX21hcFtrZXldID0gX3NpemU7CiAgICAgIF9zaXplICs9IDE7CiAgICB9OwoKICAgIF90aGlzLnNpemUgPSBmdW5jdGlvbiAoKSB7CiAgICAgIHJldHVybiBfc2l6ZTsKICAgIH07CgogICAgX3RoaXMuaW5kZXhPZiA9IGZ1bmN0aW9uIChrZXkpIHsKICAgICAgcmV0dXJuIF9tYXBba2V5XTsKICAgIH07CgogICAgX3RoaXMuY29udGFpbnMgPSBmdW5jdGlvbiAoa2V5KSB7CiAgICAgIHJldHVybiB0eXBlb2YgX21hcFtrZXldICE9ICd1bmRlZmluZWQnOwogICAgfTsKCiAgICByZXR1cm4gX3RoaXM7CiAgfTsKCiAgcmV0dXJuIF90aGlzOwp9OwoKdmFyIGNyZWF0ZUltZ1RhZyA9IGZ1bmN0aW9uIGNyZWF0ZUltZ1RhZyh3aWR0aCwgaGVpZ2h0LCBnZXRQaXhlbCwgYWx0KSB7CiAgdmFyIGdpZiA9IGdpZkltYWdlKHdpZHRoLCBoZWlnaHQpOwoKICBmb3IgKHZhciB5ID0gMDsgeSA8IGhlaWdodDsgeSArPSAxKSB7CiAgICBmb3IgKHZhciB4ID0gMDsgeCA8IHdpZHRoOyB4ICs9IDEpIHsKICAgICAgZ2lmLnNldFBpeGVsKHgsIHksIGdldFBpeGVsKHgsIHkpKTsKICAgIH0KICB9CgogIHZhciBiID0gYnl0ZUFycmF5T3V0cHV0U3RyZWFtKCk7CiAgZ2lmLndyaXRlKGIpOwogIHZhciBiYXNlNjQgPSBiYXNlNjRFbmNvZGVPdXRwdXRTdHJlYW0oKTsKICB2YXIgYnl0ZXMgPSBiLnRvQnl0ZUFycmF5KCk7CgogIGZvciAodmFyIGkgPSAwOyBpIDwgYnl0ZXMubGVuZ3RoOyBpICs9IDEpIHsKICAgIGJhc2U2NC53cml0ZUJ5dGUoYnl0ZXNbaV0pOwogIH0KCiAgYmFzZTY0LmZsdXNoKCk7CiAgdmFyIGltZyA9ICcnOwogIGltZyArPSAnZGF0YTppbWFnZS9naWY7YmFzZTY0LCc7CiAgaW1nICs9IGJhc2U2NDsKICByZXR1cm4gaW1nOwp9OwovKiogDQogKiByZXR1cm5zIHFyY29kZSBmdW5jdGlvbi4NCiAqICovCgoKdmFyIGNyZWF0ZVFyQ29kZUltZyA9IGZ1bmN0aW9uIGNyZWF0ZVFyQ29kZUltZyhvcHRpb25zKSB7CiAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge307CiAgb3B0aW9ucy5zaXplID0gb3B0aW9ucy5zaXplOwogIHZhciB0eXBlTnVtYmVyID0gb3B0aW9ucy50eXBlTnVtYmVyIHx8IDQ7CiAgdmFyIGVycm9yQ29ycmVjdExldmVsID0gb3B0aW9ucy5lcnJvckNvcnJlY3RMZXZlbCB8fCAnTSc7CiAgdmFyIHNpemUgPSBvcHRpb25zLnNpemUgfHwgNTAwOwogIHZhciBxcjsKCiAgdHJ5IHsKICAgIHFyID0gcXJjb2RlKHR5cGVOdW1iZXIsIGVycm9yQ29ycmVjdExldmVsIHx8ICdNJyk7CiAgICBxci5hZGREYXRhKG9wdGlvbnMudGV4dCk7CiAgICBxci5tYWtlKCk7CiAgfSBjYXRjaCAoZSkgewogICAgaWYgKHR5cGVOdW1iZXIgPj0gNDApIHsKICAgICAgdGhyb3cgbmV3IEVycm9yKCdUZXh0IHRvbyBsb25nIHRvIGVuY29kZScpOwogICAgfSBlbHNlIHsKICAgICAgcmV0dXJuIGNyZWF0ZVFyQ29kZUltZyhvcHRpb25zLnRleHQsIHsKICAgICAgICBzaXplOiBzaXplLAogICAgICAgIGVycm9yQ29ycmVjdExldmVsOiBlcnJvckNvcnJlY3RMZXZlbCwKICAgICAgICB0eXBlTnVtYmVyOiB0eXBlTnVtYmVyICsgMQogICAgICB9KTsKICAgIH0KICB9CiAgLyoqY2FsYyBjZWxsc2l6ZSBhbmQgbWFyZ2luICovCgoKICB2YXIgY2VsbHNpemUgPSBwYXJzZUludChzaXplIC8gcXIuZ2V0TW9kdWxlQ291bnQoKSk7CiAgdmFyIG1hcmdpbiA9IHBhcnNlSW50KChzaXplIC0gcXIuZ2V0TW9kdWxlQ291bnQoKSAqIGNlbGxzaXplKSAvIDIpOwogIHJldHVybiBxci5jcmVhdGVJbWdUYWcoY2VsbHNpemUsIG1hcmdpbiwgc2l6ZSk7Cn07Cgp2YXIgbW9kdWxlID0ge307CmV4cG9ydCBkZWZhdWx0IGNyZWF0ZVFyQ29kZUltZzs="},{"version":3,"sources":["C:/Users/Administrator/Desktop/vip_inline_h5/src/plugins/wxqrcode.js"],"names":["qrcode","typeNumber","errorCorrectLevel","PAD0","PAD1","_typeNumber","_errorCorrectLevel","QRErrorCorrectLevel","_modules","_moduleCount","_dataCache","_dataList","Array","_this","makeImpl","test","maskPattern","moduleCount","modules","row","col","setupPositionProbePattern","setupPositionAdjustPattern","setupTimingPattern","setupTypeInfo","setupTypeNumber","createData","mapData","r","c","getBestMaskPattern","minLostPoint","pattern","i","lostPoint","QRUtil","getLostPoint","pos","getPatternPosition","length","j","bits","getBCHTypeNumber","mod","Math","floor","data","getBCHTypeInfo","inc","bitIndex","byteIndex","maskFunc","getMaskFunction","dark","mask","createBytes","buffer","rsBlocks","offset","maxDcCount","maxEcCount","dcdata","ecdata","dcCount","dataCount","ecCount","totalCount","max","getBuffer","rsPoly","getErrorCorrectPolynomial","rawPoly","qrPolynomial","getLength","modPoly","modIndex","getAt","totalCodeCount","index","dataList","QRRSBlock","getRSBlocks","qrBitBuffer","put","getMode","getLengthInBits","write","totalDataCount","Error","putBit","addData","newData","qr8BitByte","push","isDark","getModuleCount","make","createTableTag","cellSize","margin","qrHtml","createImgTag","size","min","x","y","stringToBytes","s","bytes","charCodeAt","createStringToBytes","unicodeData","numChars","unicodeMap","bin","base64DecodeInputStream","read","b","count","b0","b1","b2","b3","k","String","fromCharCode","v","unknownChar","charAt","QRMode","MODE_NUMBER","MODE_ALPHA_NUM","MODE_8BIT_BYTE","MODE_KANJI","L","M","Q","H","QRMaskPattern","PATTERN000","PATTERN001","PATTERN010","PATTERN011","PATTERN100","PATTERN101","PATTERN110","PATTERN111","PATTERN_POSITION_TABLE","G15","G18","G15_MASK","getBCHDigit","digit","d","errorCorrectLength","a","multiply","QRMath","gexp","mode","type","sameCount","darkCount","ratio","abs","EXP_TABLE","LOG_TABLE","glog","n","num","shift","_num","e","RS_BLOCK_TABLE","qrRSBlock","getRsBlockTable","undefined","rsBlock","list","_buffer","_length","bufIndex","bit","_mode","_data","_parsedData","l","byteArray","code","prototype","concat","apply","unshift","_bytes","byteArrayOutputStream","writeByte","writeShort","writeBytes","off","len","writeString","toByteArray","toString","base64EncodeOutputStream","_buflen","_base64","writeEncoded","encode","flush","padlen","str","_str","_pos","match","decode","gifImage","width","height","_width","_height","setPixel","pixel","out","lzwMinCodeSize","raster","getLZWRaster","bitOutputStream","_out","_bitLength","_bitBuffer","clearCode","endCode","bitLength","table","lzwTable","add","byteOut","bitOut","dataIndex","contains","indexOf","_map","_size","key","getPixel","alt","gif","base64","img","createQrCodeImg","options","qr","text","cellsize","parseInt","module"],"mappings":"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","sourcesContent":["\r\n/**\r\n * qrcode\r\n * @param typeNumber 1 to 40\r\n * @param errorCorrectLevel 'L','M','Q','H'\r\n */\r\nvar qrcode = function(typeNumber, errorCorrectLevel) {\r\n\r\n    var PAD0 = 0xEC;\r\n    var PAD1 = 0x11;\r\n\r\n    var _typeNumber = typeNumber;\r\n    var _errorCorrectLevel = QRErrorCorrectLevel[errorCorrectLevel];\r\n    var _modules = null;\r\n    var _moduleCount = 0;\r\n    var _dataCache = null;\r\n    var _dataList = new Array();\r\n\r\n    var _this = {};\r\n\r\n    var makeImpl = function(test, maskPattern) {\r\n\r\n\t_moduleCount = _typeNumber * 4 + 17;\r\n\t_modules = function(moduleCount) {\r\n\t    var modules = new Array(moduleCount);\r\n\t    for (var row = 0; row < moduleCount; row += 1) {\r\n\t\tmodules[row] = new Array(moduleCount);\r\n\t\tfor (var col = 0; col < moduleCount; col += 1) {\r\n\t\t    modules[row][col] = null;\r\n\t\t}\r\n\t    }\r\n\t    return modules;\r\n\t}(_moduleCount);\r\n\r\n\tsetupPositionProbePattern(0, 0);\r\n\tsetupPositionProbePattern(_moduleCount - 7, 0);\r\n\tsetupPositionProbePattern(0, _moduleCount - 7);\r\n\tsetupPositionAdjustPattern();\r\n\tsetupTimingPattern();\r\n\tsetupTypeInfo(test, maskPattern);\r\n\r\n\tif (_typeNumber >= 7) {\r\n\t    setupTypeNumber(test);\r\n\t}\r\n\r\n\tif (_dataCache == null) {\r\n\t    _dataCache = createData(_typeNumber, _errorCorrectLevel, _dataList);\r\n\t}\r\n\r\n\tmapData(_dataCache, maskPattern);\r\n    };\r\n\r\n    var setupPositionProbePattern = function(row, col) {\r\n\r\n\tfor (var r = -1; r <= 7; r += 1) {\r\n\r\n\t    if (row + r <= -1 || _moduleCount <= row + r) continue;\r\n\r\n\t    for (var c = -1; c <= 7; c += 1) {\r\n\r\n\t\tif (col + c <= -1 || _moduleCount <= col + c) continue;\r\n\r\n\t\tif ( (0 <= r && r <= 6 && (c == 0 || c == 6) )\r\n\t\t     || (0 <= c && c <= 6 && (r == 0 || r == 6) )\r\n\t\t     || (2 <= r && r <= 4 && 2 <= c && c <= 4) ) {\r\n\t\t    _modules[row + r][col + c] = true;\r\n\t\t} else {\r\n\t\t    _modules[row + r][col + c] = false;\r\n\t\t}\r\n\t    }\r\n\t}\r\n    };\r\n\r\n    var getBestMaskPattern = function() {\r\n\r\n\tvar minLostPoint = 0;\r\n\tvar pattern = 0;\r\n\r\n\tfor (var i = 0; i < 8; i += 1) {\r\n\r\n\t    makeImpl(true, i);\r\n\r\n\t    var lostPoint = QRUtil.getLostPoint(_this);\r\n\r\n\t    if (i == 0 || minLostPoint > lostPoint) {\r\n\t\tminLostPoint = lostPoint;\r\n\t\tpattern = i;\r\n\t    }\r\n\t}\r\n\r\n\treturn pattern;\r\n    };\r\n\r\n    var setupTimingPattern = function() {\r\n\r\n\tfor (var r = 8; r < _moduleCount - 8; r += 1) {\r\n\t    if (_modules[r][6] != null) {\r\n\t\tcontinue;\r\n\t    }\r\n\t    _modules[r][6] = (r % 2 == 0);\r\n\t}\r\n\r\n\tfor (var c = 8; c < _moduleCount - 8; c += 1) {\r\n\t    if (_modules[6][c] != null) {\r\n\t\tcontinue;\r\n\t    }\r\n\t    _modules[6][c] = (c % 2 == 0);\r\n\t}\r\n    };\r\n\r\n    var setupPositionAdjustPattern = function() {\r\n\r\n\tvar pos = QRUtil.getPatternPosition(_typeNumber);\r\n\r\n\tfor (var i = 0; i < pos.length; i += 1) {\r\n\r\n\t    for (var j = 0; j < pos.length; j += 1) {\r\n\r\n\t\tvar row = pos[i];\r\n\t\tvar col = pos[j];\r\n\r\n\t\tif (_modules[row][col] != null) {\r\n\t\t    continue;\r\n\t\t}\r\n\r\n\t\tfor (var r = -2; r <= 2; r += 1) {\r\n\r\n\t\t    for (var c = -2; c <= 2; c += 1) {\r\n\r\n\t\t\tif (r == -2 || r == 2 || c == -2 || c == 2\r\n\t\t\t    || (r == 0 && c == 0) ) {\r\n\t\t\t    _modules[row + r][col + c] = true;\r\n\t\t\t} else {\r\n\t\t\t    _modules[row + r][col + c] = false;\r\n\t\t\t}\r\n\t\t    }\r\n\t\t}\r\n\t    }\r\n\t}\r\n    };\r\n\r\n    var setupTypeNumber = function(test) {\r\n\r\n\tvar bits = QRUtil.getBCHTypeNumber(_typeNumber);\r\n\r\n\tfor (var i = 0; i < 18; i += 1) {\r\n\t    var mod = (!test && ( (bits >> i) & 1) == 1);\r\n\t    _modules[Math.floor(i / 3)][i % 3 + _moduleCount - 8 - 3] = mod;\r\n\t}\r\n\r\n\tfor (var i = 0; i < 18; i += 1) {\r\n\t    var mod = (!test && ( (bits >> i) & 1) == 1);\r\n\t    _modules[i % 3 + _moduleCount - 8 - 3][Math.floor(i / 3)] = mod;\r\n\t}\r\n    };\r\n\r\n    var setupTypeInfo = function(test, maskPattern) {\r\n\r\n\tvar data = (_errorCorrectLevel << 3) | maskPattern;\r\n\tvar bits = QRUtil.getBCHTypeInfo(data);\r\n\r\n\t/**vertical */\r\n\tfor (var i = 0; i < 15; i += 1) {\r\n\r\n\t    var mod = (!test && ( (bits >> i) & 1) == 1);\r\n\r\n\t    if (i < 6) {\r\n\t\t_modules[i][8] = mod;\r\n\t    } else if (i < 8) {\r\n\t\t_modules[i + 1][8] = mod;\r\n\t    } else {\r\n\t\t_modules[_moduleCount - 15 + i][8] = mod;\r\n\t    }\r\n\t}\r\n\r\n\t/**horizontal */\r\n\tfor (var i = 0; i < 15; i += 1) {\r\n\r\n\t    var mod = (!test && ( (bits >> i) & 1) == 1);\r\n\r\n\t    if (i < 8) {\r\n\t\t_modules[8][_moduleCount - i - 1] = mod;\r\n\t    } else if (i < 9) {\r\n\t\t_modules[8][15 - i - 1 + 1] = mod;\r\n\t    } else {\r\n\t\t_modules[8][15 - i - 1] = mod;\r\n\t    }\r\n\t}\r\n\r\n\t/**fixed module */\r\n\t_modules[_moduleCount - 8][8] = (!test);\r\n    };\r\n\r\n    var mapData = function(data, maskPattern) {\r\n\r\n\tvar inc = -1;\r\n\tvar row = _moduleCount - 1;\r\n\tvar bitIndex = 7;\r\n\tvar byteIndex = 0;\r\n\tvar maskFunc = QRUtil.getMaskFunction(maskPattern);\r\n\r\n\tfor (var col = _moduleCount - 1; col > 0; col -= 2) {\r\n\r\n\t    if (col == 6) col -= 1;\r\n\r\n\t    while (true) {\r\n\r\n\t\tfor (var c = 0; c < 2; c += 1) {\r\n\r\n\t\t    if (_modules[row][col - c] == null) {\r\n\r\n\t\t\tvar dark = false;\r\n\r\n\t\t\tif (byteIndex < data.length) {\r\n\t\t\t    dark = ( ( (data[byteIndex] >>> bitIndex) & 1) == 1);\r\n\t\t\t}\r\n\r\n\t\t\tvar mask = maskFunc(row, col - c);\r\n\r\n\t\t\tif (mask) {\r\n\t\t\t    dark = !dark;\r\n\t\t\t}\r\n\r\n\t\t\t_modules[row][col - c] = dark;\r\n\t\t\tbitIndex -= 1;\r\n\r\n\t\t\tif (bitIndex == -1) {\r\n\t\t\t    byteIndex += 1;\r\n\t\t\t    bitIndex = 7;\r\n\t\t\t}\r\n\t\t    }\r\n\t\t}\r\n\r\n\t\trow += inc;\r\n\r\n\t\tif (row < 0 || _moduleCount <= row) {\r\n\t\t    row -= inc;\r\n\t\t    inc = -inc;\r\n\t\t    break;\r\n\t\t}\r\n\t    }\r\n\t}\r\n    };\r\n\r\n    var createBytes = function(buffer, rsBlocks) {\r\n\r\n\tvar offset = 0;\r\n\r\n\tvar maxDcCount = 0;\r\n\tvar maxEcCount = 0;\r\n\r\n\tvar dcdata = new Array(rsBlocks.length);\r\n\tvar ecdata = new Array(rsBlocks.length);\r\n\r\n\tfor (var r = 0; r < rsBlocks.length; r += 1) {\r\n\r\n\t    var dcCount = rsBlocks[r].dataCount;\r\n\t    var ecCount = rsBlocks[r].totalCount - dcCount;\r\n\r\n\t    maxDcCount = Math.max(maxDcCount, dcCount);\r\n\t    maxEcCount = Math.max(maxEcCount, ecCount);\r\n\r\n\t    dcdata[r] = new Array(dcCount);\r\n\r\n\t    for (var i = 0; i < dcdata[r].length; i += 1) {\r\n\t\tdcdata[r][i] = 0xff & buffer.getBuffer()[i + offset];\r\n\t    }\r\n\t    offset += dcCount;\r\n\r\n\t    var rsPoly = QRUtil.getErrorCorrectPolynomial(ecCount);\r\n\t    var rawPoly = qrPolynomial(dcdata[r], rsPoly.getLength() - 1);\r\n\r\n\t    var modPoly = rawPoly.mod(rsPoly);\r\n\t    ecdata[r] = new Array(rsPoly.getLength() - 1);\r\n\t    for (var i = 0; i < ecdata[r].length; i += 1) {\r\n\t\tvar modIndex = i + modPoly.getLength() - ecdata[r].length;\r\n\t\tecdata[r][i] = (modIndex >= 0)? modPoly.getAt(modIndex) : 0;\r\n\t    }\r\n\t}\r\n\r\n\tvar totalCodeCount = 0;\r\n\tfor (var i = 0; i < rsBlocks.length; i += 1) {\r\n\t    totalCodeCount += rsBlocks[i].totalCount;\r\n\t}\r\n\r\n\tvar data = new Array(totalCodeCount);\r\n\tvar index = 0;\r\n\r\n\tfor (var i = 0; i < maxDcCount; i += 1) {\r\n\t    for (var r = 0; r < rsBlocks.length; r += 1) {\r\n\t\tif (i < dcdata[r].length) {\r\n\t\t    data[index] = dcdata[r][i];\r\n\t\t    index += 1;\r\n\t\t}\r\n\t    }\r\n\t}\r\n\r\n\tfor (var i = 0; i < maxEcCount; i += 1) {\r\n\t    for (var r = 0; r < rsBlocks.length; r += 1) {\r\n\t\tif (i < ecdata[r].length) {\r\n\t\t    data[index] = ecdata[r][i];\r\n\t\t    index += 1;\r\n\t\t}\r\n\t    }\r\n\t}\r\n\r\n\treturn data;\r\n    };\r\n\r\n    var createData = function(typeNumber, errorCorrectLevel, dataList) {\r\n\r\n\tvar rsBlocks = QRRSBlock.getRSBlocks(typeNumber, errorCorrectLevel);\r\n\r\n\tvar buffer = qrBitBuffer();\r\n\r\n\tfor (var i = 0; i < dataList.length; i += 1) {\r\n\t    var data = dataList[i];\r\n\t    buffer.put(data.getMode(), 4);\r\n\t    buffer.put(data.getLength(), QRUtil.getLengthInBits(data.getMode(), typeNumber) );\r\n\t    data.write(buffer);\r\n\t}\r\n\r\n\t/**calc num max data. */\r\n\tvar totalDataCount = 0;\r\n\tfor (var i = 0; i < rsBlocks.length; i += 1) {\r\n\t    totalDataCount += rsBlocks[i].dataCount;\r\n\t}\r\n\r\n\tif (buffer.getLengthInBits() > totalDataCount * 8) {\r\n\t    throw new Error('code length overflow. ('\r\n\t\t\t    + buffer.getLengthInBits()\r\n\t\t\t    + '>'\r\n\t\t\t    + totalDataCount * 8\r\n\t\t\t    + ')');\r\n\t}\r\n\r\n\t/**end code */\r\n\tif (buffer.getLengthInBits() + 4 <= totalDataCount * 8) {\r\n\t    buffer.put(0, 4);\r\n\t}\r\n\r\n\t/** padding */\r\n\twhile (buffer.getLengthInBits() % 8 != 0) {\r\n\t    buffer.putBit(false);\r\n\t}\r\n\r\n\t/**padding */\r\n\twhile (true) {\r\n\r\n\t    if (buffer.getLengthInBits() >= totalDataCount * 8) {\r\n\t\tbreak;\r\n\t    }\r\n\t    buffer.put(PAD0, 8);\r\n\r\n\t    if (buffer.getLengthInBits() >= totalDataCount * 8) {\r\n\t\tbreak;\r\n\t    }\r\n\t    buffer.put(PAD1, 8);\r\n\t}\r\n\r\n\treturn createBytes(buffer, rsBlocks);\r\n    };\r\n\r\n    _this.addData = function(data) {\r\n\tvar newData = qr8BitByte(data);\r\n\t_dataList.push(newData);\r\n\t_dataCache = null;\r\n    };\r\n\r\n    _this.isDark = function(row, col) {\r\n\tif (row < 0 || _moduleCount <= row || col < 0 || _moduleCount <= col) {\r\n\t    throw new Error(row + ',' + col);\r\n\t}\r\n\treturn _modules[row][col];\r\n    };\r\n\r\n    _this.getModuleCount = function() {\r\n\treturn _moduleCount;\r\n    };\r\n\r\n    _this.make = function() {\r\n\tmakeImpl(false, getBestMaskPattern() );\r\n    };\r\n\r\n    _this.createTableTag = function(cellSize, margin) {\r\n\r\n\tcellSize = cellSize || 2;\r\n\tmargin = (typeof margin == 'undefined')? cellSize * 4 : margin;\r\n\r\n\tvar qrHtml = '';\r\n\r\n\tqrHtml += '<table style=\"';\r\n\tqrHtml += ' border-width: 0px; border-style: none;';\r\n\tqrHtml += ' border-collapse: collapse;';\r\n\tqrHtml += ' padding: 0px; margin: ' + margin + 'px;';\r\n\tqrHtml += '\">';\r\n\tqrHtml += '<tbody>';\r\n\r\n\tfor (var r = 0; r < _this.getModuleCount(); r += 1) {\r\n\r\n\t    qrHtml += '<tr>';\r\n\r\n\t    for (var c = 0; c < _this.getModuleCount(); c += 1) {\r\n\t\tqrHtml += '<td style=\"';\r\n\t\tqrHtml += ' border-width: 0px; border-style: none;';\r\n\t\tqrHtml += ' border-collapse: collapse;';\r\n\t\tqrHtml += ' padding: 0px; margin: 0px;';\r\n\t\tqrHtml += ' width: ' + cellSize + 'px;';\r\n\t\tqrHtml += ' height: ' + cellSize + 'px;';\r\n\t\tqrHtml += ' background-color: ';\r\n\t\tqrHtml += _this.isDark(r, c)? '#000000' : '#ffffff';\r\n\t\tqrHtml += ';';\r\n\t\tqrHtml += '\"/>';\r\n\t    }\r\n\r\n\t    qrHtml += '</tr>';\r\n\t}\r\n\r\n\tqrHtml += '</tbody>';\r\n\tqrHtml += '</table>';\r\n\r\n\treturn qrHtml;\r\n    };\r\n\r\n    _this.createImgTag = function(cellSize, margin, size) {\r\n\r\n\tcellSize = cellSize || 2;\r\n\tmargin = (typeof margin == 'undefined')? cellSize * 4 : margin;\r\n\r\n\tvar min = margin;\r\n\tvar max = _this.getModuleCount() * cellSize + margin;\r\n\r\n\treturn createImgTag(size, size, function(x, y) {\r\n\t    if (min <= x && x < max && min <= y && y < max) {\r\n\t\tvar c = Math.floor( (x - min) / cellSize);\r\n\t\tvar r = Math.floor( (y - min) / cellSize);\r\n\t\treturn _this.isDark(r, c)? 0 : 1;\r\n\t    } else {\r\n\t\treturn 1;\r\n\t    }\r\n\t} );\r\n    };\r\n\r\n    return _this;\r\n};\r\n/** \r\n//---------------------------------------------------------------------\r\n// qrcode.stringToBytes\r\n//---------------------------------------------------------------------\r\n*/\r\nqrcode.stringToBytes = function(s) {\r\n    var bytes = new Array();\r\n    for (var i = 0; i < s.length; i += 1) {\r\n\tvar c = s.charCodeAt(i);\r\n\tbytes.push(c & 0xff);\r\n    }\r\n    return bytes;\r\n};\r\n/**\r\n//---------------------------------------------------------------------\r\n// qrcode.createStringToBytes\r\n//---------------------------------------------------------------------\r\n */\r\n/**\r\n * @param unicodeData base64 string of byte array.\r\n * [16bit Unicode],[16bit Bytes], ...\r\n * @param numChars\r\n */\r\nqrcode.createStringToBytes = function(unicodeData, numChars) {\r\n\r\n    /** create conversion map. */\r\n\r\n    var unicodeMap = function() {\r\n\r\n\tvar bin = base64DecodeInputStream(unicodeData);\r\n\tvar read = function() {\r\n\t    var b = bin.read();\r\n\t    if (b == -1) throw new Error();\r\n\t    return b;\r\n\t};\r\n\r\n\tvar count = 0;\r\n\tvar unicodeMap = {};\r\n\twhile (true) {\r\n\t    var b0 = bin.read();\r\n\t    if (b0 == -1) break;\r\n\t    var b1 = read();\r\n\t    var b2 = read();\r\n\t    var b3 = read();\r\n\t    var k = String.fromCharCode( (b0 << 8) | b1);\r\n\t    var v = (b2 << 8) | b3;\r\n\t    unicodeMap[k] = v;\r\n\t    count += 1;\r\n\t}\r\n\tif (count != numChars) {\r\n\t    throw new Error(count + ' != ' + numChars);\r\n\t}\r\n\r\n\treturn unicodeMap;\r\n    }();\r\n\r\n    var unknownChar = '?'.charCodeAt(0);\r\n\r\n    return function(s) {\r\n\tvar bytes = new Array();\r\n\tfor (var i = 0; i < s.length; i += 1) {\r\n\t    var c = s.charCodeAt(i);\r\n\t    if (c < 128) {\r\n\t\tbytes.push(c);\r\n\t    } else {\r\n\t\tvar b = unicodeMap[s.charAt(i)];\r\n\t\tif (typeof b == 'number') {\r\n\t\t    if ( (b & 0xff) == b) {\r\n\t\t\t/**1byte */\r\n\t\t\tbytes.push(b);\r\n\t\t    } else {\r\n\t\t\t/** 2bytes */\r\n\t\t\tbytes.push(b >>> 8);\r\n\t\t\tbytes.push(b & 0xff);\r\n\t\t    }\r\n\t\t} else {\r\n\t\t    bytes.push(unknownChar);\r\n\t\t}\r\n\t    }\r\n\t}\r\n\treturn bytes;\r\n    };\r\n};\r\n/** \r\n//---------------------------------------------------------------------\r\n// QRMode\r\n//---------------------------------------------------------------------\r\n*/\r\nvar QRMode = {\r\n    MODE_NUMBER :\t\t1 << 0,\r\n    MODE_ALPHA_NUM : \t1 << 1,\r\n    MODE_8BIT_BYTE : \t1 << 2,\r\n    MODE_KANJI :\t\t1 << 3\r\n};\r\n/** \r\n//---------------------------------------------------------------------\r\n// QRErrorCorrectLevel\r\n//---------------------------------------------------------------------\r\n*/\r\nvar QRErrorCorrectLevel = {\r\n    L : 1,\r\n    M : 0,\r\n    Q : 3,\r\n    H : 2\r\n};\r\n/** \r\n//---------------------------------------------------------------------\r\n// QRMaskPattern\r\n//---------------------------------------------------------------------\r\n*/\r\nvar QRMaskPattern = {\r\n    PATTERN000 : 0,\r\n    PATTERN001 : 1,\r\n    PATTERN010 : 2,\r\n    PATTERN011 : 3,\r\n    PATTERN100 : 4,\r\n    PATTERN101 : 5,\r\n    PATTERN110 : 6,\r\n    PATTERN111 : 7\r\n};\r\n/** \r\n//---------------------------------------------------------------------\r\n// QRUtil\r\n//---------------------------------------------------------------------\r\n*/\r\nvar QRUtil = function() {\r\n\r\n    var PATTERN_POSITION_TABLE = [\r\n\t[],\r\n\t[6, 18],\r\n\t[6, 22],\r\n\t[6, 26],\r\n\t[6, 30],\r\n\t[6, 34],\r\n\t[6, 22, 38],\r\n\t[6, 24, 42],\r\n\t[6, 26, 46],\r\n\t[6, 28, 50],\r\n\t[6, 30, 54],\r\n\t[6, 32, 58],\r\n\t[6, 34, 62],\r\n\t[6, 26, 46, 66],\r\n\t[6, 26, 48, 70],\r\n\t[6, 26, 50, 74],\r\n\t[6, 30, 54, 78],\r\n\t[6, 30, 56, 82],\r\n\t[6, 30, 58, 86],\r\n\t[6, 34, 62, 90],\r\n\t[6, 28, 50, 72, 94],\r\n\t[6, 26, 50, 74, 98],\r\n\t[6, 30, 54, 78, 102],\r\n\t[6, 28, 54, 80, 106],\r\n\t[6, 32, 58, 84, 110],\r\n\t[6, 30, 58, 86, 114],\r\n\t[6, 34, 62, 90, 118],\r\n\t[6, 26, 50, 74, 98, 122],\r\n\t[6, 30, 54, 78, 102, 126],\r\n\t[6, 26, 52, 78, 104, 130],\r\n\t[6, 30, 56, 82, 108, 134],\r\n\t[6, 34, 60, 86, 112, 138],\r\n\t[6, 30, 58, 86, 114, 142],\r\n\t[6, 34, 62, 90, 118, 146],\r\n\t[6, 30, 54, 78, 102, 126, 150],\r\n\t[6, 24, 50, 76, 102, 128, 154],\r\n\t[6, 28, 54, 80, 106, 132, 158],\r\n\t[6, 32, 58, 84, 110, 136, 162],\r\n\t[6, 26, 54, 82, 110, 138, 166],\r\n\t[6, 30, 58, 86, 114, 142, 170]\r\n    ];\r\n    var G15 = (1 << 10) | (1 << 8) | (1 << 5) | (1 << 4) | (1 << 2) | (1 << 1) | (1 << 0);\r\n    var G18 = (1 << 12) | (1 << 11) | (1 << 10) | (1 << 9) | (1 << 8) | (1 << 5) | (1 << 2) | (1 << 0);\r\n    var G15_MASK = (1 << 14) | (1 << 12) | (1 << 10) | (1 << 4) | (1 << 1);\r\n\r\n    var _this = {};\r\n\r\n    var getBCHDigit = function(data) {\r\n\tvar digit = 0;\r\n\twhile (data != 0) {\r\n\t    digit += 1;\r\n\t    data >>>= 1;\r\n\t}\r\n\treturn digit;\r\n    };\r\n\r\n    _this.getBCHTypeInfo = function(data) {\r\n\tvar d = data << 10;\r\n\twhile (getBCHDigit(d) - getBCHDigit(G15) >= 0) {\r\n\t    d ^= (G15 << (getBCHDigit(d) - getBCHDigit(G15) ) );\r\n\t}\r\n\treturn ( (data << 10) | d) ^ G15_MASK;\r\n    };\r\n\r\n    _this.getBCHTypeNumber = function(data) {\r\n\tvar d = data << 12;\r\n\twhile (getBCHDigit(d) - getBCHDigit(G18) >= 0) {\r\n\t    d ^= (G18 << (getBCHDigit(d) - getBCHDigit(G18) ) );\r\n\t}\r\n\treturn (data << 12) | d;\r\n    };\r\n\r\n    _this.getPatternPosition = function(typeNumber) {\r\n\treturn PATTERN_POSITION_TABLE[typeNumber - 1];\r\n    };\r\n\r\n    _this.getMaskFunction = function(maskPattern) {\r\n\r\n\tswitch (maskPattern) {\r\n\r\n\t    case QRMaskPattern.PATTERN000 :\r\n\t\treturn function(i, j) { return (i + j) % 2 == 0; };\r\n\t    case QRMaskPattern.PATTERN001 :\r\n\t\treturn function(i, j) { return i % 2 == 0; };\r\n\t    case QRMaskPattern.PATTERN010 :\r\n\t\treturn function(i, j) { return j % 3 == 0; };\r\n\t    case QRMaskPattern.PATTERN011 :\r\n\t\treturn function(i, j) { return (i + j) % 3 == 0; };\r\n\t    case QRMaskPattern.PATTERN100 :\r\n\t\treturn function(i, j) { return (Math.floor(i / 2) + Math.floor(j / 3) ) % 2 == 0; };\r\n\t    case QRMaskPattern.PATTERN101 :\r\n\t\treturn function(i, j) { return (i * j) % 2 + (i * j) % 3 == 0; };\r\n\t    case QRMaskPattern.PATTERN110 :\r\n\t\treturn function(i, j) { return ( (i * j) % 2 + (i * j) % 3) % 2 == 0; };\r\n\t    case QRMaskPattern.PATTERN111 :\r\n\t\treturn function(i, j) { return ( (i * j) % 3 + (i + j) % 2) % 2 == 0; };\r\n\r\n\t\tdefault :\r\n\t\tthrow new Error('bad maskPattern:' + maskPattern);\r\n\t}\r\n    };\r\n\r\n    _this.getErrorCorrectPolynomial = function(errorCorrectLength) {\r\n\tvar a = qrPolynomial([1], 0);\r\n\tfor (var i = 0; i < errorCorrectLength; i += 1) {\r\n\t    a = a.multiply(qrPolynomial([1, QRMath.gexp(i)], 0) );\r\n\t}\r\n\treturn a;\r\n    };\r\n\r\n    _this.getLengthInBits = function(mode, type) {\r\n\r\n\tif (1 <= type && type < 10) {\r\n\r\n\t    /**1 - 9 */\r\n\r\n\t    switch(mode) {\r\n\t\tcase QRMode.MODE_NUMBER \t: return 10;\r\n\t\tcase QRMode.MODE_ALPHA_NUM \t: return 9;\r\n\t\tcase QRMode.MODE_8BIT_BYTE\t: return 8;\r\n\t\tcase QRMode.MODE_KANJI\t\t: return 8;\r\n\t\t    default :\r\n\t\t    throw new Error('mode:' + mode);\r\n\t    }\r\n\r\n\t} else if (type < 27) {\r\n\r\n\t    /**10 - 26 */\r\n\r\n\t    switch(mode) {\r\n\t\tcase QRMode.MODE_NUMBER \t: return 12;\r\n\t\tcase QRMode.MODE_ALPHA_NUM \t: return 11;\r\n\t\tcase QRMode.MODE_8BIT_BYTE\t: return 16;\r\n\t\tcase QRMode.MODE_KANJI\t\t: return 10;\r\n\t\t    default :\r\n\t\t    throw new Error('mode:' + mode);\r\n\t    }\r\n\r\n\t} else if (type < 41) {\r\n\r\n\t    /**27 - 40 */\r\n\r\n\t    switch(mode) {\r\n\t\tcase QRMode.MODE_NUMBER \t: return 14;\r\n\t\tcase QRMode.MODE_ALPHA_NUM\t: return 13;\r\n\t\tcase QRMode.MODE_8BIT_BYTE\t: return 16;\r\n\t\tcase QRMode.MODE_KANJI\t\t: return 12;\r\n\t\t    default :\r\n\t\t    throw new Error('mode:' + mode);\r\n\t    }\r\n\r\n\t} else {\r\n\t    throw new Error('type:' + type);\r\n\t}\r\n    };\r\n\r\n    _this.getLostPoint = function(qrcode) {\r\n\r\n\tvar moduleCount = qrcode.getModuleCount();\r\n\r\n\tvar lostPoint = 0;\r\n\r\n\t/**LEVEL1 */\r\n\r\n\tfor (var row = 0; row < moduleCount; row += 1) {\r\n\t    for (var col = 0; col < moduleCount; col += 1) {\r\n\r\n\t\tvar sameCount = 0;\r\n\t\tvar dark = qrcode.isDark(row, col);\r\n\r\n\t\tfor (var r = -1; r <= 1; r += 1) {\r\n\r\n\t\t    if (row + r < 0 || moduleCount <= row + r) {\r\n\t\t\tcontinue;\r\n\t\t    }\r\n\r\n\t\t    for (var c = -1; c <= 1; c += 1) {\r\n\r\n\t\t\tif (col + c < 0 || moduleCount <= col + c) {\r\n\t\t\t    continue;\r\n\t\t\t}\r\n\r\n\t\t\tif (r == 0 && c == 0) {\r\n\t\t\t    continue;\r\n\t\t\t}\r\n\r\n\t\t\tif (dark == qrcode.isDark(row + r, col + c) ) {\r\n\t\t\t    sameCount += 1;\r\n\t\t\t}\r\n\t\t    }\r\n\t\t}\r\n\r\n\t\tif (sameCount > 5) {\r\n\t\t    lostPoint += (3 + sameCount - 5);\r\n\t\t}\r\n\t    }\r\n\t};\r\n\r\n\t/**LEVEL2 */\r\n\r\n\tfor (var row = 0; row < moduleCount - 1; row += 1) {\r\n\t    for (var col = 0; col < moduleCount - 1; col += 1) {\r\n\t\tvar count = 0;\r\n\t\tif (qrcode.isDark(row, col) ) count += 1;\r\n\t\tif (qrcode.isDark(row + 1, col) ) count += 1;\r\n\t\tif (qrcode.isDark(row, col + 1) ) count += 1;\r\n\t\tif (qrcode.isDark(row + 1, col + 1) ) count += 1;\r\n\t\tif (count == 0 || count == 4) {\r\n\t\t    lostPoint += 3;\r\n\t\t}\r\n\t    }\r\n\t}\r\n\r\n\t/**LEVEL3 */\r\n\r\n\tfor (var row = 0; row < moduleCount; row += 1) {\r\n\t    for (var col = 0; col < moduleCount - 6; col += 1) {\r\n\t\tif (qrcode.isDark(row, col)\r\n\t\t    && !qrcode.isDark(row, col + 1)\r\n\t\t    &&  qrcode.isDark(row, col + 2)\r\n\t\t    &&  qrcode.isDark(row, col + 3)\r\n\t\t    &&  qrcode.isDark(row, col + 4)\r\n\t\t    && !qrcode.isDark(row, col + 5)\r\n\t\t    &&  qrcode.isDark(row, col + 6) ) {\r\n\t\t    lostPoint += 40;\r\n\t\t}\r\n\t    }\r\n\t}\r\n\r\n\tfor (var col = 0; col < moduleCount; col += 1) {\r\n\t    for (var row = 0; row < moduleCount - 6; row += 1) {\r\n\t\tif (qrcode.isDark(row, col)\r\n\t\t    && !qrcode.isDark(row + 1, col)\r\n\t\t    &&  qrcode.isDark(row + 2, col)\r\n\t\t    &&  qrcode.isDark(row + 3, col)\r\n\t\t    &&  qrcode.isDark(row + 4, col)\r\n\t\t    && !qrcode.isDark(row + 5, col)\r\n\t\t    &&  qrcode.isDark(row + 6, col) ) {\r\n\t\t    lostPoint += 40;\r\n\t\t}\r\n\t    }\r\n\t}\r\n\r\n\t/**LEVEL4 */\r\n\r\n\tvar darkCount = 0;\r\n\r\n\tfor (var col = 0; col < moduleCount; col += 1) {\r\n\t    for (var row = 0; row < moduleCount; row += 1) {\r\n\t\tif (qrcode.isDark(row, col) ) {\r\n\t\t    darkCount += 1;\r\n\t\t}\r\n\t    }\r\n\t}\r\n\r\n\tvar ratio = Math.abs(100 * darkCount / moduleCount / moduleCount - 50) / 5;\r\n\tlostPoint += ratio * 10;\r\n\r\n\treturn lostPoint;\r\n    };\r\n\r\n    return _this;\r\n}();\r\n/** \r\n//---------------------------------------------------------------------\r\n// QRMath\r\n//---------------------------------------------------------------------\r\n*/\r\nvar QRMath = function() {\r\n\r\n    var EXP_TABLE = new Array(256);\r\n    var LOG_TABLE = new Array(256);\r\n\r\n    /** initialize tables*/ \r\n    for (var i = 0; i < 8; i += 1) {\r\n\tEXP_TABLE[i] = 1 << i;\r\n    }\r\n    for (var i = 8; i < 256; i += 1) {\r\n\tEXP_TABLE[i] = EXP_TABLE[i - 4]\r\n\t    ^ EXP_TABLE[i - 5]\r\n\t    ^ EXP_TABLE[i - 6]\r\n\t    ^ EXP_TABLE[i - 8];\r\n    }\r\n    for (var i = 0; i < 255; i += 1) {\r\n\tLOG_TABLE[EXP_TABLE[i] ] = i;\r\n    }\r\n\r\n    var _this = {};\r\n\r\n    _this.glog = function(n) {\r\n\r\n\tif (n < 1) {\r\n\t    throw new Error('glog(' + n + ')');\r\n\t}\r\n\r\n\treturn LOG_TABLE[n];\r\n    };\r\n\r\n    _this.gexp = function(n) {\r\n\r\n\twhile (n < 0) {\r\n\t    n += 255;\r\n\t}\r\n\r\n\twhile (n >= 256) {\r\n\t    n -= 255;\r\n\t}\r\n\r\n\treturn EXP_TABLE[n];\r\n    };\r\n\r\n    return _this;\r\n}();\r\n/** \r\n//---------------------------------------------------------------------\r\n// qrPolynomial\r\n//---------------------------------------------------------------------\r\n*/\r\nfunction qrPolynomial(num, shift) {\r\n\r\n    if (typeof num.length == 'undefined') {\r\n\tthrow new Error(num.length + '/' + shift);\r\n    }\r\n\r\n    var _num = function() {\r\n\tvar offset = 0;\r\n\twhile (offset < num.length && num[offset] == 0) {\r\n\t    offset += 1;\r\n\t}\r\n\tvar _num = new Array(num.length - offset + shift);\r\n\tfor (var i = 0; i < num.length - offset; i += 1) {\r\n\t    _num[i] = num[i + offset];\r\n\t}\r\n\treturn _num;\r\n    }();\r\n\r\n    var _this = {};\r\n\r\n    _this.getAt = function(index) {\r\n\treturn _num[index];\r\n    };\r\n\r\n    _this.getLength = function() {\r\n\treturn _num.length;\r\n    };\r\n\r\n    _this.multiply = function(e) {\r\n\r\n\tvar num = new Array(_this.getLength() + e.getLength() - 1);\r\n\r\n\tfor (var i = 0; i < _this.getLength(); i += 1) {\r\n\t    for (var j = 0; j < e.getLength(); j += 1) {\r\n\t\tnum[i + j] ^= QRMath.gexp(QRMath.glog(_this.getAt(i) ) + QRMath.glog(e.getAt(j) ) );\r\n\t    }\r\n\t}\r\n\r\n\treturn qrPolynomial(num, 0);\r\n    };\r\n\r\n    _this.mod = function(e) {\r\n\r\n\tif (_this.getLength() - e.getLength() < 0) {\r\n\t    return _this;\r\n\t}\r\n\r\n\tvar ratio = QRMath.glog(_this.getAt(0) ) - QRMath.glog(e.getAt(0) );\r\n\r\n\tvar num = new Array(_this.getLength() );\r\n\tfor (var i = 0; i < _this.getLength(); i += 1) {\r\n\t    num[i] = _this.getAt(i);\r\n\t}\r\n\r\n\tfor (var i = 0; i < e.getLength(); i += 1) {\r\n\t    num[i] ^= QRMath.gexp(QRMath.glog(e.getAt(i) ) + ratio);\r\n\t}\r\n\r\n\t// recursive call\r\n\treturn qrPolynomial(num, 0).mod(e);\r\n    };\r\n\r\n    return _this;\r\n};\r\n\r\n/** ---------------------------------------------------------------------\r\n// QRRSBlock\r\n//---------------------------------------------------------------------\r\n*/\r\nvar QRRSBlock = function() {\r\n\r\n\r\n    /**  [1: [L, M, Q, H], ..]*/\r\n    var RS_BLOCK_TABLE=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]];\r\n\r\n    var qrRSBlock = function(totalCount, dataCount) {\r\n\tvar _this = {};\r\n\t_this.totalCount = totalCount;\r\n\t_this.dataCount = dataCount;\r\n\treturn _this;\r\n    };\r\n\r\n    var _this = {};\r\n\r\n    var getRsBlockTable = function(typeNumber, errorCorrectLevel) {\r\n\r\n\tswitch(errorCorrectLevel) {\r\n\t    case QRErrorCorrectLevel.L :\r\n\t\treturn RS_BLOCK_TABLE[(typeNumber - 1) * 4 + 0];\r\n\t    case QRErrorCorrectLevel.M :\r\n\t\treturn RS_BLOCK_TABLE[(typeNumber - 1) * 4 + 1];\r\n\t    case QRErrorCorrectLevel.Q :\r\n\t\treturn RS_BLOCK_TABLE[(typeNumber - 1) * 4 + 2];\r\n\t    case QRErrorCorrectLevel.H :\r\n\t\treturn RS_BLOCK_TABLE[(typeNumber - 1) * 4 + 3];\r\n\t\tdefault :\r\n\t\treturn undefined;\r\n\t}\r\n    };\r\n\r\n    _this.getRSBlocks = function(typeNumber, errorCorrectLevel) {\r\n\r\n\tvar rsBlock = getRsBlockTable(typeNumber, errorCorrectLevel);\r\n\r\n\tif (typeof rsBlock == 'undefined') {\r\n\t    throw new Error('bad rs block @ typeNumber:' + typeNumber +\r\n\t\t\t    '/errorCorrectLevel:' + errorCorrectLevel);\r\n\t}\r\n\r\n\tvar length = rsBlock.length / 3;\r\n\r\n\tvar list = new Array();\r\n\r\n\tfor (var i = 0; i < length; i += 1) {\r\n\r\n\t    var count = rsBlock[i * 3 + 0];\r\n\t    var totalCount = rsBlock[i * 3 + 1];\r\n\t    var dataCount = rsBlock[i * 3 + 2];\r\n\r\n\t    for (var j = 0; j < count; j += 1) {\r\n\t\tlist.push(qrRSBlock(totalCount, dataCount) );\r\n\t    }\r\n\t}\r\n\r\n\treturn list;\r\n    };\r\n\r\n    return _this;\r\n}();\r\n\r\n/** \r\n  // qrBitBuffer\r\n*/\r\n\r\nvar qrBitBuffer = function() {\r\n\r\n    var _buffer = new Array();\r\n    var _length = 0;\r\n\r\n    var _this = {};\r\n\r\n    _this.getBuffer = function() {\r\n\treturn _buffer;\r\n    };\r\n\r\n    _this.getAt = function(index) {\r\n\tvar bufIndex = Math.floor(index / 8);\r\n\treturn ( (_buffer[bufIndex] >>> (7 - index % 8) ) & 1) == 1;\r\n    };\r\n\r\n    _this.put = function(num, length) {\r\n\tfor (var i = 0; i < length; i += 1) {\r\n\t    _this.putBit( ( (num >>> (length - i - 1) ) & 1) == 1);\r\n\t}\r\n    };\r\n\r\n    _this.getLengthInBits = function() {\r\n\treturn _length;\r\n    };\r\n\r\n    _this.putBit = function(bit) {\r\n\r\n\tvar bufIndex = Math.floor(_length / 8);\r\n\tif (_buffer.length <= bufIndex) {\r\n\t    _buffer.push(0);\r\n\t}\r\n\r\n\tif (bit) {\r\n\t    _buffer[bufIndex] |= (0x80 >>> (_length % 8) );\r\n\t}\r\n\r\n\t_length += 1;\r\n    };\r\n\r\n    return _this;\r\n};\r\n\r\n/** \r\n// qr8BitByte\r\n*/\r\nvar qr8BitByte = function(data) {\r\n\r\n    var _mode = QRMode.MODE_8BIT_BYTE;\r\n    var _data = data;\r\n    var _parsedData = [];\r\n\r\n    var _this = {};\r\n\r\n\r\n    /**  Added to support UTF-8 Characters*/ \r\n    for (var i = 0, l = _data.length; i < l; i++) {\r\n\tvar byteArray = [];\r\n\tvar code = _data.charCodeAt(i);\r\n\r\n\tif (code > 0x10000) {\r\n\t    byteArray[0] = 0xF0 | ((code & 0x1C0000) >>> 18);\r\n\t    byteArray[1] = 0x80 | ((code & 0x3F000) >>> 12);\r\n\t    byteArray[2] = 0x80 | ((code & 0xFC0) >>> 6);\r\n\t    byteArray[3] = 0x80 | (code & 0x3F);\r\n\t} else if (code > 0x800) {\r\n\t    byteArray[0] = 0xE0 | ((code & 0xF000) >>> 12);\r\n\t    byteArray[1] = 0x80 | ((code & 0xFC0) >>> 6);\r\n\t    byteArray[2] = 0x80 | (code & 0x3F);\r\n\t} else if (code > 0x80) {\r\n\t    byteArray[0] = 0xC0 | ((code & 0x7C0) >>> 6);\r\n\t    byteArray[1] = 0x80 | (code & 0x3F);\r\n\t} else {\r\n\t    byteArray[0] = code;\r\n\t}\r\n\r\n        /** Fix Unicode corruption bug*/ \r\n        _parsedData.push(byteArray);\r\n    }\r\n\r\n    _parsedData = Array.prototype.concat.apply([], _parsedData);\r\n\r\n    if (_parsedData.length != _data.length) {\r\n\t_parsedData.unshift(191);\r\n\t_parsedData.unshift(187);\r\n\t_parsedData.unshift(239);\r\n    }\r\n\r\n    var _bytes = _parsedData;\r\n\r\n    _this.getMode = function() {\r\n\treturn _mode;\r\n    };\r\n\r\n    _this.getLength = function(buffer) {\r\n\treturn _bytes.length;\r\n    };\r\n\r\n    _this.write = function(buffer) {\r\n\tfor (var i = 0; i < _bytes.length; i += 1) {\r\n\t    buffer.put(_bytes[i], 8);\r\n\t}\r\n    };\r\n\r\n    return _this;\r\n};\r\n\r\n/** GIF Support etc.*/\r\n\r\n/**\r\n * // byteArrayOutputStream\r\n */\r\n\r\nvar byteArrayOutputStream = function() {\r\n\r\n    var _bytes = new Array();\r\n\r\n    var _this = {};\r\n\r\n    _this.writeByte = function(b) {\r\n\t_bytes.push(b & 0xff);\r\n    };\r\n\r\n    _this.writeShort = function(i) {\r\n\t_this.writeByte(i);\r\n\t_this.writeByte(i >>> 8);\r\n    };\r\n\r\n    _this.writeBytes = function(b, off, len) {\r\n\toff = off || 0;\r\n\tlen = len || b.length;\r\n\tfor (var i = 0; i < len; i += 1) {\r\n\t    _this.writeByte(b[i + off]);\r\n\t}\r\n    };\r\n\r\n    _this.writeString = function(s) {\r\n\tfor (var i = 0; i < s.length; i += 1) {\r\n\t    _this.writeByte(s.charCodeAt(i) );\r\n\t}\r\n    };\r\n\r\n    _this.toByteArray = function() {\r\n\treturn _bytes;\r\n    };\r\n\r\n    _this.toString = function() {\r\n\tvar s = '';\r\n\ts += '[';\r\n\tfor (var i = 0; i < _bytes.length; i += 1) {\r\n\t    if (i > 0) {\r\n\t\ts += ',';\r\n\t    }\r\n\t    s += _bytes[i];\r\n\t}\r\n\ts += ']';\r\n\treturn s;\r\n    };\r\n\r\n    return _this;\r\n};\r\n\r\n/** \r\n// base64EncodeOutputStream\r\n*/\r\n\r\nvar base64EncodeOutputStream = function() {\r\n\r\n    var _buffer = 0;\r\n    var _buflen = 0;\r\n    var _length = 0;\r\n    var _base64 = '';\r\n\r\n    var _this = {};\r\n\r\n    var writeEncoded = function(b) {\r\n\t_base64 += String.fromCharCode(encode(b & 0x3f) );\r\n    };\r\n\r\n    var encode = function(n) {\r\n\tif (n < 0) {\r\n\t    /**error. */\r\n\t} else if (n < 26) {\r\n\t    return 0x41 + n;\r\n\t} else if (n < 52) {\r\n\t    return 0x61 + (n - 26);\r\n\t} else if (n < 62) {\r\n\t    return 0x30 + (n - 52);\r\n\t} else if (n == 62) {\r\n\t    return 0x2b;\r\n\t} else if (n == 63) {\r\n\t    return 0x2f;\r\n\t}\r\n\tthrow new Error('n:' + n);\r\n    };\r\n\r\n    _this.writeByte = function(n) {\r\n\r\n\t_buffer = (_buffer << 8) | (n & 0xff);\r\n\t_buflen += 8;\r\n\t_length += 1;\r\n\r\n\twhile (_buflen >= 6) {\r\n\t    writeEncoded(_buffer >>> (_buflen - 6) );\r\n\t    _buflen -= 6;\r\n\t}\r\n    };\r\n\r\n    _this.flush = function() {\r\n\r\n\tif (_buflen > 0) {\r\n\t    writeEncoded(_buffer << (6 - _buflen) );\r\n\t    _buffer = 0;\r\n\t    _buflen = 0;\r\n\t}\r\n\r\n\tif (_length % 3 != 0) {\r\n\t    /**padding */\r\n\t    var padlen = 3 - _length % 3;\r\n\t    for (var i = 0; i < padlen; i += 1) {\r\n\t\t_base64 += '=';\r\n\t    }\r\n\t}\r\n    };\r\n\r\n    _this.toString = function() {\r\n\treturn _base64;\r\n    };\r\n\r\n    return _this;\r\n};\r\n\r\n/** \r\n// base64DecodeInputStream\r\n*/\r\n\r\nvar base64DecodeInputStream = function(str) {\r\n\r\n    var _str = str;\r\n    var _pos = 0;\r\n    var _buffer = 0;\r\n    var _buflen = 0;\r\n\r\n    var _this = {};\r\n\r\n    _this.read = function() {\r\n\r\n\twhile (_buflen < 8) {\r\n\r\n\t    if (_pos >= _str.length) {\r\n\t\tif (_buflen == 0) {\r\n\t\t    return -1;\r\n\t\t}\r\n\t\tthrow new Error('unexpected end of file./' + _buflen);\r\n\t    }\r\n\r\n\t    var c = _str.charAt(_pos);\r\n\t    _pos += 1;\r\n\r\n\t    if (c == '=') {\r\n\t\t_buflen = 0;\r\n\t\treturn -1;\r\n\t    } else if (c.match(/^\\s$/) ) {\r\n\t\t/** ignore if whitespace. */\r\n\t\tcontinue;\r\n\t    }\r\n\r\n\t    _buffer = (_buffer << 6) | decode(c.charCodeAt(0) );\r\n\t    _buflen += 6;\r\n\t}\r\n\r\n\tvar n = (_buffer >>> (_buflen - 8) ) & 0xff;\r\n\t_buflen -= 8;\r\n\treturn n;\r\n    };\r\n\r\n    var decode = function(c) {\r\n\tif (0x41 <= c && c <= 0x5a) {\r\n\t    return c - 0x41;\r\n\t} else if (0x61 <= c && c <= 0x7a) {\r\n\t    return c - 0x61 + 26;\r\n\t} else if (0x30 <= c && c <= 0x39) {\r\n\t    return c - 0x30 + 52;\r\n\t} else if (c == 0x2b) {\r\n\t    return 62;\r\n\t} else if (c == 0x2f) {\r\n\t    return 63;\r\n\t} else {\r\n\t    throw new Error('c:' + c);\r\n\t}\r\n    };\r\n\r\n    return _this;\r\n};\r\n\r\n/**\r\n// gifImage (B/W)\r\n */\r\nvar gifImage = function(width, height) {\r\n\r\n    var _width = width;\r\n    var _height = height;\r\n    var _data = new Array(width * height);\r\n\r\n    var _this = {};\r\n\r\n    _this.setPixel = function(x, y, pixel) {\r\n\t_data[y * _width + x] = pixel;\r\n    };\r\n\r\n    _this.write = function(out) {\r\n\r\n\t/** GIF Signature*/\r\n\r\n\tout.writeString('GIF87a');\r\n\r\n\t/**Screen Descriptor */\r\n\r\n\tout.writeShort(_width);\r\n\tout.writeShort(_height);\r\n\r\n\tout.writeByte(0x80); /**2bit */ \r\n\tout.writeByte(0);\r\n\tout.writeByte(0);\r\n\r\n\t/**Global Color Map */\r\n\r\n\t/**black */\r\n\tout.writeByte(0x00);\r\n\tout.writeByte(0x00);\r\n\tout.writeByte(0x00);\r\n\r\n\t/** white */\r\n\tout.writeByte(0xff);\r\n\tout.writeByte(0xff);\r\n\tout.writeByte(0xff);\r\n\r\n\t/**Image Descriptor */\r\n\r\n\tout.writeString(',');\r\n\tout.writeShort(0);\r\n\tout.writeShort(0);\r\n\tout.writeShort(_width);\r\n\tout.writeShort(_height);\r\n\tout.writeByte(0);\r\n\r\n\t/**Raster Data */\r\n\r\n\tvar lzwMinCodeSize = 2;\r\n\tvar raster = getLZWRaster(lzwMinCodeSize);\r\n\r\n\tout.writeByte(lzwMinCodeSize);\r\n\r\n\tvar offset = 0;\r\n\r\n\twhile (raster.length - offset > 255) {\r\n\t    out.writeByte(255);\r\n\t    out.writeBytes(raster, offset, 255);\r\n\t    offset += 255;\r\n\t}\r\n\r\n\tout.writeByte(raster.length - offset);\r\n\tout.writeBytes(raster, offset, raster.length - offset);\r\n\tout.writeByte(0x00);\r\n\r\n\t/**\r\n   * GIF Terminator */\r\n\tout.writeString(';');\r\n    };\r\n\r\n    var bitOutputStream = function(out) {\r\n\r\n\tvar _out = out;\r\n\tvar _bitLength = 0;\r\n\tvar _bitBuffer = 0;\r\n\r\n\tvar _this = {};\r\n\r\n\t_this.write = function(data, length) {\r\n\r\n\t    if ( (data >>> length) != 0) {\r\n\t\tthrow new Error('length over');\r\n\t    }\r\n\r\n\t    while (_bitLength + length >= 8) {\r\n\t\t_out.writeByte(0xff & ( (data << _bitLength) | _bitBuffer) );\r\n\t\tlength -= (8 - _bitLength);\r\n\t\tdata >>>= (8 - _bitLength);\r\n\t\t_bitBuffer = 0;\r\n\t\t_bitLength = 0;\r\n\t    }\r\n\r\n\t    _bitBuffer = (data << _bitLength) | _bitBuffer;\r\n\t    _bitLength = _bitLength + length;\r\n\t};\r\n\r\n\t_this.flush = function() {\r\n\t    if (_bitLength > 0) {\r\n\t\t_out.writeByte(_bitBuffer);\r\n\t    }\r\n\t};\r\n\r\n\treturn _this;\r\n    };\r\n\r\n    var getLZWRaster = function(lzwMinCodeSize) {\r\n\r\n\tvar clearCode = 1 << lzwMinCodeSize;\r\n\tvar endCode = (1 << lzwMinCodeSize) + 1;\r\n\tvar bitLength = lzwMinCodeSize + 1;\r\n\r\n\t/** \r\n   * Setup LZWTable\r\n  */\r\n\tvar table = lzwTable();\r\n\r\n\tfor (var i = 0; i < clearCode; i += 1) {\r\n\t    table.add(String.fromCharCode(i) );\r\n\t}\r\n\ttable.add(String.fromCharCode(clearCode) );\r\n\ttable.add(String.fromCharCode(endCode) );\r\n\r\n\tvar byteOut = byteArrayOutputStream();\r\n\tvar bitOut = bitOutputStream(byteOut);\r\n\r\n\t/** \r\n   *  clear code\r\n  */\r\n\tbitOut.write(clearCode, bitLength);\r\n\r\n\tvar dataIndex = 0;\r\n\r\n\tvar s = String.fromCharCode(_data[dataIndex]);\r\n\tdataIndex += 1;\r\n\r\n\twhile (dataIndex < _data.length) {\r\n\r\n\t    var c = String.fromCharCode(_data[dataIndex]);\r\n\t    dataIndex += 1;\r\n\r\n\t    if (table.contains(s + c) ) {\r\n\r\n\t\ts = s + c;\r\n\r\n\t    } else {\r\n\r\n\t\tbitOut.write(table.indexOf(s), bitLength);\r\n\r\n\t\tif (table.size() < 0xfff) {\r\n\r\n\t\t    if (table.size() == (1 << bitLength) ) {\r\n\t\t\tbitLength += 1;\r\n\t\t    }\r\n\r\n\t\t    table.add(s + c);\r\n\t\t}\r\n\r\n\t\ts = c;\r\n\t    }\r\n\t}\r\n\r\n\tbitOut.write(table.indexOf(s), bitLength);\r\n\r\n\t/** \r\n   * end code\r\n   * */ \r\n\tbitOut.write(endCode, bitLength);\r\n\r\n\tbitOut.flush();\r\n\r\n\treturn byteOut.toByteArray();\r\n    };\r\n\r\n    var lzwTable = function() {\r\n\r\n\tvar _map = {};\r\n\tvar _size = 0;\r\n\r\n\tvar _this = {};\r\n\r\n\t_this.add = function(key) {\r\n\t    if (_this.contains(key) ) {\r\n\t\tthrow new Error('dup key:' + key);\r\n\t    }\r\n\t    _map[key] = _size;\r\n\t    _size += 1;\r\n\t};\r\n\r\n\t_this.size = function() {\r\n\t    return _size;\r\n\t};\r\n\r\n\t_this.indexOf = function(key) {\r\n\t    return _map[key];\r\n\t};\r\n\r\n\t_this.contains = function(key) {\r\n\t    return typeof _map[key] != 'undefined';\r\n\t};\r\n\r\n\treturn _this;\r\n    };\r\n\r\n    return _this;\r\n};\r\n\r\nvar createImgTag = function(width, height, getPixel, alt) {\r\n\r\n    var gif = gifImage(width, height);\r\n    for (var y = 0; y < height; y += 1) {\r\n\tfor (var x = 0; x < width; x += 1) {\r\n\t    gif.setPixel(x, y, getPixel(x, y) );\r\n\t}\r\n    }\r\n\r\n    var b = byteArrayOutputStream();\r\n    gif.write(b);\r\n\r\n    var base64 = base64EncodeOutputStream();\r\n    var bytes = b.toByteArray();\r\n    for (var i = 0; i < bytes.length; i += 1) {\r\n\tbase64.writeByte(bytes[i]);\r\n    }\r\n    base64.flush();\r\n\r\n    var img = '';\r\n    img += 'data:image/gif;base64,';\r\n    img += base64;\r\n\r\n    return img;\r\n};\r\n\r\n/** \r\n * returns qrcode function.\r\n * */ \r\n\r\nvar createQrCodeImg = function(options) {\r\n    options = options || {};\r\n    options.size = options.size\r\n    var typeNumber = options.typeNumber || 4;\r\n    var errorCorrectLevel = options.errorCorrectLevel || 'M';\r\n    var size = options.size || 500;\r\n    var qr;\r\n\r\n    try {\r\n        qr = qrcode(typeNumber, errorCorrectLevel || 'M');\r\n        qr.addData(options.text);\r\n        qr.make();\r\n    } catch (e) {\r\n        if(typeNumber >= 40) {\r\n            throw new Error('Text too long to encode');\r\n        } else {\r\n            return createQrCodeImg(options.text, {\r\n                size: size,\r\n                errorCorrectLevel: errorCorrectLevel,\r\n                typeNumber: typeNumber + 1\r\n            });\r\n        }\r\n    }\r\n\r\n    /**calc cellsize and margin */\r\n    var cellsize = parseInt(size / qr.getModuleCount());\r\n    var margin = parseInt((size - qr.getModuleCount() * cellsize) / 2);\r\n\r\n    return qr.createImgTag(cellsize, margin, size);\r\n};\r\nvar module = {};\r\nexport default createQrCodeImg\r\n\r\n"]}]}