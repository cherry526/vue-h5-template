{"remainingRequest":"C:\\Users\\Administrator\\Desktop\\vip_inline_h5\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\Administrator\\Desktop\\vip_inline_h5\\src\\utils\\actions.js","dependencies":[{"path":"C:\\Users\\Administrator\\Desktop\\vip_inline_h5\\src\\utils\\actions.js","mtime":1594629210167},{"path":"C:\\Users\\Administrator\\Desktop\\vip_inline_h5\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Administrator\\Desktop\\vip_inline_h5\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuaW5kZXgtb2YiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5qb2luIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkubWFwIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LmtleXMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QudG8tc3RyaW5nIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLmV4ZWMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcubWF0Y2giOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcuc3BsaXQiOwppbXBvcnQgX29iamVjdFNwcmVhZCBmcm9tICJDOi9Vc2Vycy9BZG1pbmlzdHJhdG9yL0Rlc2t0b3AvdmlwX2lubGluZV9oNS9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vb2JqZWN0U3ByZWFkMiI7CmltcG9ydCBfY2xhc3NDYWxsQ2hlY2sgZnJvbSAiQzovVXNlcnMvQWRtaW5pc3RyYXRvci9EZXNrdG9wL3ZpcF9pbmxpbmVfaDUvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2NsYXNzQ2FsbENoZWNrIjsKaW1wb3J0IF9jcmVhdGVDbGFzcyBmcm9tICJDOi9Vc2Vycy9BZG1pbmlzdHJhdG9yL0Rlc2t0b3AvdmlwX2lubGluZV9oNS9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vY3JlYXRlQ2xhc3MiOwppbXBvcnQgX3JlYWRPbmx5RXJyb3IgZnJvbSAiQzovVXNlcnMvQWRtaW5pc3RyYXRvci9EZXNrdG9wL3ZpcF9pbmxpbmVfaDUvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL3JlYWRPbmx5RXJyb3IiOwoKLyoNCiAqIEBEZXNjcmlwdGlvbjog5Lqk5LqS5LqM5qyh5bCB6KOFDQogKiBAVmVyc2lvbjogMS4wDQogKiBAQXV0b3I6IGNoZXJyeQ0KICogQERhdGU6IDIwMjAtMDctMTMgMTU6MTA6MDUNCiAqIEBMYXN0RWRpdG9yczogY2hlcnJ5DQogKiBATGFzdEVkaXRUaW1lOiAyMDIwLTA3LTEzIDE2OjMyOjA2DQogKi8KaW1wb3J0IGdldFdYU2lnbiBmcm9tICJAL3V0aWxzL3d4IjsKdmFyIHd4ID0gbnVsbDsKCmlmICh3aW5kb3cuJHd4KSB7CiAgd3ggPSAoX3JlYWRPbmx5RXJyb3IoInd4IiksIHdpbmRvdy4kd3gpOwp9IGVsc2UgewogIGdldFdYU2lnbigpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgd3ggPSAoX3JlYWRPbmx5RXJyb3IoInd4IiksIHJlcyk7CiAgfSk7Cn0gLy8g5LqL5YWI5ZKM5a6J5Y2T57qm5a6adXNlckFnZW505Li6YW5kcm9pZO+8jOWSjGlvc+e6puWumnVzZXJBZ2VudOS4umlvcwoKCnZhciBlbnZUeXBlID0gJ3d4JzsKdmFyIHVhID0gbmF2aWdhdG9yLnVzZXJBZ2VudC50b0xvd2VyQ2FzZSgpOwoKaWYgKHVhLm1hdGNoKC9NaWNyb01lc3Nlbmdlci9pKSA9PSAibWljcm9tZXNzZW5nZXIiKSB7CiAgLy8gaW9z55qEdWHkuK3ml6BtaW5pUHJvZ3Jhbe+8jOS9humDveaciU1pY3JvTWVzc2VuZ2Vy77yI6KGo56S65piv5b6u5L+h5rWP6KeI5Zmo77yJCiAgd3gubWluaVByb2dyYW0uZ2V0RW52KGZ1bmN0aW9uIChyZXMpIHsKICAgIGlmIChyZXMubWluaXByb2dyYW0pIHsKICAgICAgLy8g5bCP56iL5bqP56uvCiAgICAgIGVudlR5cGUgPSAnbWluaSc7CiAgICB9IGVsc2UgewogICAgICAvLyDlvq7kv6HmtY/op4jlmagKICAgICAgZW52VHlwZSA9ICd3eCc7CiAgICB9CiAgfSk7Cn0gZWxzZSB7CiAgaWYgKHUuaW5kZXhPZignQW5kcm9pZCcpID4gLTEgfHwgdS5pbmRleE9mKCdMaW51eCcpID4gLTEpIHsKICAgIGVudlR5cGUgPSAnQW5kcm9pZCc7CiAgfSBlbHNlIGlmICghIXUubWF0Y2goL1woaVteO10rOyggVTspPyBDUFUuK01hYyBPUyBYLykpIHsKICAgIGVudlR5cGUgPSAnaW9zJzsKICB9IGVsc2UgaWYgKHUuaW5kZXhPZignaVBob25lJykgPiAtMSkgewogICAgZW52VHlwZSA9ICdpUGhvbmUnOwogIH0gZWxzZSBpZiAodS5pbmRleE9mKCdpUGFkJykgPiAtMSkgewogICAgZW52VHlwZSA9ICdpUGFkJzsKICB9IGVsc2UgewogICAgZW52VHlwZSA9ICdhcHAnOwogIH0KfSAvLyDlpITnkIbliIbkuqvot6/nlLHkuIrmlY/mhJ/lj4LmlbAKCgp2YXIgZGVsRGF0YSA9IGZ1bmN0aW9uIGRlbERhdGEoKSB7CiAgdmFyIHVybERhdGEgPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiBhcmd1bWVudHNbMF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1swXSA6IHVybERhdGE7CiAgdmFyIGxhc3R1cmwgPSB3aW5kb3cubG9jYXRpb24uaHJlZjsKICB2YXIgaW5pdFVybCA9IHdpbmRvdy5sb2NhdGlvbi5ocmVmOwoKICBpZiAoaW5pdFVybC5pbmRleE9mKHVybERhdGEpID4gLTEgJiYgaW5pdFVybC5pbmRleE9mKCc/JykgPiAtMSAmJiBpbml0VXJsLmluZGV4T2YoJyMnKSA+IC0xKSB7CiAgICB2YXIgdG9rZW5zdHIgPSBpbml0VXJsLm1hdGNoKC9cPyhcUyopIy8pWzFdOwogICAgdmFyIGxhc3RhcnIgPSBpbml0VXJsLnNwbGl0KCc/JyArIHRva2Vuc3RyKTsKICAgIGxhc3R1cmwgPSBsYXN0YXJyWzBdICsgbGFzdGFyclsxXSArICcnOwogIH0gZWxzZSBpZiAoaW5pdFVybC5pbmRleE9mKHVybERhdGEpID4gLTEgJiYgaW5pdFVybC5pbmRleE9mKCc/JykgPiAtMSkgewogICAgdmFyIG51bSA9IGluaXRVcmwuaW5kZXhPZignPycpOwogICAgbGFzdHVybCA9IGluaXRVcmwuc3Vic3RyaW5nKG51bSwgaW5pdFVybC5sZW5ndGggLSAxKTsKICB9IGVsc2UgaWYgKGluaXRVcmwuaW5kZXhPZih1cmxEYXRhKSA+IC0xKSB7CiAgICBsYXN0dXJsID0gaW5pdFVybC5zcGxpdCgiIi5jb25jYXQodXJsRGF0YSwgIj0iKSk7CiAgfQoKICByZXR1cm4gbGFzdHVybDsKfTsKCnZhciBzdG9yYWdlRGF0YSA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7CiAgZnVuY3Rpb24gc3RvcmFnZURhdGEoKSB7CiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgc3RvcmFnZURhdGEpOwogIH0KCiAgX2NyZWF0ZUNsYXNzKHN0b3JhZ2VEYXRhLCBudWxsLCBbewogICAga2V5OiAic2hhcmUiLAogICAgdmFsdWU6IGZ1bmN0aW9uIHNoYXJlKG9wdGlvbnMpIHsKICAgICAgY29uc29sZS5sb2coZW52VHlwZSwgJy0tLS0tLS0tLS0tZW52VHlwZScsIG9wdGlvbnMpOwoKICAgICAgaWYgKGVudlR5cGUgPSAnbWluaScpIHsKICAgICAgICB3eC5taW5pUHJvZ3JhbS5wb3N0TWVzc2FnZSh7CiAgICAgICAgICAvLyBkYXRhOiBvcHRpb25zCiAgICAgICAgICBkYXRhOiB7CiAgICAgICAgICAgIHRpdGxlOiBvcHRpb25zLnRpdGxlLAogICAgICAgICAgICBkZXNjOiBvcHRpb25zLmRlc2MsCiAgICAgICAgICAgIHBhdGg6ICcvcGFnZXMvdmlwU2hhcmUvdmlwU2hhcmU/ZGF0YT0nICsgSlNPTi5zdHJpbmdmeSh7CiAgICAgICAgICAgICAgdXJsOiBlbmNvZGVVUklDb21wb25lbnQob3B0aW9ucy51cmwpCiAgICAgICAgICAgIH0pIC8v6YeN54K577yMdmlwU2hhcmXmmK/lsI/nqIvluo/nmoTpobXpnaLkuK3vvIzku47liIbkuqvov5vlhaXnmoRoNeeahOiQveWcsOmhtSAgICAKCiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdmFyIHF1ZXJ5U3RyaW5nID0gT2JqZWN0LmtleXMob3B0aW9ucykubWFwKGZ1bmN0aW9uIChrZXkpIHsKICAgICAgICAgIHJldHVybiBrZXkgKyAnPScgKyBvcHRpb25zW2tleV07CiAgICAgICAgfSkuam9pbignJicpOwogICAgICAgIGNvbnNvbGUubG9nKHF1ZXJ5U3RyaW5nLCAnLS0tLS0tLS0tLS1xdWVyeVN0cmluZycpOwogICAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzbG92ZSwgcmVqZWN0KSB7CiAgICAgICAgICB3eC5vbk1lbnVTaGFyZUFwcE1lc3NhZ2UoX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKHsKICAgICAgICAgICAgdGl0bGU6IG9wdGlvbnMudGl0bGUgfHwgJ+a9rue6p3ZpcCcsCiAgICAgICAgICAgIC8vIOWIhuS6q+agh+mimAogICAgICAgICAgICBkZXNjOiBvcHRpb25zLmRlc2MgfHwgIiIsCiAgICAgICAgICAgIC8vIGxpbms6IHdpbmRvdy5sb2NhdGlvbi5ocmVmLnNwbGl0KCcjJylbMF0sCiAgICAgICAgICAgIGxpbms6IGRlbERhdGEoKSArIHF1ZXJ5U3RyaW5nLAogICAgICAgICAgICBpbWdVcmw6IG9wdGlvbnMuaW1nVXJsIHx8ICJodHRwOi8vZG95ZC10ZXN0Lm9zcy1jbi1zaGVuemhlbi5hbGl5dW5jcy5jb20vamtiL3d4bWVkaWEvMjAxODA5MTAvMTUzNjU3MzU3NzEwOC5wbmciLAogICAgICAgICAgICAvLyDliIbkuqvlm77moIcKICAgICAgICAgICAgdHlwZTogb3B0aW9ucy50eXBlIHx8ICcnLAogICAgICAgICAgICAvLyDliIbkuqvnsbvlnossbXVzaWPjgIF2aWRlb+aIlmxpbmvvvIzkuI3loavpu5jorqTkuLpsaW5rCiAgICAgICAgICAgIGRhdGFVcmw6IG9wdGlvbnMuZGF0YVVybCB8fCAnJwogICAgICAgICAgfSwgb3B0aW9ucyksIHt9LCB7CiAgICAgICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uIHN1Y2Nlc3MoKSB7CiAgICAgICAgICAgICAgLy8g55So5oi356Gu6K6k5YiG5Lqr5ZCO5omn6KGM55qE5Zue6LCD5Ye95pWwCiAgICAgICAgICAgICAgcmVzbG92ZSgndHJ1ZScpOwogICAgICAgICAgICB9LAogICAgICAgICAgICBjYW5jZWw6IGZ1bmN0aW9uIGNhbmNlbCgpIHsKICAgICAgICAgICAgICAvLyDnlKjmiLflj5bmtojliIbkuqvlkI7miafooYznmoTlm57osIPlh73mlbAKICAgICAgICAgICAgICByZXNsb3ZlKCdmYWxzZScpOwogICAgICAgICAgICB9CiAgICAgICAgICB9KSk7CiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0KICB9XSk7CgogIHJldHVybiBzdG9yYWdlRGF0YTsKfSgpOwoKZXhwb3J0IHsgc3RvcmFnZURhdGEgYXMgZGVmYXVsdCB9Ow=="},{"version":3,"sources":["C:/Users/Administrator/Desktop/vip_inline_h5/src/utils/actions.js"],"names":["getWXSign","wx","window","$wx","then","res","envType","ua","navigator","userAgent","toLowerCase","match","miniProgram","getEnv","miniprogram","u","indexOf","delData","urlData","lasturl","location","href","initUrl","tokenstr","lastarr","split","num","substring","length","storageData","options","console","log","postMessage","data","title","desc","path","JSON","stringfy","url","encodeURIComponent","queryString","Object","keys","map","key","join","Promise","reslove","reject","onMenuShareAppMessage","link","imgUrl","type","dataUrl","success","cancel"],"mappings":"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","sourcesContent":["/*\r\n * @Description: 交互二次封装\r\n * @Version: 1.0\r\n * @Autor: cherry\r\n * @Date: 2020-07-13 15:10:05\r\n * @LastEditors: cherry\r\n * @LastEditTime: 2020-07-13 16:32:06\r\n */ \r\nimport getWXSign from \"@/utils/wx\"\r\nconst wx = null\r\nif(window.$wx) {\r\n  wx = window.$wx\r\n} else {\r\n  getWXSign().then(res => {\r\n    wx = res\r\n  })\r\n}\r\n// 事先和安卓约定userAgent为android，和ios约定userAgent为ios\r\nvar envType = 'wx'\r\nconst ua = navigator.userAgent.toLowerCase()\r\nif (ua.match(/MicroMessenger/i) == \"micromessenger\") {\r\n  // ios的ua中无miniProgram，但都有MicroMessenger（表示是微信浏览器）\r\n    wx.miniProgram.getEnv((res)=>{\r\n      if (res.miniprogram) { // 小程序端\r\n        envType = 'mini'\r\n      } else {   // 微信浏览器\r\n        envType = 'wx'\r\n      }\r\n    })\r\n} else {\r\n  if(u.indexOf('Android') > -1 || u.indexOf('Linux') > -1 ) {\r\n    envType = 'Android'\r\n  } else if (!!u.match(/\\(i[^;]+;( U;)? CPU.+Mac OS X/)) {\r\n    envType = 'ios'\r\n  } else if ( u.indexOf('iPhone') > -1) {\r\n    envType = 'iPhone'\r\n  }  else if ( u.indexOf('iPad') > -1) {\r\n    envType = 'iPad'\r\n  } else {\r\n    envType = 'app'\r\n  }\r\n}\r\n\r\n// 处理分享路由上敏感参数\r\nconst delData = (urlData = urlData) => {\r\n  let lasturl = window.location.href\r\n  const initUrl = window.location.href\r\n  if(initUrl.indexOf(urlData) > -1 && initUrl.indexOf('?') > -1 && initUrl.indexOf('#') > -1){\r\n    let tokenstr = initUrl.match(/\\?(\\S*)#/)[1]\r\n    let lastarr = initUrl.split('?'+tokenstr)\r\n    lasturl = lastarr[0]+lastarr[1]+''\r\n  }else if(initUrl.indexOf(urlData) > -1 && initUrl.indexOf('?') > -1){\r\n    let num = initUrl.indexOf('?')\r\n    lasturl = initUrl.substring(num, initUrl.length -1 )\r\n  }else if(initUrl.indexOf(urlData) > -1 ){\r\n    lasturl = initUrl.split(`${urlData}=`)\r\n  } \r\n  return lasturl\r\n}\r\n\r\nexport default class storageData {\r\n  constructor() {}\r\n\r\n  static share(options) {\r\n    console.log(envType, '-----------envType', options)\r\n    if(envType = 'mini') {\r\n      wx.miniProgram.postMessage({\r\n        // data: options\r\n        data: {\r\n          title: options.title,\r\n          desc: options.desc,\r\n          path:'/pages/vipShare/vipShare?data='+JSON.stringfy({url:encodeURIComponent(options.url)}) //重点，vipShare是小程序的页面中，从分享进入的h5的落地页    \r\n        }\r\n      })\r\n    } else {\r\n      const queryString = Object.keys(options).map(key => key + '=' + options[key]).join('&');\r\n      console.log(queryString, '-----------queryString')\r\n      return new Promise((reslove, reject ) => {\r\n        wx.onMenuShareAppMessage({\r\n          title: options.title || '潮级vip', // 分享标题\r\n          desc: options.desc || \"\",\r\n          // link: window.location.href.split('#')[0],\r\n          link: delData() + queryString,\r\n          imgUrl: options.imgUrl || \"http://doyd-test.oss-cn-shenzhen.aliyuncs.com/jkb/wxmedia/20180910/1536573577108.png\", // 分享图标\r\n          type: options.type || '', // 分享类型,music、video或link，不填默认为link\r\n          dataUrl: options.dataUrl || '', // 如果type是music或video，则要提供数据链接，默认为空\r\n          ...options,\r\n          success: function () { \r\n            // 用户确认分享后执行的回调函数\r\n            reslove('true')\r\n          },\r\n          cancel: function () { \r\n            // 用户取消分享后执行的回调函数\r\n            reslove('false')\r\n          }\r\n        })\r\n      })\r\n    }\r\n  }\r\n  \r\n}"]}]}