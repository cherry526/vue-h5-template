{"remainingRequest":"C:\\Users\\Administrator\\Desktop\\vip_inline_h5\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\Administrator\\Desktop\\vip_inline_h5\\src\\utils\\wx.js","dependencies":[{"path":"C:\\Users\\Administrator\\Desktop\\vip_inline_h5\\src\\utils\\wx.js","mtime":1596867753284},{"path":"C:\\Users\\Administrator\\Desktop\\vip_inline_h5\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Administrator\\Desktop\\vip_inline_h5\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuaW5kZXgtb2YiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QudG8tc3RyaW5nIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLmV4ZWMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcuc3BsaXQiOwoKLyoNCiAqIEBEZXNjcmlwdGlvbjogDQogKiBAVmVyc2lvbjogMS4wDQogKiBAQXV0b3I6IGNoZXJyeQ0KICogQERhdGU6IDIwMjAtMDYtMTEgMTA6MTE6NTkNCiAqIEBMYXN0RWRpdG9yczogeWVzb25nDQogKiBATGFzdEVkaXRUaW1lOiAyMDIwLTA4LTA4IDEzOjUxOjEyDQogKi8KaW1wb3J0IGF4aW9zIGZyb20gJ2F4aW9zJzsKaW1wb3J0IHd4IGZyb20gJ3dlaXhpbi1qcy1zZGsnOwppbXBvcnQgeyBXWF9BUEksIFdYX0FQSVMgfSBmcm9tICdAL2NvbmZpZy9pbmRleC5qcyc7CmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGdldFdYU2lnbigpIHsKICB2YXIgd3hQYXRoID0gd2luZG93LmxvY2F0aW9uLmhyZWYuaW5kZXhPZignaHR0cHMnKSA+IC0xID8gV1hfQVBJUyA6IFdYX0FQSTsgLy8gdmFyIHd4UGF0aCA9IFdYX0FQSQogIC8vIGlmKH53aW5kb3cubG9jYXRpb24uaHJlZi5pbmRleE9mKCdodHRwcycpKSB7CiAgLy8gICB3eFBhdGgucmVwbGFjZSgvXmh0dHAvLCAnaHR0cHMnKQogIC8vIH0KCiAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHsKICAgIGlmICghd2luZG93LiR3eCkgewogICAgICAvLyDlv4XloavvvIzpnIDopoHkvb/nlKjnmoRKU+aOpeWPo+WIl+ihqAogICAgICB2YXIganNBcGlMaXN0ID0gWydjaG9vc2VXWFBheScsICdnZXRMb2NhdGlvbicsICdvcGVuTG9jYXRpb24nLCAnaGlkZU1lbnVJdGVtcycsICdpbnZva2VNaW5pUHJvZ3JhbUFQSScsICdtaW5pUHJvZ3JhbScsICdjaG9vc2VJbWFnZScsICd1cGxvYWRJbWFnZScsICdjbG9zZVdpbmRvdycsICdvbk1lbnVTaGFyZUFwcE1lc3NhZ2UnLCAnc2NhblFSQ29kZSddOwogICAgICB2YXIgdXJsOwoKICAgICAgaWYgKH53aW5kb3cubG9jYXRpb24uaHJlZi5pbmRleE9mKCIjIikpIHsKICAgICAgICB1cmwgPSB3aW5kb3cubG9jYXRpb24uaHJlZi5zcGxpdCgnIycpWzBdOwogICAgICB9IGVsc2UgewogICAgICAgIHVybCA9IHdpbmRvdy5sb2NhdGlvbi5vcmlnaW47CiAgICAgIH0KCiAgICAgIGNvbnNvbGUubG9nKHdpbmRvdy5sb2NhdGlvbiwgJ3dpbmRvdy5sb2NhdGlvbicsIHVybCk7CiAgICAgIGF4aW9zLnBvc3Qod3hQYXRoLCB7CiAgICAgICAgdXJsOiB3aW5kb3cuZW5jb2RlVVJJQ29tcG9uZW50KHVybCkKICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgaWYgKHJlcy5kYXRhLnN1Y2Nlc3MpIHsKICAgICAgICAgIHdpbmRvdy5zZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgdmFyIGRhdGEgPSByZXMuZGF0YS5kYXRhOwogICAgICAgICAgICBjb25zb2xlLmxvZyhkYXRhLCAnZGF0YScpOwogICAgICAgICAgICB3eC5jb25maWcoewogICAgICAgICAgICAgIC8vIGRlYnVnOiB0cnVlLCAvLyDlvIDlkK/osIPor5XmqKHlvI8s6LCD55So55qE5omA5pyJYXBp55qE6L+U5Zue5YC85Lya5Zyo5a6i5oi356uvYWxlcnTlh7rmnaXvvIzoi6XopoHmn6XnnIvkvKDlhaXnmoTlj4LmlbDvvIzlj6/ku6XlnKhwY+err+aJk+W8gO+8jOWPguaVsOS/oeaBr+S8mumAmui/h2xvZ+aJk+WHuu+8jOS7heWcqHBj56uv5pe25omN5Lya5omT5Y2w44CCCiAgICAgICAgICAgICAgYXBwSWQ6IGRhdGEuYXBwaWQsCiAgICAgICAgICAgICAgLy8g5b+F5aGr77yM5LyB5Lia5Y+355qE5ZSv5LiA5qCH6K+G77yM5q2k5aSE5aGr5YaZ5LyB5Lia5Y+3Y29ycGlkCiAgICAgICAgICAgICAgdGltZXN0YW1wOiBkYXRhLnRpbWVzdGFtcCwKICAgICAgICAgICAgICAvLyDlv4XloavvvIznlJ/miJDnrb7lkI3nmoTml7bpl7TmiLMKICAgICAgICAgICAgICBub25jZVN0cjogZGF0YS5ub25jZXN0ciwKICAgICAgICAgICAgICAvLyDlv4XloavvvIznlJ/miJDnrb7lkI3nmoTpmo/mnLrkuLIKICAgICAgICAgICAgICBzaWduYXR1cmU6IGRhdGEuc2lnbiwKICAgICAgICAgICAgICAvLyDlv4XloavvvIznrb7lkI3vvIzop4HpmYTlvZUxCiAgICAgICAgICAgICAganNBcGlMaXN0OiBqc0FwaUxpc3QKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIHd4LnJlYWR5KGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICAgICAgICAvL+iHquWumuS5ieWIhuS6qwogICAgICAgICAgICAgIHd4Lm9uTWVudVNoYXJlQXBwTWVzc2FnZSh7CiAgICAgICAgICAgICAgICB0aXRsZTogJ2nmiJHlrrYnLAogICAgICAgICAgICAgICAgLy8g5YiG5Lqr5qCH6aKYCiAgICAgICAgICAgICAgICBkZXNjOiAiaeaIkeWutiDniLHnlJ/mtLsiLAogICAgICAgICAgICAgICAgbGluazogd2luZG93LmxvY2F0aW9uLmhyZWYuc3BsaXQoJyMnKVswXSwKICAgICAgICAgICAgICAgIGltZ1VybDogImh0dHA6Ly9kb3lkLXRlc3Qub3NzLWNuLXNoZW56aGVuLmFsaXl1bmNzLmNvbS9qa2Ivd3htZWRpYS8yMDE4MDkxMC8xNTM2NTczNTc3MTA4LnBuZyIsCiAgICAgICAgICAgICAgICAvLyDliIbkuqvlm77moIcKICAgICAgICAgICAgICAgIC8vIHR5cGU6ICcnLCAvLyDliIbkuqvnsbvlnossbXVzaWPjgIF2aWRlb+aIlmxpbmvvvIzkuI3loavpu5jorqTkuLpsaW5rCiAgICAgICAgICAgICAgICAvLyBkYXRhVXJsOiAnJywgLy8g5aaC5p6cdHlwZeaYr211c2lj5oiWdmlkZW/vvIzliJnopoHmj5DkvpvmlbDmja7pk77mjqXvvIzpu5jorqTkuLrnqboKICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uIHN1Y2Nlc3MoKSB7Ly8g55So5oi356Gu6K6k5YiG5Lqr5ZCO5omn6KGM55qE5Zue6LCD5Ye95pWwCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgY2FuY2VsOiBmdW5jdGlvbiBjYW5jZWwoKSB7Ly8g55So5oi35Y+W5raI5YiG5Lqr5ZCO5omn6KGM55qE5Zue6LCD5Ye95pWwCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgd2luZG93LiR3eCA9IHd4OwogICAgICAgICAgICAgIHJlc29sdmUod3gpOwogICAgICAgICAgICB9KTsKICAgICAgICAgICAgd3guZXJyb3IoZnVuY3Rpb24gKHJlcykgewogICAgICAgICAgICAgIHJlamVjdChyZXMpOyAvLyBjb25maWfkv6Hmga/pqozor4HlpLHotKXkvJrmiafooYxlcnJvcuWHveaVsO+8jOWmguetvuWQjei/h+acn+WvvOiHtOmqjOivgeWksei0pe+8jOWFt+S9k+mUmeivr+S/oeaBr+WPr+S7peaJk+W8gGNvbmZpZ+eahGRlYnVn5qih5byP5p+l55yL77yM5Lmf5Y+v5Lul5Zyo6L+U5Zue55qEcmVz5Y+C5pWw5Lit5p+l55yL77yM5a+55LqOU1BB5Y+v5Lul5Zyo6L+Z6YeM5pu05paw562+5ZCN44CCCiAgICAgICAgICAgIH0pOwogICAgICAgICAgfSwgMCk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHJlamVjdChyZXMpOwogICAgICAgIH0KICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycm9yKSB7CiAgICAgICAgcmVqZWN0KGVycm9yKTsKICAgICAgfSk7CiAgICB9IGVsc2UgewogICAgICByZXNvbHZlKHdpbmRvdy4kd3gpOwogICAgfQogIH0pOwp9"},{"version":3,"sources":["C:/Users/Administrator/Desktop/vip_inline_h5/src/utils/wx.js"],"names":["axios","wx","WX_API","WX_APIS","getWXSign","wxPath","window","location","href","indexOf","Promise","resolve","reject","$wx","jsApiList","url","split","origin","console","log","post","encodeURIComponent","then","res","data","success","setTimeout","config","appId","appid","timestamp","nonceStr","noncestr","signature","sign","ready","onMenuShareAppMessage","title","desc","link","imgUrl","cancel","error","catch"],"mappings":"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","sourcesContent":["/*\r\n * @Description: \r\n * @Version: 1.0\r\n * @Autor: cherry\r\n * @Date: 2020-06-11 10:11:59\r\n * @LastEditors: yesong\r\n * @LastEditTime: 2020-08-08 13:51:12\r\n */ \r\nimport axios from 'axios'\r\nimport wx from 'weixin-js-sdk'\r\nimport { WX_API, WX_APIS } from '@/config/index.js'\r\n\r\nexport default function getWXSign() {\r\n  var wxPath = window.location.href.indexOf('https') > -1 ? WX_APIS : WX_API \r\n  // var wxPath = WX_API\r\n  // if(~window.location.href.indexOf('https')) {\r\n  //   wxPath.replace(/^http/, 'https')\r\n  // }\r\n  return new Promise((resolve, reject) => {\r\n    if (!window.$wx) {\r\n      // 必填，需要使用的JS接口列表\r\n      const jsApiList = [\r\n        'chooseWXPay', \r\n        'getLocation', \r\n        'openLocation', \r\n        'hideMenuItems', \r\n        'invokeMiniProgramAPI',\r\n        'miniProgram', \r\n        'chooseImage',\r\n        'uploadImage', \r\n        'closeWindow',\r\n        'onMenuShareAppMessage',\r\n        'scanQRCode'\r\n      ] \r\n      let url\r\n      if(~window.location.href.indexOf(\"#\")) {\r\n        url = window.location.href.split('#')[0]\r\n      } else {\r\n        url = window.location.origin\r\n      }\r\n      console.log(window.location, 'window.location', url)\r\n      axios.post( wxPath, {   \r\n        url: window.encodeURIComponent(url)\r\n      }).then(function(res) {\r\n        if(res.data.success) {\r\n          window.setTimeout(() => {\r\n            const data = res.data.data\r\n            console.log(data, 'data')\r\n            wx.config({\r\n              // debug: true, // 开启调试模式,调用的所有api的返回值会在客户端alert出来，若要查看传入的参数，可以在pc端打开，参数信息会通过log打出，仅在pc端时才会打印。\r\n              appId: data.appid, // 必填，企业号的唯一标识，此处填写企业号corpid\r\n              timestamp: data.timestamp, // 必填，生成签名的时间戳\r\n              nonceStr: data.noncestr, // 必填，生成签名的随机串\r\n              signature: data.sign, // 必填，签名，见附录1\r\n              jsApiList: jsApiList\r\n            })\r\n            wx.ready(function(res) {\r\n              //自定义分享\r\n              wx.onMenuShareAppMessage({\r\n                title: 'i我家', // 分享标题\r\n                desc: \"i我家 爱生活\",\r\n                link: window.location.href.split('#')[0],\r\n                imgUrl: \"http://doyd-test.oss-cn-shenzhen.aliyuncs.com/jkb/wxmedia/20180910/1536573577108.png\", // 分享图标\r\n                // type: '', // 分享类型,music、video或link，不填默认为link\r\n                // dataUrl: '', // 如果type是music或video，则要提供数据链接，默认为空\r\n                success: function () { \r\n                    // 用户确认分享后执行的回调函数\r\n                },\r\n                cancel: function () { \r\n                    // 用户取消分享后执行的回调函数\r\n                }\r\n              });\r\n              window.$wx = wx\r\n              resolve(wx)\r\n            })\r\n            wx.error(function(res) {\r\n              reject(res)\r\n              // config信息验证失败会执行error函数，如签名过期导致验证失败，具体错误信息可以打开config的debug模式查看，也可以在返回的res参数中查看，对于SPA可以在这里更新签名。\r\n            })\r\n          }, 0);\r\n        } else {\r\n          reject(res)\r\n        }\r\n      })\r\n      .catch(function(error) {\r\n        reject(error)\r\n      })\r\n    } else {\r\n      resolve(window.$wx)\r\n    }\r\n   \r\n  })\r\n}"]}]}