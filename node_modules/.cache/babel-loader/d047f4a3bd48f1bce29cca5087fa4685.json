{"remainingRequest":"C:\\Users\\Administrator\\Desktop\\vip_inline_h5\\node_modules\\thread-loader\\dist\\cjs.js!C:\\Users\\Administrator\\Desktop\\vip_inline_h5\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\Administrator\\Desktop\\vip_inline_h5\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\Users\\Administrator\\Desktop\\vip_inline_h5\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Administrator\\Desktop\\vip_inline_h5\\src\\views\\active\\specialSale.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\Administrator\\Desktop\\vip_inline_h5\\src\\views\\active\\specialSale.vue","mtime":1597889072574},{"path":"C:\\Users\\Administrator\\Desktop\\vip_inline_h5\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Administrator\\Desktop\\vip_inline_h5\\node_modules\\thread-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Administrator\\Desktop\\vip_inline_h5\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\Administrator\\Desktop\\vip_inline_h5\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Administrator\\Desktop\\vip_inline_h5\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuY29uY2F0IjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmlsdGVyIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuaW5jbHVkZXMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5udW1iZXIuY29uc3RydWN0b3IiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QudG8tc3RyaW5nIjsKaW1wb3J0IF9kZWZpbmVQcm9wZXJ0eSBmcm9tICJDOi9Vc2Vycy9BZG1pbmlzdHJhdG9yL0Rlc2t0b3AvdmlwX2lubGluZV9oNS9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vZGVmaW5lUHJvcGVydHkiOwppbXBvcnQgInJlZ2VuZXJhdG9yLXJ1bnRpbWUvcnVudGltZSI7CmltcG9ydCBfYXN5bmNUb0dlbmVyYXRvciBmcm9tICJDOi9Vc2Vycy9BZG1pbmlzdHJhdG9yL0Rlc2t0b3AvdmlwX2lubGluZV9oNS9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vYXN5bmNUb0dlbmVyYXRvciI7CmltcG9ydCBfb2JqZWN0U3ByZWFkIGZyb20gIkM6L1VzZXJzL0FkbWluaXN0cmF0b3IvRGVza3RvcC92aXBfaW5saW5lX2g1L25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9vYmplY3RTcHJlYWQyIjsKCnZhciBfbmFtZSRtaXhpbnMkY29tcHV0ZWQ7CgovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwppbXBvcnQgeyBtYXBHZXR0ZXJzLCBtYXBBY3Rpb25zLCBtYXBNdXRhdGlvbnMgfSBmcm9tICJ2dWV4IjsKaW1wb3J0IHNlY2tpbGxNaXhpbiBmcm9tICdAL21peGlucy9zZWNraWxsTWl4aW4nOwppbXBvcnQgYWN0aXZlQnJhbmQgZnJvbSAnQGNvbXBvbmVudHMvYWN0aXZlL2FjdGl2ZUJyYW5kJzsKaW1wb3J0IGFjdGl2ZU5vdGljZSBmcm9tICdAY29tcG9uZW50cy9hY3RpdmUvYWN0aXZlTm90aWNlJzsKaW1wb3J0IGFjdGl2ZUdyYXBoaWMgZnJvbSAnQGNvbXBvbmVudHMvYWN0aXZlL2FjdGl2ZUdyYXBoaWMnOwppbXBvcnQgYWN0aXZlUm9vbSBmcm9tICdAY29tcG9uZW50cy9hY3RpdmUvYWN0aXZlUm9vbSc7CmltcG9ydCBhY3RpdmVIZWFkZXIgZnJvbSAnQGNvbXBvbmVudHMvYWN0aXZlL2FjdGl2ZUhlYWRlcic7CmltcG9ydCBhY3RpdmVDb3Vwb24gZnJvbSAnQGNvbXBvbmVudHMvYWN0aXZlL2FjdGl2ZUNvdXBvbic7CmltcG9ydCBhY3RpdmVDYXNoIGZyb20gJ0Bjb21wb25lbnRzL2FjdGl2ZS9hY3RpdmVDYXNoJzsKaW1wb3J0IGFjdGl2ZUZvb3RlciBmcm9tICdAY29tcG9uZW50cy9hY3RpdmUvYWN0aXZlRm9vdGVyJzsKaW1wb3J0IGFjdGl2ZUNhbGVuZGFyIGZyb20gJ0Bjb21wb25lbnRzL2FjdGl2ZS9hY3RpdmVDYWxlbmRhcic7CmltcG9ydCB1dGlscyBmcm9tICJAL3V0aWxzL3V0aWxzIjsKaW1wb3J0IG9yZGVyUGF5IGZyb20gIkAvdXRpbHMvcGF5IjsKaW1wb3J0IGFjdGl2ZVV0aWxzIGZyb20gJ0AvZmlsdGVycy9hY3RpdmUnOwpleHBvcnQgZGVmYXVsdCAoX25hbWUkbWl4aW5zJGNvbXB1dGVkID0gewogIG5hbWU6ICdzcGVjaWFsU2FsZScsCiAgbWl4aW5zOiBbc2Vja2lsbE1peGluXSwKICBjb21wdXRlZDoge30sCiAgY29tcG9uZW50czogewogICAgYWN0aXZlSGVhZGVyOiBhY3RpdmVIZWFkZXIsCiAgICBhY3RpdmVDb3Vwb246IGFjdGl2ZUNvdXBvbiwKICAgIGFjdGl2ZUNhc2g6IGFjdGl2ZUNhc2gsCiAgICBhY3RpdmVHcmFwaGljOiBhY3RpdmVHcmFwaGljLAogICAgYWN0aXZlQnJhbmQ6IGFjdGl2ZUJyYW5kLAogICAgYWN0aXZlUm9vbTogYWN0aXZlUm9vbSwKICAgIGFjdGl2ZU5vdGljZTogYWN0aXZlTm90aWNlLAogICAgYWN0aXZlRm9vdGVyOiBhY3RpdmVGb290ZXIsCiAgICBhY3RpdmVDYWxlbmRhcjogYWN0aXZlQ2FsZW5kYXIKICB9LAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICB2aXBVc2VyOiBmYWxzZSwKICAgICAgc3VpdFNob3BzOiBbXSwKICAgICAgbWVkaWFMaXN0OiBbXSwKICAgICAgZ3JhcGhpY0RldGFpbDogJycsCiAgICAgIC8vIOivpuaDhWh0bWzkv6Hmga8KICAgICAgdGltZXI6IG51bGwsCiAgICAgIHJlY29tbWVuZExpc3Q6IFtdLAogICAgICAvLyDlhbbku5bnpLzljIXmjqjojZAv5o6o6I2Q5p2D55uKCiAgICAgIGZsYWc6IHRydWUsCiAgICAgIHNob3dQb3A6IGZhbHNlLAogICAgICAvLyDpnZ7kvJrlkZjotK3kubDml7bmj5DnpLoKICAgICAgcmVjb21QYWdlOiAxLAogICAgICAvLyDnibnljZbnmoTmjqjojZDmnYPnm4rkuIrmi4nmm7TlpJoKICAgICAgaGFzTW9yZTogdHJ1ZSwKICAgICAgLy8g54m55Y2W55qE5o6o6I2Q5p2D55uK5pu05aSa5o+Q56S6CiAgICAgIGJ0bkRpc2FibGVkOiBmYWxzZSwKICAgICAgY2FzaE1hc2s6IGZhbHNlLAogICAgICBzZWxDYXNocmVkOiB7fSwKICAgICAgc2VsQ29uc3VtZXI6IHt9LAogICAgICBjYWxlbmRhck1hc2s6IGZhbHNlLAogICAgICAvLyDml6XljoblvLnnqpcKICAgICAgc2VsRGF0ZTogewogICAgICAgIHN0YXJ0VGltZTogJycsCiAgICAgICAgZW5kVGltZTogJycKICAgICAgfSwKICAgICAgLy8g6Ieq5oiR5ri46YCJ5Lit55qE5pe26Ze0CiAgICAgIHRyYXZlbE1vbnRoSW5mbzoge30sCiAgICAgIGNvbmRpdGlvbkluZm86IHt9LAogICAgICAvLyDlhZHlpZbkuK3lv4Pkv6Hmga8KICAgICAgdHJhY3ZlbFVzZXJMaXN0OiBbXSwKICAgICAgcmVmcmVzaDogZmFsc2UsCiAgICAgIC8vIOWIt+aWsOaXpeWOhuaVsOaNrgogICAgICBkb3duVGltZTogewogICAgICAgIGhvdXI6ICcwMCcsCiAgICAgICAgbWludXRlOiAnMDAnLAogICAgICAgIHNlY29uZDogJzAwJwogICAgICB9LAogICAgICByZWFkeTogZmFsc2UsCiAgICAgIGJ0blRleHQ6ICfnq4vljbPmiqLotK0nLAogICAgICBzaG93QnRuVHh0OiB0cnVlLAogICAgICBmaXhlZERldGFpbDoge30sCiAgICAgIC8vIOmXqOW6l+WTgeeJjOS6uuWdh+S/oeaBrwogICAgICByZW1haW5UaW1lOiAzOTk5MDAwLAogICAgICBjaGFubmVsVHlwZTogJycsCiAgICAgIG9wdGlvbnM6IHRoaXMuJHJvdXRlLnF1ZXJ5IHx8IHt9LAogICAgICBpbmZvOiB7fQogICAgfTsKICB9Cn0sIF9kZWZpbmVQcm9wZXJ0eShfbmFtZSRtaXhpbnMkY29tcHV0ZWQsICJjb21wdXRlZCIsIF9vYmplY3RTcHJlYWQoe30sIG1hcEdldHRlcnMoWyJsb2NhdGlvbkluZm8iLCAid3hVc2VyIiwgImxvY2F0aW9uQ2l0eSIsICJ2aXBDYXJkSW5mbyIsICJ1cGRhdGVGbGFnIl0pKSksIF9kZWZpbmVQcm9wZXJ0eShfbmFtZSRtaXhpbnMkY29tcHV0ZWQsICJtZXRob2RzIiwgewogIC8vIOaMiemSrumihuWPluOAgeW8gOmAmuOAgei0reS5sOetieaTjeS9nOS6i+S7tgogIGhhbmRsZXJFdmVudDogZnVuY3Rpb24gaGFuZGxlckV2ZW50KCkgewogICAgdmFyIF90aGlzID0gdGhpczsKCiAgICBpZiAodGhpcy5idG5EaXNhYmxlZCkgcmV0dXJuOyAvLyDmjInpkq7nva7ngbDml7bvvIzml6Dms5Xngrnlh7votK3kubDmjInpkq4KCiAgICB2YXIgaW5mbyA9IHRoaXMuaW5mbzsKCiAgICBpZiAoaW5mby5zdXBwbGllckNvZGUgPT0gJ1BBUlRZX1pXWScgJiYgWzMsIDQsIDVdLmluY2x1ZGVzKGluZm8udmFsaWRpdHlUeXBlKSkgewogICAgICAvLyDoh6rmiJHmuLjnibnljZbml7YgJiYg6ZyA6KaB6YCJ5a6a5pel5pyfICAg5by55Ye66YCJ5oup5pel5Y6GCiAgICAgIGlmICghdGhpcy5jYWxlbmRhck1hc2spIHsKICAgICAgICB0aGlzLmNhbGVuZGFyTWFzayA9IHRydWU7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICBpZiAoIXRoaXMuc2VsRGF0ZS5zdGFydFRpbWUpIHsKICAgICAgICAvLyDmnKrpgInmi6nml7bpl7QKICAgICAgICB0aGlzLiRUb2FzdCgn6K+36YCJ5oup5ri4546p5pel5pyfJyk7CiAgICAgICAgdGhpcy5jYWxlbmRhck1hc2sgPSB0cnVlOwogICAgICB9IGVsc2UgewogICAgICAgIGlmIChpbmZvLnZhbGlkaXR5VHlwZSA9PSA0IHx8IGluZm8udmFsaWRpdHlUeXBlID09IDUpIHsKICAgICAgICAgIC8vIOa4uOWuoumAieWumuaXpeacn+W7tuWQjljmnInmlYggfHwg5ri45a6i6YCJ5a6a5pel5pyf5oyH5a6a5pe26Ze05pyJ5pWICiAgICAgICAgICB0aGlzLiRkaWFsb2cuY29uZmlybSh7CiAgICAgICAgICAgIHRpdGxlOiAn56Gu5a6a5Ye65ri45pe26Ze0PycsCiAgICAgICAgICAgIG1lc3NhZ2U6ICIiLmNvbmNhdCh1dGlscy5mb3JtYXRUaW1lKHRoaXMuc2VsRGF0ZS5zdGFydFRpbWUgfHwgMCwgJ1lZWVkvTU0vREQnKSwgIiB+ICIpLmNvbmNhdCh1dGlscy5mb3JtYXRUaW1lKHRoaXMuc2VsRGF0ZS5lbmRUaW1lIHx8IDAsICdZWVlZL01NL0REJykpCiAgICAgICAgICB9KS50aGVuKGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgX3RoaXMucGxhY2VPcmRlcigpOwogICAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKCkgey8vIG9uIGNhbmNlbAogICAgICAgICAgfSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHRoaXMuJGRpYWxvZy5jb25maXJtKHsKICAgICAgICAgICAgdGl0bGU6ICfnoa7lrprlh7rmuLjml7bpl7Q/JywKICAgICAgICAgICAgbWVzc2FnZTogIiIuY29uY2F0KHV0aWxzLmZvcm1hdFRpbWUodGhpcy5zZWxEYXRlLnN0YXJ0VGltZSB8fCAwLCAnWVlZWS9NTS9ERCcpKQogICAgICAgICAgfSkudGhlbihmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIF90aGlzLnBsYWNlT3JkZXIoKTsKICAgICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uICgpIHsvLyBvbiBjYW5jZWwKICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgfQoKICAgICAgcmV0dXJuOwogICAgfQoKICAgIHRoaXMucGxhY2VPcmRlcigpOwogIH0sCiAgLy8g5LiL5Y2VCiAgcGxhY2VPcmRlcjogZnVuY3Rpb24gcGxhY2VPcmRlcigpIHsKICAgIGlmICh0aGlzLm9wdGlvbnMuaGFzRXhjaGFuZ2UgIT0gJycpIHsKICAgICAgLy8g5Yik5pat5YWR5aWW5Lit5b+D6L+b5YWlICDnq4vljbPlhZHmjaIKICAgICAgdmFyIGNvbmRpdGlvbkluZm8gPSB0aGlzLmNvbmRpdGlvbkluZm87CiAgICAgIHZhciB0cmFjdmVsVXNlckxpc3QgPSB0aGlzLnRyYWN2ZWxVc2VyTGlzdDsKCiAgICAgIGlmIChjb25kaXRpb25JbmZvLmlzQ29uZGl0aW9uICYmIHRyYWN2ZWxVc2VyTGlzdC5sZW5ndGggPT0gMCkgewogICAgICAgIC8vIOWIpOaWreaYr+WQpumcgOaxguWhq+WGmeS/oeaBrwogICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHsKICAgICAgICAgIG5hbWU6ICd0cmF2ZWxJbmZvcm1hdGlvbicsCiAgICAgICAgICBxdWVyeTogewogICAgICAgICAgICBhY3RTbjogdGhpcy5vcHRpb25zLmFjdFNuCiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICB0aGlzLmV4Y2hhbmdlKCk7CiAgICB9IGVsc2UgaWYgKHRoaXMuaW5mby5jaGlsZEVudW1LZXkgPT0gJ0FDVF9TUEVDSUFMX09GRkVSX1BVUkNIQVNFX0xJTUlUJykgewogICAgICAvLyDku47pmZDotK3ov5vlhaUKICAgICAgdGhpcy5oYW5kbGVyTGltaXRFdmVudCgpOwogICAgfSBlbHNlIGlmICh0aGlzLmZyZWUgJiYgdGhpcy5pbmZvLmNhcmRUeXBlICE9ICdDQVJEX0RJUkVDVF9SRUNIQVJHRScpIHsKICAgICAgdmFyIF9jb25kaXRpb25JbmZvID0gdGhpcy5jb25kaXRpb25JbmZvOwogICAgICB2YXIgX3RyYWN2ZWxVc2VyTGlzdCA9IHRoaXMudHJhY3ZlbFVzZXJMaXN0OwoKICAgICAgaWYgKF9jb25kaXRpb25JbmZvLmlzQ29uZGl0aW9uICYmIF90cmFjdmVsVXNlckxpc3QubGVuZ3RoID09IDApIHsKICAgICAgICAvLyDliKTmlq3mmK/lkKbpnIDmsYLloavlhpnkv6Hmga8KICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCh7CiAgICAgICAgICBuYW1lOiAndHJhdmVsSW5mb3JtYXRpb24nLAogICAgICAgICAgcXVlcnk6IHsKICAgICAgICAgICAgYWN0U246IHRoaXMub3B0aW9ucy5hY3RTbgogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICAgIHJldHVybjsKICAgICAgfSAvLyDlhY3otLnpooblj5YKCgogICAgICB0aGlzLmdldEZyZWUoKTsKICAgIH0gZWxzZSBpZiAodGhpcy5vcGVuX3JlY2VpdmUpIHsKICAgICAgdGhpcy5vcGVuUmVjZWl2ZSgpOwogICAgfSBlbHNlIHsKICAgICAgdGhpcy50b0J1eSgpOwogICAgfQogIH0sCiAgaGFuZGxlckxpbWl0RXZlbnQ6IGZ1bmN0aW9uIGhhbmRsZXJMaW1pdEV2ZW50KCkgewogICAgaWYgKHRoaXMuaW5mby5saW1pdEFjdFN0YXRlID09IDEyKSB7CiAgICAgIHRoaXMuJFRvYXN0KCflvZPliY3lkIjovpHpnZ7ov5vooYzkuK3nirbmgIEnKTsKICAgIH0gZWxzZSB7CiAgICAgIGlmICh0aGlzLmJ0blRleHQgPT0gJ+eri+WNs+aKoui0rScpIHsKICAgICAgICB0aGlzLnRvQnV5KCk7CiAgICAgIH0KICAgIH0KICB9LAogIC8vIOWFkeaNogogIGV4Y2hhbmdlOiBmdW5jdGlvbiBleGNoYW5nZSgpIHsKICAgIHZhciBfdGhpczIgPSB0aGlzOwoKICAgIHZhciBpdGVtID0gdGhpcy5leGNoYW5nZV9kYXRhOwogICAgdGhpcy4kZGlhbG9nLmNvbmZpcm0oewogICAgICB0aXRsZTogIlx1NjYyRlx1NTQyNlx1Nzg2RVx1OEJBNFx1NTE1MVx1NjM2MiIuY29uY2F0KGl0ZW0uYWN0TmFtZSB8fCAnJywgIj8iKSwKICAgICAgbWVzc2FnZTogJ+WFkeaNouWQjuS4jeWPr+abtOaUueS4lOWOn+aciea9ruWNoeWwhuS8mua4heepuicKICAgIH0pLnRoZW4oZnVuY3Rpb24gKCkgewogICAgICBfdGhpczIucHJpY2VFeGNoYW5nZShpdGVtKTsKICAgIH0pLmNhdGNoKGZ1bmN0aW9uICgpIHsvLyBvbiBjYW5jZWwKICAgIH0pOwogIH0sCiAgLy8g5byA5aeL5YWR5o2iCiAgcHJpY2VFeGNoYW5nZTogZnVuY3Rpb24gcHJpY2VFeGNoYW5nZShpdGVtKSB7CiAgICB2YXIgX3RoaXMzID0gdGhpczsKCiAgICBpZiAodGhpcy5pc0NhbkNsaWNrKSByZXR1cm47CiAgICB0aGlzLmlzQ2FuQ2xpY2sgPSB0cnVlOwogICAgdGhpcy4kYXBpLnByaWNlX2V4Y2hhbmdlKHsKICAgICAgYWN0U246IGl0ZW0uYWN0U24sCiAgICAgIGF3YXJkSWQ6IGl0ZW0uYXdhcmRJZCwKICAgICAgY2l0eUlkOiB0aGlzLmxvY2F0aW9uQ2l0eS5jaXR5SWQsCiAgICAgIGNob29zZURhdGU6IHRoaXMuc2VsRGF0ZS5zdGFydFRpbWUgPyB1dGlscy5mb3JtYXRUaW1lKHRoaXMuc2VsRGF0ZS5zdGFydFRpbWUgfHwgMCwgJ1lZWVlNTUREJykgOiAwLAogICAgICAvLyDoh6rmiJHmuLjpgInmi6nml7bpl7QKICAgICAgdHJhY3ZlbFVzZXJMaXN0OiBKU09OLnN0cmluZ2lmeSh0aGlzLnRyYWN2ZWxVc2VyTGlzdCkKICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICBpZiAocmVzLnN0YXRlKSB7CiAgICAgICAgX3RoaXMzLm1hc2sgPSB0cnVlOwogICAgICAgIF90aGlzMy50cmFjdmVsVXNlckxpc3QgPSBbXTsKCiAgICAgICAgX3RoaXMzLiRzYXZlLnJlbW92ZSgnc2Vzc2lvbicsICd0cmF2ZWxJbmZvcm1hdGlvbicpOwoKICAgICAgICBfdGhpczMuaGFuZGxlckJ0bign5bey5YWR5o2iJywgdHJ1ZSk7IC8vIOa4hemZpOeUqOaIt+Whq+WGmeS/oeaBrwoKCiAgICAgICAgX3RoaXMzLiRzYXZlLnJlbW92ZSgnc2Vzc2lvbicsICd0cmF2ZWxJbmZvcm1hdGlvbicpOwogICAgICB9IGVsc2UgewogICAgICAgIF90aGlzMy4kVG9hc3QocmVzLm1lc3NhZ2UpOwogICAgICB9CiAgICB9KS5maW5hbGx5KGZ1bmN0aW9uICgpIHsKICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgX3RoaXMzLmlzQ2FuQ2xpY2sgPSBmYWxzZTsKICAgICAgfSwgMzAwKTsKICAgIH0pOwogIH0sCiAgZ29DYXJkOiBmdW5jdGlvbiBnb0NhcmQoKSB7CiAgICB0aGlzLiRyb3V0ZXIucHVzaCh7CiAgICAgIG5hbWU6ICdjb3Vwb25MaXN0JwogICAgfSk7CiAgfSwKICBjbG9zZTogZnVuY3Rpb24gY2xvc2UoKSB7CiAgICB0aGlzLm1hc2sgPSBmYWxzZTsKICB9LAogIC8vIOmdnuS8muWRmOW8gOmAmuW5tumihuWPlgogIG9wZW5SZWNlaXZlOiBmdW5jdGlvbiBvcGVuUmVjZWl2ZSgpIHsKICAgIHRoaXMuJHNldCh0aGlzLmluZm8sICdzZWxsUHJpY2UnLCAwKTsKICAgIHRoaXMuJHNldCh0aGlzLmluZm8sICdub1ZpcFByaWNlJywgMCk7CiAgICB2YXIgcmVjZWl2ZVR5cGUgPSB0aGlzLm9wdGlvbnMuY2hhbm5lbFR5cGUgPT0gJ0NIQU5ORUxfQUNUSVZJVFlfTEFCRUxfU0hPVycgPyA0IDogMTsKICAgIHZhciBpbmZvID0gdGhpcy5pbmZvOwogICAgaW5mby5zZWxEYXRlID0gdGhpcy5zZWxEYXRlOwogICAgaW5mby5kZXNjcmliZSA9ICcnOwogICAgdGhpcy4kc2F2ZS5zZXQoJ3Nlc3Npb24nLCAnb3JkZXJJbmZvJywgdGhpcy5pbmZvKTsgLy8g6Z2e5Lya5ZGY5byA6YCa5bm26aKG5Y+WCgogICAgdGhpcy4kcm91dGVyLnB1c2goewogICAgICBuYW1lOiAnc3VibWl0T3JkZXInLAogICAgICBxdWVyeTogewogICAgICAgIGNvbXBJZDogdGhpcy5vcHRpb25zLmNvbXBJZCB8fCAnJywKICAgICAgICBhY3RTbjogdGhpcy5vcHRpb25zLmFjdFNuLAogICAgICAgIGNoYW5uZWxUeXBlOiB0aGlzLm9wdGlvbnMuY2hhbm5lbFR5cGUsCiAgICAgICAgcmVjZWl2ZVR5cGU6IHJlY2VpdmVUeXBlCiAgICAgIH0KICAgIH0pOwogIH0sCiAgLy8g5ZSu5Lu35Li6MOaXtu+8jOWFjei0uemihgogIGdldEZyZWU6IGZ1bmN0aW9uIGdldEZyZWUoKSB7CiAgICB2YXIgX3RoaXM0ID0gdGhpczsKCiAgICB2YXIgYWN0RGVhbCA9IG9yZGVyUGF5LmFjdERlYWwoewogICAgICBjaXR5SWQ6IHRoaXMubG9jYXRpb25DaXR5LmNpdHlJZCwKICAgICAgYWN0U246IHRoaXMub3B0aW9ucy5hY3RTbiwKICAgICAgZGVhbE51bTogMSwKICAgICAgY2hhbm5lbFR5cGU6IHRoaXMub3B0aW9ucy5jaGFubmVsVHlwZSwKICAgICAgcXJDb2RlOiB0aGlzLm9wdGlvbnMucXJDb2RlIHx8ICcnLAogICAgICByZWFsRmVlOiAwLAogICAgICByZWNlaXZlVHlwZTogdGhpcy5vcHRpb25zLmNoYW5uZWxUeXBlID09ICdDSEFOTkVMX0FDVElWSVRZX0xBQkVMX1NIT1cnID8gNCA6IDEsCiAgICAgIC8vIOiOt+WPluaWueW8j++8jDHkvJrlkZjpooblj5bvvIwy5Lya5ZGY6LSt5Lmw77yMM+a4oOmBk+i0reS5sCB2MS4yLjDmlLnkuLoxCiAgICAgIG9wZW5WaXA6IGZhbHNlLAogICAgICAvL+aYr+WQpuW8gOmAmuaciOWNoeS8muWRmOW5tui0reS5sAogICAgICBhY3RGZWU6IDAsCiAgICAgIC8v5rS75Yqo5pSv5LuY6LS555SoCiAgICAgIHZpcEZlZTogMCwKICAgICAgdmlwQ2FyZElkOiAnJywKICAgICAgYnV5VHlwZTogMCwKICAgICAgY29tcElkOiB0aGlzLm9wdGlvbnMuY29tcElkLAogICAgICAvLyDlkIjovpFJZAogICAgICBjaG9vc2VEYXRlOiB0aGlzLnNlbERhdGUuc3RhcnRUaW1lID8gdXRpbHMuZm9ybWF0VGltZSh0aGlzLnNlbERhdGUuc3RhcnRUaW1lIHx8IDAsICdZWVlZTU1ERCcpIDogMCwKICAgICAgLy8g6Ieq5oiR5ri46YCJ5oup5pe26Ze0CiAgICAgIHRyYWN2ZWxVc2VyTGlzdDogSlNPTi5zdHJpbmdpZnkodGhpcy50cmFjdmVsVXNlckxpc3QpCiAgICB9KTsKCiAgICBpZiAoYWN0RGVhbCkgewogICAgICBhY3REZWFsLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgIGlmIChyZXMuc3RhdGUpIHsKICAgICAgICAgIF90aGlzNC50cmFjdmVsVXNlckxpc3QgPSBbXTsKCiAgICAgICAgICBfdGhpczQuJHNhdmUucmVtb3ZlKCdzZXNzaW9uJywgJ3RyYXZlbEluZm9ybWF0aW9uJyk7CgogICAgICAgICAgX3RoaXM0LiRyb3V0ZXIucHVzaCh7CiAgICAgICAgICAgIG5hbWU6ICdzcGVjaWFsU2FsZVN1Y2Nlc3MnLAogICAgICAgICAgICBxdWVyeTogewogICAgICAgICAgICAgIHRyYWRlSWQ6IHJlcy5pbmZvLnRyYWRlSWQsCiAgICAgICAgICAgICAgYWN0TmFtZTogX3RoaXM0LmluZm8uYWN0TmFtZSwKICAgICAgICAgICAgICByZWNlaXZlOiAxLAogICAgICAgICAgICAgIGFjdFNuOiBfdGhpczQub3B0aW9ucy5hY3RTbiwKICAgICAgICAgICAgICB2aXBfY2hlY2s6IDAKICAgICAgICAgICAgfQogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0KICB9LAogIHRvQnV5OiBmdW5jdGlvbiB0b0J1eSgpIHsKICAgIHZhciBfdGhpczUgPSB0aGlzOwoKICAgIGlmICh0aGlzLmlzQ2FuQ2xpY2spIHJldHVybjsKICAgIHRoaXMuaXNDYW5DbGljayA9IHRydWU7CiAgICB2YXIgaW5mbyA9IHRoaXMuaW5mbzsKICAgIGluZm8uc2VsRGF0ZSA9IHRoaXMuc2VsRGF0ZTsKICAgIGluZm8uZGVzY3JpYmUgPSAnJzsKICAgIHRoaXMuJHNhdmUuc2V0KCdzZXNzaW9uJywgJ29yZGVySW5mbycsIHRoaXMuaW5mbyk7IC8vIOWIpOaWreaYr+WQpuacieacquaUr+S7mOeahOiuouWNlQoKICAgIHRoaXMuJGFwaS5vcmRlcl91bnBheSh7CiAgICAgIGFjdFNuOiB0aGlzLm9wdGlvbnMuYWN0U24KICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICBpZiAocmVzLnN0YXRlKSB7CiAgICAgICAgaWYgKHJlcy5pbmZvLmV4aXN0c1VuUGF5KSB7CiAgICAgICAgICAvLyDlpoLmnpzlrZjlnKjmnKrmlK/ku5jnmoTorqLljZXvvIzot7PovazliLDorqLljZXliJfooajpobUKICAgICAgICAgIF90aGlzNS4kcm91dGVyLnB1c2goewogICAgICAgICAgICBuYW1lOiAnb3JkZXJMaXN0JwogICAgICAgICAgfSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHZhciByZWNlaXZlVHlwZSA9IF90aGlzNS5vcHRpb25zLmNoYW5uZWxUeXBlID09ICdDSEFOTkVMX0FDVElWSVRZX0xBQkVMX1NIT1cnID8gMyA6IDI7CgogICAgICAgICAgX3RoaXM1LiRyb3V0ZXIucHVzaCh7CiAgICAgICAgICAgIG5hbWU6ICdzdWJtaXRPcmRlcicsCiAgICAgICAgICAgIHF1ZXJ5OiB7CiAgICAgICAgICAgICAgcXJDb2RlOiBfdGhpczUub3B0aW9ucy5xckNvZGUgfHwgJycsCiAgICAgICAgICAgICAgY29tcElkOiBfdGhpczUub3B0aW9ucy5jb21wSWQgfHwgJycsCiAgICAgICAgICAgICAgYWN0U246IF90aGlzNS5vcHRpb25zLmFjdFNuLAogICAgICAgICAgICAgIGNoYW5uZWxUeXBlOiBfdGhpczUub3B0aW9ucy5jaGFubmVsVHlwZSwKICAgICAgICAgICAgICByZWNlaXZlVHlwZTogcmVjZWl2ZVR5cGUKICAgICAgICAgICAgfQogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICB9CiAgICB9KS5maW5hbGx5KGZ1bmN0aW9uICgpIHsKICAgICAgX3RoaXM1LmlzQ2FuQ2xpY2sgPSBmYWxzZTsKICAgIH0pOwogIH0sCiAgLy8g5Yik5pat55So5oi36LSt5Lmw5L+h5oGvCiAgZ2V0UmVhbFRpbWVJbmZvOiBmdW5jdGlvbiBnZXRSZWFsVGltZUluZm8obGltaXRGcmVxdWVuY3kpIHsKICAgIHZhciBfdGhpczYgPSB0aGlzOwoKICAgIHJldHVybiB0aGlzLiRhcGkucmVhbFRpbWVfaW5mbyh7CiAgICAgIGFjdFNuOiB0aGlzLm9wdGlvbnMuYWN0U24KICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICBpZiAocmVzLnN0YXRlKSB7CiAgICAgICAgX3RoaXM2LnJlYWxJbmZvID0gcmVzLmluZm87CiAgICAgIH0KICAgIH0pOwogIH0sCiAgaGFuZGxlckJ0bjogZnVuY3Rpb24gaGFuZGxlckJ0bih0ZXh0KSB7CiAgICB2YXIgZGlzYWJsZWQgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6IGZhbHNlOwogICAgdGhpcy5idG5UZXh0ID0gdGV4dDsKICAgIHRoaXMuYnRuRGlzYWJsZWQgPSBkaXNhYmxlZDsKICB9LAogIGhhbmRsZXJMaW1pdDogZnVuY3Rpb24gaGFuZGxlckxpbWl0KGluZm8yLCBmbGFnKSB7CiAgICB2YXIgX3RoaXM3ID0gdGhpczsKCiAgICAvLyAx5pyq5byA5aeLIDLov5vooYzkuK0gM+W3sue7k+adnwogICAgdmFyIGN1cnJlbnRUaW1lID0gK25ldyBEYXRlKCk7CgogICAgaWYgKGluZm8yLmxpbWl0RW5kVGltZSA8IGN1cnJlbnRUaW1lICYmIGluZm8yLmxpbWl0U3RhcnRUaW1lIDwgY3VycmVudFRpbWUpIHsKICAgICAgaW5mbzIudGltZVN0YXRlID0gMzsKICAgIH0gZWxzZSBpZiAoaW5mbzIubGltaXRFbmRUaW1lID4gY3VycmVudFRpbWUgJiYgaW5mbzIubGltaXRTdGFydFRpbWUgPCBjdXJyZW50VGltZSkgewogICAgICBpbmZvMi50aW1lU3RhdGUgPSAyOwogICAgfSBlbHNlIGlmIChpbmZvMi5saW1pdFN0YXJ0VGltZSA+IGN1cnJlbnRUaW1lKSB7CiAgICAgIGluZm8yLnRpbWVTdGF0ZSA9IDE7CiAgICAgIHZhciBoZWFkbGluZSA9IGdldERheU5hbWUoaW5mbzIubGltaXRTdGFydFRpbWUpOwogICAgICB0aGlzLmhlYWRsaW5lID0gaGVhZGxpbmU7CiAgICB9CgogICAgaWYgKGluZm8yLnRpbWVTdGF0ZSAhPSAzKSB7CiAgICAgIGNsZWFySW50ZXJ2YWwodGhpcy5saW1pdFRpbWVyKTsKICAgICAgdGhpcy5saW1pdFRpbWVyID0gc2V0SW50ZXJ2YWwoZnVuY3Rpb24gKCkgewogICAgICAgIHZhciBub3dUaW1lID0gK25ldyBEYXRlKCk7CiAgICAgICAgdmFyIGN1dFRpbWUgPSAwOwoKICAgICAgICBpZiAoaW5mbzIudGltZVN0YXRlID09IDEpIHsKICAgICAgICAgIGN1dFRpbWUgPSBpbmZvMi5saW1pdFN0YXJ0VGltZSAtIG5vd1RpbWU7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGN1dFRpbWUgPSBpbmZvMi5saW1pdEVuZFRpbWUgLSBub3dUaW1lOwogICAgICAgIH0KCiAgICAgICAgdmFyIGxhc3RUaW1lID0gdXRpbHMuY291bnREb3duMyhjdXRUaW1lKTsKICAgICAgICBfdGhpczcuZG93blRpbWUgPSBsYXN0VGltZTsKCiAgICAgICAgaWYgKGN1dFRpbWUgPD0gMCAmJiBpbmZvMi5saW1pdEFjdFN0YXRlICE9IDEyKSB7CiAgICAgICAgICBjbGVhckludGVydmFsKF90aGlzNy5saW1pdFRpbWVyKTsKCiAgICAgICAgICBfdGhpczcuZ2V0QWN0RGV0YWlsKCk7CiAgICAgICAgfQogICAgICB9LCAxMDAwKTsKICAgIH0gZWxzZSB7CiAgICAgIHRoaXMuZG93blRpbWUgPSB7CiAgICAgICAgaG91cjogJzAwJywKICAgICAgICBtaW51dGU6ICcwMCcsCiAgICAgICAgc2Vjb25kOiAnMDAnCiAgICAgIH07CiAgICB9CgogICAgaWYgKGZsYWcpIHsKICAgICAgLy8g5bey5oqi5a6M5rS75Yqo5by556qXCiAgICAgIGlmIChpbmZvMi5saW1pdEFjdFN0YXRlID09IDMgfHwgaW5mbzIubGltaXRBY3RTdGF0ZSA9PSAyIHx8ICF0aGlzLmluZm8ucmVtYWluTnVtKSB7CiAgICAgICAgdGhpcy5nZXRFbmRBY3RpdmUoKTsKICAgICAgfQogICAgfQogIH0sCiAgLy8g6I635Y+W5rS75Yqo6K+m5oOFCiAgZ2V0QWN0RGV0YWlsOiBmdW5jdGlvbiBnZXRBY3REZXRhaWwoZmxhZykgewogICAgdmFyIF90aGlzOCA9IHRoaXM7CgogICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTIoKSB7CiAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMiQoX2NvbnRleHQyKSB7CiAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQyLnByZXYgPSBfY29udGV4dDIubmV4dCkgewogICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgX3RoaXM4LiRUb2FzdC5sb2FkaW5nKHsKICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICfliqDovb3kuK0uLi4nLAogICAgICAgICAgICAgICAgZm9yYmlkQ2xpY2s6IHRydWUsCiAgICAgICAgICAgICAgICBkdXJhdGlvbjogMAogICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDM7CiAgICAgICAgICAgICAgcmV0dXJuIF90aGlzOC5nZXRTcGVjaWFsSW5mbygpOwoKICAgICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gNTsKICAgICAgICAgICAgICByZXR1cm4gX3RoaXM4LmdldENvdXBEZXRhaWwoKTsKCiAgICAgICAgICAgIGNhc2UgNToKICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDc7CiAgICAgICAgICAgICAgcmV0dXJuIF90aGlzOC5nZXRSZWFsVGltZUluZm8oKTsKCiAgICAgICAgICAgIGNhc2UgNzoKICAgICAgICAgICAgICBfdGhpczguZ2V0U3VpdFNob3BzKCk7IC8vIOiOt+WPlumAgueUqOW6l+mTugoKCiAgICAgICAgICAgICAgX3RoaXM4LiRhcGkuYWN0X2RldGFpbCh7CiAgICAgICAgICAgICAgICBjaGFubmVsVHlwZTogX3RoaXM4Lm9wdGlvbnMuY2hhbm5lbFR5cGUsCiAgICAgICAgICAgICAgICBxckNvZGU6IF90aGlzOC5vcHRpb25zLnFyQ29kZSB8fCAnJywKICAgICAgICAgICAgICAgIGFjdFNuOiBfdGhpczgub3B0aW9ucy5hY3RTbgogICAgICAgICAgICAgIH0pLnRoZW4oIC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICB2YXIgX3JlZiA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZShyZXMpIHsKICAgICAgICAgICAgICAgICAgdmFyIGluZm8xLCBpbmZvMiwgY29udGF0aW9uLCBpbmZvLCBsaW1pdFRpbWUsIGRhdGUsIGgsIG0sIGRheVRpbWUsIHRvdGFsTnVtLCBleGNoYW5nZV9kYXRhLCByZW1haW5UaW1lOwogICAgICAgICAgICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgICAgICAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFyZXMuc3RhdGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAyOTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgICAgaW5mbzEgPSBfdGhpczguaW5mbzsKICAgICAgICAgICAgICAgICAgICAgICAgICBpbmZvMiA9IHJlcy5pbmZvOwogICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRhdGlvbiA9IGluZm8yLmJ1eUxpbWl0ID09IDEgJiYgIWluZm8yLnNlbGxQcmljZSAmJiAhaW5mbzIubm9WaXBQcmljZSB8fCBpbmZvMi5idXlMaW1pdCA9PSAyICYmICFpbmZvMi5zZWxsUHJpY2U7IC8vIOWIpOaWreW3sumihuWPlueahOeKtuaAgQogICAgICAgICAgICAgICAgICAgICAgICAgIC8vIOWkhOeQhumZkOaXtueahOWAkuiuoeaXtuetiemXrumimCAKCiAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGluZm8yLmNoaWxkRW51bUtleSA9PSAnQUNUX1NQRUNJQUxfT0ZGRVJfUFVSQ0hBU0VfTElNSVQnKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpczguaGFuZGxlckxpbWl0KGluZm8yLCBmbGFnKTsKICAgICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICAgIGluZm8xLmNoYW5uZWxUeXBlID0gX3RoaXM4Lm9wdGlvbnMuY2hhbm5lbFR5cGUgfHwgJyc7CiAgICAgICAgICAgICAgICAgICAgICAgICAgaW5mbyA9IF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgaW5mbzEpLCBpbmZvMik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXM4LmluZm8gPSBpbmZvOwogICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzOC5yZW1haW5UaW1lID0gaW5mbzIucmVtYWluVGltZTsKICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpczgucmVhZHkgPSB0cnVlOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAvLyDoh6rmiJHmuLjnibnljZbml7bpnIDosIPnlKjml6XljobmjqXlj6MgKOWNoeWIuOacieaViOacn+exu+Wei+S4uiAzLDQsNSkKICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoX3RoaXM4LmluZm8uc3VwcGxpZXJDb2RlID09ICdQQVJUWV9aV1knKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyDoh6rmiJHmuLjmmL7npLrkvJrlkZjku7fvvIjpgInmi6nml6XmnJ/lkI7ov5nph4znmoTku7fmoLzkuI3lj5jvvIkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzOC4kc2V0KF90aGlzOC5pbmZvLCAndHJhdmVsUHJpY2UnLCBpbmZvMi5zZWxsUHJpY2UpOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChfdGhpczguc2VsRGF0ZS5zZWxsUHJpY2UgfHwgX3RoaXM4LnNlbERhdGUuc2VsbFByaWNlID09IDApIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8g5Yik5pat5bey6YCJ5oup55qE5Lu35qC8CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzOC4kc2V0KF90aGlzOC5pbmZvLCAnc2VsbFByaWNlJywgX3RoaXM4LnNlbERhdGUuc2VsbFByaWNlKTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzOC4kc2V0KF90aGlzOC5pbmZvLCAnbm9WaXBQcmljZScsIF90aGlzOC5zZWxEYXRlLm5vVmlwUHJpY2UpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChbMywgNCwgNV0uaW5jbHVkZXMoaW5mbzEudmFsaWRpdHlUeXBlKSkgey8vIOWIpOaWremAieWumuaXpeacn++8jOaYvuekuuaXpeWOhgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyB0aGlzLnRyYXZlbEFjdE1vbnRoKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoX3RoaXM4LmluZm8ubGltaXRUaW1lID4gMCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyDliKTmlq3lvZPliY3ml7bpl7TmmK/lkKblj6/otK3kubAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxpbWl0VGltZSA9IF90aGlzOC5pbmZvLmxpbWl0VGltZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0ZSA9IG5ldyBEYXRlKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGggPSBkYXRlLmdldEhvdXJzKCkgPiA5ID8gZGF0ZS5nZXRIb3VycygpICsgJycgOiAnMCcgKyBkYXRlLmdldEhvdXJzKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG0gPSBkYXRlLmdldE1pbnV0ZXMoKSA+IDkgPyBkYXRlLmdldE1pbnV0ZXMoKSArICcnIDogJzAnICsgZGF0ZS5nZXRNaW51dGVzKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRheVRpbWUgPSBoICsgbTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChkYXlUaW1lID4gbGltaXRUaW1lKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpczguaGFuZGxlckJ0bign5b2T5YmN5LiN5Y+v6LSt5LmwJywgdHJ1ZSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgNTAwKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXM4LmhhbmRsZXJCdG4oX3RoaXM4LmluZm8uY2FyZFR5cGUgPT09ICdDQVJEX0RJUkVDVF9SRUNIQVJHRScgPyAn56uL5Y2z5YWF5YC8JyA6ICfnq4vljbPotK3kubAnKTsgLy8g5LuF6ZmQ5Lya5ZGY6LSt5Lmw77yM6Z2e5Lya5ZGY5pi+56S6CgoKICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaW5mbzIuYnV5TGltaXQgPT0gMiAmJiAhX3RoaXM4LnZpcFVzZXIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzOC5oYW5kbGVyQnRuKCflvIDpgJrlubbotK3kubAnKTsKICAgICAgICAgICAgICAgICAgICAgICAgICB9IC8vIOS7hemZkOS8muWRmOi0reS5sOS4lOS8muWRmOWUruS7t+S4ujDvvIzpnZ7kvJrlkZjop4bop5IKCgogICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpbmZvMi5idXlMaW1pdCA9PSAyICYmICFpbmZvMi5zZWxsUHJpY2UgJiYgIV90aGlzOC52aXBVc2VyKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpczguaGFuZGxlckJ0bign5byA6YCa5bm26aKG5Y+WJyk7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXM4Lm9wZW5fcmVjZWl2ZSA9IHRydWU7IC8vIOagh+W/l+aYr+W8gOmAmuW5tumihuWPluaMiemSrgogICAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKF90aGlzOC5pbmZvLnJlbWFpbk51bSA+IDAgfHwgX3RoaXM4LmluZm8uY2FyZFR5cGUgPT09ICdDQVJEX0RJUkVDVF9SRUNIQVJHRScpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChfdGhpczguaW5mby5jaGFubmVsVHlwZSA9PSAnQ0hBTk5FTF9DT05TVU1FUl9DT1VQT04nIHx8IF90aGlzOC5pbmZvLmNoYW5uZWxUeXBlID09ICdDSEFOTkVMX0ZPUlRVTkVfQ09VUE9OJykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyDmtojotLnliLjmuKDpgZPml7bvvIzliKTmlq3ljp/ku7cKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGluZm8yLndvcnRoID09IDApIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpczguaGFuZGxlckJ0bign56uL5Y2z6aKG5Y+WJyk7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzOC5mcmVlID0gdHJ1ZTsgLy/lj6/ku6XlhY3otLnpooblj5YKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFpbmZvMi5zZWxsUHJpY2UgJiYgX3RoaXM4LnZpcFVzZXIgfHwgaW5mbzIuYnV5TGltaXQgPT0gMSAmJiAhaW5mbzIuc2VsbFByaWNlICYmICFpbmZvMi5ub1ZpcFByaWNlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXM4LmhhbmRsZXJCdG4oJ+eri+WNs+mihuWPlicpOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpczguZnJlZSA9IHRydWU7IC8v5Y+v5Lul5YWN6LS56aKG5Y+WCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8g5bqT5a2Y5Li6MOaXtgogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNvbnRhdGlvbikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpczguaGFuZGxlckJ0bign5bey6aKG5a6MJywgdHJ1ZSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpczguaGFuZGxlckJ0bign5bey5ZSu572EJywgdHJ1ZSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaW5mbzIuYWN0U3RhdGUgPT0gMyB8fCBpbmZvMi5hY3RTdGF0ZSA9PSA0IHx8IGluZm8yLmFjdFN0YXRlID09IDUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8v5ZSu5Lu36YO95Li6MAogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNvbnRhdGlvbikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpczguaGFuZGxlckJ0bign5bey6aKG5a6MJywgdHJ1ZSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpczguaGFuZGxlckJ0bign5bey5ZSu572EJywgdHJ1ZSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaW5mbzIuYWN0U3RhdGUgPT0gMSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXM4LmhhbmRsZXJCdG4oJ+a0u+WKqOacquW8gOWniycsIHRydWUpOwogICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoaW5mbzIuYWN0U3RhdGUgPT0gMjApIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIOiHquaIkea4uOWNoeWIuOW9k+WJjeaXtumXtOS4jeWPr+i0reS5sAogICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXM4LmhhbmRsZXJCdG4oJ+W9k+WJjeS4jeWPr+i0reS5sCcsIHRydWUpOwogICAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgICAgdG90YWxOdW0gPSBOdW1iZXIoX3RoaXM4LnJlYWxJbmZvLnVzZXJCdXlOdW0pICsgTnVtYmVyKF90aGlzOC5yZWFsSW5mby51c2VyRnJlZVJlY2VpdmVOdW0pOyAvLyDlvZPliY3nlKjmiLfnmoTotK3kubDmlbDph4/lkozpooblj5bmlbDph4/mgLvlkowKICAgICAgICAgICAgICAgICAgICAgICAgICAvLyDmmK/lkKbpmZDliLbotK3kubAKCiAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGluZm8yLmxpbWl0U3RhdGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0b3RhbE51bSA+PSBpbmZvMi5saW1pdEZyZXF1ZW5jeSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyDnlKjmiLfmgLvmiJDlip/otK3kubDmlbDph4/lpKfkuo7pmZDliLbotK3kubDmlbDph48KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXM4LmhhbmRsZXJCdG4oJ+W3sui0reS5sCcsIHRydWUpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0b3RhbE51bSA+PSBpbmZvMi5saW1pdEZyZXF1ZW5jeSAmJiBjb250YXRpb24pIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8g5b2T5YmN55So5oi35b2T5YmN5rS75Yqo5Lit5oC75YWN6LS56aKG5Y+W5pWw6YeP5aSn5LqO6ZmQ5Yi26aKG5Y+W5pWw6YePCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzOC5oYW5kbGVyQnRuKCflt7Lpooblj5YnLCB0cnVlKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzOC5zaG93QnRuVHh0ID0gdHJ1ZTsgLy8gLi4uLi4uLi4uLi4uLi4uLi7kvJjljJbmlrDlop4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uCiAgICAgICAgICAgICAgICAgICAgICAgICAgLy8g5Yik5pat5LuO6ZmQ6LSt6L+b5YWlCgogICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghKGluZm8yLmNoaWxkRW51bUtleSA9PSAnQUNUX1NQRUNJQUxfT0ZGRVJfUFVSQ0hBU0VfTElNSVQnKSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDI1OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoX3RoaXM4LmluZm8ucmVtYWluTnVtKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMjQ7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzOC5oYW5kbGVyQnRuKCflt7LmiqLlrownLCB0cnVlKTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LmFicnVwdCgicmV0dXJuIik7CgogICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDI0OgogICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZXMuaW5mby5hY3RTdGF0ZSA9PSAxMSB8fCByZXMuaW5mby5hY3RTdGF0ZSA9PSAzKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpczguaGFuZGxlckJ0bign5bey5oqi5a6MJywgdHJ1ZSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGlmIChyZXMuaW5mby5saW1pdEFjdFN0YXRlID09IDgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgdGhpcy5oYW5kbGVyQnRuKCfpooTnuqbmj5DphpInLCBmYWxzZSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIH0gZWxzZSBpZiAocmVzLmluZm8ubGltaXRBY3RTdGF0ZSA9PSA5KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAgIHRoaXMuaGFuZGxlckJ0bign5bey6aKE57qmJywgZmFsc2UpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyB9IAogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlcy5pbmZvLmxpbWl0QWN0U3RhdGUgPT0gOCB8fCByZXMuaW5mby5saW1pdEFjdFN0YXRlID09IDkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXM4LmhhbmRsZXJCdG4oJ+acquW8gOWniycsIHRydWUpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChyZXMuaW5mby5saW1pdEFjdFN0YXRlID09IDEpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXM4LmhhbmRsZXJCdG4oJ+eri+WNs+aKoui0rScsIGZhbHNlKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAocmVzLmluZm8ubGltaXRBY3RTdGF0ZSA9PSAxMCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpczguaGFuZGxlckJ0bign5bey6LSt5LmwJywgdHJ1ZSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHJlcy5pbmZvLmxpbWl0QWN0U3RhdGUgPT0gMykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpczguaGFuZGxlckJ0bign5bey5oqi5a6MJywgdHJ1ZSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHJlcy5pbmZvLmxpbWl0QWN0U3RhdGUgPT0gMikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpczguaGFuZGxlckJ0bign5bey5oqi5a6MJywgdHJ1ZSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAyNToKICAgICAgICAgICAgICAgICAgICAgICAgICAvLyDliKTmlq3kuLrlhZHmjaLkuK3lv4Pov5vlhaUKICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoX3RoaXM4Lm9wdGlvbnMuaGFzRXhjaGFuZ2UgIT0gJycpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4Y2hhbmdlX2RhdGEgPSBfdGhpczguZXhjaGFuZ2VfZGF0YTsgLy8g5YWR5o2i5Lit5b+D5rS75Yqo5pWw5o2uCgogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGV4Y2hhbmdlX2RhdGEuaGFzRXhjaGFuZ2UpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXM4LmhhbmRsZXJCdG4oJ+W3suWFkeaNoicsIHRydWUpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGV4Y2hhbmdlX2RhdGEucmVtYWluTnVtID4gMCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChleGNoYW5nZV9kYXRhLnN0YXRlICE9IDIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzOC5oYW5kbGVyQnRuKCflt7Lnu5PmnZ8nLCB0cnVlKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGV4Y2hhbmdlX2RhdGEuY29uZGl0aW9uKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzOC5oYW5kbGVyQnRuKCfnq4vljbPlhZHmjaInLCBmYWxzZSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpczguaGFuZGxlckJ0bign56uL5Y2z5YWR5o2iJywgdHJ1ZSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzOC5oYW5kbGVyQnRuKCflt7LlhZHlrownLCB0cnVlKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgIH0gLy8g5aaC5p6c6ZyA6KaB5pi+56S65YCS6K6h5pe2CgoKICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaW5mbzIuc2hvd1RpbWUgJiYgaW5mbzIuY2hpbGRFbnVtS2V5ICE9ICdBQ1RfU1BFQ0lBTF9PRkZFUl9QVVJDSEFTRV9MSU1JVCcpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIC4uLi4uLi4uLi4uLi4uLi4uLuS8mOWMlue7k+adny4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGVhckludGVydmFsKF90aGlzOC50aW1lcik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZW1haW5UaW1lID0gX3RoaXM4LnJlbWFpblRpbWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpczgudGltZXIgPSBzZXRJbnRlcnZhbChmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZW1haW5UaW1lID49IDEwMDApIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZW1haW5UaW1lIC09IDEwMDA7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xlYXJJbnRlcnZhbChfdGhpczgudGltZXIpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpczgucmVtYWluVGltZSA9IHJlbWFpblRpbWUgfHwgMDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIDEwMDApOwogICAgICAgICAgICAgICAgICAgICAgICAgIH0gLy8gdGhpcy5nZXRDYXNoTnVtKCkgLy8g6I635Y+W5b2T5YmN5rS75Yqo5Y+v55So5oq15omj5pyA5aSn6YeR6aKd57qi5YyFCgoKICAgICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMzA7CiAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDI5OgogICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzOC5iYWNrX3RvKHJlcyk7CgogICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDMwOgogICAgICAgICAgICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICB9LCBfY2FsbGVlKTsKICAgICAgICAgICAgICAgIH0pKTsKCiAgICAgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKF94KSB7CiAgICAgICAgICAgICAgICAgIHJldHVybiBfcmVmLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgIH0oKSkuZmluYWxseShmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICBfdGhpczguJFRvYXN0LmNsZWFyKCk7CiAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICBjYXNlIDk6CiAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mi5zdG9wKCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9LCBfY2FsbGVlMik7CiAgICB9KSkoKTsKICB9LAogIC8vIOiOt+WPlua0u+WKqOWNoeWIuOivpuaDhQogIGdldENvdXBEZXRhaWw6IGZ1bmN0aW9uIGdldENvdXBEZXRhaWwoKSB7CiAgICB2YXIgX3RoaXM5ID0gdGhpczsKCiAgICByZXR1cm4gdGhpcy4kYXBpLmFjdF9jYXJkX2RldGFpbCh7CiAgICAgIGNhcmRJZDogdGhpcy5jYXJkSWQsCiAgICAgIGRldGFpbElkOiB0aGlzLmRldGFpbElkLAogICAgICBhY3RTbjogdGhpcy5vcHRpb25zLmFjdFNuCiAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgaWYgKHJlcy5zdGF0ZSkgewogICAgICAgIF90aGlzOS5pbmZvID0gX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKHt9LCBfdGhpczkuaW5mbyksIHJlcy5pbmZvKTsKICAgICAgICBfdGhpczkubWVkaWFMaXN0ID0gcmVzLmluZm8ubWVkaWFMaXN0OwoKICAgICAgICBpZiAocmVzLmluZm8uc2hvcFNob3cpIHsKICAgICAgICAgIF90aGlzOS5nZXRTdWl0U2hvcHMoKTsKICAgICAgICB9IC8vIOiHquaIkea4uOWNoeWIuOaXtuWVhuWutuivpuaDheaYvuekuuS4uuWbvuaWh+ivpuaDhQoKCiAgICAgICAgaWYgKF90aGlzOS5pbmZvLmRlc2NyaWJlKSB7CiAgICAgICAgICBfdGhpczkuZ3JhcGhpY0RldGFpbCA9IF90aGlzOS5pbmZvLmRlc2NyaWJlOwogICAgICAgIH0KCiAgICAgICAgX3RoaXM5LmdldEZpeGVkRGV0YWlsKHJlcy5pbmZvLnNob3BTbik7IC8vIOiOt+WPluWVhuWutuivpuaDhQoKICAgICAgfSBlbHNlIHsvLyB0aGlzLmJhY2tfdG8ocmVzKQogICAgICAgIH0KICAgIH0pOwogIH0sCiAgLy8g54m55Y2W5rS75Yqo54m55pyJ5L+h5oGvCiAgZ2V0U3BlY2lhbEluZm86IGZ1bmN0aW9uIGdldFNwZWNpYWxJbmZvKCkgewogICAgdmFyIF90aGlzMTAgPSB0aGlzOwoKICAgIHJldHVybiB0aGlzLiRhcGkuc3BlY2lhbF9zZWxsX2luZm8oewogICAgICBjaGFubmVsVHlwZTogdGhpcy5vcHRpb25zLmNoYW5uZWxUeXBlIHx8ICcnLAogICAgICBxckNvZGU6IHRoaXMub3B0aW9ucy5xckNvZGUgfHwgJycsCiAgICAgIGFjdFNuOiB0aGlzLm9wdGlvbnMuYWN0U24KICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICBpZiAocmVzLnN0YXRlKSB7CiAgICAgICAgX3RoaXMxMC5jYXJkSWQgPSByZXMuaW5mby5jYXJkSWQsIF90aGlzMTAuZGV0YWlsSWQgPSByZXMuaW5mby5kZXRhaWxJZDsKICAgICAgICBfdGhpczEwLmluZm8gPSBfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIF90aGlzMTAuaW5mbyksIHJlcy5pbmZvKTsKICAgICAgfSBlbHNlIHsvLyB0aGlzLmJhY2tfdG8ocmVzKQogICAgICB9CiAgICB9KTsKICB9LAogIC8vIOiOt+WPluWVhuWutuWbuuWumuS/oeaBrwogIGdldEZpeGVkRGV0YWlsOiBmdW5jdGlvbiBnZXRGaXhlZERldGFpbChzaG9wU24pIHsKICAgIHZhciBfdGhpczExID0gdGhpczsKCiAgICB0aGlzLiRhcGkuc2hvcF9maXhlZF9kZXRhaWwoewogICAgICBzaG9wU246IHNob3BTbiwKICAgICAgbGF0OiB0aGlzLmxvY2F0aW9uSW5mby5sYXRpdHVkZSwKICAgICAgbG5nOiB0aGlzLmxvY2F0aW9uSW5mby5sb25naXR1ZGUKICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICBpZiAocmVzLnN0YXRlKSB7CiAgICAgICAgX3RoaXMxMS5maXhlZERldGFpbCA9IHJlcy5pbmZvLnNob3A7CgogICAgICAgIGlmICghX3RoaXMxMS5pbmZvLmRlc2NyaWJlKSB7CiAgICAgICAgICBfdGhpczExLmdyYXBoaWNEZXRhaWwgPSByZXMuaW5mby5zaG9wLmRldGFpbDsKICAgICAgICB9CiAgICAgIH0KICAgIH0pOwogIH0sCiAgLy8g5YWz6Zet57qi5YyF5YiX6KGoCiAgY29sc2VjYXNoTWFzazogZnVuY3Rpb24gY29sc2VjYXNoTWFzaygpIHsKICAgIHRoaXMuY2FzaE1hc2sgPSAhdGhpcy5jYXNoTWFzazsKICB9LAogIC8vIOiOt+WPlua0u+WKqOe6ouWMheW9k+WJjeS6q+eUqOacgOWkp+e6ouWMhQogIGdldENhc2hOdW06IGZ1bmN0aW9uIGdldENhc2hOdW0oKSB7CiAgICB2YXIgX3RoaXMxMiA9IHRoaXM7CgogICAgdGhpcy4kVG9hc3QubG9hZGluZyh7CiAgICAgIG1lc3NhZ2U6ICfliqDovb3kuK0uLi4nLAogICAgICBmb3JiaWRDbGljazogdHJ1ZSwKICAgICAgZHVyYXRpb246IDAKICAgIH0pOwogICAgdmFyIHZpcF9jaGVjayA9ICF0aGlzLnZpcFVzZXIgJiYgdGhpcy5pbmZvLmJ1eUxpbWl0ID09IDIgPyB0cnVlIDogZmFsc2U7CiAgICB2YXIgcHJpY2UgPSB0aGlzLmluZm8uYnV5TGltaXQgPT0gMiB8fCB0aGlzLnZpcFVzZXIgPyB0aGlzLmluZm8uc2VsbFByaWNlIDogdGhpcy5pbmZvLm5vVmlwUHJpY2U7CiAgICB0aGlzLiRhcGkuY2FzaF9yZWRfbGlzdCh7CiAgICAgIGFjdFNuOiB0aGlzLm9wdGlvbnMuYWN0U24sCiAgICAgIGNpdHlJZDogdGhpcy5sb2NhdGlvbkNpdHkuY2l0eUlkLAogICAgICBvcGVuVmlwOiB2aXBfY2hlY2ssCiAgICAgIC8vIOaYr+WQpuWLvumAieS8muWRmOWNoQogICAgICB2aXBGZWU6IHZpcF9jaGVjayA/IHRoaXMudmlwRmVlIDogMCwKICAgICAgLy8g5Lya5ZGY5Y2h6YeR6aKdCiAgICAgIGFjdEZlZTogcHJpY2UsCiAgICAgIC8vIOa0u+WKqOmHkeminQogICAgICBjYXJkSWQ6IHRoaXMuaW5mby5jYXJkSWQgLy8g54m55Y2W5Y2h5Yi4aWQgfHwg56S85YyF5Lyg56m6CgogICAgfSkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgIGlmIChyZXMuc3RhdGUpIHsKICAgICAgICB2YXIgcmVkTGlzdCA9IHJlcy5pbmZvLmNhc2hSZWRMaXN0IHx8IFtdOwogICAgICAgIHZhciBjb25zdW1lckNvdXBvbkxpc3QgPSByZXMuaW5mby5jb25zdW1lckNvdXBvbkxpc3QgfHwgW107CiAgICAgICAgdmFyIHVzYWJsZUxpc3QgPSByZWRMaXN0LmZpbHRlcihmdW5jdGlvbiAoaXRlbSkgewogICAgICAgICAgcmV0dXJuIGl0ZW0uY3VycmVudEFibGVVc2U7CiAgICAgICAgfSk7IC8vIOi/h+a7pOWPr+eUqOe6ouWMhQoKICAgICAgICB2YXIgc29ydFVzYWJsZUxpc3QgPSB1c2FibGVMaXN0LnNvcnQoZnVuY3Rpb24gKGEsIGIpIHsKICAgICAgICAgIC8vIOmZjeW6j+aOkuW6jwogICAgICAgICAgcmV0dXJuIGIubW9uZXkgLSBhLm1vbmV5OwogICAgICAgIH0pOwogICAgICAgIF90aGlzMTIuc2VsQ2FzaHJlZCA9IHNvcnRVc2FibGVMaXN0WzBdOyAvLyDpgInkuK3mnIDlpKfnuqLljIUKCiAgICAgICAgaWYgKGNvbnN1bWVyQ291cG9uTGlzdC5sZW5ndGgpIHsKICAgICAgICAgIF90aGlzMTIuc2VsQ29uc3VtZXIgPSBjb25zdW1lckNvdXBvbkxpc3RbMF0gfHwge307IC8vIOmAieS4rea2iOi0ueWIuAogICAgICAgIH0KICAgICAgfQogICAgfSkuZmluYWxseShmdW5jdGlvbiAoKSB7CiAgICAgIF90aGlzMTIuJFRvYXN0LmNsZWFyKCk7CiAgICB9KTsKICB9LAogIC8vIOiOt+WPluS8muWRmOWNoeacgOS9juS7t+agvAogIHZpcFByaWNlOiBmdW5jdGlvbiB2aXBQcmljZSgpIHsKICAgIHZhciBfdGhpczEzID0gdGhpczsKCiAgICB0aGlzLiRhcGkudjFfNF92aXBfbG93UHJpY2UoewogICAgICB0b3BpY1R5cGU6IDEsCiAgICAgIHRvcGljU246IHRoaXMub3B0aW9ucy5hY3RTbgogICAgfSkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgIGlmIChyZXMuc3RhdGUpIHsKICAgICAgICBfdGhpczEzLnZpcEZlZSA9IHJlcy5pbmZvID8gcmVzLmluZm8ubG93UHJpY2UgfHwgMCA6IDA7CiAgICAgIH0KICAgIH0pOwogIH0sCiAgLy8g5YWz6Zet57qi5YyF5by556qX5pe2CiAgaGFzQ2FjaFJlZExpc3Q6IGZ1bmN0aW9uIGhhc0NhY2hSZWRMaXN0KF9yZWYyKSB7CiAgICB2YXIgZGV0YWlsID0gX3JlZjIuZGV0YWlsOwoKICAgIGlmIChkZXRhaWwgJiYgZGV0YWlsLmxlbmd0aCA+IDApIHsKICAgICAgLy8g6YeN5paw6K+35rGC57qi5YyF5o6l5Y+jCiAgICAgIC8vIHRoaXMuc2VsZWN0Q29tcG9uZW50KCcjYWN0aXZlQ2FzaCcpLmdldENhc2hMaXN0KCkKICAgICAgdGhpcy5nZXRDYXNoTnVtKCk7CiAgICB9IGVsc2UgewogICAgICB0aGlzLnNob3dQYWdlTW9kZWwgPSB0cnVlOwogICAgfQogIH0sCiAgLy8g6Ieq5oiR5ri45rS75Yqo6K+m5oOF6YCJ5oup5Lu35qC8CiAgc2VsRGF0ZUxpc3Q6IGZ1bmN0aW9uIHNlbERhdGVMaXN0KGl0ZW0pIHsKICAgIHZhciBkYXRlID0gewogICAgICB0ZXh0OiBpdGVtLmRhdGUuc3Vic3RyKDAsIDYpLAogICAgICBtb250aDogaXRlbS5kYXRlLnN1YnN0cig0LCAyKSwKICAgICAgeWVhcjogaXRlbS5kYXRlLnN1YnN0cigwLCA0KSwKICAgICAgZGF5OiBpdGVtLmRhdGUuc3Vic3RyKDYsIDIpCiAgICB9OwogICAgdGhpcy4kcmVmcy5jYWxlbmRhci5zaG93Q2FsZW5kYXJEYXRhKGRhdGUpOwogICAgdGhpcy5vcGVuQ2FsZW5kYXIoKTsgLy8g5pi+56S65pel5Y6G5by556qXCiAgfSwKICBvcGVuQ2FsZW5kYXI6IGZ1bmN0aW9uIG9wZW5DYWxlbmRhcigpIHsKICAgIHRoaXMuY2FsZW5kYXJNYXNrID0gdHJ1ZTsKICB9LAogIGdldFRyYXZlbE1vbnRoSW5mbzogZnVuY3Rpb24gZ2V0VHJhdmVsTW9udGhJbmZvKGRldGFpbCkgewogICAgLy8g5o6l5pS25pel5Y6G5L+h5oGvCiAgICBpZiAoZGV0YWlsLmRhdGFUeXBlID09ICdpbml0JykgewogICAgICAvLyDml6XljobliJ3lp4vljJbmlbDmja4KICAgICAgdGhpcy50cmF2ZWxNb250aEluZm8gPSBkZXRhaWw7CgogICAgICBpZiAoZGV0YWlsLnVuYWJsZUJ1eSkgewogICAgICAgIHRoaXMuaGFuZGxlckJ0bign5b2T5YmN5LiN5Y+v6LSt5LmwJywgdHJ1ZSk7CiAgICAgIH0KICAgIH0gZWxzZSBpZiAoZGV0YWlsLmRhdGFUeXBlID09ICdzZWxEYXRlJykgewogICAgICAvLyDpgInmi6nml6Xljobkv6Hmga8KICAgICAgdmFyIGluZm8gPSB0aGlzLmluZm87CiAgICAgIGluZm8uc2VsbFByaWNlID0gZGV0YWlsLnNlbGxQcmljZTsKICAgICAgaW5mby5ub1ZpcFByaWNlID0gZGV0YWlsLm5vVmlwUHJpY2U7CiAgICAgIHRoaXMuaW5mbyA9IGluZm87CiAgICAgIHRoaXMuc2VsRGF0ZSA9IGRldGFpbDsKICAgIH0KICB9LAogIGdldFJlY2VpdmVDb25kaXRpb246IGZ1bmN0aW9uIGdldFJlY2VpdmVDb25kaXRpb24oKSB7CiAgICB2YXIgX3RoaXMxNCA9IHRoaXM7CgogICAgcmV0dXJuIHRoaXMuJGFwaS5yZWNlaXZlX2NvbmRpdGlvbih7CiAgICAgIGFjdFNuOiB0aGlzLm9wdGlvbnMuYWN0U24KICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICBpZiAocmVzLnN0YXRlKSB7CiAgICAgICAgX3RoaXMxNC5jb25kaXRpb25JbmZvID0gcmVzLmluZm87CiAgICAgIH0KICAgIH0pOwogIH0KfSksIF9kZWZpbmVQcm9wZXJ0eShfbmFtZSRtaXhpbnMkY29tcHV0ZWQsICJjcmVhdGVkIiwgZnVuY3Rpb24gY3JlYXRlZCgpIHsKICB2YXIgb3B0aW9ucyA9IHRoaXMuJHJvdXRlLnF1ZXJ5OwogIG9wdGlvbnMuaGFzRXhjaGFuZ2UgPSBvcHRpb25zLmhhc0V4Y2hhbmdlIHx8ICcnOwogIG9wdGlvbnMudHlwZSA9IG9wdGlvbnMudHlwZSB8fCAnJzsKICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zOwoKICBpZiAob3B0aW9ucy5wb3B1cCkgewogICAgdGhpcy4kZGlhbG9nLmFsZXJ0KHsKICAgICAgdGl0bGU6ICfmj5DnpLonLAogICAgICBtZXNzYWdlOiAn6K6i5Y2V6LaF5pe25bey5Y+W5raI77yM6K+36YeN5paw5LiL5Y2VJywKICAgICAgY29uZmlybUJ1dHRvblRleHQ6ICfnoa7lrponLAogICAgICBjb25maXJtQnV0dG9uQ29sb3I6ICcjRDkwNjM0JwogICAgfSk7CiAgfQoKICB0aGlzLmdldEFjdERldGFpbCh0cnVlKTsKICB0aGlzLnZpcFByaWNlKCk7CgogIGlmICh0aGlzLm9wdGlvbnMuaGFzRXhjaGFuZ2UgIT0gJycpIHsKICAgIC8vIOWIpOaWreS4uuWFkeaNouS4reW/g+i/m+WFpQogICAgdGhpcy5leGNoYW5nZV9kYXRhID0gdGhpcy4kc2F2ZS5nZXQoJ3Nlc3Npb24nLCAnZXhjaGFuZ2VfZGF0YScpOyAvLyDlhZHmjaLkuK3lv4PmtLvliqjmlbDmja4KICB9CgogIHRoaXMuZ2V0UmVjZWl2ZUNvbmRpdGlvbigpOyAvLyDmmK/lkKbpnIDopoHloavlhpnnlKjmiLfkv6Hmga/lj4rlhbbmnaHku7YKCiAgdGhpcy5uZWVkQXV0aCA9IHRoaXMubmVlZEF1dGg7CiAgdGhpcy5nZXRGcmVlQmFnID0gdGhpcy5nZXRGcmVlQmFnOwogIHRoaXMudmlwVXNlciA9IHRoaXMudmlwQ2FyZEluZm8udmlwVXNlcjsKICB0aGlzLnNlbENhc2hyZWQgPSB7fTsKCiAgaWYgKHRoaXMuYWN0RGV0YWxVcGRhdGUpIHsKICAgIC8vIOWIt+aWsOa0u+WKqOaVsOaNrgogICAgdGhpcy5nZXRBY3REZXRhaWwodHJ1ZSk7CiAgICB0aGlzLmFjdERldGFsVXBkYXRlID0gZmFsc2U7CiAgfSAvLyDmtLvliqjku7fmoLzliLfmlrAKCgogIGlmICh0aGlzLnVwZGF0ZUZsYWcpIHsKICAgIHRoaXMucmVmcmVzaCA9IHRydWU7CiAgfSAvLyDnlKjmiLfkv6Hmga/mlbDmja4KCgogIHZhciB0cmF2ZWxJbmZvcm1hdGlvbiA9IHRoaXMuJHNhdmUuZ2V0KCdzZXNzaW9uJywgJ3RyYXZlbEluZm9ybWF0aW9uJyk7CgogIGlmICh0cmF2ZWxJbmZvcm1hdGlvbikgewogICAgdGhpcy50cmFjdmVsVXNlckxpc3QgPSB0cmF2ZWxJbmZvcm1hdGlvbi5mb3JtTGlzdDsKICAgIHRoaXMuc2VsRGF0ZSA9IHRyYXZlbEluZm9ybWF0aW9uLnNlbERhdGU7CgogICAgaWYgKHRoaXMub3B0aW9ucy5oYXNFeGNoYW5nZSAhPSAnJykgewogICAgICB0aGlzLmV4Y2hhbmdlKCk7CiAgICB9IGVsc2UgaWYgKHRoaXMuZnJlZSkgewogICAgICAvLyDlhY3otLnpooblj5YKICAgICAgdGhpcy5nZXRGcmVlKCk7CiAgICB9CiAgfQp9KSwgX2RlZmluZVByb3BlcnR5KF9uYW1lJG1peGlucyRjb21wdXRlZCwgImFjdGl2YXRlZCIsIGZ1bmN0aW9uIGFjdGl2YXRlZCgpIHt9KSwgX2RlZmluZVByb3BlcnR5KF9uYW1lJG1peGlucyRjb21wdXRlZCwgImRlc3Ryb3llZCIsIGZ1bmN0aW9uIGRlc3Ryb3llZCgpIHsKICAvLyDmuIXpmaTnlKjmiLfloavlhpnkv6Hmga8KICB0aGlzLiRzYXZlLnJlbW92ZUFycignc2Vzc2lvbicsIFsndHJhdmVsSW5mb3JtYXRpb24nLCAndXBkYXRlRmxhZyddKTsKfSksIF9uYW1lJG1peGlucyRjb21wdXRlZCk7"},null]}