{"remainingRequest":"C:\\Users\\Administrator\\Desktop\\vip_inline_h5\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\Administrator\\Desktop\\vip_inline_h5\\src\\utils\\wx.js","dependencies":[{"path":"C:\\Users\\Administrator\\Desktop\\vip_inline_h5\\src\\utils\\wx.js","mtime":1597285200190},{"path":"C:\\Users\\Administrator\\Desktop\\vip_inline_h5\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Administrator\\Desktop\\vip_inline_h5\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuaW5kZXgtb2YiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QudG8tc3RyaW5nIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLmV4ZWMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcuc3BsaXQiOwoKLyoNCiAqIEBEZXNjcmlwdGlvbjogDQogKiBAVmVyc2lvbjogMS4wDQogKiBAQXV0b3I6IGNoZXJyeQ0KICogQERhdGU6IDIwMjAtMDYtMTEgMTA6MTE6NTkNCiAqIEBMYXN0RWRpdG9yczogY2hlcnJ5DQogKiBATGFzdEVkaXRUaW1lOiAyMDIwLTA4LTExIDE2OjUwOjU5DQogKi8KaW1wb3J0IGF4aW9zIGZyb20gJ2F4aW9zJzsKaW1wb3J0IHd4IGZyb20gJ3dlaXhpbi1qcy1zZGsnOwppbXBvcnQgeyBXWF9BUEksIFdYX0FQSVMgfSBmcm9tICdAL2NvbmZpZy9pbmRleC5qcyc7CmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGdldFdYU2lnbigpIHsKICB2YXIgd3hQYXRoID0gd2luZG93LmxvY2F0aW9uLmhyZWYuaW5kZXhPZignaHR0cHMnKSA+IC0xID8gV1hfQVBJUyA6IFdYX0FQSTsgLy8gdmFyIHd4UGF0aCA9IFdYX0FQSQogIC8vIGlmKH53aW5kb3cubG9jYXRpb24uaHJlZi5pbmRleE9mKCdodHRwcycpKSB7CiAgLy8gICB3eFBhdGgucmVwbGFjZSgvXmh0dHAvLCAnaHR0cHMnKQogIC8vIH0KCiAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHsKICAgIGlmICghd2luZG93LiR3eCkgewogICAgICAvLyDlv4XloavvvIzpnIDopoHkvb/nlKjnmoRKU+aOpeWPo+WIl+ihqAogICAgICB2YXIganNBcGlMaXN0ID0gWydjaG9vc2VXWFBheScsICdnZXRMb2NhdGlvbicsICdvcGVuTG9jYXRpb24nLCAnaGlkZU1lbnVJdGVtcycsICdpbnZva2VNaW5pUHJvZ3JhbUFQSScsICdtaW5pUHJvZ3JhbScsICdjaG9vc2VJbWFnZScsICd1cGxvYWRJbWFnZScsICdjbG9zZVdpbmRvdycsICdvbk1lbnVTaGFyZUFwcE1lc3NhZ2UnLCAnc2NhblFSQ29kZSddOwogICAgICB2YXIgdXJsOwoKICAgICAgaWYgKH53aW5kb3cubG9jYXRpb24uaHJlZi5pbmRleE9mKCIjIikpIHsKICAgICAgICB1cmwgPSB3aW5kb3cubG9jYXRpb24uaHJlZi5zcGxpdCgnIycpWzBdOwogICAgICB9IGVsc2UgewogICAgICAgIC8vIHVybCA9IHdpbmRvdy5sb2NhdGlvbi5vcmlnaW4KICAgICAgICB1cmwgPSB3aW5kb3cubG9jYXRpb24uaHJlZjsKICAgICAgfQoKICAgICAgY29uc29sZS5sb2cod2luZG93LmxvY2F0aW9uLCAnd2luZG93LmxvY2F0aW9uJywgdXJsKTsKICAgICAgYXhpb3MucG9zdCh3eFBhdGgsIHsKICAgICAgICB1cmw6IHdpbmRvdy5lbmNvZGVVUklDb21wb25lbnQodXJsKQogICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICBpZiAocmVzLmRhdGEuc3VjY2VzcykgewogICAgICAgICAgd2luZG93LnNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICAgICAgICB2YXIgZGF0YSA9IHJlcy5kYXRhLmRhdGE7CiAgICAgICAgICAgIGNvbnNvbGUubG9nKGRhdGEsICdkYXRhJyk7CiAgICAgICAgICAgIHd4LmNvbmZpZyh7CiAgICAgICAgICAgICAgLy8gZGVidWc6IHRydWUsIC8vIOW8gOWQr+iwg+ivleaooeW8jyzosIPnlKjnmoTmiYDmnIlhcGnnmoTov5Tlm57lgLzkvJrlnKjlrqLmiLfnq69hbGVydOWHuuadpe+8jOiLpeimgeafpeeci+S8oOWFpeeahOWPguaVsO+8jOWPr+S7peWcqHBj56uv5omT5byA77yM5Y+C5pWw5L+h5oGv5Lya6YCa6L+HbG9n5omT5Ye677yM5LuF5ZyocGPnq6/ml7bmiY3kvJrmiZPljbDjgIIKICAgICAgICAgICAgICBhcHBJZDogZGF0YS5hcHBpZCwKICAgICAgICAgICAgICAvLyDlv4XloavvvIzkvIHkuJrlj7fnmoTllK/kuIDmoIfor4bvvIzmraTlpITloavlhpnkvIHkuJrlj7djb3JwaWQKICAgICAgICAgICAgICB0aW1lc3RhbXA6IGRhdGEudGltZXN0YW1wLAogICAgICAgICAgICAgIC8vIOW/heWhq++8jOeUn+aIkOetvuWQjeeahOaXtumXtOaIswogICAgICAgICAgICAgIG5vbmNlU3RyOiBkYXRhLm5vbmNlc3RyLAogICAgICAgICAgICAgIC8vIOW/heWhq++8jOeUn+aIkOetvuWQjeeahOmaj+acuuS4sgogICAgICAgICAgICAgIHNpZ25hdHVyZTogZGF0YS5zaWduLAogICAgICAgICAgICAgIC8vIOW/heWhq++8jOetvuWQje+8jOingemZhOW9lTEKICAgICAgICAgICAgICBqc0FwaUxpc3Q6IGpzQXBpTGlzdAogICAgICAgICAgICB9KTsKICAgICAgICAgICAgd3gucmVhZHkoZnVuY3Rpb24gKHJlcykgewogICAgICAgICAgICAgIC8v6Ieq5a6a5LmJ5YiG5LqrCiAgICAgICAgICAgICAgd3gub25NZW51U2hhcmVBcHBNZXNzYWdlKHsKICAgICAgICAgICAgICAgIHRpdGxlOiAnaeaIkeWuticsCiAgICAgICAgICAgICAgICAvLyDliIbkuqvmoIfpopgKICAgICAgICAgICAgICAgIGRlc2M6ICJp5oiR5a62IOeIseeUn+a0uyIsCiAgICAgICAgICAgICAgICBsaW5rOiB1cmwsCiAgICAgICAgICAgICAgICBpbWdVcmw6ICJodHRwOi8vZG95ZC10ZXN0Lm9zcy1jbi1zaGVuemhlbi5hbGl5dW5jcy5jb20vamtiL3d4bWVkaWEvMjAxODA5MTAvMTUzNjU3MzU3NzEwOC5wbmciLAogICAgICAgICAgICAgICAgLy8g5YiG5Lqr5Zu+5qCHCiAgICAgICAgICAgICAgICAvLyB0eXBlOiAnJywgLy8g5YiG5Lqr57G75Z6LLG11c2lj44CBdmlkZW/miJZsaW5r77yM5LiN5aGr6buY6K6k5Li6bGluawogICAgICAgICAgICAgICAgLy8gZGF0YVVybDogJycsIC8vIOWmguaenHR5cGXmmK9tdXNpY+aIlnZpZGVv77yM5YiZ6KaB5o+Q5L6b5pWw5o2u6ZO+5o6l77yM6buY6K6k5Li656m6CiAgICAgICAgICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbiBzdWNjZXNzKCkgewogICAgICAgICAgICAgICAgICAvLyDnlKjmiLfnoa7orqTliIbkuqvlkI7miafooYznmoTlm57osIPlh73mlbAKICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2codXJsLCAn5YiG5Lqr5Ye65Y6755qE5Zyw5Z2A6ZO+5o6lJyk7CiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgY2FuY2VsOiBmdW5jdGlvbiBjYW5jZWwoKSB7Ly8g55So5oi35Y+W5raI5YiG5Lqr5ZCO5omn6KGM55qE5Zue6LCD5Ye95pWwCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgd2luZG93LiR3eCA9IHd4OwogICAgICAgICAgICAgIHJlc29sdmUod3gpOwogICAgICAgICAgICB9KTsKICAgICAgICAgICAgd3guZXJyb3IoZnVuY3Rpb24gKHJlcykgewogICAgICAgICAgICAgIHJlamVjdChyZXMpOyAvLyBjb25maWfkv6Hmga/pqozor4HlpLHotKXkvJrmiafooYxlcnJvcuWHveaVsO+8jOWmguetvuWQjei/h+acn+WvvOiHtOmqjOivgeWksei0pe+8jOWFt+S9k+mUmeivr+S/oeaBr+WPr+S7peaJk+W8gGNvbmZpZ+eahGRlYnVn5qih5byP5p+l55yL77yM5Lmf5Y+v5Lul5Zyo6L+U5Zue55qEcmVz5Y+C5pWw5Lit5p+l55yL77yM5a+55LqOU1BB5Y+v5Lul5Zyo6L+Z6YeM5pu05paw562+5ZCN44CCCiAgICAgICAgICAgIH0pOwogICAgICAgICAgfSwgMCk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHJlamVjdChyZXMpOwogICAgICAgIH0KICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycm9yKSB7CiAgICAgICAgcmVqZWN0KGVycm9yKTsKICAgICAgfSk7CiAgICB9IGVsc2UgewogICAgICByZXNvbHZlKHdpbmRvdy4kd3gpOwogICAgfQogIH0pOwp9"},{"version":3,"sources":["C:/Users/Administrator/Desktop/vip_inline_h5/src/utils/wx.js"],"names":["axios","wx","WX_API","WX_APIS","getWXSign","wxPath","window","location","href","indexOf","Promise","resolve","reject","$wx","jsApiList","url","split","console","log","post","encodeURIComponent","then","res","data","success","setTimeout","config","appId","appid","timestamp","nonceStr","noncestr","signature","sign","ready","onMenuShareAppMessage","title","desc","link","imgUrl","cancel","error","catch"],"mappings":"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","sourcesContent":["/*\r\n * @Description: \r\n * @Version: 1.0\r\n * @Autor: cherry\r\n * @Date: 2020-06-11 10:11:59\r\n * @LastEditors: cherry\r\n * @LastEditTime: 2020-08-11 16:50:59\r\n */ \r\nimport axios from 'axios'\r\nimport wx from 'weixin-js-sdk'\r\nimport { WX_API, WX_APIS } from '@/config/index.js'\r\n\r\nexport default function getWXSign() {\r\n  var wxPath = window.location.href.indexOf('https') > -1 ? WX_APIS : WX_API \r\n  // var wxPath = WX_API\r\n  // if(~window.location.href.indexOf('https')) {\r\n  //   wxPath.replace(/^http/, 'https')\r\n  // }\r\n  return new Promise((resolve, reject) => {\r\n    if (!window.$wx) {\r\n      // 必填，需要使用的JS接口列表\r\n      const jsApiList = [\r\n        'chooseWXPay', \r\n        'getLocation', \r\n        'openLocation', \r\n        'hideMenuItems', \r\n        'invokeMiniProgramAPI',\r\n        'miniProgram', \r\n        'chooseImage',\r\n        'uploadImage', \r\n        'closeWindow',\r\n        'onMenuShareAppMessage',\r\n        'scanQRCode'\r\n      ] \r\n      let url\r\n      if(~window.location.href.indexOf(\"#\")) {\r\n        url = window.location.href.split('#')[0]\r\n      } else {\r\n        // url = window.location.origin\r\n        url = window.location.href\r\n      }\r\n      console.log(window.location, 'window.location', url)\r\n      axios.post( wxPath, {   \r\n        url: window.encodeURIComponent(url)\r\n      }).then(function(res) {\r\n        if(res.data.success) {\r\n          window.setTimeout(() => {\r\n            const data = res.data.data\r\n            console.log(data, 'data')\r\n            wx.config({\r\n              // debug: true, // 开启调试模式,调用的所有api的返回值会在客户端alert出来，若要查看传入的参数，可以在pc端打开，参数信息会通过log打出，仅在pc端时才会打印。\r\n              appId: data.appid, // 必填，企业号的唯一标识，此处填写企业号corpid\r\n              timestamp: data.timestamp, // 必填，生成签名的时间戳\r\n              nonceStr: data.noncestr, // 必填，生成签名的随机串\r\n              signature: data.sign, // 必填，签名，见附录1\r\n              jsApiList: jsApiList\r\n            })\r\n            wx.ready(function(res) {\r\n              //自定义分享\r\n              wx.onMenuShareAppMessage({\r\n                title: 'i我家', // 分享标题\r\n                desc: \"i我家 爱生活\",\r\n                link: url,\r\n                imgUrl: \"http://doyd-test.oss-cn-shenzhen.aliyuncs.com/jkb/wxmedia/20180910/1536573577108.png\", // 分享图标\r\n                // type: '', // 分享类型,music、video或link，不填默认为link\r\n                // dataUrl: '', // 如果type是music或video，则要提供数据链接，默认为空\r\n                success: function () { \r\n                    // 用户确认分享后执行的回调函数\r\n                    console.log(url, '分享出去的地址链接')\r\n                },\r\n                cancel: function () { \r\n                    // 用户取消分享后执行的回调函数\r\n                }\r\n              });\r\n              window.$wx = wx\r\n              resolve(wx)\r\n            })\r\n            wx.error(function(res) {\r\n              reject(res)\r\n              // config信息验证失败会执行error函数，如签名过期导致验证失败，具体错误信息可以打开config的debug模式查看，也可以在返回的res参数中查看，对于SPA可以在这里更新签名。\r\n            })\r\n          }, 0);\r\n        } else {\r\n          reject(res)\r\n        }\r\n      })\r\n      .catch(function(error) {\r\n        reject(error)\r\n      })\r\n    } else {\r\n      resolve(window.$wx)\r\n    }\r\n   \r\n  })\r\n}"]}]}