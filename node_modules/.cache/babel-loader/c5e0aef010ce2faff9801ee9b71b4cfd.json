{"remainingRequest":"C:\\Users\\Administrator\\Desktop\\vip_inline_h5\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\Administrator\\Desktop\\vip_inline_h5\\src\\plugins\\wxqrcode.js","dependencies":[{"path":"C:\\Users\\Administrator\\Desktop\\vip_inline_h5\\src\\plugins\\wxqrcode.js","mtime":1596624611211},{"path":"C:\\Users\\Administrator\\Desktop\\vip_inline_h5\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Administrator\\Desktop\\vip_inline_h5\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwpleHBvcnRzLmRlZmF1bHQgPSB2b2lkIDA7CgovKioNCiAqIHFyY29kZQ0KICogQHBhcmFtIHR5cGVOdW1iZXIgMSB0byA0MA0KICogQHBhcmFtIGVycm9yQ29ycmVjdExldmVsICdMJywnTScsJ1EnLCdIJw0KICovCnZhciBxcmNvZGUgPSBmdW5jdGlvbiAodHlwZU51bWJlciwgZXJyb3JDb3JyZWN0TGV2ZWwpIHsKICB2YXIgUEFEMCA9IDB4RUM7CiAgdmFyIFBBRDEgPSAweDExOwogIHZhciBfdHlwZU51bWJlciA9IHR5cGVOdW1iZXI7CiAgdmFyIF9lcnJvckNvcnJlY3RMZXZlbCA9IFFSRXJyb3JDb3JyZWN0TGV2ZWxbZXJyb3JDb3JyZWN0TGV2ZWxdOwogIHZhciBfbW9kdWxlcyA9IG51bGw7CiAgdmFyIF9tb2R1bGVDb3VudCA9IDA7CiAgdmFyIF9kYXRhQ2FjaGUgPSBudWxsOwoKICB2YXIgX2RhdGFMaXN0ID0gbmV3IEFycmF5KCk7CgogIHZhciBfdGhpcyA9IHt9OwoKICB2YXIgbWFrZUltcGwgPSBmdW5jdGlvbiAodGVzdCwgbWFza1BhdHRlcm4pIHsKICAgIF9tb2R1bGVDb3VudCA9IF90eXBlTnVtYmVyICogNCArIDE3OwoKICAgIF9tb2R1bGVzID0gZnVuY3Rpb24gKG1vZHVsZUNvdW50KSB7CiAgICAgIHZhciBtb2R1bGVzID0gbmV3IEFycmF5KG1vZHVsZUNvdW50KTsKCiAgICAgIGZvciAodmFyIHJvdyA9IDA7IHJvdyA8IG1vZHVsZUNvdW50OyByb3cgKz0gMSkgewogICAgICAgIG1vZHVsZXNbcm93XSA9IG5ldyBBcnJheShtb2R1bGVDb3VudCk7CgogICAgICAgIGZvciAodmFyIGNvbCA9IDA7IGNvbCA8IG1vZHVsZUNvdW50OyBjb2wgKz0gMSkgewogICAgICAgICAgbW9kdWxlc1tyb3ddW2NvbF0gPSBudWxsOwogICAgICAgIH0KICAgICAgfQoKICAgICAgcmV0dXJuIG1vZHVsZXM7CiAgICB9KF9tb2R1bGVDb3VudCk7CgogICAgc2V0dXBQb3NpdGlvblByb2JlUGF0dGVybigwLCAwKTsKICAgIHNldHVwUG9zaXRpb25Qcm9iZVBhdHRlcm4oX21vZHVsZUNvdW50IC0gNywgMCk7CiAgICBzZXR1cFBvc2l0aW9uUHJvYmVQYXR0ZXJuKDAsIF9tb2R1bGVDb3VudCAtIDcpOwogICAgc2V0dXBQb3NpdGlvbkFkanVzdFBhdHRlcm4oKTsKICAgIHNldHVwVGltaW5nUGF0dGVybigpOwogICAgc2V0dXBUeXBlSW5mbyh0ZXN0LCBtYXNrUGF0dGVybik7CgogICAgaWYgKF90eXBlTnVtYmVyID49IDcpIHsKICAgICAgc2V0dXBUeXBlTnVtYmVyKHRlc3QpOwogICAgfQoKICAgIGlmIChfZGF0YUNhY2hlID09IG51bGwpIHsKICAgICAgX2RhdGFDYWNoZSA9IGNyZWF0ZURhdGEoX3R5cGVOdW1iZXIsIF9lcnJvckNvcnJlY3RMZXZlbCwgX2RhdGFMaXN0KTsKICAgIH0KCiAgICBtYXBEYXRhKF9kYXRhQ2FjaGUsIG1hc2tQYXR0ZXJuKTsKICB9OwoKICB2YXIgc2V0dXBQb3NpdGlvblByb2JlUGF0dGVybiA9IGZ1bmN0aW9uIChyb3csIGNvbCkgewogICAgZm9yICh2YXIgciA9IC0xOyByIDw9IDc7IHIgKz0gMSkgewogICAgICBpZiAocm93ICsgciA8PSAtMSB8fCBfbW9kdWxlQ291bnQgPD0gcm93ICsgcikgY29udGludWU7CgogICAgICBmb3IgKHZhciBjID0gLTE7IGMgPD0gNzsgYyArPSAxKSB7CiAgICAgICAgaWYgKGNvbCArIGMgPD0gLTEgfHwgX21vZHVsZUNvdW50IDw9IGNvbCArIGMpIGNvbnRpbnVlOwoKICAgICAgICBpZiAoMCA8PSByICYmIHIgPD0gNiAmJiAoYyA9PSAwIHx8IGMgPT0gNikgfHwgMCA8PSBjICYmIGMgPD0gNiAmJiAociA9PSAwIHx8IHIgPT0gNikgfHwgMiA8PSByICYmIHIgPD0gNCAmJiAyIDw9IGMgJiYgYyA8PSA0KSB7CiAgICAgICAgICBfbW9kdWxlc1tyb3cgKyByXVtjb2wgKyBjXSA9IHRydWU7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIF9tb2R1bGVzW3JvdyArIHJdW2NvbCArIGNdID0gZmFsc2U7CiAgICAgICAgfQogICAgICB9CiAgICB9CiAgfTsKCiAgdmFyIGdldEJlc3RNYXNrUGF0dGVybiA9IGZ1bmN0aW9uICgpIHsKICAgIHZhciBtaW5Mb3N0UG9pbnQgPSAwOwogICAgdmFyIHBhdHRlcm4gPSAwOwoKICAgIGZvciAodmFyIGkgPSAwOyBpIDwgODsgaSArPSAxKSB7CiAgICAgIG1ha2VJbXBsKHRydWUsIGkpOwogICAgICB2YXIgbG9zdFBvaW50ID0gUVJVdGlsLmdldExvc3RQb2ludChfdGhpcyk7CgogICAgICBpZiAoaSA9PSAwIHx8IG1pbkxvc3RQb2ludCA+IGxvc3RQb2ludCkgewogICAgICAgIG1pbkxvc3RQb2ludCA9IGxvc3RQb2ludDsKICAgICAgICBwYXR0ZXJuID0gaTsKICAgICAgfQogICAgfQoKICAgIHJldHVybiBwYXR0ZXJuOwogIH07CgogIHZhciBzZXR1cFRpbWluZ1BhdHRlcm4gPSBmdW5jdGlvbiAoKSB7CiAgICBmb3IgKHZhciByID0gODsgciA8IF9tb2R1bGVDb3VudCAtIDg7IHIgKz0gMSkgewogICAgICBpZiAoX21vZHVsZXNbcl1bNl0gIT0gbnVsbCkgewogICAgICAgIGNvbnRpbnVlOwogICAgICB9CgogICAgICBfbW9kdWxlc1tyXVs2XSA9IHIgJSAyID09IDA7CiAgICB9CgogICAgZm9yICh2YXIgYyA9IDg7IGMgPCBfbW9kdWxlQ291bnQgLSA4OyBjICs9IDEpIHsKICAgICAgaWYgKF9tb2R1bGVzWzZdW2NdICE9IG51bGwpIHsKICAgICAgICBjb250aW51ZTsKICAgICAgfQoKICAgICAgX21vZHVsZXNbNl1bY10gPSBjICUgMiA9PSAwOwogICAgfQogIH07CgogIHZhciBzZXR1cFBvc2l0aW9uQWRqdXN0UGF0dGVybiA9IGZ1bmN0aW9uICgpIHsKICAgIHZhciBwb3MgPSBRUlV0aWwuZ2V0UGF0dGVyblBvc2l0aW9uKF90eXBlTnVtYmVyKTsKCiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHBvcy5sZW5ndGg7IGkgKz0gMSkgewogICAgICBmb3IgKHZhciBqID0gMDsgaiA8IHBvcy5sZW5ndGg7IGogKz0gMSkgewogICAgICAgIHZhciByb3cgPSBwb3NbaV07CiAgICAgICAgdmFyIGNvbCA9IHBvc1tqXTsKCiAgICAgICAgaWYgKF9tb2R1bGVzW3Jvd11bY29sXSAhPSBudWxsKSB7CiAgICAgICAgICBjb250aW51ZTsKICAgICAgICB9CgogICAgICAgIGZvciAodmFyIHIgPSAtMjsgciA8PSAyOyByICs9IDEpIHsKICAgICAgICAgIGZvciAodmFyIGMgPSAtMjsgYyA8PSAyOyBjICs9IDEpIHsKICAgICAgICAgICAgaWYgKHIgPT0gLTIgfHwgciA9PSAyIHx8IGMgPT0gLTIgfHwgYyA9PSAyIHx8IHIgPT0gMCAmJiBjID09IDApIHsKICAgICAgICAgICAgICBfbW9kdWxlc1tyb3cgKyByXVtjb2wgKyBjXSA9IHRydWU7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgX21vZHVsZXNbcm93ICsgcl1bY29sICsgY10gPSBmYWxzZTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQogICAgfQogIH07CgogIHZhciBzZXR1cFR5cGVOdW1iZXIgPSBmdW5jdGlvbiAodGVzdCkgewogICAgdmFyIGJpdHMgPSBRUlV0aWwuZ2V0QkNIVHlwZU51bWJlcihfdHlwZU51bWJlcik7CgogICAgZm9yICh2YXIgaSA9IDA7IGkgPCAxODsgaSArPSAxKSB7CiAgICAgIHZhciBtb2QgPSAhdGVzdCAmJiAoYml0cyA+PiBpICYgMSkgPT0gMTsKICAgICAgX21vZHVsZXNbTWF0aC5mbG9vcihpIC8gMyldW2kgJSAzICsgX21vZHVsZUNvdW50IC0gOCAtIDNdID0gbW9kOwogICAgfQoKICAgIGZvciAodmFyIGkgPSAwOyBpIDwgMTg7IGkgKz0gMSkgewogICAgICB2YXIgbW9kID0gIXRlc3QgJiYgKGJpdHMgPj4gaSAmIDEpID09IDE7CiAgICAgIF9tb2R1bGVzW2kgJSAzICsgX21vZHVsZUNvdW50IC0gOCAtIDNdW01hdGguZmxvb3IoaSAvIDMpXSA9IG1vZDsKICAgIH0KICB9OwoKICB2YXIgc2V0dXBUeXBlSW5mbyA9IGZ1bmN0aW9uICh0ZXN0LCBtYXNrUGF0dGVybikgewogICAgdmFyIGRhdGEgPSBfZXJyb3JDb3JyZWN0TGV2ZWwgPDwgMyB8IG1hc2tQYXR0ZXJuOwogICAgdmFyIGJpdHMgPSBRUlV0aWwuZ2V0QkNIVHlwZUluZm8oZGF0YSk7CiAgICAvKip2ZXJ0aWNhbCAqLwoKICAgIGZvciAodmFyIGkgPSAwOyBpIDwgMTU7IGkgKz0gMSkgewogICAgICB2YXIgbW9kID0gIXRlc3QgJiYgKGJpdHMgPj4gaSAmIDEpID09IDE7CgogICAgICBpZiAoaSA8IDYpIHsKICAgICAgICBfbW9kdWxlc1tpXVs4XSA9IG1vZDsKICAgICAgfSBlbHNlIGlmIChpIDwgOCkgewogICAgICAgIF9tb2R1bGVzW2kgKyAxXVs4XSA9IG1vZDsKICAgICAgfSBlbHNlIHsKICAgICAgICBfbW9kdWxlc1tfbW9kdWxlQ291bnQgLSAxNSArIGldWzhdID0gbW9kOwogICAgICB9CiAgICB9CiAgICAvKipob3Jpem9udGFsICovCgoKICAgIGZvciAodmFyIGkgPSAwOyBpIDwgMTU7IGkgKz0gMSkgewogICAgICB2YXIgbW9kID0gIXRlc3QgJiYgKGJpdHMgPj4gaSAmIDEpID09IDE7CgogICAgICBpZiAoaSA8IDgpIHsKICAgICAgICBfbW9kdWxlc1s4XVtfbW9kdWxlQ291bnQgLSBpIC0gMV0gPSBtb2Q7CiAgICAgIH0gZWxzZSBpZiAoaSA8IDkpIHsKICAgICAgICBfbW9kdWxlc1s4XVsxNSAtIGkgLSAxICsgMV0gPSBtb2Q7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgX21vZHVsZXNbOF1bMTUgLSBpIC0gMV0gPSBtb2Q7CiAgICAgIH0KICAgIH0KICAgIC8qKmZpeGVkIG1vZHVsZSAqLwoKCiAgICBfbW9kdWxlc1tfbW9kdWxlQ291bnQgLSA4XVs4XSA9ICF0ZXN0OwogIH07CgogIHZhciBtYXBEYXRhID0gZnVuY3Rpb24gKGRhdGEsIG1hc2tQYXR0ZXJuKSB7CiAgICB2YXIgaW5jID0gLTE7CiAgICB2YXIgcm93ID0gX21vZHVsZUNvdW50IC0gMTsKICAgIHZhciBiaXRJbmRleCA9IDc7CiAgICB2YXIgYnl0ZUluZGV4ID0gMDsKICAgIHZhciBtYXNrRnVuYyA9IFFSVXRpbC5nZXRNYXNrRnVuY3Rpb24obWFza1BhdHRlcm4pOwoKICAgIGZvciAodmFyIGNvbCA9IF9tb2R1bGVDb3VudCAtIDE7IGNvbCA+IDA7IGNvbCAtPSAyKSB7CiAgICAgIGlmIChjb2wgPT0gNikgY29sIC09IDE7CgogICAgICB3aGlsZSAodHJ1ZSkgewogICAgICAgIGZvciAodmFyIGMgPSAwOyBjIDwgMjsgYyArPSAxKSB7CiAgICAgICAgICBpZiAoX21vZHVsZXNbcm93XVtjb2wgLSBjXSA9PSBudWxsKSB7CiAgICAgICAgICAgIHZhciBkYXJrID0gZmFsc2U7CgogICAgICAgICAgICBpZiAoYnl0ZUluZGV4IDwgZGF0YS5sZW5ndGgpIHsKICAgICAgICAgICAgICBkYXJrID0gKGRhdGFbYnl0ZUluZGV4XSA+Pj4gYml0SW5kZXggJiAxKSA9PSAxOwogICAgICAgICAgICB9CgogICAgICAgICAgICB2YXIgbWFzayA9IG1hc2tGdW5jKHJvdywgY29sIC0gYyk7CgogICAgICAgICAgICBpZiAobWFzaykgewogICAgICAgICAgICAgIGRhcmsgPSAhZGFyazsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgX21vZHVsZXNbcm93XVtjb2wgLSBjXSA9IGRhcms7CiAgICAgICAgICAgIGJpdEluZGV4IC09IDE7CgogICAgICAgICAgICBpZiAoYml0SW5kZXggPT0gLTEpIHsKICAgICAgICAgICAgICBieXRlSW5kZXggKz0gMTsKICAgICAgICAgICAgICBiaXRJbmRleCA9IDc7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIHJvdyArPSBpbmM7CgogICAgICAgIGlmIChyb3cgPCAwIHx8IF9tb2R1bGVDb3VudCA8PSByb3cpIHsKICAgICAgICAgIHJvdyAtPSBpbmM7CiAgICAgICAgICBpbmMgPSAtaW5jOwogICAgICAgICAgYnJlYWs7CiAgICAgICAgfQogICAgICB9CiAgICB9CiAgfTsKCiAgdmFyIGNyZWF0ZUJ5dGVzID0gZnVuY3Rpb24gKGJ1ZmZlciwgcnNCbG9ja3MpIHsKICAgIHZhciBvZmZzZXQgPSAwOwogICAgdmFyIG1heERjQ291bnQgPSAwOwogICAgdmFyIG1heEVjQ291bnQgPSAwOwogICAgdmFyIGRjZGF0YSA9IG5ldyBBcnJheShyc0Jsb2Nrcy5sZW5ndGgpOwogICAgdmFyIGVjZGF0YSA9IG5ldyBBcnJheShyc0Jsb2Nrcy5sZW5ndGgpOwoKICAgIGZvciAodmFyIHIgPSAwOyByIDwgcnNCbG9ja3MubGVuZ3RoOyByICs9IDEpIHsKICAgICAgdmFyIGRjQ291bnQgPSByc0Jsb2Nrc1tyXS5kYXRhQ291bnQ7CiAgICAgIHZhciBlY0NvdW50ID0gcnNCbG9ja3Nbcl0udG90YWxDb3VudCAtIGRjQ291bnQ7CiAgICAgIG1heERjQ291bnQgPSBNYXRoLm1heChtYXhEY0NvdW50LCBkY0NvdW50KTsKICAgICAgbWF4RWNDb3VudCA9IE1hdGgubWF4KG1heEVjQ291bnQsIGVjQ291bnQpOwogICAgICBkY2RhdGFbcl0gPSBuZXcgQXJyYXkoZGNDb3VudCk7CgogICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGRjZGF0YVtyXS5sZW5ndGg7IGkgKz0gMSkgewogICAgICAgIGRjZGF0YVtyXVtpXSA9IDB4ZmYgJiBidWZmZXIuZ2V0QnVmZmVyKClbaSArIG9mZnNldF07CiAgICAgIH0KCiAgICAgIG9mZnNldCArPSBkY0NvdW50OwogICAgICB2YXIgcnNQb2x5ID0gUVJVdGlsLmdldEVycm9yQ29ycmVjdFBvbHlub21pYWwoZWNDb3VudCk7CiAgICAgIHZhciByYXdQb2x5ID0gcXJQb2x5bm9taWFsKGRjZGF0YVtyXSwgcnNQb2x5LmdldExlbmd0aCgpIC0gMSk7CiAgICAgIHZhciBtb2RQb2x5ID0gcmF3UG9seS5tb2QocnNQb2x5KTsKICAgICAgZWNkYXRhW3JdID0gbmV3IEFycmF5KHJzUG9seS5nZXRMZW5ndGgoKSAtIDEpOwoKICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBlY2RhdGFbcl0ubGVuZ3RoOyBpICs9IDEpIHsKICAgICAgICB2YXIgbW9kSW5kZXggPSBpICsgbW9kUG9seS5nZXRMZW5ndGgoKSAtIGVjZGF0YVtyXS5sZW5ndGg7CiAgICAgICAgZWNkYXRhW3JdW2ldID0gbW9kSW5kZXggPj0gMCA/IG1vZFBvbHkuZ2V0QXQobW9kSW5kZXgpIDogMDsKICAgICAgfQogICAgfQoKICAgIHZhciB0b3RhbENvZGVDb3VudCA9IDA7CgogICAgZm9yICh2YXIgaSA9IDA7IGkgPCByc0Jsb2Nrcy5sZW5ndGg7IGkgKz0gMSkgewogICAgICB0b3RhbENvZGVDb3VudCArPSByc0Jsb2Nrc1tpXS50b3RhbENvdW50OwogICAgfQoKICAgIHZhciBkYXRhID0gbmV3IEFycmF5KHRvdGFsQ29kZUNvdW50KTsKICAgIHZhciBpbmRleCA9IDA7CgogICAgZm9yICh2YXIgaSA9IDA7IGkgPCBtYXhEY0NvdW50OyBpICs9IDEpIHsKICAgICAgZm9yICh2YXIgciA9IDA7IHIgPCByc0Jsb2Nrcy5sZW5ndGg7IHIgKz0gMSkgewogICAgICAgIGlmIChpIDwgZGNkYXRhW3JdLmxlbmd0aCkgewogICAgICAgICAgZGF0YVtpbmRleF0gPSBkY2RhdGFbcl1baV07CiAgICAgICAgICBpbmRleCArPSAxOwogICAgICAgIH0KICAgICAgfQogICAgfQoKICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbWF4RWNDb3VudDsgaSArPSAxKSB7CiAgICAgIGZvciAodmFyIHIgPSAwOyByIDwgcnNCbG9ja3MubGVuZ3RoOyByICs9IDEpIHsKICAgICAgICBpZiAoaSA8IGVjZGF0YVtyXS5sZW5ndGgpIHsKICAgICAgICAgIGRhdGFbaW5kZXhdID0gZWNkYXRhW3JdW2ldOwogICAgICAgICAgaW5kZXggKz0gMTsKICAgICAgICB9CiAgICAgIH0KICAgIH0KCiAgICByZXR1cm4gZGF0YTsKICB9OwoKICB2YXIgY3JlYXRlRGF0YSA9IGZ1bmN0aW9uICh0eXBlTnVtYmVyLCBlcnJvckNvcnJlY3RMZXZlbCwgZGF0YUxpc3QpIHsKICAgIHZhciByc0Jsb2NrcyA9IFFSUlNCbG9jay5nZXRSU0Jsb2Nrcyh0eXBlTnVtYmVyLCBlcnJvckNvcnJlY3RMZXZlbCk7CiAgICB2YXIgYnVmZmVyID0gcXJCaXRCdWZmZXIoKTsKCiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGRhdGFMaXN0Lmxlbmd0aDsgaSArPSAxKSB7CiAgICAgIHZhciBkYXRhID0gZGF0YUxpc3RbaV07CiAgICAgIGJ1ZmZlci5wdXQoZGF0YS5nZXRNb2RlKCksIDQpOwogICAgICBidWZmZXIucHV0KGRhdGEuZ2V0TGVuZ3RoKCksIFFSVXRpbC5nZXRMZW5ndGhJbkJpdHMoZGF0YS5nZXRNb2RlKCksIHR5cGVOdW1iZXIpKTsKICAgICAgZGF0YS53cml0ZShidWZmZXIpOwogICAgfQogICAgLyoqY2FsYyBudW0gbWF4IGRhdGEuICovCgoKICAgIHZhciB0b3RhbERhdGFDb3VudCA9IDA7CgogICAgZm9yICh2YXIgaSA9IDA7IGkgPCByc0Jsb2Nrcy5sZW5ndGg7IGkgKz0gMSkgewogICAgICB0b3RhbERhdGFDb3VudCArPSByc0Jsb2Nrc1tpXS5kYXRhQ291bnQ7CiAgICB9CgogICAgaWYgKGJ1ZmZlci5nZXRMZW5ndGhJbkJpdHMoKSA+IHRvdGFsRGF0YUNvdW50ICogOCkgewogICAgICB0aHJvdyBuZXcgRXJyb3IoJ2NvZGUgbGVuZ3RoIG92ZXJmbG93LiAoJyArIGJ1ZmZlci5nZXRMZW5ndGhJbkJpdHMoKSArICc+JyArIHRvdGFsRGF0YUNvdW50ICogOCArICcpJyk7CiAgICB9CiAgICAvKiplbmQgY29kZSAqLwoKCiAgICBpZiAoYnVmZmVyLmdldExlbmd0aEluQml0cygpICsgNCA8PSB0b3RhbERhdGFDb3VudCAqIDgpIHsKICAgICAgYnVmZmVyLnB1dCgwLCA0KTsKICAgIH0KICAgIC8qKiBwYWRkaW5nICovCgoKICAgIHdoaWxlIChidWZmZXIuZ2V0TGVuZ3RoSW5CaXRzKCkgJSA4ICE9IDApIHsKICAgICAgYnVmZmVyLnB1dEJpdChmYWxzZSk7CiAgICB9CiAgICAvKipwYWRkaW5nICovCgoKICAgIHdoaWxlICh0cnVlKSB7CiAgICAgIGlmIChidWZmZXIuZ2V0TGVuZ3RoSW5CaXRzKCkgPj0gdG90YWxEYXRhQ291bnQgKiA4KSB7CiAgICAgICAgYnJlYWs7CiAgICAgIH0KCiAgICAgIGJ1ZmZlci5wdXQoUEFEMCwgOCk7CgogICAgICBpZiAoYnVmZmVyLmdldExlbmd0aEluQml0cygpID49IHRvdGFsRGF0YUNvdW50ICogOCkgewogICAgICAgIGJyZWFrOwogICAgICB9CgogICAgICBidWZmZXIucHV0KFBBRDEsIDgpOwogICAgfQoKICAgIHJldHVybiBjcmVhdGVCeXRlcyhidWZmZXIsIHJzQmxvY2tzKTsKICB9OwoKICBfdGhpcy5hZGREYXRhID0gZnVuY3Rpb24gKGRhdGEpIHsKICAgIHZhciBuZXdEYXRhID0gcXI4Qml0Qnl0ZShkYXRhKTsKCiAgICBfZGF0YUxpc3QucHVzaChuZXdEYXRhKTsKCiAgICBfZGF0YUNhY2hlID0gbnVsbDsKICB9OwoKICBfdGhpcy5pc0RhcmsgPSBmdW5jdGlvbiAocm93LCBjb2wpIHsKICAgIGlmIChyb3cgPCAwIHx8IF9tb2R1bGVDb3VudCA8PSByb3cgfHwgY29sIDwgMCB8fCBfbW9kdWxlQ291bnQgPD0gY29sKSB7CiAgICAgIHRocm93IG5ldyBFcnJvcihyb3cgKyAnLCcgKyBjb2wpOwogICAgfQoKICAgIHJldHVybiBfbW9kdWxlc1tyb3ddW2NvbF07CiAgfTsKCiAgX3RoaXMuZ2V0TW9kdWxlQ291bnQgPSBmdW5jdGlvbiAoKSB7CiAgICByZXR1cm4gX21vZHVsZUNvdW50OwogIH07CgogIF90aGlzLm1ha2UgPSBmdW5jdGlvbiAoKSB7CiAgICBtYWtlSW1wbChmYWxzZSwgZ2V0QmVzdE1hc2tQYXR0ZXJuKCkpOwogIH07CgogIF90aGlzLmNyZWF0ZVRhYmxlVGFnID0gZnVuY3Rpb24gKGNlbGxTaXplLCBtYXJnaW4pIHsKICAgIGNlbGxTaXplID0gY2VsbFNpemUgfHwgMjsKICAgIG1hcmdpbiA9IHR5cGVvZiBtYXJnaW4gPT0gJ3VuZGVmaW5lZCcgPyBjZWxsU2l6ZSAqIDQgOiBtYXJnaW47CiAgICB2YXIgcXJIdG1sID0gJyc7CiAgICBxckh0bWwgKz0gJzx0YWJsZSBzdHlsZT0iJzsKICAgIHFySHRtbCArPSAnIGJvcmRlci13aWR0aDogMHB4OyBib3JkZXItc3R5bGU6IG5vbmU7JzsKICAgIHFySHRtbCArPSAnIGJvcmRlci1jb2xsYXBzZTogY29sbGFwc2U7JzsKICAgIHFySHRtbCArPSAnIHBhZGRpbmc6IDBweDsgbWFyZ2luOiAnICsgbWFyZ2luICsgJ3B4Oyc7CiAgICBxckh0bWwgKz0gJyI+JzsKICAgIHFySHRtbCArPSAnPHRib2R5Pic7CgogICAgZm9yICh2YXIgciA9IDA7IHIgPCBfdGhpcy5nZXRNb2R1bGVDb3VudCgpOyByICs9IDEpIHsKICAgICAgcXJIdG1sICs9ICc8dHI+JzsKCiAgICAgIGZvciAodmFyIGMgPSAwOyBjIDwgX3RoaXMuZ2V0TW9kdWxlQ291bnQoKTsgYyArPSAxKSB7CiAgICAgICAgcXJIdG1sICs9ICc8dGQgc3R5bGU9Iic7CiAgICAgICAgcXJIdG1sICs9ICcgYm9yZGVyLXdpZHRoOiAwcHg7IGJvcmRlci1zdHlsZTogbm9uZTsnOwogICAgICAgIHFySHRtbCArPSAnIGJvcmRlci1jb2xsYXBzZTogY29sbGFwc2U7JzsKICAgICAgICBxckh0bWwgKz0gJyBwYWRkaW5nOiAwcHg7IG1hcmdpbjogMHB4Oyc7CiAgICAgICAgcXJIdG1sICs9ICcgd2lkdGg6ICcgKyBjZWxsU2l6ZSArICdweDsnOwogICAgICAgIHFySHRtbCArPSAnIGhlaWdodDogJyArIGNlbGxTaXplICsgJ3B4Oyc7CiAgICAgICAgcXJIdG1sICs9ICcgYmFja2dyb3VuZC1jb2xvcjogJzsKICAgICAgICBxckh0bWwgKz0gX3RoaXMuaXNEYXJrKHIsIGMpID8gJyMwMDAwMDAnIDogJyNmZmZmZmYnOwogICAgICAgIHFySHRtbCArPSAnOyc7CiAgICAgICAgcXJIdG1sICs9ICciLz4nOwogICAgICB9CgogICAgICBxckh0bWwgKz0gJzwvdHI+JzsKICAgIH0KCiAgICBxckh0bWwgKz0gJzwvdGJvZHk+JzsKICAgIHFySHRtbCArPSAnPC90YWJsZT4nOwogICAgcmV0dXJuIHFySHRtbDsKICB9OwoKICBfdGhpcy5jcmVhdGVJbWdUYWcgPSBmdW5jdGlvbiAoY2VsbFNpemUsIG1hcmdpbiwgc2l6ZSkgewogICAgY2VsbFNpemUgPSBjZWxsU2l6ZSB8fCAyOwogICAgbWFyZ2luID0gdHlwZW9mIG1hcmdpbiA9PSAndW5kZWZpbmVkJyA/IGNlbGxTaXplICogNCA6IG1hcmdpbjsKICAgIHZhciBtaW4gPSBtYXJnaW47CiAgICB2YXIgbWF4ID0gX3RoaXMuZ2V0TW9kdWxlQ291bnQoKSAqIGNlbGxTaXplICsgbWFyZ2luOwogICAgcmV0dXJuIGNyZWF0ZUltZ1RhZyhzaXplLCBzaXplLCBmdW5jdGlvbiAoeCwgeSkgewogICAgICBpZiAobWluIDw9IHggJiYgeCA8IG1heCAmJiBtaW4gPD0geSAmJiB5IDwgbWF4KSB7CiAgICAgICAgdmFyIGMgPSBNYXRoLmZsb29yKCh4IC0gbWluKSAvIGNlbGxTaXplKTsKICAgICAgICB2YXIgciA9IE1hdGguZmxvb3IoKHkgLSBtaW4pIC8gY2VsbFNpemUpOwogICAgICAgIHJldHVybiBfdGhpcy5pc0RhcmsociwgYykgPyAwIDogMTsKICAgICAgfSBlbHNlIHsKICAgICAgICByZXR1cm4gMTsKICAgICAgfQogICAgfSk7CiAgfTsKCiAgcmV0dXJuIF90aGlzOwp9OwovKiogDQovLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KLy8gcXJjb2RlLnN0cmluZ1RvQnl0ZXMNCi8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQoqLwoKCnFyY29kZS5zdHJpbmdUb0J5dGVzID0gZnVuY3Rpb24gKHMpIHsKICB2YXIgYnl0ZXMgPSBuZXcgQXJyYXkoKTsKCiAgZm9yICh2YXIgaSA9IDA7IGkgPCBzLmxlbmd0aDsgaSArPSAxKSB7CiAgICB2YXIgYyA9IHMuY2hhckNvZGVBdChpKTsKICAgIGJ5dGVzLnB1c2goYyAmIDB4ZmYpOwogIH0KCiAgcmV0dXJuIGJ5dGVzOwp9OwovKioNCi8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQovLyBxcmNvZGUuY3JlYXRlU3RyaW5nVG9CeXRlcw0KLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCiAqLwoKLyoqDQogKiBAcGFyYW0gdW5pY29kZURhdGEgYmFzZTY0IHN0cmluZyBvZiBieXRlIGFycmF5Lg0KICogWzE2Yml0IFVuaWNvZGVdLFsxNmJpdCBCeXRlc10sIC4uLg0KICogQHBhcmFtIG51bUNoYXJzDQogKi8KCgpxcmNvZGUuY3JlYXRlU3RyaW5nVG9CeXRlcyA9IGZ1bmN0aW9uICh1bmljb2RlRGF0YSwgbnVtQ2hhcnMpIHsKICAvKiogY3JlYXRlIGNvbnZlcnNpb24gbWFwLiAqLwogIHZhciB1bmljb2RlTWFwID0gZnVuY3Rpb24gKCkgewogICAgdmFyIGJpbiA9IGJhc2U2NERlY29kZUlucHV0U3RyZWFtKHVuaWNvZGVEYXRhKTsKCiAgICB2YXIgcmVhZCA9IGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIGIgPSBiaW4ucmVhZCgpOwogICAgICBpZiAoYiA9PSAtMSkgdGhyb3cgbmV3IEVycm9yKCk7CiAgICAgIHJldHVybiBiOwogICAgfTsKCiAgICB2YXIgY291bnQgPSAwOwogICAgdmFyIHVuaWNvZGVNYXAgPSB7fTsKCiAgICB3aGlsZSAodHJ1ZSkgewogICAgICB2YXIgYjAgPSBiaW4ucmVhZCgpOwogICAgICBpZiAoYjAgPT0gLTEpIGJyZWFrOwogICAgICB2YXIgYjEgPSByZWFkKCk7CiAgICAgIHZhciBiMiA9IHJlYWQoKTsKICAgICAgdmFyIGIzID0gcmVhZCgpOwogICAgICB2YXIgayA9IFN0cmluZy5mcm9tQ2hhckNvZGUoYjAgPDwgOCB8IGIxKTsKICAgICAgdmFyIHYgPSBiMiA8PCA4IHwgYjM7CiAgICAgIHVuaWNvZGVNYXBba10gPSB2OwogICAgICBjb3VudCArPSAxOwogICAgfQoKICAgIGlmIChjb3VudCAhPSBudW1DaGFycykgewogICAgICB0aHJvdyBuZXcgRXJyb3IoY291bnQgKyAnICE9ICcgKyBudW1DaGFycyk7CiAgICB9CgogICAgcmV0dXJuIHVuaWNvZGVNYXA7CiAgfSgpOwoKICB2YXIgdW5rbm93bkNoYXIgPSAnPycuY2hhckNvZGVBdCgwKTsKICByZXR1cm4gZnVuY3Rpb24gKHMpIHsKICAgIHZhciBieXRlcyA9IG5ldyBBcnJheSgpOwoKICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcy5sZW5ndGg7IGkgKz0gMSkgewogICAgICB2YXIgYyA9IHMuY2hhckNvZGVBdChpKTsKCiAgICAgIGlmIChjIDwgMTI4KSB7CiAgICAgICAgYnl0ZXMucHVzaChjKTsKICAgICAgfSBlbHNlIHsKICAgICAgICB2YXIgYiA9IHVuaWNvZGVNYXBbcy5jaGFyQXQoaSldOwoKICAgICAgICBpZiAodHlwZW9mIGIgPT0gJ251bWJlcicpIHsKICAgICAgICAgIGlmICgoYiAmIDB4ZmYpID09IGIpIHsKICAgICAgICAgICAgLyoqMWJ5dGUgKi8KICAgICAgICAgICAgYnl0ZXMucHVzaChiKTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIC8qKiAyYnl0ZXMgKi8KICAgICAgICAgICAgYnl0ZXMucHVzaChiID4+PiA4KTsKICAgICAgICAgICAgYnl0ZXMucHVzaChiICYgMHhmZik7CiAgICAgICAgICB9CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGJ5dGVzLnB1c2godW5rbm93bkNoYXIpOwogICAgICAgIH0KICAgICAgfQogICAgfQoKICAgIHJldHVybiBieXRlczsKICB9Owp9OwovKiogDQovLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KLy8gUVJNb2RlDQovLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KKi8KCgp2YXIgUVJNb2RlID0gewogIE1PREVfTlVNQkVSOiAxIDw8IDAsCiAgTU9ERV9BTFBIQV9OVU06IDEgPDwgMSwKICBNT0RFXzhCSVRfQllURTogMSA8PCAyLAogIE1PREVfS0FOSkk6IDEgPDwgMwp9OwovKiogDQovLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KLy8gUVJFcnJvckNvcnJlY3RMZXZlbA0KLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCiovCgp2YXIgUVJFcnJvckNvcnJlY3RMZXZlbCA9IHsKICBMOiAxLAogIE06IDAsCiAgUTogMywKICBIOiAyCn07Ci8qKiANCi8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQovLyBRUk1hc2tQYXR0ZXJuDQovLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KKi8KCnZhciBRUk1hc2tQYXR0ZXJuID0gewogIFBBVFRFUk4wMDA6IDAsCiAgUEFUVEVSTjAwMTogMSwKICBQQVRURVJOMDEwOiAyLAogIFBBVFRFUk4wMTE6IDMsCiAgUEFUVEVSTjEwMDogNCwKICBQQVRURVJOMTAxOiA1LAogIFBBVFRFUk4xMTA6IDYsCiAgUEFUVEVSTjExMTogNwp9OwovKiogDQovLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KLy8gUVJVdGlsDQovLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KKi8KCnZhciBRUlV0aWwgPSBmdW5jdGlvbiAoKSB7CiAgdmFyIFBBVFRFUk5fUE9TSVRJT05fVEFCTEUgPSBbW10sIFs2LCAxOF0sIFs2LCAyMl0sIFs2LCAyNl0sIFs2LCAzMF0sIFs2LCAzNF0sIFs2LCAyMiwgMzhdLCBbNiwgMjQsIDQyXSwgWzYsIDI2LCA0Nl0sIFs2LCAyOCwgNTBdLCBbNiwgMzAsIDU0XSwgWzYsIDMyLCA1OF0sIFs2LCAzNCwgNjJdLCBbNiwgMjYsIDQ2LCA2Nl0sIFs2LCAyNiwgNDgsIDcwXSwgWzYsIDI2LCA1MCwgNzRdLCBbNiwgMzAsIDU0LCA3OF0sIFs2LCAzMCwgNTYsIDgyXSwgWzYsIDMwLCA1OCwgODZdLCBbNiwgMzQsIDYyLCA5MF0sIFs2LCAyOCwgNTAsIDcyLCA5NF0sIFs2LCAyNiwgNTAsIDc0LCA5OF0sIFs2LCAzMCwgNTQsIDc4LCAxMDJdLCBbNiwgMjgsIDU0LCA4MCwgMTA2XSwgWzYsIDMyLCA1OCwgODQsIDExMF0sIFs2LCAzMCwgNTgsIDg2LCAxMTRdLCBbNiwgMzQsIDYyLCA5MCwgMTE4XSwgWzYsIDI2LCA1MCwgNzQsIDk4LCAxMjJdLCBbNiwgMzAsIDU0LCA3OCwgMTAyLCAxMjZdLCBbNiwgMjYsIDUyLCA3OCwgMTA0LCAxMzBdLCBbNiwgMzAsIDU2LCA4MiwgMTA4LCAxMzRdLCBbNiwgMzQsIDYwLCA4NiwgMTEyLCAxMzhdLCBbNiwgMzAsIDU4LCA4NiwgMTE0LCAxNDJdLCBbNiwgMzQsIDYyLCA5MCwgMTE4LCAxNDZdLCBbNiwgMzAsIDU0LCA3OCwgMTAyLCAxMjYsIDE1MF0sIFs2LCAyNCwgNTAsIDc2LCAxMDIsIDEyOCwgMTU0XSwgWzYsIDI4LCA1NCwgODAsIDEwNiwgMTMyLCAxNThdLCBbNiwgMzIsIDU4LCA4NCwgMTEwLCAxMzYsIDE2Ml0sIFs2LCAyNiwgNTQsIDgyLCAxMTAsIDEzOCwgMTY2XSwgWzYsIDMwLCA1OCwgODYsIDExNCwgMTQyLCAxNzBdXTsKICB2YXIgRzE1ID0gMSA8PCAxMCB8IDEgPDwgOCB8IDEgPDwgNSB8IDEgPDwgNCB8IDEgPDwgMiB8IDEgPDwgMSB8IDEgPDwgMDsKICB2YXIgRzE4ID0gMSA8PCAxMiB8IDEgPDwgMTEgfCAxIDw8IDEwIHwgMSA8PCA5IHwgMSA8PCA4IHwgMSA8PCA1IHwgMSA8PCAyIHwgMSA8PCAwOwogIHZhciBHMTVfTUFTSyA9IDEgPDwgMTQgfCAxIDw8IDEyIHwgMSA8PCAxMCB8IDEgPDwgNCB8IDEgPDwgMTsKICB2YXIgX3RoaXMgPSB7fTsKCiAgdmFyIGdldEJDSERpZ2l0ID0gZnVuY3Rpb24gKGRhdGEpIHsKICAgIHZhciBkaWdpdCA9IDA7CgogICAgd2hpbGUgKGRhdGEgIT0gMCkgewogICAgICBkaWdpdCArPSAxOwogICAgICBkYXRhID4+Pj0gMTsKICAgIH0KCiAgICByZXR1cm4gZGlnaXQ7CiAgfTsKCiAgX3RoaXMuZ2V0QkNIVHlwZUluZm8gPSBmdW5jdGlvbiAoZGF0YSkgewogICAgdmFyIGQgPSBkYXRhIDw8IDEwOwoKICAgIHdoaWxlIChnZXRCQ0hEaWdpdChkKSAtIGdldEJDSERpZ2l0KEcxNSkgPj0gMCkgewogICAgICBkIF49IEcxNSA8PCBnZXRCQ0hEaWdpdChkKSAtIGdldEJDSERpZ2l0KEcxNSk7CiAgICB9CgogICAgcmV0dXJuIChkYXRhIDw8IDEwIHwgZCkgXiBHMTVfTUFTSzsKICB9OwoKICBfdGhpcy5nZXRCQ0hUeXBlTnVtYmVyID0gZnVuY3Rpb24gKGRhdGEpIHsKICAgIHZhciBkID0gZGF0YSA8PCAxMjsKCiAgICB3aGlsZSAoZ2V0QkNIRGlnaXQoZCkgLSBnZXRCQ0hEaWdpdChHMTgpID49IDApIHsKICAgICAgZCBePSBHMTggPDwgZ2V0QkNIRGlnaXQoZCkgLSBnZXRCQ0hEaWdpdChHMTgpOwogICAgfQoKICAgIHJldHVybiBkYXRhIDw8IDEyIHwgZDsKICB9OwoKICBfdGhpcy5nZXRQYXR0ZXJuUG9zaXRpb24gPSBmdW5jdGlvbiAodHlwZU51bWJlcikgewogICAgcmV0dXJuIFBBVFRFUk5fUE9TSVRJT05fVEFCTEVbdHlwZU51bWJlciAtIDFdOwogIH07CgogIF90aGlzLmdldE1hc2tGdW5jdGlvbiA9IGZ1bmN0aW9uIChtYXNrUGF0dGVybikgewogICAgc3dpdGNoIChtYXNrUGF0dGVybikgewogICAgICBjYXNlIFFSTWFza1BhdHRlcm4uUEFUVEVSTjAwMDoKICAgICAgICByZXR1cm4gZnVuY3Rpb24gKGksIGopIHsKICAgICAgICAgIHJldHVybiAoaSArIGopICUgMiA9PSAwOwogICAgICAgIH07CgogICAgICBjYXNlIFFSTWFza1BhdHRlcm4uUEFUVEVSTjAwMToKICAgICAgICByZXR1cm4gZnVuY3Rpb24gKGksIGopIHsKICAgICAgICAgIHJldHVybiBpICUgMiA9PSAwOwogICAgICAgIH07CgogICAgICBjYXNlIFFSTWFza1BhdHRlcm4uUEFUVEVSTjAxMDoKICAgICAgICByZXR1cm4gZnVuY3Rpb24gKGksIGopIHsKICAgICAgICAgIHJldHVybiBqICUgMyA9PSAwOwogICAgICAgIH07CgogICAgICBjYXNlIFFSTWFza1BhdHRlcm4uUEFUVEVSTjAxMToKICAgICAgICByZXR1cm4gZnVuY3Rpb24gKGksIGopIHsKICAgICAgICAgIHJldHVybiAoaSArIGopICUgMyA9PSAwOwogICAgICAgIH07CgogICAgICBjYXNlIFFSTWFza1BhdHRlcm4uUEFUVEVSTjEwMDoKICAgICAgICByZXR1cm4gZnVuY3Rpb24gKGksIGopIHsKICAgICAgICAgIHJldHVybiAoTWF0aC5mbG9vcihpIC8gMikgKyBNYXRoLmZsb29yKGogLyAzKSkgJSAyID09IDA7CiAgICAgICAgfTsKCiAgICAgIGNhc2UgUVJNYXNrUGF0dGVybi5QQVRURVJOMTAxOgogICAgICAgIHJldHVybiBmdW5jdGlvbiAoaSwgaikgewogICAgICAgICAgcmV0dXJuIGkgKiBqICUgMiArIGkgKiBqICUgMyA9PSAwOwogICAgICAgIH07CgogICAgICBjYXNlIFFSTWFza1BhdHRlcm4uUEFUVEVSTjExMDoKICAgICAgICByZXR1cm4gZnVuY3Rpb24gKGksIGopIHsKICAgICAgICAgIHJldHVybiAoaSAqIGogJSAyICsgaSAqIGogJSAzKSAlIDIgPT0gMDsKICAgICAgICB9OwoKICAgICAgY2FzZSBRUk1hc2tQYXR0ZXJuLlBBVFRFUk4xMTE6CiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChpLCBqKSB7CiAgICAgICAgICByZXR1cm4gKGkgKiBqICUgMyArIChpICsgaikgJSAyKSAlIDIgPT0gMDsKICAgICAgICB9OwoKICAgICAgZGVmYXVsdDoKICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ2JhZCBtYXNrUGF0dGVybjonICsgbWFza1BhdHRlcm4pOwogICAgfQogIH07CgogIF90aGlzLmdldEVycm9yQ29ycmVjdFBvbHlub21pYWwgPSBmdW5jdGlvbiAoZXJyb3JDb3JyZWN0TGVuZ3RoKSB7CiAgICB2YXIgYSA9IHFyUG9seW5vbWlhbChbMV0sIDApOwoKICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZXJyb3JDb3JyZWN0TGVuZ3RoOyBpICs9IDEpIHsKICAgICAgYSA9IGEubXVsdGlwbHkocXJQb2x5bm9taWFsKFsxLCBRUk1hdGguZ2V4cChpKV0sIDApKTsKICAgIH0KCiAgICByZXR1cm4gYTsKICB9OwoKICBfdGhpcy5nZXRMZW5ndGhJbkJpdHMgPSBmdW5jdGlvbiAobW9kZSwgdHlwZSkgewogICAgaWYgKDEgPD0gdHlwZSAmJiB0eXBlIDwgMTApIHsKICAgICAgLyoqMSAtIDkgKi8KICAgICAgc3dpdGNoIChtb2RlKSB7CiAgICAgICAgY2FzZSBRUk1vZGUuTU9ERV9OVU1CRVI6CiAgICAgICAgICByZXR1cm4gMTA7CgogICAgICAgIGNhc2UgUVJNb2RlLk1PREVfQUxQSEFfTlVNOgogICAgICAgICAgcmV0dXJuIDk7CgogICAgICAgIGNhc2UgUVJNb2RlLk1PREVfOEJJVF9CWVRFOgogICAgICAgICAgcmV0dXJuIDg7CgogICAgICAgIGNhc2UgUVJNb2RlLk1PREVfS0FOSkk6CiAgICAgICAgICByZXR1cm4gODsKCiAgICAgICAgZGVmYXVsdDoKICAgICAgICAgIHRocm93IG5ldyBFcnJvcignbW9kZTonICsgbW9kZSk7CiAgICAgIH0KICAgIH0gZWxzZSBpZiAodHlwZSA8IDI3KSB7CiAgICAgIC8qKjEwIC0gMjYgKi8KICAgICAgc3dpdGNoIChtb2RlKSB7CiAgICAgICAgY2FzZSBRUk1vZGUuTU9ERV9OVU1CRVI6CiAgICAgICAgICByZXR1cm4gMTI7CgogICAgICAgIGNhc2UgUVJNb2RlLk1PREVfQUxQSEFfTlVNOgogICAgICAgICAgcmV0dXJuIDExOwoKICAgICAgICBjYXNlIFFSTW9kZS5NT0RFXzhCSVRfQllURToKICAgICAgICAgIHJldHVybiAxNjsKCiAgICAgICAgY2FzZSBRUk1vZGUuTU9ERV9LQU5KSToKICAgICAgICAgIHJldHVybiAxMDsKCiAgICAgICAgZGVmYXVsdDoKICAgICAgICAgIHRocm93IG5ldyBFcnJvcignbW9kZTonICsgbW9kZSk7CiAgICAgIH0KICAgIH0gZWxzZSBpZiAodHlwZSA8IDQxKSB7CiAgICAgIC8qKjI3IC0gNDAgKi8KICAgICAgc3dpdGNoIChtb2RlKSB7CiAgICAgICAgY2FzZSBRUk1vZGUuTU9ERV9OVU1CRVI6CiAgICAgICAgICByZXR1cm4gMTQ7CgogICAgICAgIGNhc2UgUVJNb2RlLk1PREVfQUxQSEFfTlVNOgogICAgICAgICAgcmV0dXJuIDEzOwoKICAgICAgICBjYXNlIFFSTW9kZS5NT0RFXzhCSVRfQllURToKICAgICAgICAgIHJldHVybiAxNjsKCiAgICAgICAgY2FzZSBRUk1vZGUuTU9ERV9LQU5KSToKICAgICAgICAgIHJldHVybiAxMjsKCiAgICAgICAgZGVmYXVsdDoKICAgICAgICAgIHRocm93IG5ldyBFcnJvcignbW9kZTonICsgbW9kZSk7CiAgICAgIH0KICAgIH0gZWxzZSB7CiAgICAgIHRocm93IG5ldyBFcnJvcigndHlwZTonICsgdHlwZSk7CiAgICB9CiAgfTsKCiAgX3RoaXMuZ2V0TG9zdFBvaW50ID0gZnVuY3Rpb24gKHFyY29kZSkgewogICAgdmFyIG1vZHVsZUNvdW50ID0gcXJjb2RlLmdldE1vZHVsZUNvdW50KCk7CiAgICB2YXIgbG9zdFBvaW50ID0gMDsKICAgIC8qKkxFVkVMMSAqLwoKICAgIGZvciAodmFyIHJvdyA9IDA7IHJvdyA8IG1vZHVsZUNvdW50OyByb3cgKz0gMSkgewogICAgICBmb3IgKHZhciBjb2wgPSAwOyBjb2wgPCBtb2R1bGVDb3VudDsgY29sICs9IDEpIHsKICAgICAgICB2YXIgc2FtZUNvdW50ID0gMDsKICAgICAgICB2YXIgZGFyayA9IHFyY29kZS5pc0Rhcmsocm93LCBjb2wpOwoKICAgICAgICBmb3IgKHZhciByID0gLTE7IHIgPD0gMTsgciArPSAxKSB7CiAgICAgICAgICBpZiAocm93ICsgciA8IDAgfHwgbW9kdWxlQ291bnQgPD0gcm93ICsgcikgewogICAgICAgICAgICBjb250aW51ZTsKICAgICAgICAgIH0KCiAgICAgICAgICBmb3IgKHZhciBjID0gLTE7IGMgPD0gMTsgYyArPSAxKSB7CiAgICAgICAgICAgIGlmIChjb2wgKyBjIDwgMCB8fCBtb2R1bGVDb3VudCA8PSBjb2wgKyBjKSB7CiAgICAgICAgICAgICAgY29udGludWU7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGlmIChyID09IDAgJiYgYyA9PSAwKSB7CiAgICAgICAgICAgICAgY29udGludWU7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGlmIChkYXJrID09IHFyY29kZS5pc0Rhcmsocm93ICsgciwgY29sICsgYykpIHsKICAgICAgICAgICAgICBzYW1lQ291bnQgKz0gMTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgaWYgKHNhbWVDb3VudCA+IDUpIHsKICAgICAgICAgIGxvc3RQb2ludCArPSAzICsgc2FtZUNvdW50IC0gNTsKICAgICAgICB9CiAgICAgIH0KICAgIH0KCiAgICA7CiAgICAvKipMRVZFTDIgKi8KCiAgICBmb3IgKHZhciByb3cgPSAwOyByb3cgPCBtb2R1bGVDb3VudCAtIDE7IHJvdyArPSAxKSB7CiAgICAgIGZvciAodmFyIGNvbCA9IDA7IGNvbCA8IG1vZHVsZUNvdW50IC0gMTsgY29sICs9IDEpIHsKICAgICAgICB2YXIgY291bnQgPSAwOwogICAgICAgIGlmIChxcmNvZGUuaXNEYXJrKHJvdywgY29sKSkgY291bnQgKz0gMTsKICAgICAgICBpZiAocXJjb2RlLmlzRGFyayhyb3cgKyAxLCBjb2wpKSBjb3VudCArPSAxOwogICAgICAgIGlmIChxcmNvZGUuaXNEYXJrKHJvdywgY29sICsgMSkpIGNvdW50ICs9IDE7CiAgICAgICAgaWYgKHFyY29kZS5pc0Rhcmsocm93ICsgMSwgY29sICsgMSkpIGNvdW50ICs9IDE7CgogICAgICAgIGlmIChjb3VudCA9PSAwIHx8IGNvdW50ID09IDQpIHsKICAgICAgICAgIGxvc3RQb2ludCArPSAzOwogICAgICAgIH0KICAgICAgfQogICAgfQogICAgLyoqTEVWRUwzICovCgoKICAgIGZvciAodmFyIHJvdyA9IDA7IHJvdyA8IG1vZHVsZUNvdW50OyByb3cgKz0gMSkgewogICAgICBmb3IgKHZhciBjb2wgPSAwOyBjb2wgPCBtb2R1bGVDb3VudCAtIDY7IGNvbCArPSAxKSB7CiAgICAgICAgaWYgKHFyY29kZS5pc0Rhcmsocm93LCBjb2wpICYmICFxcmNvZGUuaXNEYXJrKHJvdywgY29sICsgMSkgJiYgcXJjb2RlLmlzRGFyayhyb3csIGNvbCArIDIpICYmIHFyY29kZS5pc0Rhcmsocm93LCBjb2wgKyAzKSAmJiBxcmNvZGUuaXNEYXJrKHJvdywgY29sICsgNCkgJiYgIXFyY29kZS5pc0Rhcmsocm93LCBjb2wgKyA1KSAmJiBxcmNvZGUuaXNEYXJrKHJvdywgY29sICsgNikpIHsKICAgICAgICAgIGxvc3RQb2ludCArPSA0MDsKICAgICAgICB9CiAgICAgIH0KICAgIH0KCiAgICBmb3IgKHZhciBjb2wgPSAwOyBjb2wgPCBtb2R1bGVDb3VudDsgY29sICs9IDEpIHsKICAgICAgZm9yICh2YXIgcm93ID0gMDsgcm93IDwgbW9kdWxlQ291bnQgLSA2OyByb3cgKz0gMSkgewogICAgICAgIGlmIChxcmNvZGUuaXNEYXJrKHJvdywgY29sKSAmJiAhcXJjb2RlLmlzRGFyayhyb3cgKyAxLCBjb2wpICYmIHFyY29kZS5pc0Rhcmsocm93ICsgMiwgY29sKSAmJiBxcmNvZGUuaXNEYXJrKHJvdyArIDMsIGNvbCkgJiYgcXJjb2RlLmlzRGFyayhyb3cgKyA0LCBjb2wpICYmICFxcmNvZGUuaXNEYXJrKHJvdyArIDUsIGNvbCkgJiYgcXJjb2RlLmlzRGFyayhyb3cgKyA2LCBjb2wpKSB7CiAgICAgICAgICBsb3N0UG9pbnQgKz0gNDA7CiAgICAgICAgfQogICAgICB9CiAgICB9CiAgICAvKipMRVZFTDQgKi8KCgogICAgdmFyIGRhcmtDb3VudCA9IDA7CgogICAgZm9yICh2YXIgY29sID0gMDsgY29sIDwgbW9kdWxlQ291bnQ7IGNvbCArPSAxKSB7CiAgICAgIGZvciAodmFyIHJvdyA9IDA7IHJvdyA8IG1vZHVsZUNvdW50OyByb3cgKz0gMSkgewogICAgICAgIGlmIChxcmNvZGUuaXNEYXJrKHJvdywgY29sKSkgewogICAgICAgICAgZGFya0NvdW50ICs9IDE7CiAgICAgICAgfQogICAgICB9CiAgICB9CgogICAgdmFyIHJhdGlvID0gTWF0aC5hYnMoMTAwICogZGFya0NvdW50IC8gbW9kdWxlQ291bnQgLyBtb2R1bGVDb3VudCAtIDUwKSAvIDU7CiAgICBsb3N0UG9pbnQgKz0gcmF0aW8gKiAxMDsKICAgIHJldHVybiBsb3N0UG9pbnQ7CiAgfTsKCiAgcmV0dXJuIF90aGlzOwp9KCk7Ci8qKiANCi8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQovLyBRUk1hdGgNCi8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQoqLwoKCnZhciBRUk1hdGggPSBmdW5jdGlvbiAoKSB7CiAgdmFyIEVYUF9UQUJMRSA9IG5ldyBBcnJheSgyNTYpOwogIHZhciBMT0dfVEFCTEUgPSBuZXcgQXJyYXkoMjU2KTsKICAvKiogaW5pdGlhbGl6ZSB0YWJsZXMqLwoKICBmb3IgKHZhciBpID0gMDsgaSA8IDg7IGkgKz0gMSkgewogICAgRVhQX1RBQkxFW2ldID0gMSA8PCBpOwogIH0KCiAgZm9yICh2YXIgaSA9IDg7IGkgPCAyNTY7IGkgKz0gMSkgewogICAgRVhQX1RBQkxFW2ldID0gRVhQX1RBQkxFW2kgLSA0XSBeIEVYUF9UQUJMRVtpIC0gNV0gXiBFWFBfVEFCTEVbaSAtIDZdIF4gRVhQX1RBQkxFW2kgLSA4XTsKICB9CgogIGZvciAodmFyIGkgPSAwOyBpIDwgMjU1OyBpICs9IDEpIHsKICAgIExPR19UQUJMRVtFWFBfVEFCTEVbaV1dID0gaTsKICB9CgogIHZhciBfdGhpcyA9IHt9OwoKICBfdGhpcy5nbG9nID0gZnVuY3Rpb24gKG4pIHsKICAgIGlmIChuIDwgMSkgewogICAgICB0aHJvdyBuZXcgRXJyb3IoJ2dsb2coJyArIG4gKyAnKScpOwogICAgfQoKICAgIHJldHVybiBMT0dfVEFCTEVbbl07CiAgfTsKCiAgX3RoaXMuZ2V4cCA9IGZ1bmN0aW9uIChuKSB7CiAgICB3aGlsZSAobiA8IDApIHsKICAgICAgbiArPSAyNTU7CiAgICB9CgogICAgd2hpbGUgKG4gPj0gMjU2KSB7CiAgICAgIG4gLT0gMjU1OwogICAgfQoKICAgIHJldHVybiBFWFBfVEFCTEVbbl07CiAgfTsKCiAgcmV0dXJuIF90aGlzOwp9KCk7Ci8qKiANCi8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQovLyBxclBvbHlub21pYWwNCi8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQoqLwoKCmZ1bmN0aW9uIHFyUG9seW5vbWlhbChudW0sIHNoaWZ0KSB7CiAgaWYgKHR5cGVvZiBudW0ubGVuZ3RoID09ICd1bmRlZmluZWQnKSB7CiAgICB0aHJvdyBuZXcgRXJyb3IobnVtLmxlbmd0aCArICcvJyArIHNoaWZ0KTsKICB9CgogIHZhciBfbnVtID0gZnVuY3Rpb24gKCkgewogICAgdmFyIG9mZnNldCA9IDA7CgogICAgd2hpbGUgKG9mZnNldCA8IG51bS5sZW5ndGggJiYgbnVtW29mZnNldF0gPT0gMCkgewogICAgICBvZmZzZXQgKz0gMTsKICAgIH0KCiAgICB2YXIgX251bSA9IG5ldyBBcnJheShudW0ubGVuZ3RoIC0gb2Zmc2V0ICsgc2hpZnQpOwoKICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbnVtLmxlbmd0aCAtIG9mZnNldDsgaSArPSAxKSB7CiAgICAgIF9udW1baV0gPSBudW1baSArIG9mZnNldF07CiAgICB9CgogICAgcmV0dXJuIF9udW07CiAgfSgpOwoKICB2YXIgX3RoaXMgPSB7fTsKCiAgX3RoaXMuZ2V0QXQgPSBmdW5jdGlvbiAoaW5kZXgpIHsKICAgIHJldHVybiBfbnVtW2luZGV4XTsKICB9OwoKICBfdGhpcy5nZXRMZW5ndGggPSBmdW5jdGlvbiAoKSB7CiAgICByZXR1cm4gX251bS5sZW5ndGg7CiAgfTsKCiAgX3RoaXMubXVsdGlwbHkgPSBmdW5jdGlvbiAoZSkgewogICAgdmFyIG51bSA9IG5ldyBBcnJheShfdGhpcy5nZXRMZW5ndGgoKSArIGUuZ2V0TGVuZ3RoKCkgLSAxKTsKCiAgICBmb3IgKHZhciBpID0gMDsgaSA8IF90aGlzLmdldExlbmd0aCgpOyBpICs9IDEpIHsKICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBlLmdldExlbmd0aCgpOyBqICs9IDEpIHsKICAgICAgICBudW1baSArIGpdIF49IFFSTWF0aC5nZXhwKFFSTWF0aC5nbG9nKF90aGlzLmdldEF0KGkpKSArIFFSTWF0aC5nbG9nKGUuZ2V0QXQoaikpKTsKICAgICAgfQogICAgfQoKICAgIHJldHVybiBxclBvbHlub21pYWwobnVtLCAwKTsKICB9OwoKICBfdGhpcy5tb2QgPSBmdW5jdGlvbiAoZSkgewogICAgaWYgKF90aGlzLmdldExlbmd0aCgpIC0gZS5nZXRMZW5ndGgoKSA8IDApIHsKICAgICAgcmV0dXJuIF90aGlzOwogICAgfQoKICAgIHZhciByYXRpbyA9IFFSTWF0aC5nbG9nKF90aGlzLmdldEF0KDApKSAtIFFSTWF0aC5nbG9nKGUuZ2V0QXQoMCkpOwogICAgdmFyIG51bSA9IG5ldyBBcnJheShfdGhpcy5nZXRMZW5ndGgoKSk7CgogICAgZm9yICh2YXIgaSA9IDA7IGkgPCBfdGhpcy5nZXRMZW5ndGgoKTsgaSArPSAxKSB7CiAgICAgIG51bVtpXSA9IF90aGlzLmdldEF0KGkpOwogICAgfQoKICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZS5nZXRMZW5ndGgoKTsgaSArPSAxKSB7CiAgICAgIG51bVtpXSBePSBRUk1hdGguZ2V4cChRUk1hdGguZ2xvZyhlLmdldEF0KGkpKSArIHJhdGlvKTsKICAgIH0gLy8gcmVjdXJzaXZlIGNhbGwKCgogICAgcmV0dXJuIHFyUG9seW5vbWlhbChudW0sIDApLm1vZChlKTsKICB9OwoKICByZXR1cm4gX3RoaXM7Cn0KCjsKLyoqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KLy8gUVJSU0Jsb2NrDQovLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KKi8KCnZhciBRUlJTQmxvY2sgPSBmdW5jdGlvbiAoKSB7CiAgLyoqICBbMTogW0wsIE0sIFEsIEhdLCAuLl0qLwogIHZhciBSU19CTE9DS19UQUJMRSA9IFtbMSwgMjYsIDE5XSwgWzEsIDI2LCAxNl0sIFsxLCAyNiwgMTNdLCBbMSwgMjYsIDldLCBbMSwgNDQsIDM0XSwgWzEsIDQ0LCAyOF0sIFsxLCA0NCwgMjJdLCBbMSwgNDQsIDE2XSwgWzEsIDcwLCA1NV0sIFsxLCA3MCwgNDRdLCBbMiwgMzUsIDE3XSwgWzIsIDM1LCAxM10sIFsxLCAxMDAsIDgwXSwgWzIsIDUwLCAzMl0sIFsyLCA1MCwgMjRdLCBbNCwgMjUsIDldLCBbMSwgMTM0LCAxMDhdLCBbMiwgNjcsIDQzXSwgWzIsIDMzLCAxNSwgMiwgMzQsIDE2XSwgWzIsIDMzLCAxMSwgMiwgMzQsIDEyXSwgWzIsIDg2LCA2OF0sIFs0LCA0MywgMjddLCBbNCwgNDMsIDE5XSwgWzQsIDQzLCAxNV0sIFsyLCA5OCwgNzhdLCBbNCwgNDksIDMxXSwgWzIsIDMyLCAxNCwgNCwgMzMsIDE1XSwgWzQsIDM5LCAxMywgMSwgNDAsIDE0XSwgWzIsIDEyMSwgOTddLCBbMiwgNjAsIDM4LCAyLCA2MSwgMzldLCBbNCwgNDAsIDE4LCAyLCA0MSwgMTldLCBbNCwgNDAsIDE0LCAyLCA0MSwgMTVdLCBbMiwgMTQ2LCAxMTZdLCBbMywgNTgsIDM2LCAyLCA1OSwgMzddLCBbNCwgMzYsIDE2LCA0LCAzNywgMTddLCBbNCwgMzYsIDEyLCA0LCAzNywgMTNdLCBbMiwgODYsIDY4LCAyLCA4NywgNjldLCBbNCwgNjksIDQzLCAxLCA3MCwgNDRdLCBbNiwgNDMsIDE5LCAyLCA0NCwgMjBdLCBbNiwgNDMsIDE1LCAyLCA0NCwgMTZdLCBbNCwgMTAxLCA4MV0sIFsxLCA4MCwgNTAsIDQsIDgxLCA1MV0sIFs0LCA1MCwgMjIsIDQsIDUxLCAyM10sIFszLCAzNiwgMTIsIDgsIDM3LCAxM10sIFsyLCAxMTYsIDkyLCAyLCAxMTcsIDkzXSwgWzYsIDU4LCAzNiwgMiwgNTksIDM3XSwgWzQsIDQ2LCAyMCwgNiwgNDcsIDIxXSwgWzcsIDQyLCAxNCwgNCwgNDMsIDE1XSwgWzQsIDEzMywgMTA3XSwgWzgsIDU5LCAzNywgMSwgNjAsIDM4XSwgWzgsIDQ0LCAyMCwgNCwgNDUsIDIxXSwgWzEyLCAzMywgMTEsIDQsIDM0LCAxMl0sIFszLCAxNDUsIDExNSwgMSwgMTQ2LCAxMTZdLCBbNCwgNjQsIDQwLCA1LCA2NSwgNDFdLCBbMTEsIDM2LCAxNiwgNSwgMzcsIDE3XSwgWzExLCAzNiwgMTIsIDUsIDM3LCAxM10sIFs1LCAxMDksIDg3LCAxLCAxMTAsIDg4XSwgWzUsIDY1LCA0MSwgNSwgNjYsIDQyXSwgWzUsIDU0LCAyNCwgNywgNTUsIDI1XSwgWzExLCAzNiwgMTJdLCBbNSwgMTIyLCA5OCwgMSwgMTIzLCA5OV0sIFs3LCA3MywgNDUsIDMsIDc0LCA0Nl0sIFsxNSwgNDMsIDE5LCAyLCA0NCwgMjBdLCBbMywgNDUsIDE1LCAxMywgNDYsIDE2XSwgWzEsIDEzNSwgMTA3LCA1LCAxMzYsIDEwOF0sIFsxMCwgNzQsIDQ2LCAxLCA3NSwgNDddLCBbMSwgNTAsIDIyLCAxNSwgNTEsIDIzXSwgWzIsIDQyLCAxNCwgMTcsIDQzLCAxNV0sIFs1LCAxNTAsIDEyMCwgMSwgMTUxLCAxMjFdLCBbOSwgNjksIDQzLCA0LCA3MCwgNDRdLCBbMTcsIDUwLCAyMiwgMSwgNTEsIDIzXSwgWzIsIDQyLCAxNCwgMTksIDQzLCAxNV0sIFszLCAxNDEsIDExMywgNCwgMTQyLCAxMTRdLCBbMywgNzAsIDQ0LCAxMSwgNzEsIDQ1XSwgWzE3LCA0NywgMjEsIDQsIDQ4LCAyMl0sIFs5LCAzOSwgMTMsIDE2LCA0MCwgMTRdLCBbMywgMTM1LCAxMDcsIDUsIDEzNiwgMTA4XSwgWzMsIDY3LCA0MSwgMTMsIDY4LCA0Ml0sIFsxNSwgNTQsIDI0LCA1LCA1NSwgMjVdLCBbMTUsIDQzLCAxNSwgMTAsIDQ0LCAxNl0sIFs0LCAxNDQsIDExNiwgNCwgMTQ1LCAxMTddLCBbMTcsIDY4LCA0Ml0sIFsxNywgNTAsIDIyLCA2LCA1MSwgMjNdLCBbMTksIDQ2LCAxNiwgNiwgNDcsIDE3XSwgWzIsIDEzOSwgMTExLCA3LCAxNDAsIDExMl0sIFsxNywgNzQsIDQ2XSwgWzcsIDU0LCAyNCwgMTYsIDU1LCAyNV0sIFszNCwgMzcsIDEzXSwgWzQsIDE1MSwgMTIxLCA1LCAxNTIsIDEyMl0sIFs0LCA3NSwgNDcsIDE0LCA3NiwgNDhdLCBbMTEsIDU0LCAyNCwgMTQsIDU1LCAyNV0sIFsxNiwgNDUsIDE1LCAxNCwgNDYsIDE2XSwgWzYsIDE0NywgMTE3LCA0LCAxNDgsIDExOF0sIFs2LCA3MywgNDUsIDE0LCA3NCwgNDZdLCBbMTEsIDU0LCAyNCwgMTYsIDU1LCAyNV0sIFszMCwgNDYsIDE2LCAyLCA0NywgMTddLCBbOCwgMTMyLCAxMDYsIDQsIDEzMywgMTA3XSwgWzgsIDc1LCA0NywgMTMsIDc2LCA0OF0sIFs3LCA1NCwgMjQsIDIyLCA1NSwgMjVdLCBbMjIsIDQ1LCAxNSwgMTMsIDQ2LCAxNl0sIFsxMCwgMTQyLCAxMTQsIDIsIDE0MywgMTE1XSwgWzE5LCA3NCwgNDYsIDQsIDc1LCA0N10sIFsyOCwgNTAsIDIyLCA2LCA1MSwgMjNdLCBbMzMsIDQ2LCAxNiwgNCwgNDcsIDE3XSwgWzgsIDE1MiwgMTIyLCA0LCAxNTMsIDEyM10sIFsyMiwgNzMsIDQ1LCAzLCA3NCwgNDZdLCBbOCwgNTMsIDIzLCAyNiwgNTQsIDI0XSwgWzEyLCA0NSwgMTUsIDI4LCA0NiwgMTZdLCBbMywgMTQ3LCAxMTcsIDEwLCAxNDgsIDExOF0sIFszLCA3MywgNDUsIDIzLCA3NCwgNDZdLCBbNCwgNTQsIDI0LCAzMSwgNTUsIDI1XSwgWzExLCA0NSwgMTUsIDMxLCA0NiwgMTZdLCBbNywgMTQ2LCAxMTYsIDcsIDE0NywgMTE3XSwgWzIxLCA3MywgNDUsIDcsIDc0LCA0Nl0sIFsxLCA1MywgMjMsIDM3LCA1NCwgMjRdLCBbMTksIDQ1LCAxNSwgMjYsIDQ2LCAxNl0sIFs1LCAxNDUsIDExNSwgMTAsIDE0NiwgMTE2XSwgWzE5LCA3NSwgNDcsIDEwLCA3NiwgNDhdLCBbMTUsIDU0LCAyNCwgMjUsIDU1LCAyNV0sIFsyMywgNDUsIDE1LCAyNSwgNDYsIDE2XSwgWzEzLCAxNDUsIDExNSwgMywgMTQ2LCAxMTZdLCBbMiwgNzQsIDQ2LCAyOSwgNzUsIDQ3XSwgWzQyLCA1NCwgMjQsIDEsIDU1LCAyNV0sIFsyMywgNDUsIDE1LCAyOCwgNDYsIDE2XSwgWzE3LCAxNDUsIDExNV0sIFsxMCwgNzQsIDQ2LCAyMywgNzUsIDQ3XSwgWzEwLCA1NCwgMjQsIDM1LCA1NSwgMjVdLCBbMTksIDQ1LCAxNSwgMzUsIDQ2LCAxNl0sIFsxNywgMTQ1LCAxMTUsIDEsIDE0NiwgMTE2XSwgWzE0LCA3NCwgNDYsIDIxLCA3NSwgNDddLCBbMjksIDU0LCAyNCwgMTksIDU1LCAyNV0sIFsxMSwgNDUsIDE1LCA0NiwgNDYsIDE2XSwgWzEzLCAxNDUsIDExNSwgNiwgMTQ2LCAxMTZdLCBbMTQsIDc0LCA0NiwgMjMsIDc1LCA0N10sIFs0NCwgNTQsIDI0LCA3LCA1NSwgMjVdLCBbNTksIDQ2LCAxNiwgMSwgNDcsIDE3XSwgWzEyLCAxNTEsIDEyMSwgNywgMTUyLCAxMjJdLCBbMTIsIDc1LCA0NywgMjYsIDc2LCA0OF0sIFszOSwgNTQsIDI0LCAxNCwgNTUsIDI1XSwgWzIyLCA0NSwgMTUsIDQxLCA0NiwgMTZdLCBbNiwgMTUxLCAxMjEsIDE0LCAxNTIsIDEyMl0sIFs2LCA3NSwgNDcsIDM0LCA3NiwgNDhdLCBbNDYsIDU0LCAyNCwgMTAsIDU1LCAyNV0sIFsyLCA0NSwgMTUsIDY0LCA0NiwgMTZdLCBbMTcsIDE1MiwgMTIyLCA0LCAxNTMsIDEyM10sIFsyOSwgNzQsIDQ2LCAxNCwgNzUsIDQ3XSwgWzQ5LCA1NCwgMjQsIDEwLCA1NSwgMjVdLCBbMjQsIDQ1LCAxNSwgNDYsIDQ2LCAxNl0sIFs0LCAxNTIsIDEyMiwgMTgsIDE1MywgMTIzXSwgWzEzLCA3NCwgNDYsIDMyLCA3NSwgNDddLCBbNDgsIDU0LCAyNCwgMTQsIDU1LCAyNV0sIFs0MiwgNDUsIDE1LCAzMiwgNDYsIDE2XSwgWzIwLCAxNDcsIDExNywgNCwgMTQ4LCAxMThdLCBbNDAsIDc1LCA0NywgNywgNzYsIDQ4XSwgWzQzLCA1NCwgMjQsIDIyLCA1NSwgMjVdLCBbMTAsIDQ1LCAxNSwgNjcsIDQ2LCAxNl0sIFsxOSwgMTQ4LCAxMTgsIDYsIDE0OSwgMTE5XSwgWzE4LCA3NSwgNDcsIDMxLCA3NiwgNDhdLCBbMzQsIDU0LCAyNCwgMzQsIDU1LCAyNV0sIFsyMCwgNDUsIDE1LCA2MSwgNDYsIDE2XV07CgogIHZhciBxclJTQmxvY2sgPSBmdW5jdGlvbiAodG90YWxDb3VudCwgZGF0YUNvdW50KSB7CiAgICB2YXIgX3RoaXMgPSB7fTsKICAgIF90aGlzLnRvdGFsQ291bnQgPSB0b3RhbENvdW50OwogICAgX3RoaXMuZGF0YUNvdW50ID0gZGF0YUNvdW50OwogICAgcmV0dXJuIF90aGlzOwogIH07CgogIHZhciBfdGhpcyA9IHt9OwoKICB2YXIgZ2V0UnNCbG9ja1RhYmxlID0gZnVuY3Rpb24gKHR5cGVOdW1iZXIsIGVycm9yQ29ycmVjdExldmVsKSB7CiAgICBzd2l0Y2ggKGVycm9yQ29ycmVjdExldmVsKSB7CiAgICAgIGNhc2UgUVJFcnJvckNvcnJlY3RMZXZlbC5MOgogICAgICAgIHJldHVybiBSU19CTE9DS19UQUJMRVsodHlwZU51bWJlciAtIDEpICogNCArIDBdOwoKICAgICAgY2FzZSBRUkVycm9yQ29ycmVjdExldmVsLk06CiAgICAgICAgcmV0dXJuIFJTX0JMT0NLX1RBQkxFWyh0eXBlTnVtYmVyIC0gMSkgKiA0ICsgMV07CgogICAgICBjYXNlIFFSRXJyb3JDb3JyZWN0TGV2ZWwuUToKICAgICAgICByZXR1cm4gUlNfQkxPQ0tfVEFCTEVbKHR5cGVOdW1iZXIgLSAxKSAqIDQgKyAyXTsKCiAgICAgIGNhc2UgUVJFcnJvckNvcnJlY3RMZXZlbC5IOgogICAgICAgIHJldHVybiBSU19CTE9DS19UQUJMRVsodHlwZU51bWJlciAtIDEpICogNCArIDNdOwoKICAgICAgZGVmYXVsdDoKICAgICAgICByZXR1cm4gdW5kZWZpbmVkOwogICAgfQogIH07CgogIF90aGlzLmdldFJTQmxvY2tzID0gZnVuY3Rpb24gKHR5cGVOdW1iZXIsIGVycm9yQ29ycmVjdExldmVsKSB7CiAgICB2YXIgcnNCbG9jayA9IGdldFJzQmxvY2tUYWJsZSh0eXBlTnVtYmVyLCBlcnJvckNvcnJlY3RMZXZlbCk7CgogICAgaWYgKHR5cGVvZiByc0Jsb2NrID09ICd1bmRlZmluZWQnKSB7CiAgICAgIHRocm93IG5ldyBFcnJvcignYmFkIHJzIGJsb2NrIEAgdHlwZU51bWJlcjonICsgdHlwZU51bWJlciArICcvZXJyb3JDb3JyZWN0TGV2ZWw6JyArIGVycm9yQ29ycmVjdExldmVsKTsKICAgIH0KCiAgICB2YXIgbGVuZ3RoID0gcnNCbG9jay5sZW5ndGggLyAzOwogICAgdmFyIGxpc3QgPSBuZXcgQXJyYXkoKTsKCiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbmd0aDsgaSArPSAxKSB7CiAgICAgIHZhciBjb3VudCA9IHJzQmxvY2tbaSAqIDMgKyAwXTsKICAgICAgdmFyIHRvdGFsQ291bnQgPSByc0Jsb2NrW2kgKiAzICsgMV07CiAgICAgIHZhciBkYXRhQ291bnQgPSByc0Jsb2NrW2kgKiAzICsgMl07CgogICAgICBmb3IgKHZhciBqID0gMDsgaiA8IGNvdW50OyBqICs9IDEpIHsKICAgICAgICBsaXN0LnB1c2gocXJSU0Jsb2NrKHRvdGFsQ291bnQsIGRhdGFDb3VudCkpOwogICAgICB9CiAgICB9CgogICAgcmV0dXJuIGxpc3Q7CiAgfTsKCiAgcmV0dXJuIF90aGlzOwp9KCk7Ci8qKiANCiAgLy8gcXJCaXRCdWZmZXINCiovCgoKdmFyIHFyQml0QnVmZmVyID0gZnVuY3Rpb24gKCkgewogIHZhciBfYnVmZmVyID0gbmV3IEFycmF5KCk7CgogIHZhciBfbGVuZ3RoID0gMDsKICB2YXIgX3RoaXMgPSB7fTsKCiAgX3RoaXMuZ2V0QnVmZmVyID0gZnVuY3Rpb24gKCkgewogICAgcmV0dXJuIF9idWZmZXI7CiAgfTsKCiAgX3RoaXMuZ2V0QXQgPSBmdW5jdGlvbiAoaW5kZXgpIHsKICAgIHZhciBidWZJbmRleCA9IE1hdGguZmxvb3IoaW5kZXggLyA4KTsKICAgIHJldHVybiAoX2J1ZmZlcltidWZJbmRleF0gPj4+IDcgLSBpbmRleCAlIDggJiAxKSA9PSAxOwogIH07CgogIF90aGlzLnB1dCA9IGZ1bmN0aW9uIChudW0sIGxlbmd0aCkgewogICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGg7IGkgKz0gMSkgewogICAgICBfdGhpcy5wdXRCaXQoKG51bSA+Pj4gbGVuZ3RoIC0gaSAtIDEgJiAxKSA9PSAxKTsKICAgIH0KICB9OwoKICBfdGhpcy5nZXRMZW5ndGhJbkJpdHMgPSBmdW5jdGlvbiAoKSB7CiAgICByZXR1cm4gX2xlbmd0aDsKICB9OwoKICBfdGhpcy5wdXRCaXQgPSBmdW5jdGlvbiAoYml0KSB7CiAgICB2YXIgYnVmSW5kZXggPSBNYXRoLmZsb29yKF9sZW5ndGggLyA4KTsKCiAgICBpZiAoX2J1ZmZlci5sZW5ndGggPD0gYnVmSW5kZXgpIHsKICAgICAgX2J1ZmZlci5wdXNoKDApOwogICAgfQoKICAgIGlmIChiaXQpIHsKICAgICAgX2J1ZmZlcltidWZJbmRleF0gfD0gMHg4MCA+Pj4gX2xlbmd0aCAlIDg7CiAgICB9CgogICAgX2xlbmd0aCArPSAxOwogIH07CgogIHJldHVybiBfdGhpczsKfTsKLyoqIA0KLy8gcXI4Qml0Qnl0ZQ0KKi8KCgp2YXIgcXI4Qml0Qnl0ZSA9IGZ1bmN0aW9uIChkYXRhKSB7CiAgdmFyIF9tb2RlID0gUVJNb2RlLk1PREVfOEJJVF9CWVRFOwogIHZhciBfZGF0YSA9IGRhdGE7CiAgdmFyIF9wYXJzZWREYXRhID0gW107CiAgdmFyIF90aGlzID0ge307CiAgLyoqICBBZGRlZCB0byBzdXBwb3J0IFVURi04IENoYXJhY3RlcnMqLwoKICBmb3IgKHZhciBpID0gMCwgbCA9IF9kYXRhLmxlbmd0aDsgaSA8IGw7IGkrKykgewogICAgdmFyIGJ5dGVBcnJheSA9IFtdOwoKICAgIHZhciBjb2RlID0gX2RhdGEuY2hhckNvZGVBdChpKTsKCiAgICBpZiAoY29kZSA+IDB4MTAwMDApIHsKICAgICAgYnl0ZUFycmF5WzBdID0gMHhGMCB8IChjb2RlICYgMHgxQzAwMDApID4+PiAxODsKICAgICAgYnl0ZUFycmF5WzFdID0gMHg4MCB8IChjb2RlICYgMHgzRjAwMCkgPj4+IDEyOwogICAgICBieXRlQXJyYXlbMl0gPSAweDgwIHwgKGNvZGUgJiAweEZDMCkgPj4+IDY7CiAgICAgIGJ5dGVBcnJheVszXSA9IDB4ODAgfCBjb2RlICYgMHgzRjsKICAgIH0gZWxzZSBpZiAoY29kZSA+IDB4ODAwKSB7CiAgICAgIGJ5dGVBcnJheVswXSA9IDB4RTAgfCAoY29kZSAmIDB4RjAwMCkgPj4+IDEyOwogICAgICBieXRlQXJyYXlbMV0gPSAweDgwIHwgKGNvZGUgJiAweEZDMCkgPj4+IDY7CiAgICAgIGJ5dGVBcnJheVsyXSA9IDB4ODAgfCBjb2RlICYgMHgzRjsKICAgIH0gZWxzZSBpZiAoY29kZSA+IDB4ODApIHsKICAgICAgYnl0ZUFycmF5WzBdID0gMHhDMCB8IChjb2RlICYgMHg3QzApID4+PiA2OwogICAgICBieXRlQXJyYXlbMV0gPSAweDgwIHwgY29kZSAmIDB4M0Y7CiAgICB9IGVsc2UgewogICAgICBieXRlQXJyYXlbMF0gPSBjb2RlOwogICAgfQogICAgLyoqIEZpeCBVbmljb2RlIGNvcnJ1cHRpb24gYnVnKi8KCgogICAgX3BhcnNlZERhdGEucHVzaChieXRlQXJyYXkpOwogIH0KCiAgX3BhcnNlZERhdGEgPSBBcnJheS5wcm90b3R5cGUuY29uY2F0LmFwcGx5KFtdLCBfcGFyc2VkRGF0YSk7CgogIGlmIChfcGFyc2VkRGF0YS5sZW5ndGggIT0gX2RhdGEubGVuZ3RoKSB7CiAgICBfcGFyc2VkRGF0YS51bnNoaWZ0KDE5MSk7CgogICAgX3BhcnNlZERhdGEudW5zaGlmdCgxODcpOwoKICAgIF9wYXJzZWREYXRhLnVuc2hpZnQoMjM5KTsKICB9CgogIHZhciBfYnl0ZXMgPSBfcGFyc2VkRGF0YTsKCiAgX3RoaXMuZ2V0TW9kZSA9IGZ1bmN0aW9uICgpIHsKICAgIHJldHVybiBfbW9kZTsKICB9OwoKICBfdGhpcy5nZXRMZW5ndGggPSBmdW5jdGlvbiAoYnVmZmVyKSB7CiAgICByZXR1cm4gX2J5dGVzLmxlbmd0aDsKICB9OwoKICBfdGhpcy53cml0ZSA9IGZ1bmN0aW9uIChidWZmZXIpIHsKICAgIGZvciAodmFyIGkgPSAwOyBpIDwgX2J5dGVzLmxlbmd0aDsgaSArPSAxKSB7CiAgICAgIGJ1ZmZlci5wdXQoX2J5dGVzW2ldLCA4KTsKICAgIH0KICB9OwoKICByZXR1cm4gX3RoaXM7Cn07Ci8qKiBHSUYgU3VwcG9ydCBldGMuKi8KCi8qKg0KICogLy8gYnl0ZUFycmF5T3V0cHV0U3RyZWFtDQogKi8KCgp2YXIgYnl0ZUFycmF5T3V0cHV0U3RyZWFtID0gZnVuY3Rpb24gKCkgewogIHZhciBfYnl0ZXMgPSBuZXcgQXJyYXkoKTsKCiAgdmFyIF90aGlzID0ge307CgogIF90aGlzLndyaXRlQnl0ZSA9IGZ1bmN0aW9uIChiKSB7CiAgICBfYnl0ZXMucHVzaChiICYgMHhmZik7CiAgfTsKCiAgX3RoaXMud3JpdGVTaG9ydCA9IGZ1bmN0aW9uIChpKSB7CiAgICBfdGhpcy53cml0ZUJ5dGUoaSk7CgogICAgX3RoaXMud3JpdGVCeXRlKGkgPj4+IDgpOwogIH07CgogIF90aGlzLndyaXRlQnl0ZXMgPSBmdW5jdGlvbiAoYiwgb2ZmLCBsZW4pIHsKICAgIG9mZiA9IG9mZiB8fCAwOwogICAgbGVuID0gbGVuIHx8IGIubGVuZ3RoOwoKICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuOyBpICs9IDEpIHsKICAgICAgX3RoaXMud3JpdGVCeXRlKGJbaSArIG9mZl0pOwogICAgfQogIH07CgogIF90aGlzLndyaXRlU3RyaW5nID0gZnVuY3Rpb24gKHMpIHsKICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcy5sZW5ndGg7IGkgKz0gMSkgewogICAgICBfdGhpcy53cml0ZUJ5dGUocy5jaGFyQ29kZUF0KGkpKTsKICAgIH0KICB9OwoKICBfdGhpcy50b0J5dGVBcnJheSA9IGZ1bmN0aW9uICgpIHsKICAgIHJldHVybiBfYnl0ZXM7CiAgfTsKCiAgX3RoaXMudG9TdHJpbmcgPSBmdW5jdGlvbiAoKSB7CiAgICB2YXIgcyA9ICcnOwogICAgcyArPSAnWyc7CgogICAgZm9yICh2YXIgaSA9IDA7IGkgPCBfYnl0ZXMubGVuZ3RoOyBpICs9IDEpIHsKICAgICAgaWYgKGkgPiAwKSB7CiAgICAgICAgcyArPSAnLCc7CiAgICAgIH0KCiAgICAgIHMgKz0gX2J5dGVzW2ldOwogICAgfQoKICAgIHMgKz0gJ10nOwogICAgcmV0dXJuIHM7CiAgfTsKCiAgcmV0dXJuIF90aGlzOwp9OwovKiogDQovLyBiYXNlNjRFbmNvZGVPdXRwdXRTdHJlYW0NCiovCgoKdmFyIGJhc2U2NEVuY29kZU91dHB1dFN0cmVhbSA9IGZ1bmN0aW9uICgpIHsKICB2YXIgX2J1ZmZlciA9IDA7CiAgdmFyIF9idWZsZW4gPSAwOwogIHZhciBfbGVuZ3RoID0gMDsKICB2YXIgX2Jhc2U2NCA9ICcnOwogIHZhciBfdGhpcyA9IHt9OwoKICB2YXIgd3JpdGVFbmNvZGVkID0gZnVuY3Rpb24gKGIpIHsKICAgIF9iYXNlNjQgKz0gU3RyaW5nLmZyb21DaGFyQ29kZShlbmNvZGUoYiAmIDB4M2YpKTsKICB9OwoKICB2YXIgZW5jb2RlID0gZnVuY3Rpb24gKG4pIHsKICAgIGlmIChuIDwgMCkgewogICAgICAvKiplcnJvci4gKi8KICAgIH0gZWxzZSBpZiAobiA8IDI2KSB7CiAgICAgIHJldHVybiAweDQxICsgbjsKICAgIH0gZWxzZSBpZiAobiA8IDUyKSB7CiAgICAgIHJldHVybiAweDYxICsgKG4gLSAyNik7CiAgICB9IGVsc2UgaWYgKG4gPCA2MikgewogICAgICByZXR1cm4gMHgzMCArIChuIC0gNTIpOwogICAgfSBlbHNlIGlmIChuID09IDYyKSB7CiAgICAgIHJldHVybiAweDJiOwogICAgfSBlbHNlIGlmIChuID09IDYzKSB7CiAgICAgIHJldHVybiAweDJmOwogICAgfQoKICAgIHRocm93IG5ldyBFcnJvcignbjonICsgbik7CiAgfTsKCiAgX3RoaXMud3JpdGVCeXRlID0gZnVuY3Rpb24gKG4pIHsKICAgIF9idWZmZXIgPSBfYnVmZmVyIDw8IDggfCBuICYgMHhmZjsKICAgIF9idWZsZW4gKz0gODsKICAgIF9sZW5ndGggKz0gMTsKCiAgICB3aGlsZSAoX2J1ZmxlbiA+PSA2KSB7CiAgICAgIHdyaXRlRW5jb2RlZChfYnVmZmVyID4+PiBfYnVmbGVuIC0gNik7CiAgICAgIF9idWZsZW4gLT0gNjsKICAgIH0KICB9OwoKICBfdGhpcy5mbHVzaCA9IGZ1bmN0aW9uICgpIHsKICAgIGlmIChfYnVmbGVuID4gMCkgewogICAgICB3cml0ZUVuY29kZWQoX2J1ZmZlciA8PCA2IC0gX2J1Zmxlbik7CiAgICAgIF9idWZmZXIgPSAwOwogICAgICBfYnVmbGVuID0gMDsKICAgIH0KCiAgICBpZiAoX2xlbmd0aCAlIDMgIT0gMCkgewogICAgICAvKipwYWRkaW5nICovCiAgICAgIHZhciBwYWRsZW4gPSAzIC0gX2xlbmd0aCAlIDM7CgogICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHBhZGxlbjsgaSArPSAxKSB7CiAgICAgICAgX2Jhc2U2NCArPSAnPSc7CiAgICAgIH0KICAgIH0KICB9OwoKICBfdGhpcy50b1N0cmluZyA9IGZ1bmN0aW9uICgpIHsKICAgIHJldHVybiBfYmFzZTY0OwogIH07CgogIHJldHVybiBfdGhpczsKfTsKLyoqIA0KLy8gYmFzZTY0RGVjb2RlSW5wdXRTdHJlYW0NCiovCgoKdmFyIGJhc2U2NERlY29kZUlucHV0U3RyZWFtID0gZnVuY3Rpb24gKHN0cikgewogIHZhciBfc3RyID0gc3RyOwogIHZhciBfcG9zID0gMDsKICB2YXIgX2J1ZmZlciA9IDA7CiAgdmFyIF9idWZsZW4gPSAwOwogIHZhciBfdGhpcyA9IHt9OwoKICBfdGhpcy5yZWFkID0gZnVuY3Rpb24gKCkgewogICAgd2hpbGUgKF9idWZsZW4gPCA4KSB7CiAgICAgIGlmIChfcG9zID49IF9zdHIubGVuZ3RoKSB7CiAgICAgICAgaWYgKF9idWZsZW4gPT0gMCkgewogICAgICAgICAgcmV0dXJuIC0xOwogICAgICAgIH0KCiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCd1bmV4cGVjdGVkIGVuZCBvZiBmaWxlLi8nICsgX2J1Zmxlbik7CiAgICAgIH0KCiAgICAgIHZhciBjID0gX3N0ci5jaGFyQXQoX3Bvcyk7CgogICAgICBfcG9zICs9IDE7CgogICAgICBpZiAoYyA9PSAnPScpIHsKICAgICAgICBfYnVmbGVuID0gMDsKICAgICAgICByZXR1cm4gLTE7CiAgICAgIH0gZWxzZSBpZiAoYy5tYXRjaCgvXlxzJC8pKSB7CiAgICAgICAgLyoqIGlnbm9yZSBpZiB3aGl0ZXNwYWNlLiAqLwogICAgICAgIGNvbnRpbnVlOwogICAgICB9CgogICAgICBfYnVmZmVyID0gX2J1ZmZlciA8PCA2IHwgZGVjb2RlKGMuY2hhckNvZGVBdCgwKSk7CiAgICAgIF9idWZsZW4gKz0gNjsKICAgIH0KCiAgICB2YXIgbiA9IF9idWZmZXIgPj4+IF9idWZsZW4gLSA4ICYgMHhmZjsKICAgIF9idWZsZW4gLT0gODsKICAgIHJldHVybiBuOwogIH07CgogIHZhciBkZWNvZGUgPSBmdW5jdGlvbiAoYykgewogICAgaWYgKDB4NDEgPD0gYyAmJiBjIDw9IDB4NWEpIHsKICAgICAgcmV0dXJuIGMgLSAweDQxOwogICAgfSBlbHNlIGlmICgweDYxIDw9IGMgJiYgYyA8PSAweDdhKSB7CiAgICAgIHJldHVybiBjIC0gMHg2MSArIDI2OwogICAgfSBlbHNlIGlmICgweDMwIDw9IGMgJiYgYyA8PSAweDM5KSB7CiAgICAgIHJldHVybiBjIC0gMHgzMCArIDUyOwogICAgfSBlbHNlIGlmIChjID09IDB4MmIpIHsKICAgICAgcmV0dXJuIDYyOwogICAgfSBlbHNlIGlmIChjID09IDB4MmYpIHsKICAgICAgcmV0dXJuIDYzOwogICAgfSBlbHNlIHsKICAgICAgdGhyb3cgbmV3IEVycm9yKCdjOicgKyBjKTsKICAgIH0KICB9OwoKICByZXR1cm4gX3RoaXM7Cn07Ci8qKg0KLy8gZ2lmSW1hZ2UgKEIvVykNCiAqLwoKCnZhciBnaWZJbWFnZSA9IGZ1bmN0aW9uICh3aWR0aCwgaGVpZ2h0KSB7CiAgdmFyIF93aWR0aCA9IHdpZHRoOwogIHZhciBfaGVpZ2h0ID0gaGVpZ2h0OwoKICB2YXIgX2RhdGEgPSBuZXcgQXJyYXkod2lkdGggKiBoZWlnaHQpOwoKICB2YXIgX3RoaXMgPSB7fTsKCiAgX3RoaXMuc2V0UGl4ZWwgPSBmdW5jdGlvbiAoeCwgeSwgcGl4ZWwpIHsKICAgIF9kYXRhW3kgKiBfd2lkdGggKyB4XSA9IHBpeGVsOwogIH07CgogIF90aGlzLndyaXRlID0gZnVuY3Rpb24gKG91dCkgewogICAgLyoqIEdJRiBTaWduYXR1cmUqLwogICAgb3V0LndyaXRlU3RyaW5nKCdHSUY4N2EnKTsKICAgIC8qKlNjcmVlbiBEZXNjcmlwdG9yICovCgogICAgb3V0LndyaXRlU2hvcnQoX3dpZHRoKTsKICAgIG91dC53cml0ZVNob3J0KF9oZWlnaHQpOwogICAgb3V0LndyaXRlQnl0ZSgweDgwKTsKICAgIC8qKjJiaXQgKi8KCiAgICBvdXQud3JpdGVCeXRlKDApOwogICAgb3V0LndyaXRlQnl0ZSgwKTsKICAgIC8qKkdsb2JhbCBDb2xvciBNYXAgKi8KCiAgICAvKipibGFjayAqLwoKICAgIG91dC53cml0ZUJ5dGUoMHgwMCk7CiAgICBvdXQud3JpdGVCeXRlKDB4MDApOwogICAgb3V0LndyaXRlQnl0ZSgweDAwKTsKICAgIC8qKiB3aGl0ZSAqLwoKICAgIG91dC53cml0ZUJ5dGUoMHhmZik7CiAgICBvdXQud3JpdGVCeXRlKDB4ZmYpOwogICAgb3V0LndyaXRlQnl0ZSgweGZmKTsKICAgIC8qKkltYWdlIERlc2NyaXB0b3IgKi8KCiAgICBvdXQud3JpdGVTdHJpbmcoJywnKTsKICAgIG91dC53cml0ZVNob3J0KDApOwogICAgb3V0LndyaXRlU2hvcnQoMCk7CiAgICBvdXQud3JpdGVTaG9ydChfd2lkdGgpOwogICAgb3V0LndyaXRlU2hvcnQoX2hlaWdodCk7CiAgICBvdXQud3JpdGVCeXRlKDApOwogICAgLyoqUmFzdGVyIERhdGEgKi8KCiAgICB2YXIgbHp3TWluQ29kZVNpemUgPSAyOwogICAgdmFyIHJhc3RlciA9IGdldExaV1Jhc3RlcihsendNaW5Db2RlU2l6ZSk7CiAgICBvdXQud3JpdGVCeXRlKGx6d01pbkNvZGVTaXplKTsKICAgIHZhciBvZmZzZXQgPSAwOwoKICAgIHdoaWxlIChyYXN0ZXIubGVuZ3RoIC0gb2Zmc2V0ID4gMjU1KSB7CiAgICAgIG91dC53cml0ZUJ5dGUoMjU1KTsKICAgICAgb3V0LndyaXRlQnl0ZXMocmFzdGVyLCBvZmZzZXQsIDI1NSk7CiAgICAgIG9mZnNldCArPSAyNTU7CiAgICB9CgogICAgb3V0LndyaXRlQnl0ZShyYXN0ZXIubGVuZ3RoIC0gb2Zmc2V0KTsKICAgIG91dC53cml0ZUJ5dGVzKHJhc3Rlciwgb2Zmc2V0LCByYXN0ZXIubGVuZ3RoIC0gb2Zmc2V0KTsKICAgIG91dC53cml0ZUJ5dGUoMHgwMCk7CiAgICAvKioNCiAgICAgICogR0lGIFRlcm1pbmF0b3IgKi8KCiAgICBvdXQud3JpdGVTdHJpbmcoJzsnKTsKICB9OwoKICB2YXIgYml0T3V0cHV0U3RyZWFtID0gZnVuY3Rpb24gKG91dCkgewogICAgdmFyIF9vdXQgPSBvdXQ7CiAgICB2YXIgX2JpdExlbmd0aCA9IDA7CiAgICB2YXIgX2JpdEJ1ZmZlciA9IDA7CiAgICB2YXIgX3RoaXMgPSB7fTsKCiAgICBfdGhpcy53cml0ZSA9IGZ1bmN0aW9uIChkYXRhLCBsZW5ndGgpIHsKICAgICAgaWYgKGRhdGEgPj4+IGxlbmd0aCAhPSAwKSB7CiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdsZW5ndGggb3ZlcicpOwogICAgICB9CgogICAgICB3aGlsZSAoX2JpdExlbmd0aCArIGxlbmd0aCA+PSA4KSB7CiAgICAgICAgX291dC53cml0ZUJ5dGUoMHhmZiAmIChkYXRhIDw8IF9iaXRMZW5ndGggfCBfYml0QnVmZmVyKSk7CgogICAgICAgIGxlbmd0aCAtPSA4IC0gX2JpdExlbmd0aDsKICAgICAgICBkYXRhID4+Pj0gOCAtIF9iaXRMZW5ndGg7CiAgICAgICAgX2JpdEJ1ZmZlciA9IDA7CiAgICAgICAgX2JpdExlbmd0aCA9IDA7CiAgICAgIH0KCiAgICAgIF9iaXRCdWZmZXIgPSBkYXRhIDw8IF9iaXRMZW5ndGggfCBfYml0QnVmZmVyOwogICAgICBfYml0TGVuZ3RoID0gX2JpdExlbmd0aCArIGxlbmd0aDsKICAgIH07CgogICAgX3RoaXMuZmx1c2ggPSBmdW5jdGlvbiAoKSB7CiAgICAgIGlmIChfYml0TGVuZ3RoID4gMCkgewogICAgICAgIF9vdXQud3JpdGVCeXRlKF9iaXRCdWZmZXIpOwogICAgICB9CiAgICB9OwoKICAgIHJldHVybiBfdGhpczsKICB9OwoKICB2YXIgZ2V0TFpXUmFzdGVyID0gZnVuY3Rpb24gKGx6d01pbkNvZGVTaXplKSB7CiAgICB2YXIgY2xlYXJDb2RlID0gMSA8PCBsendNaW5Db2RlU2l6ZTsKICAgIHZhciBlbmRDb2RlID0gKDEgPDwgbHp3TWluQ29kZVNpemUpICsgMTsKICAgIHZhciBiaXRMZW5ndGggPSBsendNaW5Db2RlU2l6ZSArIDE7CiAgICAvKiogDQogICAgICAqIFNldHVwIExaV1RhYmxlDQogICAgICovCgogICAgdmFyIHRhYmxlID0gbHp3VGFibGUoKTsKCiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGNsZWFyQ29kZTsgaSArPSAxKSB7CiAgICAgIHRhYmxlLmFkZChTdHJpbmcuZnJvbUNoYXJDb2RlKGkpKTsKICAgIH0KCiAgICB0YWJsZS5hZGQoU3RyaW5nLmZyb21DaGFyQ29kZShjbGVhckNvZGUpKTsKICAgIHRhYmxlLmFkZChTdHJpbmcuZnJvbUNoYXJDb2RlKGVuZENvZGUpKTsKICAgIHZhciBieXRlT3V0ID0gYnl0ZUFycmF5T3V0cHV0U3RyZWFtKCk7CiAgICB2YXIgYml0T3V0ID0gYml0T3V0cHV0U3RyZWFtKGJ5dGVPdXQpOwogICAgLyoqIA0KICAgICAgKiAgY2xlYXIgY29kZQ0KICAgICAqLwoKICAgIGJpdE91dC53cml0ZShjbGVhckNvZGUsIGJpdExlbmd0aCk7CiAgICB2YXIgZGF0YUluZGV4ID0gMDsKICAgIHZhciBzID0gU3RyaW5nLmZyb21DaGFyQ29kZShfZGF0YVtkYXRhSW5kZXhdKTsKICAgIGRhdGFJbmRleCArPSAxOwoKICAgIHdoaWxlIChkYXRhSW5kZXggPCBfZGF0YS5sZW5ndGgpIHsKICAgICAgdmFyIGMgPSBTdHJpbmcuZnJvbUNoYXJDb2RlKF9kYXRhW2RhdGFJbmRleF0pOwogICAgICBkYXRhSW5kZXggKz0gMTsKCiAgICAgIGlmICh0YWJsZS5jb250YWlucyhzICsgYykpIHsKICAgICAgICBzID0gcyArIGM7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgYml0T3V0LndyaXRlKHRhYmxlLmluZGV4T2YocyksIGJpdExlbmd0aCk7CgogICAgICAgIGlmICh0YWJsZS5zaXplKCkgPCAweGZmZikgewogICAgICAgICAgaWYgKHRhYmxlLnNpemUoKSA9PSAxIDw8IGJpdExlbmd0aCkgewogICAgICAgICAgICBiaXRMZW5ndGggKz0gMTsKICAgICAgICAgIH0KCiAgICAgICAgICB0YWJsZS5hZGQocyArIGMpOwogICAgICAgIH0KCiAgICAgICAgcyA9IGM7CiAgICAgIH0KICAgIH0KCiAgICBiaXRPdXQud3JpdGUodGFibGUuaW5kZXhPZihzKSwgYml0TGVuZ3RoKTsKICAgIC8qKiANCiAgICAgICogZW5kIGNvZGUNCiAgICAgICogKi8KCiAgICBiaXRPdXQud3JpdGUoZW5kQ29kZSwgYml0TGVuZ3RoKTsKICAgIGJpdE91dC5mbHVzaCgpOwogICAgcmV0dXJuIGJ5dGVPdXQudG9CeXRlQXJyYXkoKTsKICB9OwoKICB2YXIgbHp3VGFibGUgPSBmdW5jdGlvbiAoKSB7CiAgICB2YXIgX21hcCA9IHt9OwogICAgdmFyIF9zaXplID0gMDsKICAgIHZhciBfdGhpcyA9IHt9OwoKICAgIF90aGlzLmFkZCA9IGZ1bmN0aW9uIChrZXkpIHsKICAgICAgaWYgKF90aGlzLmNvbnRhaW5zKGtleSkpIHsKICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ2R1cCBrZXk6JyArIGtleSk7CiAgICAgIH0KCiAgICAgIF9tYXBba2V5XSA9IF9zaXplOwogICAgICBfc2l6ZSArPSAxOwogICAgfTsKCiAgICBfdGhpcy5zaXplID0gZnVuY3Rpb24gKCkgewogICAgICByZXR1cm4gX3NpemU7CiAgICB9OwoKICAgIF90aGlzLmluZGV4T2YgPSBmdW5jdGlvbiAoa2V5KSB7CiAgICAgIHJldHVybiBfbWFwW2tleV07CiAgICB9OwoKICAgIF90aGlzLmNvbnRhaW5zID0gZnVuY3Rpb24gKGtleSkgewogICAgICByZXR1cm4gdHlwZW9mIF9tYXBba2V5XSAhPSAndW5kZWZpbmVkJzsKICAgIH07CgogICAgcmV0dXJuIF90aGlzOwogIH07CgogIHJldHVybiBfdGhpczsKfTsKCnZhciBjcmVhdGVJbWdUYWcgPSBmdW5jdGlvbiAod2lkdGgsIGhlaWdodCwgZ2V0UGl4ZWwsIGFsdCkgewogIHZhciBnaWYgPSBnaWZJbWFnZSh3aWR0aCwgaGVpZ2h0KTsKCiAgZm9yICh2YXIgeSA9IDA7IHkgPCBoZWlnaHQ7IHkgKz0gMSkgewogICAgZm9yICh2YXIgeCA9IDA7IHggPCB3aWR0aDsgeCArPSAxKSB7CiAgICAgIGdpZi5zZXRQaXhlbCh4LCB5LCBnZXRQaXhlbCh4LCB5KSk7CiAgICB9CiAgfQoKICB2YXIgYiA9IGJ5dGVBcnJheU91dHB1dFN0cmVhbSgpOwogIGdpZi53cml0ZShiKTsKICB2YXIgYmFzZTY0ID0gYmFzZTY0RW5jb2RlT3V0cHV0U3RyZWFtKCk7CiAgdmFyIGJ5dGVzID0gYi50b0J5dGVBcnJheSgpOwoKICBmb3IgKHZhciBpID0gMDsgaSA8IGJ5dGVzLmxlbmd0aDsgaSArPSAxKSB7CiAgICBiYXNlNjQud3JpdGVCeXRlKGJ5dGVzW2ldKTsKICB9CgogIGJhc2U2NC5mbHVzaCgpOwogIHZhciBpbWcgPSAnJzsKICBpbWcgKz0gJ2RhdGE6aW1hZ2UvZ2lmO2Jhc2U2NCwnOwogIGltZyArPSBiYXNlNjQ7CiAgcmV0dXJuIGltZzsKfTsKLyoqIA0KICogcmV0dXJucyBxcmNvZGUgZnVuY3Rpb24uDQogKiAqLwoKCnZhciBjcmVhdGVRckNvZGVJbWcgPSBmdW5jdGlvbiAob3B0aW9ucykgewogIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9OwogIG9wdGlvbnMuc2l6ZSA9IG9wdGlvbnMuc2l6ZTsKICB2YXIgdHlwZU51bWJlciA9IG9wdGlvbnMudHlwZU51bWJlciB8fCA0OwogIHZhciBlcnJvckNvcnJlY3RMZXZlbCA9IG9wdGlvbnMuZXJyb3JDb3JyZWN0TGV2ZWwgfHwgJ00nOwogIHZhciBzaXplID0gb3B0aW9ucy5zaXplIHx8IDUwMDsKICB2YXIgcXI7CgogIHRyeSB7CiAgICBxciA9IHFyY29kZSh0eXBlTnVtYmVyLCBlcnJvckNvcnJlY3RMZXZlbCB8fCAnTScpOwogICAgcXIuYWRkRGF0YShvcHRpb25zLnRleHQpOwogICAgcXIubWFrZSgpOwogIH0gY2F0Y2ggKGUpIHsKICAgIGlmICh0eXBlTnVtYmVyID49IDQwKSB7CiAgICAgIHRocm93IG5ldyBFcnJvcignVGV4dCB0b28gbG9uZyB0byBlbmNvZGUnKTsKICAgIH0gZWxzZSB7CiAgICAgIHJldHVybiBjcmVhdGVRckNvZGVJbWcob3B0aW9ucy50ZXh0LCB7CiAgICAgICAgc2l6ZTogc2l6ZSwKICAgICAgICBlcnJvckNvcnJlY3RMZXZlbDogZXJyb3JDb3JyZWN0TGV2ZWwsCiAgICAgICAgdHlwZU51bWJlcjogdHlwZU51bWJlciArIDEKICAgICAgfSk7CiAgICB9CiAgfQogIC8qKmNhbGMgY2VsbHNpemUgYW5kIG1hcmdpbiAqLwoKCiAgdmFyIGNlbGxzaXplID0gcGFyc2VJbnQoc2l6ZSAvIHFyLmdldE1vZHVsZUNvdW50KCkpOwogIHZhciBtYXJnaW4gPSBwYXJzZUludCgoc2l6ZSAtIHFyLmdldE1vZHVsZUNvdW50KCkgKiBjZWxsc2l6ZSkgLyAyKTsKICByZXR1cm4gcXIuY3JlYXRlSW1nVGFnKGNlbGxzaXplLCBtYXJnaW4sIHNpemUpOwp9OwoKdmFyIF9tb2R1bGUgPSB7fTsKdmFyIF9kZWZhdWx0ID0gY3JlYXRlUXJDb2RlSW1nOwpleHBvcnRzLmRlZmF1bHQgPSBfZGVmYXVsdDs="},null]}