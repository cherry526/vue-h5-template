{"remainingRequest":"C:\\Users\\Administrator\\Desktop\\vip_inline_h5\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\Administrator\\Desktop\\vip_inline_h5\\src\\utils\\pay.js","dependencies":[{"path":"C:\\Users\\Administrator\\Desktop\\vip_inline_h5\\src\\utils\\pay.js","mtime":1596705223189},{"path":"C:\\Users\\Administrator\\Desktop\\vip_inline_h5\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Administrator\\Desktop\\vip_inline_h5\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuaW5kZXgtb2YiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QudG8tc3RyaW5nIjsKaW1wb3J0ICJ2YW50L2VzL3RvYXN0L3N0eWxlIjsKaW1wb3J0IF9Ub2FzdCBmcm9tICJ2YW50L2VzL3RvYXN0IjsKaW1wb3J0ICJ2YW50L2VzL2RpYWxvZy9zdHlsZSI7CmltcG9ydCBfRGlhbG9nIGZyb20gInZhbnQvZXMvZGlhbG9nIjsKaW1wb3J0IF9vYmplY3RTcHJlYWQgZnJvbSAiQzovVXNlcnMvQWRtaW5pc3RyYXRvci9EZXNrdG9wL3ZpcF9pbmxpbmVfaDUvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL29iamVjdFNwcmVhZDIiOwoKLyoNCiAqIEBEZXNjcmlwdGlvbjogDQogKiBAVmVyc2lvbjogMS4wDQogKiBAQXV0b3I6IHllc29uZw0KICogQERhdGU6IDIwMjAtMDUtMTUgMTc6MTc6MjENCiAqIEBMYXN0RWRpdG9yczogeWVzb25nDQogKiBATGFzdEVkaXRUaW1lOiAyMDIwLTA4LTA1IDE5OjQ3OjUyDQogKi8KaW1wb3J0IGFwaSBmcm9tICdAL2FwaSc7CmltcG9ydCByb3V0ZXIgZnJvbSAnQC9yb3V0ZXInOwppbXBvcnQgdXRpbHMgZnJvbSAnLi91dGlscyc7CnZhciBvcmRlclBheSA9IHsKICAvKioNCiAgICogQGRlc2NyaXB0aW9uOiDmtLvliqjkuIvljZUNCiAgICogQHBhcmFtIHtPYmplY3R9IGRlYWxEYXRhIOa0u+WKqOS4i+WNleWPguaVsA0KICAgKiBAcmV0dXJuOiBQcm9taXNlDQogICAqIEBhdXRob3I6IHllc29uZw0KICAgKi8KICBhY3REZWFsOiBmdW5jdGlvbiBhY3REZWFsKGRlYWxEYXRhKSB7CiAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgIHZhciBhY3RJbmZvID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiB7fTsKICAgIGlmICh0aGlzLmlzQ2FuQ2xpY2spIHJldHVybjsKICAgIHRoaXMuaXNDYW5DbGljayA9IHRydWU7CiAgICByZXR1cm4gYXBpLmFjdERlYWwoX29iamVjdFNwcmVhZCh7fSwgZGVhbERhdGEpKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgaWYgKHJlcy5jb2RlID09IDUxMCB8fCByZXMuY29kZSA9PSA1MTEgfHwgcmVzLmNvZGUgPT0gMTE1MCkgewogICAgICAgIF9EaWFsb2cuYWxlcnQoewogICAgICAgICAgbWVzc2FnZTogcmVzLm1lc3NhZ2UKICAgICAgICB9KS50aGVuKGZ1bmN0aW9uICgpIHsKICAgICAgICAgIHJvdXRlci5wdXNoKCcvaW5kZXgvaG9tZScpOwogICAgICAgIH0pOwogICAgICB9IGVsc2UgaWYgKHJlcy5jb2RlID09IDEyNTApIHsKICAgICAgICAvLyDkuIvljZXku7fmoLzkuI7nrKzkuInmlrnku7fmoLzkuI3kuIDoh7QKICAgICAgICBfRGlhbG9nLmFsZXJ0KHsKICAgICAgICAgIG1lc3NhZ2U6ICforqLljZXkv6Hmga/lt7LosIPmlbTvvIzor7fliLfmlrDpobXpnaLph43mlrDkuIvljZUnCiAgICAgICAgfSkudGhlbihmdW5jdGlvbiAoKSB7CiAgICAgICAgICByb3V0ZXIuZ28oLTEpOwogICAgICAgIH0pOwogICAgICB9IGVsc2UgaWYgKHJlcyAmJiByZXMuZGVzYyAmJiAocmVzLmRlc2MuaW5kZXhPZign5Lqn5ZOB5bey57uP5LiL5p625oiW6ICF5Lu35qC85bey57uP6L+H5pyfJykgPiAtMSB8fCByZXMuZGVzYy5pbmRleE9mKCflt7Lnu4/plIDllK7lrozmr5UnKSA+IC0xKSkgewogICAgICAgIC8vIOiHquaIkea4uOWNoeWIuOW3suWUrue9hOaPkOekugogICAgICAgIF9EaWFsb2cuYWxlcnQoewogICAgICAgICAgdGl0bGU6ICflt7LllK7nvYQnLAogICAgICAgICAgbWVzc2FnZTogJ+W3sue7j+WNluWujOWVpu+8jOS4i+asoeimgeaKouW/q+S4gOeCueWTpn4nCiAgICAgICAgfSk7CiAgICAgIH0gZWxzZSBpZiAocmVzICYmIHJlcy5kZXNjICYmIHJlcy5kZXNjLmluZGV4T2YoJ+iBlOezu+S6uuS4jeato+ehricpID4gLTEpIHsKICAgICAgICBfdGhpcy4kVG9hc3QoJ+iBlOezu+S6uuS4jeato+ehriwg5LiN6IO96L+b6KGM6aKE6K6iIScpOwogICAgICB9IGVsc2UgaWYgKHJlcy5jb2RlICE9IDIyIHx8IHJlcy5jb2RlICE9IDIzKSB7CiAgICAgICAgLy8gY29kZSAyMiB8fCAyMyDkuLrph43lpI3mj5DkuqQKICAgICAgICBjb25zb2xlLmxvZyhfVG9hc3QsICdUb2FzdCcpOwoKICAgICAgICBfVG9hc3QocmVzLm1lc3NhZ2UpOwogICAgICB9CgogICAgICByZXR1cm4gcmVzOwogICAgfSkuZmluYWxseShmdW5jdGlvbiAoKSB7CiAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICAgIF90aGlzLmlzQ2FuQ2xpY2sgPSBmYWxzZTsKICAgICAgfSwgMzAwKTsKICAgIH0pOwogIH0sCgogIC8qKg0KICAgKiBAZGVzY3JpcHRpb246IOa0u+WKqOaUr+S7mA0KICAgKiBAcGFyYW0ge1N0cmluZ30gdHJhZGVJZCDorqLljZVJRA0KICAgKiBAcmV0dXJuOiBQcm9taXNlDQogICAqIEBhdXRob3I6IHllc29uZw0KICAgKi8KICBhY3RQYXk6IGZ1bmN0aW9uIGFjdFBheSh0cmFkZUlkKSB7CiAgICB2YXIgX3RoaXMyID0gdGhpczsKCiAgICB2YXIgcGF5SW5mbyA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDogJyc7CiAgICBpZiAodGhpcy5pc0Nhbk9yZGVyKSByZXR1cm47CiAgICB0aGlzLmlzQ2FuT3JkZXIgPSB0cnVlOwoKICAgIF9Ub2FzdC5sb2FkaW5nKHsKICAgICAgbWVzc2FnZTogJ+WHhuWkh+aUr+S7mC4uLicsCiAgICAgIGZvcmJpZENsaWNrOiB0cnVlLAogICAgICBkdXJhdGlvbjogMAogICAgfSk7CgogICAgaWYgKHV0aWxzLmdldEpSRSgpID09PSAnbWluaScpIHsKICAgICAgLy8g6Lez6L2s5bCP56iL5bqP5pSv5LuYCiAgICAgICR3eC5taW5pUHJvZ3JhbS5uYXZpZ2F0ZVRvKHsKICAgICAgICB1cmw6ICIvcGFnZXMvZG95ZFBheS9kb3lkUGF5P3RyYWRlSWQ9Ii5jb25jYXQodHJhZGVJZCkKICAgICAgfSk7CiAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICAgIF9EaWFsb2cuYWxlcnQoewogICAgICAgICAgdGl0bGU6ICfnoa7orqTmlK/ku5gnLAogICAgICAgICAgbWVzc2FnZTogJ+aYr+WQpuehruiupOW3suaUr+S7mOWujOaIkO+8gScKICAgICAgICB9KS50aGVuKGZ1bmN0aW9uICgpIHsKICAgICAgICAgIC8vIG9uIGNsb3NlCiAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7CiAgICAgICAgfSk7CiAgICAgIH0sIDMwMCk7CiAgICB9IGVsc2UgaWYgKHV0aWxzLmdldEpSRSgpID09PSAnd3gnKSB7CiAgICAgIC8vIOW+ruS/oWg15pSv5LuYCiAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7CiAgICAgICAgaWYgKHBheUluZm8gPT0gJycpIHsKICAgICAgICAgIC8vIOiuouWNlee7p+e7reaUr+S7mAogICAgICAgICAgYXBpLmFjdFBheSh7CiAgICAgICAgICAgIHRyYWRlSWQ6IHRyYWRlSWQsCiAgICAgICAgICAgIHBheVR5cGU6ICdQQVlfQXBwbGV0JwogICAgICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgICAgIGlmIChyZXMuc3RhdGUpIHsKICAgICAgICAgICAgICAkd3guY2hvb3NlV1hQYXkoewogICAgICAgICAgICAgICAgdGltZXN0YW1wOiByZXMuaW5mby50aW1lU3RhbXAsCiAgICAgICAgICAgICAgICAvLyDmlK/ku5jnrb7lkI3ml7bpl7TmiLPvvIzms6jmhI/lvq7kv6Fqc3Nka+S4reeahOaJgOacieS9v+eUqHRpbWVzdGFtcOWtl+auteWdh+S4uuWwj+WGmeOAguS9huacgOaWsOeJiOeahOaUr+S7mOWQjuWPsOeUn+aIkOetvuWQjeS9v+eUqOeahHRpbWVTdGFtcOWtl+auteWQjemcgOWkp+WGmeWFtuS4reeahFPlrZfnrKYKICAgICAgICAgICAgICAgIG5vbmNlU3RyOiByZXMuaW5mby5ub25jZVN0ciwKICAgICAgICAgICAgICAgIC8vIOaUr+S7mOetvuWQjemaj+acuuS4su+8jOS4jemVv+S6jiAzMiDkvY0KICAgICAgICAgICAgICAgIHBhY2thZ2U6IHJlcy5pbmZvLnBhY2thZ2UsCiAgICAgICAgICAgICAgICAvLyDnu5/kuIDmlK/ku5jmjqXlj6Pov5Tlm57nmoRwcmVwYXlfaWTlj4LmlbDlgLzvvIzmj5DkuqTmoLzlvI/lpoLvvJpwcmVwYXlfaWQ9XCpcKlwq77yJCiAgICAgICAgICAgICAgICBzaWduVHlwZTogcmVzLmluZm8uc2lnblR5cGUsCiAgICAgICAgICAgICAgICAvLyDnrb7lkI3mlrnlvI/vvIzpu5jorqTkuLonU0hBMSfvvIzkvb/nlKjmlrDniYjmlK/ku5jpnIDkvKDlhaUnTUQ1JwogICAgICAgICAgICAgICAgcGF5U2lnbjogcmVzLmluZm8ucGF5U2lnbiwKICAgICAgICAgICAgICAgIC8vIOaUr+S7mOetvuWQjQogICAgICAgICAgICAgICAgc3VjY2VzczogZnVuY3Rpb24gc3VjY2VzcyhyZXMpIHsKICAgICAgICAgICAgICAgICAgaWYgKHJlcy5lcnJNc2cgPT0gImNob29zZVdYUGF5Om9rIikgewogICAgICAgICAgICAgICAgICAgIC8vIOaUr+S7mOaIkOWKn+WQjueahOWbnuiwg+WHveaVsAogICAgICAgICAgICAgICAgICAgIHJlc29sdmUodHJhZGVJZCk7IC8vIOaUr+S7mOaIkOWKnwogICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgIHJlcy5jYW5jZWxQYXkgPSB0cnVlOyAvLyDlj5bmtojmlK/ku5gKCiAgICAgICAgICAgICAgICAgICAgcmVqZWN0KHJlcyk7IC8vIOaUr+S7mOWksei0pQogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgZmFpbDogZnVuY3Rpb24gZmFpbChyZXMpIHsKICAgICAgICAgICAgICAgICAgcmVzLmNhbmNlbFBheSA9IHRydWU7IC8vIOWPlua2iOaUr+S7mAoKICAgICAgICAgICAgICAgICAgcmVqZWN0KHJlcyk7IC8vIOaUr+S7mOWksei0pQoKICAgICAgICAgICAgICAgICAgX1RvYXN0KCfmlK/ku5jlpLHotKUnKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfSBlbHNlIGlmIChyZXMuY29kZSA9PSAiNTA4IiB8fCByZXMuY29kZSA9PSAiNTA5IiB8fCByZXMuY29kZSA9PSAiMTQxMiIpIHsKICAgICAgICAgICAgICAvLyA1MDgg5Lya5ZGY6L+H5pyf5pe277yM5peg5rOV5pSv5LuY6K6i5Y2V77yM6K6i5Y2V6Ieq5Yqo5Y+W5raI44CCIDUwOeiuouWNleW3sui/h+acnwogICAgICAgICAgICAgIHJlamVjdChyZXMpOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgX1RvYXN0KHJlcy5tZXNzYWdlKTsKICAgICAgICAgICAgICB9LCAxMDApOwogICAgICAgICAgICB9CiAgICAgICAgICB9KS5maW5hbGx5KGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgX1RvYXN0LmNsZWFyKCk7CgogICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICBfdGhpczIuaXNDYW5PcmRlciA9IGZhbHNlOwogICAgICAgICAgICB9LCAzMDApOwogICAgICAgICAgfSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICR3eC5jaG9vc2VXWFBheSh7CiAgICAgICAgICAgIHRpbWVzdGFtcDogcGF5SW5mby50aW1lU3RhbXAsCiAgICAgICAgICAgIC8vIOaUr+S7mOetvuWQjeaXtumXtOaIs++8jOazqOaEj+W+ruS/oWpzc2Rr5Lit55qE5omA5pyJ5L2/55SodGltZXN0YW1w5a2X5q615Z2H5Li65bCP5YaZ44CC5L2G5pyA5paw54mI55qE5pSv5LuY5ZCO5Y+w55Sf5oiQ562+5ZCN5L2/55So55qEdGltZVN0YW1w5a2X5q615ZCN6ZyA5aSn5YaZ5YW25Lit55qEU+Wtl+espgogICAgICAgICAgICBub25jZVN0cjogcGF5SW5mby5ub25jZVN0ciwKICAgICAgICAgICAgLy8g5pSv5LuY562+5ZCN6ZqP5py65Liy77yM5LiN6ZW/5LqOIDMyIOS9jQogICAgICAgICAgICBwYWNrYWdlOiBwYXlJbmZvLnBhY2thZ2UsCiAgICAgICAgICAgIC8vIOe7n+S4gOaUr+S7mOaOpeWPo+i/lOWbnueahHByZXBheV9pZOWPguaVsOWAvO+8jOaPkOS6pOagvOW8j+Wmgu+8mnByZXBheV9pZD1cKlwqXCrvvIkKICAgICAgICAgICAgc2lnblR5cGU6IHBheUluZm8uc2lnblR5cGUsCiAgICAgICAgICAgIC8vIOetvuWQjeaWueW8j++8jOm7mOiupOS4uidTSEExJ++8jOS9v+eUqOaWsOeJiOaUr+S7mOmcgOS8oOWFpSdNRDUnCiAgICAgICAgICAgIHBheVNpZ246IHBheUluZm8ucGF5U2lnbiwKICAgICAgICAgICAgLy8g5pSv5LuY562+5ZCNCiAgICAgICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uIHN1Y2Nlc3MocmVzKSB7CiAgICAgICAgICAgICAgaWYgKHJlcy5lcnJNc2cgPT0gImNob29zZVdYUGF5Om9rIikgewogICAgICAgICAgICAgICAgLy8g5pSv5LuY5oiQ5Yqf5ZCO55qE5Zue6LCD5Ye95pWwCiAgICAgICAgICAgICAgICByZXNvbHZlKHRyYWRlSWQpOyAvLyDmlK/ku5jmiJDlip8KICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgcmVzLmNhbmNlbFBheSA9IHRydWU7IC8vIOWPlua2iOaUr+S7mAoKICAgICAgICAgICAgICAgIHJlamVjdChyZXMpOyAvLyDmlK/ku5jlpLHotKUKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGZhaWw6IGZ1bmN0aW9uIGZhaWwocmVzKSB7CiAgICAgICAgICAgICAgcmVzLmNhbmNlbFBheSA9IHRydWU7IC8vIOWPlua2iOaUr+S7mAoKICAgICAgICAgICAgICByZWplY3QocmVzKTsgLy8g5pSv5LuY5aSx6LSlCgogICAgICAgICAgICAgIF9Ub2FzdCgn5pSv5LuY5aSx6LSlJyk7CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGNvbXBsZXRlOiBmdW5jdGlvbiBjb21wbGV0ZSgpIHsKICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgIF90aGlzMi5pc0Nhbk9yZGVyID0gZmFsc2U7CiAgICAgICAgICAgICAgfSwgMzAwKTsKICAgICAgICAgICAgfQogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0KICB9LAoKICAvKioNCiAgICogQGRlc2NyaXB0aW9uOiDmtLvliqjorqLljZXmo4Dpqozmn6Xor6INCiAgICogQHBhcmFtIHtzdHJpbmd9IHRyYWRlSWQg6K6i5Y2VSUQNCiAgICogQHJldHVybjogDQogICAqIEBhdXRob3I6IHllc29uZw0KICAgKi8KICBvcmRlclF1ZXJ5OiBmdW5jdGlvbiBvcmRlclF1ZXJ5KHRyYWRlSWQpIHsKICAgIHZhciBfdGhpczMgPSB0aGlzOwoKICAgIGlmICh0aGlzLmlzUXVlcnkpIHJldHVybjsKCiAgICBfVG9hc3QubG9hZGluZyh7CiAgICAgIG1lc3NhZ2U6ICfkuIvljZXmiJDlip/vvIzmoKHpqozorqLljZUuLi4nLAogICAgICBmb3JiaWRDbGljazogdHJ1ZSwKICAgICAgZHVyYXRpb246IDAKICAgIH0pOwoKICAgIHRoaXMuaXNRdWVyeSA9IHRydWU7CiAgICByZXR1cm4gYXBpLm9yZGVyX3F1ZXJ5KHsKICAgICAgdHJhZGVJZDogdHJhZGVJZAogICAgfSkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgIGlmIChyZXMuc3RhdGUpIHt9IGVsc2UgewogICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICAgICAgX1RvYXN0KHJlcy5tZXNzYWdlKTsKICAgICAgICB9LCAxMDApOwogICAgICB9CgogICAgICByZXR1cm4gcmVzOwogICAgfSkuZmluYWxseShmdW5jdGlvbiAoKSB7CiAgICAgIF9Ub2FzdC5jbGVhcigpOwoKICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgX3RoaXMzLmlzUXVlcnkgPSBmYWxzZTsKICAgICAgfSwgMzAwKTsKICAgIH0pOwogIH0KfTsKZXhwb3J0IGRlZmF1bHQgb3JkZXJQYXk7"},{"version":3,"sources":["C:/Users/Administrator/Desktop/vip_inline_h5/src/utils/pay.js"],"names":["api","router","utils","orderPay","actDeal","dealData","actInfo","isCanClick","then","res","code","alert","message","push","go","desc","indexOf","title","$Toast","console","log","finally","setTimeout","actPay","tradeId","payInfo","isCanOrder","loading","forbidClick","duration","getJRE","$wx","miniProgram","navigateTo","url","Promise","resolve","reject","payType","state","chooseWXPay","timestamp","info","timeStamp","nonceStr","package","signType","paySign","success","errMsg","cancelPay","fail","clear","complete","orderQuery","isQuery","order_query"],"mappings":"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","sourcesContent":["/*\r\n * @Description: \r\n * @Version: 1.0\r\n * @Autor: yesong\r\n * @Date: 2020-05-15 17:17:21\r\n * @LastEditors: yesong\r\n * @LastEditTime: 2020-08-05 19:47:52\r\n */\r\nimport api from '@/api'\r\nimport router from '@/router'\r\nimport utils from './utils'\r\nimport { Dialog, Toast} from 'vant'\r\nconst orderPay = {\r\n   /**\r\n    * @description: 活动下单\r\n    * @param {Object} dealData 活动下单参数\r\n    * @return: Promise\r\n    * @author: yesong\r\n    */   \r\n  actDeal(dealData, actInfo = {}) {\r\n    if (this.isCanClick) return\r\n    this.isCanClick = true\r\n    return api.actDeal({\r\n      ...dealData\r\n    }).then(res => {\r\n    \r\n      if (res.code == 510 || res.code == 511 || res.code == 1150){\r\n        Dialog.alert({\r\n          message: res.message\r\n        }).then(() => {\r\n          router.push('/index/home')\r\n        })\r\n      } else if (res.code == 1250) {\r\n        // 下单价格与第三方价格不一致\r\n        Dialog.alert({\r\n          message: '订单信息已调整，请刷新页面重新下单'\r\n        }).then(() => {\r\n          router.go(-1)\r\n        })\r\n      } else if (res && res.desc && (res.desc.indexOf('产品已经下架或者价格已经过期') > -1 || res.desc.indexOf('已经销售完毕') > -1)) {\r\n        // 自我游卡券已售罄提示\r\n        Dialog.alert({\r\n          title: '已售罄',\r\n          message: '已经卖完啦，下次要抢快一点哦~'\r\n        })\r\n      } else if (res && res.desc && res.desc.indexOf('联系人不正确') > -1) {\r\n        this.$Toast('联系人不正确, 不能进行预订!')\r\n      } else if (res.code != 22 || res.code != 23) {\r\n        // code 22 || 23 为重复提交\r\n        console.log(Toast, 'Toast')\r\n        Toast(res.message)\r\n      }\r\n      return res\r\n    }).finally(()=> {\r\n      setTimeout(()=> {\r\n        this.isCanClick = false\r\n      }, 300)\r\n    })\r\n   \r\n  },\r\n\r\n  /**\r\n   * @description: 活动支付\r\n   * @param {String} tradeId 订单ID\r\n   * @return: Promise\r\n   * @author: yesong\r\n   */\r\n  actPay(tradeId, payInfo='') {\r\n    if (this.isCanOrder) return\r\n    this.isCanOrder = true\r\n    Toast.loading({\r\n      message: '准备支付...',\r\n      forbidClick: true,\r\n      duration: 0\r\n    });\r\n    if (utils.getJRE() === 'mini') {\r\n      // 跳转小程序支付\r\n      $wx.miniProgram.navigateTo({\r\n        url: `/pages/doydPay/doydPay?tradeId=${tradeId}`\r\n      })\r\n      setTimeout(()=> {\r\n        Dialog.alert({\r\n          title: '确认支付',\r\n          message: '是否确认已支付完成！',\r\n        }).then(() => {\r\n          // on close\r\n          return Promise.resolve()\r\n        });\r\n      }, 300)\r\n    } else if (utils.getJRE() === 'wx') {\r\n      // 微信h5支付\r\n      return new Promise((resolve, reject) => {\r\n        if (payInfo == '') { \r\n          // 订单继续支付\r\n          api.actPay({\r\n            tradeId,\r\n            payType: 'PAY_Applet'\r\n          }).then(res => {\r\n            if (res.state) {\r\n              $wx.chooseWXPay({\r\n                timestamp: res.info.timeStamp, // 支付签名时间戳，注意微信jssdk中的所有使用timestamp字段均为小写。但最新版的支付后台生成签名使用的timeStamp字段名需大写其中的S字符\r\n                nonceStr: res.info.nonceStr, // 支付签名随机串，不长于 32 位\r\n                package: res.info.package, // 统一支付接口返回的prepay_id参数值，提交格式如：prepay_id=\\*\\*\\*）\r\n                signType: res.info.signType, // 签名方式，默认为'SHA1'，使用新版支付需传入'MD5'\r\n                paySign: res.info.paySign, // 支付签名\r\n                success: function (res) {\r\n                  if(res.errMsg == \"chooseWXPay:ok\" ) {\r\n                    // 支付成功后的回调函数\r\n                    resolve(tradeId) // 支付成功\r\n                  } else {\r\n                    res.cancelPay = true // 取消支付\r\n                    reject(res) // 支付失败\r\n                  }\r\n                },\r\n                fail (res) {\r\n                  res.cancelPay = true // 取消支付\r\n                  reject(res) // 支付失败\r\n                  Toast('支付失败')\r\n                }\r\n              });\r\n      \r\n            } else if (res.code == \"508\" || res.code == \"509\" || res.code == \"1412\") {\r\n              // 508 会员过期时，无法支付订单，订单自动取消。 509订单已过期\r\n              reject(res)\r\n            } else {\r\n              setTimeout(() => {\r\n                Toast(res.message)\r\n              }, 100)\r\n            }\r\n          }).finally(() => {\r\n            Toast.clear()\r\n            setTimeout(()=> {\r\n              this.isCanOrder = false\r\n            }, 300)\r\n          })\r\n        } else {\r\n          $wx.chooseWXPay({\r\n            timestamp: payInfo.timeStamp, // 支付签名时间戳，注意微信jssdk中的所有使用timestamp字段均为小写。但最新版的支付后台生成签名使用的timeStamp字段名需大写其中的S字符\r\n            nonceStr: payInfo.nonceStr, // 支付签名随机串，不长于 32 位\r\n            package: payInfo.package, // 统一支付接口返回的prepay_id参数值，提交格式如：prepay_id=\\*\\*\\*）\r\n            signType: payInfo.signType, // 签名方式，默认为'SHA1'，使用新版支付需传入'MD5'\r\n            paySign: payInfo.paySign, // 支付签名\r\n            success: function (res) {\r\n              if(res.errMsg == \"chooseWXPay:ok\" ) {\r\n                // 支付成功后的回调函数\r\n                resolve(tradeId) // 支付成功\r\n              } else {\r\n                res.cancelPay = true // 取消支付\r\n                reject(res) // 支付失败\r\n              }\r\n            },\r\n            fail (res) {\r\n              res.cancelPay = true // 取消支付\r\n              reject(res) // 支付失败\r\n              Toast('支付失败')\r\n            },\r\n            complete: ()=> {\r\n              setTimeout(()=> {\r\n                this.isCanOrder = false\r\n              }, 300)\r\n            }\r\n          });\r\n        }\r\n      })\r\n    }\r\n  },\r\n\r\n  /**\r\n   * @description: 活动订单检验查询\r\n   * @param {string} tradeId 订单ID\r\n   * @return: \r\n   * @author: yesong\r\n   */\r\n  orderQuery(tradeId) {\r\n    if (this.isQuery) return\r\n    Toast.loading({\r\n      message: '下单成功，校验订单...',\r\n      forbidClick: true,\r\n      duration: 0\r\n    });\r\n    this.isQuery = true\r\n    return api.order_query({\r\n      tradeId\r\n    }).then(res => {\r\n      if (res.state) {\r\n\r\n      } else {\r\n        setTimeout(() => {\r\n          Toast(res.message)\r\n        }, 100)\r\n      }\r\n      return res\r\n    }).finally(() => {\r\n      Toast.clear()\r\n      setTimeout(()=> {\r\n        this.isQuery = false\r\n      }, 300)\r\n    })\r\n  }\r\n\r\n}\r\nexport default orderPay"]}]}