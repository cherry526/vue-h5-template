{"remainingRequest":"C:\\Users\\Administrator\\Desktop\\vip_inline_h5\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\Administrator\\Desktop\\vip_inline_h5\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\Users\\Administrator\\Desktop\\vip_inline_h5\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Administrator\\Desktop\\vip_inline_h5\\src\\components\\common\\common\\uploadImg.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\Administrator\\Desktop\\vip_inline_h5\\src\\components\\common\\common\\uploadImg.vue","mtime":1596624611100},{"path":"C:\\Users\\Administrator\\Desktop\\vip_inline_h5\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Administrator\\Desktop\\vip_inline_h5\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\Administrator\\Desktop\\vip_inline_h5\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Administrator\\Desktop\\vip_inline_h5\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\Administrator\\Desktop\\vip_inline_h5\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Administrator\\Desktop\\vip_inline_h5\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\Administrator\\Desktop\\vip_inline_h5\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Administrator\\Desktop\\vip_inline_h5\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMubnVtYmVyLmNvbnN0cnVjdG9yIjsKLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICd1cGxvYWRJbWcnLAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4ge307CiAgfSwKICBwcm9wczogewogICAgaW1nczogewogICAgICB0eXBlOiBBcnJheQogICAgfSwKICAgIHVwbG9hZEltZ051bTogewogICAgICB0eXBlOiBOdW1iZXIsCiAgICAgIGRlZmF1bHQ6IDEKICAgIH0KICB9LAogIGNyZWF0ZWQ6IGZ1bmN0aW9uIGNyZWF0ZWQoKSB7Ly8gZ2V0V1hTaWduKCkKICAgIC8vICAgLnRoZW4oKQogICAgLy8gICAuY2F0Y2goZXJyID0+IHt9KTsKICB9LAogIG1ldGhvZHM6IHsKICAgIGNob29zZUltZzogZnVuY3Rpb24gY2hvb3NlSW1nKCkgewogICAgICB2YXIgdGhhdCA9IHRoaXM7CiAgICAgIHZhciBjb3VudCA9IHRoaXMudXBsb2FkSW1nTnVtIHx8IDE7CiAgICAgIGNvdW50ID0gY291bnQgLSB0aGlzLmltZ3MubGVuZ3RoOwogICAgICAkd3guY2hvb3NlSW1hZ2UoewogICAgICAgIGNvdW50OiBjb3VudCwKICAgICAgICAvLyDpu5jorqQ5CiAgICAgICAgc2l6ZVR5cGU6IFsib3JpZ2luYWwiLCAiY29tcHJlc3NlZCJdLAogICAgICAgIC8vIOWPr+S7peaMh+WumuaYr+WOn+Wbvui/mOaYr+WOi+e8qeWbvu+8jOm7mOiupOS6jOiAhemDveaciQogICAgICAgIHNvdXJjZVR5cGU6IFsiYWxidW0iLCAiY2FtZXJhIl0sCiAgICAgICAgLy8g5Y+v5Lul5oyH5a6a5p2l5rqQ5piv55u45YaM6L+Y5piv55u45py677yM6buY6K6k5LqM6ICF6YO95pyJCiAgICAgICAgc3VjY2VzczogZnVuY3Rpb24gc3VjY2VzcyhyZXMpIHsKICAgICAgICAgIHZhciBsb2NhbElkcyA9IHJlcy5sb2NhbElkczsgLy8g6L+U5Zue6YCJ5a6a54Wn54mH55qE5pys5ZywSUTliJfooajvvIxsb2NhbElk5Y+v5Lul5L2c5Li6aW1n5qCH562+55qEc3Jj5bGe5oCn5pi+56S65Zu+54mHCgogICAgICAgICAgdmFyIGkgPSAwLAogICAgICAgICAgICAgIGxlbiA9IGxvY2FsSWRzLmxlbmd0aDsKCiAgICAgICAgICBmdW5jdGlvbiB1cGxvYWQoKSB7CiAgICAgICAgICAgICR3eC51cGxvYWRJbWFnZSh7CiAgICAgICAgICAgICAgbG9jYWxJZDogbG9jYWxJZHNbaV0sCiAgICAgICAgICAgICAgLy8g6ZyA6KaB5LiK5Lyg55qE5Zu+54mH55qE5pys5ZywSUTvvIznlLFjaG9vc2VJbWFnZeaOpeWPo+iOt+W+lwogICAgICAgICAgICAgIGlzU2hvd1Byb2dyZXNzVGlwczogMSwKICAgICAgICAgICAgICAvLyDpu5jorqTkuLox77yM5pi+56S66L+b5bqm5o+Q56S6CiAgICAgICAgICAgICAgc3VjY2VzczogZnVuY3Rpb24gc3VjY2VzcyhyZXMpIHsKICAgICAgICAgICAgICAgIGkrKzsKCiAgICAgICAgICAgICAgICBpZiAoaSA8IGxlbikgewogICAgICAgICAgICAgICAgICB1cGxvYWQoKTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICB2YXIgc2VydmVySWQgPSByZXMuc2VydmVySWQ7IC8vIOi/lOWbnuWbvueJh+eahOacjeWKoeWZqOerr0lE5Y2zbWVkaWFfaWTlsIbmrKFpZOS8oOe7meWQjuWPsO+8jOeEtuWQjui/lOWbnm9zc+WbvueJh+WcsOWdgAoKICAgICAgICAgICAgICAgIHRoYXQuJGFwaS5kb3dubG9hZEltYWdlKHsKICAgICAgICAgICAgICAgICAgbWVkaWFJZDogc2VydmVySWQKICAgICAgICAgICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgICAgICAgICAgICBpZiAocmVzLnN0YXRlKSB7CiAgICAgICAgICAgICAgICAgICAgdGhhdC5pbWdzLnB1c2gocmVzLmluZm8ubWVkaWFVcmwpOyAvLyDpqozor4Hlm77niYfmlY/mhJ8KCiAgICAgICAgICAgICAgICAgICAgdGhhdC4kZW1pdCgndXBkYXRlOmltZ3MnLCB0aGF0LmltZ3MpOwogICAgICAgICAgICAgICAgICAgIHRoYXQuJFRvYXN0KCJcdTRFMEFcdTRGMjBcdTYyMTBcdTUyOUYiKTsKICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICB0aGF0LiRUb2FzdChyZXMubWVzc2FnZSk7CiAgICAgICAgICAgICAgICAgICAgdGhhdC4kZW1pdCgnaW1nRXJyb3InLCByZXMubWVzc2FnZSk7CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgICB9CgogICAgICAgICAgdXBsb2FkKCk7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0KICB9Cn07"},{"version":3,"sources":["uploadImg.vue"],"names":[],"mappings":";;;;;;;;;;;;;;AAcA,eAAA;AACA,EAAA,IAAA,EAAA,WADA;AAEA,EAAA,IAFA,kBAEA;AACA,WAAA,EAAA;AACA,GAJA;AAKA,EAAA,KAAA,EAAA;AACA,IAAA,IAAA,EAAA;AACA,MAAA,IAAA,EAAA;AADA,KADA;AAIA,IAAA,YAAA,EAAA;AACA,MAAA,IAAA,EAAA,MADA;AAEA,MAAA,OAAA,EAAA;AAFA;AAJA,GALA;AAcA,EAAA,OAdA,qBAcA,CACA;AACA;AACA;AACA,GAlBA;AAmBA,EAAA,OAAA,EAAA;AACA,IAAA,SADA,uBACA;AACA,UAAA,IAAA,GAAA,IAAA;AACA,UAAA,KAAA,GAAA,KAAA,YAAA,IAAA,CAAA;AACA,MAAA,KAAA,GAAA,KAAA,GAAA,KAAA,IAAA,CAAA,MAAA;AACA,MAAA,GAAA,CAAA,WAAA,CAAA;AACA,QAAA,KAAA,EAAA,KADA;AACA;AACA,QAAA,QAAA,EAAA,CAAA,UAAA,EAAA,YAAA,CAFA;AAEA;AACA,QAAA,UAAA,EAAA,CAAA,OAAA,EAAA,QAAA,CAHA;AAGA;AACA,QAAA,OAAA,EAAA,iBAAA,GAAA,EAAA;AACA,cAAA,QAAA,GAAA,GAAA,CAAA,QAAA,CADA,CACA;;AACA,cAAA,CAAA,GAAA,CAAA;AAAA,cACA,GAAA,GAAA,QAAA,CAAA,MADA;;AAEA,mBAAA,MAAA,GAAA;AACA,YAAA,GAAA,CAAA,WAAA,CAAA;AACA,cAAA,OAAA,EAAA,QAAA,CAAA,CAAA,CADA;AACA;AACA,cAAA,kBAAA,EAAA,CAFA;AAEA;AACA,cAAA,OAAA,EAAA,iBAAA,GAAA,EAAA;AACA,gBAAA,CAAA;;AACA,oBAAA,CAAA,GAAA,GAAA,EAAA;AACA,kBAAA,MAAA;AACA;;AACA,oBAAA,QAAA,GAAA,GAAA,CAAA,QAAA,CALA,CAKA;;AACA,gBAAA,IAAA,CAAA,IAAA,CAAA,aAAA,CAAA;AACA,kBAAA,OAAA,EAAA;AADA,iBAAA,EAEA,IAFA,CAEA,UAAA,GAAA,EAAA;AACA,sBAAA,GAAA,CAAA,KAAA,EAAA;AACA,oBAAA,IAAA,CAAA,IAAA,CAAA,IAAA,CAAA,GAAA,CAAA,IAAA,CAAA,QAAA,EADA,CAEA;;AACA,oBAAA,IAAA,CAAA,KAAA,CAAA,aAAA,EAAA,IAAA,CAAA,IAAA;AACA,oBAAA,IAAA,CAAA,MAAA;AACA,mBALA,MAKA;AACA,oBAAA,IAAA,CAAA,MAAA,CAAA,GAAA,CAAA,OAAA;AACA,oBAAA,IAAA,CAAA,KAAA,CAAA,UAAA,EAAA,GAAA,CAAA,OAAA;AACA;AACA,iBAZA;AAaA;AAtBA,aAAA;AAwBA;;AACA,UAAA,MAAA;AACA;AAnCA,OAAA;AAqCA;AA1CA;AAnBA,CAAA","sourcesContent":["<!--\r\n * @Description: \r\n * @Version: 1.0\r\n * @Autor: yesong\r\n * @Date: 2020-08-03 20:49:17\r\n * @LastEditors: yesong\r\n * @LastEditTime: 2020-08-04 18:02:51\r\n--> \r\n<template>\r\n  <div @click=\"chooseImg\">\r\n    <slot name=\"uploadImg\"></slot>\r\n  </div>\r\n</template>\r\n<script>\r\n  export default {\r\n    name: 'uploadImg',\r\n    data() {\r\n      return {}\r\n    },\r\n    props: {\r\n      imgs: {\r\n        type: Array\r\n      },\r\n      uploadImgNum: {\r\n        type: Number,\r\n        default: 1\r\n      }\r\n    },\r\n    created() {\r\n      // getWXSign()\r\n      //   .then()\r\n      //   .catch(err => {});\r\n    },\r\n    methods: {\r\n      chooseImg() {\r\n        var that = this;\r\n        let count = this.uploadImgNum || 1;\r\n            count = count - this.imgs.length\r\n        $wx.chooseImage({\r\n          count: count, // 默认9\r\n          sizeType: [\"original\", \"compressed\"], // 可以指定是原图还是压缩图，默认二者都有\r\n          sourceType: [\"album\", \"camera\"], // 可以指定来源是相册还是相机，默认二者都有\r\n          success: function(res) {\r\n            var localIds = res.localIds; // 返回选定照片的本地ID列表，localId可以作为img标签的src属性显示图片\r\n            var i = 0,\r\n              len = localIds.length;\r\n            function upload() {\r\n              $wx.uploadImage({\r\n                localId: localIds[i], // 需要上传的图片的本地ID，由chooseImage接口获得\r\n                isShowProgressTips: 1, // 默认为1，显示进度提示\r\n                success: function(res) {\r\n                  i++;\r\n                  if (i < len) {\r\n                    upload();\r\n                  }\r\n                  var serverId = res.serverId; // 返回图片的服务器端ID即media_id将次id传给后台，然后返回oss图片地址\r\n                  that.$api.downloadImage({\r\n                    mediaId: serverId\r\n                  }).then(res => {\r\n                    if (res.state) {\r\n                      that.imgs.push(res.info.mediaUrl)\r\n                      // 验证图片敏感\r\n                      that.$emit('update:imgs', that.imgs)\r\n                      that.$Toast(`上传成功`)\r\n                    } else {\r\n                      that.$Toast(res.message)\r\n                      that.$emit('imgError', res.message)\r\n                    }\r\n                  });\r\n                }\r\n              });\r\n            }\r\n            upload();\r\n          }\r\n        });\r\n      }\r\n    }\r\n  }\r\n</script>\r\n<style lang=\"less\" scoped>\r\n\r\n</style>\r\n\r\n\r\n"],"sourceRoot":"src/components/common/common"}]}