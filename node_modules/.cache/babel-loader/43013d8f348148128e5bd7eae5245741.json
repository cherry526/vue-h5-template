{"remainingRequest":"C:\\Users\\Administrator\\Desktop\\vip_inline_h5\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\Administrator\\Desktop\\vip_inline_h5\\src\\utils\\actions.js","dependencies":[{"path":"C:\\Users\\Administrator\\Desktop\\vip_inline_h5\\src\\utils\\actions.js","mtime":1594864865740},{"path":"C:\\Users\\Administrator\\Desktop\\vip_inline_h5\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Administrator\\Desktop\\vip_inline_h5\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuaW5kZXgtb2YiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5qb2luIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkubWFwIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LmtleXMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QudG8tc3RyaW5nIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLmV4ZWMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcubWF0Y2giOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcuc3BsaXQiOwppbXBvcnQgX29iamVjdFNwcmVhZCBmcm9tICJDOi9Vc2Vycy9BZG1pbmlzdHJhdG9yL0Rlc2t0b3AvdmlwX2lubGluZV9oNS9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vb2JqZWN0U3ByZWFkMiI7CmltcG9ydCBfY2xhc3NDYWxsQ2hlY2sgZnJvbSAiQzovVXNlcnMvQWRtaW5pc3RyYXRvci9EZXNrdG9wL3ZpcF9pbmxpbmVfaDUvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2NsYXNzQ2FsbENoZWNrIjsKaW1wb3J0IF9jcmVhdGVDbGFzcyBmcm9tICJDOi9Vc2Vycy9BZG1pbmlzdHJhdG9yL0Rlc2t0b3AvdmlwX2lubGluZV9oNS9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vY3JlYXRlQ2xhc3MiOwoKLyoNCiAqIEBEZXNjcmlwdGlvbjog5Lqk5LqS5LqM5qyh5bCB6KOFDQogKiBAVmVyc2lvbjogMS4wDQogKiBAQXV0b3I6IGNoZXJyeQ0KICogQERhdGU6IDIwMjAtMDctMTMgMTU6MTA6MDUNCiAqIEBMYXN0RWRpdG9yczogY2hlcnJ5DQogKiBATGFzdEVkaXRUaW1lOiAyMDIwLTA3LTE2IDEwOjAxOjA1DQogKi8KaW1wb3J0IGdldFdYU2lnbiBmcm9tICJAL3V0aWxzL3d4IjsKdmFyIHd4ID0gbnVsbDsKCmlmICh3aW5kb3cuJHd4KSB7CiAgd3ggPSB3aW5kb3cuJHd4Owp9IGVsc2UgewogIGdldFdYU2lnbigpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgd3ggPSByZXM7CiAgfSk7Cn0gLy8g5LqL5YWI5ZKM5a6J5Y2T57qm5a6adXNlckFnZW505Li6YW5kcm9pZO+8jOWSjGlvc+e6puWumnVzZXJBZ2VudOS4umlvcwoKCnZhciBlbnZUeXBlID0gJ3d4JzsKdmFyIHVhID0gbmF2aWdhdG9yLnVzZXJBZ2VudC50b0xvd2VyQ2FzZSgpOwoKaWYgKHVhLm1hdGNoKC9NaWNyb01lc3Nlbmdlci9pKSA9PSAibWljcm9tZXNzZW5nZXIiKSB7CiAgLy8gaW9z55qEdWHkuK3ml6BtaW5pUHJvZ3Jhbe+8jOS9humDveaciU1pY3JvTWVzc2VuZ2Vy77yI6KGo56S65piv5b6u5L+h5rWP6KeI5Zmo77yJCiAgaWYgKHd4KSB7CiAgICBjb25zb2xlLmxvZyh3eCwgJy0tLS0tLS0tLS0tLS13eC0tLS0tLS0tLS0tLS0nKTsKICAgIHd4Lm1pbmlQcm9ncmFtLmdldEVudihmdW5jdGlvbiAocmVzKSB7CiAgICAgIGlmIChyZXMubWluaXByb2dyYW0pIHsKICAgICAgICAvLyDlsI/nqIvluo/nq68KICAgICAgICBlbnZUeXBlID0gJ21pbmknOwogICAgICB9IGVsc2UgewogICAgICAgIC8vIOW+ruS/oea1j+iniOWZqAogICAgICAgIGVudlR5cGUgPSAnd3gnOwogICAgICB9CiAgICB9KTsKICB9Cn0gZWxzZSB7CiAgaWYgKHUuaW5kZXhPZignQW5kcm9pZCcpID4gLTEgfHwgdS5pbmRleE9mKCdMaW51eCcpID4gLTEpIHsKICAgIGVudlR5cGUgPSAnQW5kcm9pZCc7CiAgfSBlbHNlIGlmICghIXUubWF0Y2goL1woaVteO10rOyggVTspPyBDUFUuK01hYyBPUyBYLykpIHsKICAgIGVudlR5cGUgPSAnaW9zJzsKICB9IGVsc2UgaWYgKHUuaW5kZXhPZignaVBob25lJykgPiAtMSkgewogICAgZW52VHlwZSA9ICdpUGhvbmUnOwogIH0gZWxzZSBpZiAodS5pbmRleE9mKCdpUGFkJykgPiAtMSkgewogICAgZW52VHlwZSA9ICdpUGFkJzsKICB9IGVsc2UgewogICAgZW52VHlwZSA9ICdhcHAnOwogIH0KfSAvLyDlpITnkIbliIbkuqvot6/nlLHkuIrmlY/mhJ/lj4LmlbAKCgp2YXIgZGVsRGF0YSA9IGZ1bmN0aW9uIGRlbERhdGEoKSB7CiAgdmFyIHVybERhdGEgPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiBhcmd1bWVudHNbMF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1swXSA6ICd0b2tlbic7CgogIC8vIGxldCBsYXN0dXJsID0gd2luZG93LmxvY2F0aW9uLmhyZWYKICAvLyBjb25zdCBpbml0VXJsID0gd2luZG93LmxvY2F0aW9uLmhyZWYKICAvLyBpZihpbml0VXJsLmluZGV4T2YodXJsRGF0YSkgPiAtMSAmJiBpbml0VXJsLmluZGV4T2YoJz8nKSA+IC0xICYmIGluaXRVcmwuaW5kZXhPZignIycpID4gLTEpewogIC8vICAgbGV0IHRva2Vuc3RyID0gaW5pdFVybC5tYXRjaCgvXD8oXFMqKSMvKVsxXQogIC8vICAgbGV0IGxhc3RhcnIgPSBpbml0VXJsLnNwbGl0KCc/Jyt0b2tlbnN0cikKICAvLyAgIGxhc3R1cmwgPSBsYXN0YXJyWzBdK2xhc3RhcnJbMV0rJycKICAvLyB9ZWxzZSBpZihpbml0VXJsLmluZGV4T2YodXJsRGF0YSkgPiAtMSAmJiBpbml0VXJsLmluZGV4T2YoJz8nKSA+IC0xKXsKICAvLyAgIGxldCBudW0gPSBpbml0VXJsLmluZGV4T2YoJz8nKQogIC8vICAgbGFzdHVybCA9IGluaXRVcmwuc3Vic3RyaW5nKG51bSwgaW5pdFVybC5sZW5ndGggLTEgKQogIC8vIH1lbHNlIGlmKGluaXRVcmwuaW5kZXhPZih1cmxEYXRhKSA+IC0xICl7CiAgLy8gICBsYXN0dXJsID0gaW5pdFVybC5zcGxpdChgJHt1cmxEYXRhfT1gKQogIC8vIH0gCiAgLy8gcmV0dXJuIGxhc3R1cmwKICBpZiAod2luZG93LmxvY2F0aW9uLmhyZWYuaW5kZXhPZigndG9rZW4nKSA+IC0xICYmIHdpbmRvdy5sb2NhdGlvbi5ocmVmLmluZGV4T2YoJz8nKSA+IC0xICYmIHdpbmRvdy5sb2NhdGlvbi5ocmVmLmluZGV4T2YoJyMnKSA+IC0xKSB7CiAgICB2YXIgdG9rZW5zdHIgPSB3aW5kb3cubG9jYXRpb24uaHJlZi5tYXRjaCgvXD8oXFMqKSMvKVsxXTsKICAgIHZhciBsYXN0YXJyID0gd2luZG93LmxvY2F0aW9uLmhyZWYuc3BsaXQoJz8nICsgdG9rZW5zdHIpOwogICAgdmFyIGxhc3R1cmwgPSBsYXN0YXJyWzBdICsgbGFzdGFyclsxXSArICcnOwogICAgcmV0dXJuIGxhc3R1cmw7CiAgfSBlbHNlIGlmICh3aW5kb3cubG9jYXRpb24uaHJlZi5pbmRleE9mKCd0b2tlbicpID4gLTEgJiYgd2luZG93LmxvY2F0aW9uLmhyZWYuaW5kZXhPZignPycpID4gLTEpIHsKICAgIHZhciBudW0gPSB3aW5kb3cubG9jYXRpb24uaHJlZi5pbmRleE9mKCc/Jyk7CiAgICB2YXIgbGFiZWx1cmwgPSB3aW5kb3cubG9jYXRpb24uaHJlZi5zdWJzdHJpbmcobnVtLCB3aW5kb3cubG9jYXRpb24uaHJlZi5sZW5ndGggLSAxKTsKICAgIHJldHVybiBsYWJlbHVybDsKICB9IGVsc2UgaWYgKHdpbmRvdy5sb2NhdGlvbi5ocmVmLmluZGV4T2YoJ3Rva2VuJykgPiAtMSkgewogICAgdmFyIGxhc3QgPSB3aW5kb3cubG9jYXRpb24uaHJlZi5zcGxpdCgndG9rZW49Jyk7CiAgICByZXR1cm4gbGFzdDsKICB9IGVsc2UgewogICAgcmV0dXJuIHdpbmRvdy5sb2NhdGlvbi5ocmVmOwogIH0KfTsKCnZhciBhY3Rpb25zID0gLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHsKICBmdW5jdGlvbiBhY3Rpb25zKCkgewogICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIGFjdGlvbnMpOwogIH0KCiAgX2NyZWF0ZUNsYXNzKGFjdGlvbnMsIG51bGwsIFt7CiAgICBrZXk6ICJzaGFyZSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gc2hhcmUob3B0aW9ucykgewogICAgICBjb25zb2xlLmxvZyhlbnZUeXBlLCAnLS0tLS0tLS0tLS1lbnZUeXBlJywgb3B0aW9ucyk7CiAgICAgIHZhciBxdWVyeVN0cmluZyA9IE9iamVjdC5rZXlzKG9wdGlvbnMuZGF0YSkubWFwKGZ1bmN0aW9uIChrZXkpIHsKICAgICAgICByZXR1cm4ga2V5ICsgJz0nICsgb3B0aW9ucy5kYXRhW2tleV07CiAgICAgIH0pLmpvaW4oJyYnKTsKICAgICAgY29uc29sZS5sb2cocXVlcnlTdHJpbmcsICctLS0tLS0tLS0tLXF1ZXJ5U3RyaW5nJyk7CgogICAgICBpZiAoZW52VHlwZSA9PSAnbWluaScgJiYgd3gpIHsKICAgICAgICAvLyDnvZHpobXlkJHlsI/nqIvluo8gcG9zdE1lc3NhZ2Ug5pe277yM5Lya5Zyo54m55a6a5pe25py677yI5bCP56iL5bqP5ZCO6YCA44CB57uE5Lu26ZSA5q+B44CB5YiG5Lqr77yJ6Kem5Y+R5bm25pS25Yiw5raI5oGv44CCCiAgICAgICAgLy8gZS5kZXRhaWwgPSB7IGRhdGEgfe+8jGRhdGHmmK/lpJrmrKEgcG9zdE1lc3NhZ2Ug55qE5Y+C5pWw57uE5oiQ55qE5pWw57uECiAgICAgICAgLy8g5L2/55SoIHd4Lm1pbmlQcm9ncmFtLm5hdmlnYXRlQmFjayDlv4XpobvopoHlsI/nqIvluo/nmoTnlYzpnaLmoIjlpKfkuo7nrYnkuo4y77yM5LiN5riF5qWa55WM6Z2i5qCI55qE55yL5paH5qGj77yI5bCP56iL5bqP55WM6Z2i5qCI6ZO+5o6l77yJ77yM5Zug5Li65aaC5p6c5rKh5pyJ5LiK57qn55WM6Z2i5L2g5piv5LiN6IO96YCa6L+HbmF2aWdhdGVCYWNr5Y676L+U5Zue55qE77yMKirpnIDopoHnibnliKvms6jmhI/vvIzlvpflhYjov5Tlm57lho3ljrtwb3N0TWVzc2FnZQogICAgICAgIHd4Lm1pbmlQcm9ncmFtLm5hdmlnYXRlQmFjayh7CiAgICAgICAgICBkZWx0YTogMQogICAgICAgIH0pOwogICAgICAgIHd4Lm1pbmlQcm9ncmFtLnBvc3RNZXNzYWdlKHsKICAgICAgICAgIC8vIGRhdGE6IG9wdGlvbnMKICAgICAgICAgIGRhdGE6IHsKICAgICAgICAgICAgdGl0bGU6IG9wdGlvbnMudGl0bGUsCiAgICAgICAgICAgIGRlc2M6IG9wdGlvbnMuZGVzYywKICAgICAgICAgICAgcGF0aDogIi9wYWdlcy9kb3lkU2hhcmUvZG95ZFNoYXJlPyIuY29uY2F0KHF1ZXJ5U3RyaW5nKSAvLyBwYXRoOiBgL3BhZ2VzL2RveWRTaGFyZS9kb3lkU2hhcmU/ZGF0YT1gK0pTT04uc3RyaW5nZnkoe3VybDplbmNvZGVVUklDb21wb25lbnQob3B0aW9ucy51cmwpfSkgLy/ph43ngrnvvIx2aXBTaGFyZeaYr+Wwj+eoi+W6j+eahOmhtemdouS4re+8jOS7juWIhuS6q+i/m+WFpeeahGg155qE6JC95Zyw6aG1ICAgIAoKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgfSBlbHNlIHsKICAgICAgICBpZiAoIXd4KSByZXR1cm4gZmFsc2U7CiAgICAgICAgY29uc29sZS5sb2coZGVsRGF0YSgpICsgcXVlcnlTdHJpbmcsICctLS0tLS0tLS0tLS0tLS0tLWRlbERhdGEoKSArIHF1ZXJ5U3RyaW5nJyk7CiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNsb3ZlLCByZWplY3QpIHsKICAgICAgICAgIHd4Lm9uTWVudVNoYXJlQXBwTWVzc2FnZShfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoewogICAgICAgICAgICB0aXRsZTogb3B0aW9ucy50aXRsZSB8fCAn5r2u57qndmlwJywKICAgICAgICAgICAgLy8g5YiG5Lqr5qCH6aKYCiAgICAgICAgICAgIGRlc2M6IG9wdGlvbnMuZGVzYyB8fCAiIiwKICAgICAgICAgICAgLy8gbGluazogd2luZG93LmxvY2F0aW9uLmhyZWYuc3BsaXQoJyMnKVswXSwKICAgICAgICAgICAgbGluazogZGVsRGF0YSgpICsgcXVlcnlTdHJpbmcsCiAgICAgICAgICAgIGltZ1VybDogb3B0aW9ucy5pbWdVcmwgfHwgImh0dHA6Ly9kb3lkLXRlc3Qub3NzLWNuLXNoZW56aGVuLmFsaXl1bmNzLmNvbS9qa2Ivd3htZWRpYS8yMDE4MDkxMC8xNTM2NTczNTc3MTA4LnBuZyIsCiAgICAgICAgICAgIC8vIOWIhuS6q+WbvuaghwogICAgICAgICAgICB0eXBlOiBvcHRpb25zLnR5cGUgfHwgJycsCiAgICAgICAgICAgIC8vIOWIhuS6q+exu+WeiyxtdXNpY+OAgXZpZGVv5oiWbGlua++8jOS4jeWhq+m7mOiupOS4umxpbmsKICAgICAgICAgICAgZGF0YVVybDogb3B0aW9ucy5kYXRhVXJsIHx8ICcnCiAgICAgICAgICB9LCBvcHRpb25zKSwge30sIHsKICAgICAgICAgICAgc3VjY2VzczogZnVuY3Rpb24gc3VjY2VzcygpIHsKICAgICAgICAgICAgICAvLyDnlKjmiLfnoa7orqTliIbkuqvlkI7miafooYznmoTlm57osIPlh73mlbAKICAgICAgICAgICAgICByZXNsb3ZlKCd0cnVlJyk7CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGNhbmNlbDogZnVuY3Rpb24gY2FuY2VsKCkgewogICAgICAgICAgICAgIC8vIOeUqOaIt+WPlua2iOWIhuS6q+WQjuaJp+ihjOeahOWbnuiwg+WHveaVsAogICAgICAgICAgICAgIHJlc2xvdmUoJ2ZhbHNlJyk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pKTsKICAgICAgICB9KTsKICAgICAgfQogICAgfQogIH1dKTsKCiAgcmV0dXJuIGFjdGlvbnM7Cn0oKTsKCmV4cG9ydCB7IGFjdGlvbnMgYXMgZGVmYXVsdCB9Ow=="},{"version":3,"sources":["C:/Users/Administrator/Desktop/vip_inline_h5/src/utils/actions.js"],"names":["getWXSign","wx","window","$wx","then","res","envType","ua","navigator","userAgent","toLowerCase","match","console","log","miniProgram","getEnv","miniprogram","u","indexOf","delData","urlData","location","href","tokenstr","lastarr","split","lasturl","num","labelurl","substring","length","last","actions","options","queryString","Object","keys","data","map","key","join","navigateBack","delta","postMessage","title","desc","path","Promise","reslove","reject","onMenuShareAppMessage","link","imgUrl","type","dataUrl","success","cancel"],"mappings":"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","sourcesContent":["/*\r\n * @Description: 交互二次封装\r\n * @Version: 1.0\r\n * @Autor: cherry\r\n * @Date: 2020-07-13 15:10:05\r\n * @LastEditors: cherry\r\n * @LastEditTime: 2020-07-16 10:01:05\r\n */ \r\nimport getWXSign from \"@/utils/wx\"\r\nvar wx = null\r\nif(window.$wx) {\r\n  wx = window.$wx\r\n} else {\r\n  getWXSign().then(res => {\r\n    wx = res\r\n  })\r\n}\r\n// 事先和安卓约定userAgent为android，和ios约定userAgent为ios\r\nvar envType = 'wx'\r\nconst ua = navigator.userAgent.toLowerCase()\r\nif (ua.match(/MicroMessenger/i) == \"micromessenger\") {\r\n  // ios的ua中无miniProgram，但都有MicroMessenger（表示是微信浏览器）\r\n  if(wx) {\r\n    console.log(wx, '-------------wx-------------')\r\n    wx.miniProgram.getEnv((res)=>{\r\n      if (res.miniprogram) { // 小程序端\r\n        envType = 'mini'\r\n      } else {   // 微信浏览器\r\n        envType = 'wx'\r\n      }\r\n    })\r\n  }\r\n\r\n} else {\r\n  if(u.indexOf('Android') > -1 || u.indexOf('Linux') > -1 ) {\r\n    envType = 'Android'\r\n  } else if (!!u.match(/\\(i[^;]+;( U;)? CPU.+Mac OS X/)) {\r\n    envType = 'ios'\r\n  } else if ( u.indexOf('iPhone') > -1) {\r\n    envType = 'iPhone'\r\n  }  else if ( u.indexOf('iPad') > -1) {\r\n    envType = 'iPad'\r\n  } else {\r\n    envType = 'app'\r\n  }\r\n}\r\n\r\n// 处理分享路由上敏感参数\r\nconst delData = (urlData = 'token') => {\r\n  // let lasturl = window.location.href\r\n  // const initUrl = window.location.href\r\n  // if(initUrl.indexOf(urlData) > -1 && initUrl.indexOf('?') > -1 && initUrl.indexOf('#') > -1){\r\n  //   let tokenstr = initUrl.match(/\\?(\\S*)#/)[1]\r\n  //   let lastarr = initUrl.split('?'+tokenstr)\r\n  //   lasturl = lastarr[0]+lastarr[1]+''\r\n  // }else if(initUrl.indexOf(urlData) > -1 && initUrl.indexOf('?') > -1){\r\n  //   let num = initUrl.indexOf('?')\r\n  //   lasturl = initUrl.substring(num, initUrl.length -1 )\r\n  // }else if(initUrl.indexOf(urlData) > -1 ){\r\n  //   lasturl = initUrl.split(`${urlData}=`)\r\n  // } \r\n  // return lasturl\r\n  if(window.location.href.indexOf('token') > -1 && window.location.href.indexOf('?') > -1 && window.location.href.indexOf('#') > -1){\r\n    let tokenstr = window.location.href.match(/\\?(\\S*)#/)[1]\r\n    let lastarr = window.location.href.split('?'+tokenstr)\r\n    let lasturl = lastarr[0]+lastarr[1]+''\r\n    return lasturl\r\n  }else if(window.location.href.indexOf('token') > -1 && window.location.href.indexOf('?') > -1){\r\n    let num = window.location.href.indexOf('?')\r\n    let labelurl = window.location.href.substring(num, window.location.href.length -1 )\r\n    return labelurl\r\n  }else if(window.location.href.indexOf('token') > -1 ){\r\n    let last = window.location.href.split('token=')\r\n    return last\r\n  }\r\n  else{\r\n    return window.location.href\r\n  }\r\n}\r\n\r\nexport default class actions {\r\n  constructor() {}\r\n\r\n  static share(options) {\r\n    console.log(envType, '-----------envType', options)\r\n    const queryString = Object.keys(options.data).map(key => key + '=' + options.data[key]).join('&');\r\n    console.log(queryString, '-----------queryString')\r\n    if(envType == 'mini' && wx) {\r\n      // 网页向小程序 postMessage 时，会在特定时机（小程序后退、组件销毁、分享）触发并收到消息。\r\n      // e.detail = { data }，data是多次 postMessage 的参数组成的数组\r\n      // 使用 wx.miniProgram.navigateBack 必须要小程序的界面栈大于等于2，不清楚界面栈的看文档（小程序界面栈链接），因为如果没有上级界面你是不能通过navigateBack去返回的，**需要特别注意，得先返回再去postMessage\r\n      wx.miniProgram.navigateBack({\r\n        delta: 1\r\n      })\r\n      wx.miniProgram.postMessage({\r\n        // data: options\r\n        data: {\r\n          title: options.title,\r\n          desc: options.desc,\r\n          path: `/pages/doydShare/doydShare?${queryString}`    \r\n          // path: `/pages/doydShare/doydShare?data=`+JSON.stringfy({url:encodeURIComponent(options.url)}) //重点，vipShare是小程序的页面中，从分享进入的h5的落地页    \r\n        }\r\n      })\r\n    } else {\r\n      if(!wx) return false\r\n      console.log(delData() + queryString, '-----------------delData() + queryString')\r\n      return new Promise((reslove, reject ) => {                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   \r\n        wx.onMenuShareAppMessage({\r\n          title: options.title || '潮级vip', // 分享标题\r\n          desc: options.desc || \"\",\r\n          // link: window.location.href.split('#')[0],\r\n          link: delData() + queryString,\r\n          imgUrl: options.imgUrl || \"http://doyd-test.oss-cn-shenzhen.aliyuncs.com/jkb/wxmedia/20180910/1536573577108.png\", // 分享图标\r\n          type: options.type || '', // 分享类型,music、video或link，不填默认为link\r\n          dataUrl: options.dataUrl || '', // 如果type是music或video，则要提供数据链接，默认为空\r\n          ...options,\r\n          success: function () { \r\n            // 用户确认分享后执行的回调函数\r\n            reslove('true')\r\n          },\r\n          cancel: function () { \r\n            // 用户取消分享后执行的回调函数\r\n            reslove('false')\r\n          }\r\n        })\r\n      })\r\n    }\r\n  }\r\n  \r\n}"]}]}