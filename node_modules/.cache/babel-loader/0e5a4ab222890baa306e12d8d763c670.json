{"remainingRequest":"C:\\Users\\Administrator\\Desktop\\vip_inline_h5\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\Administrator\\Desktop\\vip_inline_h5\\src\\utils\\pay.js","dependencies":[{"path":"C:\\Users\\Administrator\\Desktop\\vip_inline_h5\\src\\utils\\pay.js","mtime":1597889072547},{"path":"C:\\Users\\Administrator\\Desktop\\vip_inline_h5\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Administrator\\Desktop\\vip_inline_h5\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuaW5kZXgtb2YiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QudG8tc3RyaW5nIjsKaW1wb3J0ICJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUiOwppbXBvcnQgX2FzeW5jVG9HZW5lcmF0b3IgZnJvbSAiQzovVXNlcnMvQWRtaW5pc3RyYXRvci9EZXNrdG9wL3ZpcF9pbmxpbmVfaDUvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2FzeW5jVG9HZW5lcmF0b3IiOwppbXBvcnQgInZhbnQvZXMvZGlhbG9nL3N0eWxlIjsKaW1wb3J0IF9EaWFsb2cgZnJvbSAidmFudC9lcy9kaWFsb2ciOwppbXBvcnQgX29iamVjdFNwcmVhZCBmcm9tICJDOi9Vc2Vycy9BZG1pbmlzdHJhdG9yL0Rlc2t0b3AvdmlwX2lubGluZV9oNS9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vb2JqZWN0U3ByZWFkMiI7CmltcG9ydCAidmFudC9lcy90b2FzdC9zdHlsZSI7CmltcG9ydCBfVG9hc3QgZnJvbSAidmFudC9lcy90b2FzdCI7CgovKg0KICogQERlc2NyaXB0aW9uOiANCiAqIEBWZXJzaW9uOiAxLjANCiAqIEBBdXRvcjogeWVzb25nDQogKiBARGF0ZTogMjAyMC0wNS0xNSAxNzoxNzoyMQ0KICogQExhc3RFZGl0b3JzOiB5ZXNvbmcNCiAqIEBMYXN0RWRpdFRpbWU6IDIwMjAtMDgtMDggMTQ6MDY6MDUNCiAqLwppbXBvcnQgYXBpIGZyb20gJ0AvYXBpJzsKaW1wb3J0IHJvdXRlciBmcm9tICdAL3JvdXRlcic7CmltcG9ydCB1dGlscyBmcm9tICcuL3V0aWxzJzsKaW1wb3J0IGdldFdYU2lnbiBmcm9tICcuL3d4JzsKdmFyIG9yZGVyUGF5ID0gewogIC8qKg0KICAgKiBAZGVzY3JpcHRpb246IOa0u+WKqOS4i+WNlQ0KICAgKiBAcGFyYW0ge09iamVjdH0gZGVhbERhdGEg5rS75Yqo5LiL5Y2V5Y+C5pWwDQogICAqIEByZXR1cm46IFByb21pc2UNCiAgICogQGF1dGhvcjogeWVzb25nDQogICAqLwogIGFjdERlYWw6IGZ1bmN0aW9uIGFjdERlYWwoZGVhbERhdGEpIHsKICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgdmFyIGFjdEluZm8gPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6IHt9OwoKICAgIF9Ub2FzdC5sb2FkaW5nKHsKICAgICAgbWVzc2FnZTogJ+S4i+WNleS4rS4uLicsCiAgICAgIGZvcmJpZENsaWNrOiB0cnVlLAogICAgICBkdXJhdGlvbjogMAogICAgfSk7CgogICAgaWYgKHRoaXMuaXNDYW5DbGljaykgcmV0dXJuOwogICAgdGhpcy5pc0NhbkNsaWNrID0gdHJ1ZTsKICAgIHJldHVybiBhcGkuYWN0RGVhbChfb2JqZWN0U3ByZWFkKHt9LCBkZWFsRGF0YSkpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICBpZiAocmVzLmNvZGUgPT0gNTEwIHx8IHJlcy5jb2RlID09IDUxMSB8fCByZXMuY29kZSA9PSAxMTUwKSB7CiAgICAgICAgX0RpYWxvZy5hbGVydCh7CiAgICAgICAgICBtZXNzYWdlOiByZXMubWVzc2FnZQogICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKCkgewogICAgICAgICAgcm91dGVyLnB1c2goJy9pbmRleC9ob21lJyk7CiAgICAgICAgfSk7CiAgICAgIH0gZWxzZSBpZiAocmVzLmNvZGUgPT0gMTI1MCkgewogICAgICAgIC8vIOS4i+WNleS7t+agvOS4juesrOS4ieaWueS7t+agvOS4jeS4gOiHtAogICAgICAgIF9EaWFsb2cuYWxlcnQoewogICAgICAgICAgbWVzc2FnZTogJ+iuouWNleS/oeaBr+W3suiwg+aVtO+8jOivt+WIt+aWsOmhtemdoumHjeaWsOS4i+WNlScKICAgICAgICB9KS50aGVuKGZ1bmN0aW9uICgpIHsKICAgICAgICAgIHJvdXRlci5nbygtMSk7CiAgICAgICAgfSk7CiAgICAgIH0gZWxzZSBpZiAocmVzICYmIHJlcy5kZXNjICYmIChyZXMuZGVzYy5pbmRleE9mKCfkuqflk4Hlt7Lnu4/kuIvmnrbmiJbogIXku7fmoLzlt7Lnu4/ov4fmnJ8nKSA+IC0xIHx8IHJlcy5kZXNjLmluZGV4T2YoJ+W3sue7j+mUgOWUruWujOavlScpID4gLTEpKSB7CiAgICAgICAgLy8g6Ieq5oiR5ri45Y2h5Yi45bey5ZSu572E5o+Q56S6CiAgICAgICAgX0RpYWxvZy5hbGVydCh7CiAgICAgICAgICB0aXRsZTogJ+W3suWUrue9hCcsCiAgICAgICAgICBtZXNzYWdlOiAn5bey57uP5Y2W5a6M5ZWm77yM5LiL5qyh6KaB5oqi5b+r5LiA54K55ZOmficKICAgICAgICB9KTsKICAgICAgfSBlbHNlIGlmIChyZXMgJiYgcmVzLmRlc2MgJiYgcmVzLmRlc2MuaW5kZXhPZign6IGU57O75Lq65LiN5q2j56GuJykgPiAtMSkgewogICAgICAgIF9Ub2FzdCgn6IGU57O75Lq65LiN5q2j56GuLCDkuI3og73ov5vooYzpooTorqIhJyk7CiAgICAgIH0gZWxzZSBpZiAocmVzLmNvZGUgIT0gMjIgfHwgcmVzLmNvZGUgIT0gMjMpIHsKICAgICAgICAvLyBjb2RlIDIyIHx8IDIzIOS4uumHjeWkjeaPkOS6pAogICAgICAgIF9Ub2FzdChyZXMubWVzc2FnZSk7CiAgICAgIH0KCiAgICAgIHJldHVybiByZXM7CiAgICB9KS5maW5hbGx5KGZ1bmN0aW9uICgpIHsKICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgX1RvYXN0LmNsZWFyKCk7CgogICAgICAgIF90aGlzLmlzQ2FuQ2xpY2sgPSBmYWxzZTsKICAgICAgfSwgMzAwKTsKICAgIH0pOwogIH0sCgogIC8qKg0KICAgKiBAZGVzY3JpcHRpb246IOa0u+WKqOaUr+S7mA0KICAgKiBAcGFyYW0ge1N0cmluZ30gdHJhZGVJZCDorqLljZVJRA0KICAgKiBAcmV0dXJuOiBQcm9taXNlDQogICAqIEBhdXRob3I6IHllc29uZw0KICAgKi8KICBhY3RQYXk6IGZ1bmN0aW9uIGFjdFBheSh0cmFkZUlkKSB7CiAgICB2YXIgX2FyZ3VtZW50cyA9IGFyZ3VtZW50cywKICAgICAgICBfdGhpczIgPSB0aGlzOwoKICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUoKSB7CiAgICAgIHZhciBwYXlJbmZvLCAkd3g7CiAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICBwYXlJbmZvID0gX2FyZ3VtZW50cy5sZW5ndGggPiAxICYmIF9hcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IF9hcmd1bWVudHNbMV0gOiAnJzsKCiAgICAgICAgICAgICAgaWYgKCFfdGhpczIuaXNDYW5PcmRlcikgewogICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDM7CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5hYnJ1cHQoInJldHVybiIpOwoKICAgICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICAgIF9jb250ZXh0LnByZXYgPSAzOwogICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA2OwogICAgICAgICAgICAgIHJldHVybiBnZXRXWFNpZ24oKTsKCiAgICAgICAgICAgIGNhc2UgNjoKICAgICAgICAgICAgICAkd3ggPSBfY29udGV4dC5zZW50OwogICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAxMjsKICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgIGNhc2UgOToKICAgICAgICAgICAgICBfY29udGV4dC5wcmV2ID0gOTsKICAgICAgICAgICAgICBfY29udGV4dC50MCA9IF9jb250ZXh0WyJjYXRjaCJdKDMpOwogICAgICAgICAgICAgIGNvbnNvbGUubG9nKF9jb250ZXh0LnQwKTsKCiAgICAgICAgICAgIGNhc2UgMTI6CiAgICAgICAgICAgICAgX3RoaXMyLmlzQ2FuT3JkZXIgPSB0cnVlOwoKICAgICAgICAgICAgICBfVG9hc3QubG9hZGluZyh7CiAgICAgICAgICAgICAgICBtZXNzYWdlOiAn5YeG5aSH5pSv5LuYLi4uJywKICAgICAgICAgICAgICAgIGZvcmJpZENsaWNrOiB0cnVlLAogICAgICAgICAgICAgICAgZHVyYXRpb246IDAKICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgaWYgKCEodXRpbHMuZ2V0SlJFKCkgPT09ICdtaW5pJykpIHsKICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAxODsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LmFicnVwdCgicmV0dXJuIiwgbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgewogICAgICAgICAgICAgICAgLy8g6Lez6L2s5bCP56iL5bqP5pSv5LuYCiAgICAgICAgICAgICAgICAkd3gubWluaVByb2dyYW0ubmF2aWdhdGVUbyh7CiAgICAgICAgICAgICAgICAgIHVybDogIi9wYWdlcy9kb3lkUGF5L2RveWRQYXk/dHJhZGVJZD0iLmNvbmNhdCh0cmFkZUlkKQogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgX0RpYWxvZy5hbGVydCh7CiAgICAgICAgICAgICAgICAgICAgdGl0bGU6ICfnoa7orqTmlK/ku5gnLAogICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICfmmK/lkKbnoa7orqTlt7LmlK/ku5jlrozmiJDvvIEnCiAgICAgICAgICAgICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgIHJlc29sdmUoKTsKICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9LCAzMDApOwogICAgICAgICAgICAgIH0pKTsKCiAgICAgICAgICAgIGNhc2UgMTg6CiAgICAgICAgICAgICAgaWYgKCEodXRpbHMuZ2V0SlJFKCkgPT09ICd3eCcpKSB7CiAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMjA7CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5hYnJ1cHQoInJldHVybiIsIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHsKICAgICAgICAgICAgICAgIGlmIChwYXlJbmZvID09ICcnKSB7CiAgICAgICAgICAgICAgICAgIC8vIOiuouWNlee7p+e7reaUr+S7mAogICAgICAgICAgICAgICAgICBhcGkuYWN0UGF5KHsKICAgICAgICAgICAgICAgICAgICB0cmFkZUlkOiB0cmFkZUlkLAogICAgICAgICAgICAgICAgICAgIHBheVR5cGU6ICdQQVlfQXBwbGV0JwogICAgICAgICAgICAgICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICAgICAgICAgICAgICBpZiAocmVzLnN0YXRlKSB7CiAgICAgICAgICAgICAgICAgICAgICAkd3guY2hvb3NlV1hQYXkoewogICAgICAgICAgICAgICAgICAgICAgICB0aW1lc3RhbXA6IHJlcy5pbmZvLnRpbWVTdGFtcCwKICAgICAgICAgICAgICAgICAgICAgICAgLy8g5pSv5LuY562+5ZCN5pe26Ze05oiz77yM5rOo5oSP5b6u5L+hanNzZGvkuK3nmoTmiYDmnInkvb/nlKh0aW1lc3RhbXDlrZfmrrXlnYfkuLrlsI/lhpnjgILkvYbmnIDmlrDniYjnmoTmlK/ku5jlkI7lj7DnlJ/miJDnrb7lkI3kvb/nlKjnmoR0aW1lU3RhbXDlrZfmrrXlkI3pnIDlpKflhpnlhbbkuK3nmoRT5a2X56ymCiAgICAgICAgICAgICAgICAgICAgICAgIG5vbmNlU3RyOiByZXMuaW5mby5ub25jZVN0ciwKICAgICAgICAgICAgICAgICAgICAgICAgLy8g5pSv5LuY562+5ZCN6ZqP5py65Liy77yM5LiN6ZW/5LqOIDMyIOS9jQogICAgICAgICAgICAgICAgICAgICAgICBwYWNrYWdlOiByZXMuaW5mby5wYWNrYWdlLAogICAgICAgICAgICAgICAgICAgICAgICAvLyDnu5/kuIDmlK/ku5jmjqXlj6Pov5Tlm57nmoRwcmVwYXlfaWTlj4LmlbDlgLzvvIzmj5DkuqTmoLzlvI/lpoLvvJpwcmVwYXlfaWQ9XCpcKlwq77yJCiAgICAgICAgICAgICAgICAgICAgICAgIHNpZ25UeXBlOiByZXMuaW5mby5zaWduVHlwZSwKICAgICAgICAgICAgICAgICAgICAgICAgLy8g562+5ZCN5pa55byP77yM6buY6K6k5Li6J1NIQTEn77yM5L2/55So5paw54mI5pSv5LuY6ZyA5Lyg5YWlJ01ENScKICAgICAgICAgICAgICAgICAgICAgICAgcGF5U2lnbjogcmVzLmluZm8ucGF5U2lnbiwKICAgICAgICAgICAgICAgICAgICAgICAgLy8g5pSv5LuY562+5ZCNCiAgICAgICAgICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uIHN1Y2Nlc3MocmVzKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlcy5lcnJNc2cgPT0gImNob29zZVdYUGF5Om9rIikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8g5pSv5LuY5oiQ5Yqf5ZCO55qE5Zue6LCD5Ye95pWwCiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlKHRyYWRlSWQpOyAvLyDmlK/ku5jmiJDlip8KICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzLmNhbmNlbFBheSA9IHRydWU7IC8vIOWPlua2iOaUr+S7mAoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlamVjdChyZXMpOyAvLyDmlK/ku5jlpLHotKUKICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgIGZhaWw6IGZ1bmN0aW9uIGZhaWwocmVzKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzLmNhbmNlbFBheSA9IHRydWU7IC8vIOWPlua2iOaUr+S7mAoKICAgICAgICAgICAgICAgICAgICAgICAgICByZWplY3QocmVzKTsgLy8g5pSv5LuY5aSx6LSlCgogICAgICAgICAgICAgICAgICAgICAgICAgIF9Ub2FzdCgn5pSv5LuY5aSx6LSlJyk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbXBsZXRlOiBmdW5jdGlvbiBjb21wbGV0ZShyZXMpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVzLmVyck1zZyA9PSAnY2hvb3NlV1hQYXk6Y2FuY2VsJykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8g5Y+W5raI5pSv5LuYCiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXMuY2FuY2VsUGF5ID0gdHJ1ZTsgLy8g5Y+W5raI5pSv5LuYCgogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVqZWN0KHJlcyk7IC8vIOaUr+S7mOWksei0pQoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9Ub2FzdCgn5Y+W5raI5pSv5LuYJyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHJlcy5jb2RlID09ICI1MDgiIHx8IHJlcy5jb2RlID09ICI1MDkiIHx8IHJlcy5jb2RlID09ICIxNDEyIikgewogICAgICAgICAgICAgICAgICAgICAgLy8gNTA4IOS8muWRmOi/h+acn+aXtu+8jOaXoOazleaUr+S7mOiuouWNle+8jOiuouWNleiHquWKqOWPlua2iOOAgiA1MDnorqLljZXlt7Lov4fmnJ8KICAgICAgICAgICAgICAgICAgICAgIHJlamVjdChyZXMpOwogICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgX1RvYXN0KHJlcy5tZXNzYWdlKTsKICAgICAgICAgICAgICAgICAgICAgIH0sIDEwMCk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICB9KS5maW5hbGx5KGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICBfVG9hc3QuY2xlYXIoKTsKCiAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgICBfdGhpczIuaXNDYW5PcmRlciA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgIH0sIDMwMCk7CiAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgJHd4LmNob29zZVdYUGF5KHsKICAgICAgICAgICAgICAgICAgICB0aW1lc3RhbXA6IHBheUluZm8udGltZVN0YW1wLAogICAgICAgICAgICAgICAgICAgIC8vIOaUr+S7mOetvuWQjeaXtumXtOaIs++8jOazqOaEj+W+ruS/oWpzc2Rr5Lit55qE5omA5pyJ5L2/55SodGltZXN0YW1w5a2X5q615Z2H5Li65bCP5YaZ44CC5L2G5pyA5paw54mI55qE5pSv5LuY5ZCO5Y+w55Sf5oiQ562+5ZCN5L2/55So55qEdGltZVN0YW1w5a2X5q615ZCN6ZyA5aSn5YaZ5YW25Lit55qEU+Wtl+espgogICAgICAgICAgICAgICAgICAgIG5vbmNlU3RyOiBwYXlJbmZvLm5vbmNlU3RyLAogICAgICAgICAgICAgICAgICAgIC8vIOaUr+S7mOetvuWQjemaj+acuuS4su+8jOS4jemVv+S6jiAzMiDkvY0KICAgICAgICAgICAgICAgICAgICBwYWNrYWdlOiBwYXlJbmZvLnBhY2thZ2UgfHwgcGF5SW5mby5wYWNrYWdlMSwKICAgICAgICAgICAgICAgICAgICAvLyDnu5/kuIDmlK/ku5jmjqXlj6Pov5Tlm57nmoRwcmVwYXlfaWTlj4LmlbDlgLzvvIzmj5DkuqTmoLzlvI/lpoLvvJpwcmVwYXlfaWQ9XCpcKlwq77yJCiAgICAgICAgICAgICAgICAgICAgc2lnblR5cGU6IHBheUluZm8uc2lnblR5cGUsCiAgICAgICAgICAgICAgICAgICAgLy8g562+5ZCN5pa55byP77yM6buY6K6k5Li6J1NIQTEn77yM5L2/55So5paw54mI5pSv5LuY6ZyA5Lyg5YWlJ01ENScKICAgICAgICAgICAgICAgICAgICBwYXlTaWduOiBwYXlJbmZvLnBheVNpZ24gfHwgcGF5SW5mby5hZ2FpblNpZ24sCiAgICAgICAgICAgICAgICAgICAgLy8g5pSv5LuY562+5ZCNCiAgICAgICAgICAgICAgICAgICAgc3VjY2VzczogZnVuY3Rpb24gc3VjY2VzcyhyZXMpIHsKICAgICAgICAgICAgICAgICAgICAgIGlmIChyZXMuZXJyTXNnID09ICJjaG9vc2VXWFBheTpvayIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgLy8g5pSv5LuY5oiQ5Yqf5ZCO55qE5Zue6LCD5Ye95pWwCiAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUodHJhZGVJZCk7IC8vIOaUr+S7mOaIkOWKnwogICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmVzLmNhbmNlbFBheSA9IHRydWU7IC8vIOWPlua2iOaUr+S7mAoKICAgICAgICAgICAgICAgICAgICAgICAgcmVqZWN0KHJlcyk7IC8vIOaUr+S7mOWksei0pQogICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgZmFpbDogZnVuY3Rpb24gZmFpbChyZXMpIHsKICAgICAgICAgICAgICAgICAgICAgIHJlcy5jYW5jZWxQYXkgPSB0cnVlOyAvLyDlj5bmtojmlK/ku5gKCiAgICAgICAgICAgICAgICAgICAgICByZWplY3QocmVzKTsgLy8g5pSv5LuY5aSx6LSlCgogICAgICAgICAgICAgICAgICAgICAgX1RvYXN0KCfmlK/ku5jlpLHotKUnKTsKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIGNvbXBsZXRlOiBmdW5jdGlvbiBjb21wbGV0ZShyZXMpIHsKICAgICAgICAgICAgICAgICAgICAgIGlmIChyZXMuZXJyTXNnID09ICdjaG9vc2VXWFBheTpjYW5jZWwnKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIC8vIOWPlua2iOaUr+S7mAogICAgICAgICAgICAgICAgICAgICAgICByZXMuY2FuY2VsUGF5ID0gdHJ1ZTsgLy8g5Y+W5raI5pSv5LuYCgogICAgICAgICAgICAgICAgICAgICAgICByZWplY3QocmVzKTsgLy8g5pSv5LuY5aSx6LSlCgogICAgICAgICAgICAgICAgICAgICAgICBfVG9hc3QoJ+WPlua2iOaUr+S7mCcpOwogICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgICAgICBfdGhpczIuaXNDYW5PcmRlciA9IGZhbHNlOwoKICAgICAgICAgICAgICAgICAgICAgICAgX1RvYXN0LmNsZWFyKCk7CiAgICAgICAgICAgICAgICAgICAgICB9LCAzMDApOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfSkpOwoKICAgICAgICAgICAgY2FzZSAyMDoKICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSwgX2NhbGxlZSwgbnVsbCwgW1szLCA5XV0pOwogICAgfSkpKCk7CiAgfSwKCiAgLyoqDQogICAqIEBkZXNjcmlwdGlvbjog5rS75Yqo6K6i5Y2V5qOA6aqM5p+l6K+iDQogICAqIEBwYXJhbSB7c3RyaW5nfSB0cmFkZUlkIOiuouWNlUlEDQogICAqIEByZXR1cm46IA0KICAgKiBAYXV0aG9yOiB5ZXNvbmcNCiAgICovCiAgb3JkZXJRdWVyeTogZnVuY3Rpb24gb3JkZXJRdWVyeSh0cmFkZUlkKSB7CiAgICB2YXIgX3RoaXMzID0gdGhpczsKCiAgICBpZiAodGhpcy5pc1F1ZXJ5KSByZXR1cm47CgogICAgX1RvYXN0LmxvYWRpbmcoewogICAgICBtZXNzYWdlOiAn5LiL5Y2V5oiQ5Yqf77yM5qCh6aqM6K6i5Y2VLi4uJywKICAgICAgZm9yYmlkQ2xpY2s6IHRydWUsCiAgICAgIGR1cmF0aW9uOiAwCiAgICB9KTsKCiAgICB0aGlzLmlzUXVlcnkgPSB0cnVlOwogICAgcmV0dXJuIGFwaS5vcmRlcl9xdWVyeSh7CiAgICAgIHRyYWRlSWQ6IHRyYWRlSWQKICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICBpZiAocmVzLnN0YXRlKSB7fSBlbHNlIHsKICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgICAgIF9Ub2FzdChyZXMubWVzc2FnZSk7CiAgICAgICAgfSwgMTAwKTsKICAgICAgfQoKICAgICAgcmV0dXJuIHJlczsKICAgIH0pLmZpbmFsbHkoZnVuY3Rpb24gKCkgewogICAgICBfVG9hc3QuY2xlYXIoKTsKCiAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICAgIF90aGlzMy5pc1F1ZXJ5ID0gZmFsc2U7CiAgICAgIH0sIDMwMCk7CiAgICB9KTsKICB9Cn07CmV4cG9ydCBkZWZhdWx0IG9yZGVyUGF5Ow=="},{"version":3,"sources":["C:/Users/Administrator/Desktop/vip_inline_h5/src/utils/pay.js"],"names":["api","router","utils","getWXSign","orderPay","actDeal","dealData","actInfo","loading","message","forbidClick","duration","isCanClick","then","res","code","alert","push","go","desc","indexOf","title","finally","setTimeout","clear","actPay","tradeId","payInfo","isCanOrder","$wx","console","log","getJRE","Promise","resolve","reject","miniProgram","navigateTo","url","payType","state","chooseWXPay","timestamp","info","timeStamp","nonceStr","package","signType","paySign","success","errMsg","cancelPay","fail","complete","package1","againSign","orderQuery","isQuery","order_query"],"mappings":"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","sourcesContent":["/*\r\n * @Description: \r\n * @Version: 1.0\r\n * @Autor: yesong\r\n * @Date: 2020-05-15 17:17:21\r\n * @LastEditors: yesong\r\n * @LastEditTime: 2020-08-08 14:06:05\r\n */\r\nimport api from '@/api'\r\nimport router from '@/router'\r\nimport utils from './utils'\r\nimport getWXSign from './wx'\r\nimport { Dialog, Toast} from 'vant'\r\nconst orderPay = {\r\n   /**\r\n    * @description: 活动下单\r\n    * @param {Object} dealData 活动下单参数\r\n    * @return: Promise\r\n    * @author: yesong\r\n    */   \r\n  actDeal(dealData, actInfo = {}) {\r\n    Toast.loading({\r\n      message: '下单中...',\r\n      forbidClick: true,\r\n      duration: 0\r\n    });\r\n    if (this.isCanClick) return\r\n    this.isCanClick = true\r\n    return api.actDeal({\r\n      ...dealData\r\n    }).then(res => {\r\n    \r\n      if (res.code == 510 || res.code == 511 || res.code == 1150){\r\n        Dialog.alert({\r\n          message: res.message\r\n        }).then(() => {\r\n          router.push('/index/home')\r\n        })\r\n      } else if (res.code == 1250) {\r\n        // 下单价格与第三方价格不一致\r\n        Dialog.alert({\r\n          message: '订单信息已调整，请刷新页面重新下单'\r\n        }).then(() => {\r\n          router.go(-1)\r\n        })\r\n      } else if (res && res.desc && (res.desc.indexOf('产品已经下架或者价格已经过期') > -1 || res.desc.indexOf('已经销售完毕') > -1)) {\r\n        // 自我游卡券已售罄提示\r\n        Dialog.alert({\r\n          title: '已售罄',\r\n          message: '已经卖完啦，下次要抢快一点哦~'\r\n        })\r\n      } else if (res && res.desc && res.desc.indexOf('联系人不正确') > -1) {\r\n        Toast('联系人不正确, 不能进行预订!')\r\n      } else if (res.code != 22 || res.code != 23) {\r\n        // code 22 || 23 为重复提交\r\n        Toast(res.message)\r\n      }\r\n      return res\r\n    }).finally(()=> {\r\n      setTimeout(()=> {\r\n        Toast.clear()\r\n        this.isCanClick = false\r\n      }, 300)\r\n    })\r\n   \r\n  },\r\n\r\n  /**\r\n   * @description: 活动支付\r\n   * @param {String} tradeId 订单ID\r\n   * @return: Promise\r\n   * @author: yesong\r\n   */\r\n  async actPay(tradeId, payInfo='') {\r\n    if (this.isCanOrder) return\r\n    let $wx;\r\n    try {\r\n      $wx = await getWXSign()\r\n    } catch (error) {\r\n      console.log(error)\r\n    }\r\n    this.isCanOrder = true\r\n    Toast.loading({\r\n      message: '准备支付...',\r\n      forbidClick: true,\r\n      duration: 0\r\n    });\r\n    if (utils.getJRE() === 'mini') {\r\n      return new Promise((resolve, reject) => {\r\n        // 跳转小程序支付\r\n        $wx.miniProgram.navigateTo({\r\n          url: `/pages/doydPay/doydPay?tradeId=${tradeId}`\r\n        })\r\n        setTimeout(()=> {\r\n          Dialog.alert({\r\n            title: '确认支付',\r\n            message: '是否确认已支付完成！',\r\n          }).then(() => {\r\n            resolve()\r\n          });\r\n        }, 300)\r\n      })\r\n      \r\n    } else if (utils.getJRE() === 'wx') {\r\n      // 微信h5支付\r\n      return new Promise((resolve, reject) => {\r\n        if (payInfo == '') { \r\n          // 订单继续支付\r\n          api.actPay({\r\n            tradeId,\r\n            payType: 'PAY_Applet'\r\n          }).then(res => {\r\n            if (res.state) {\r\n              $wx.chooseWXPay({\r\n                timestamp: res.info.timeStamp, // 支付签名时间戳，注意微信jssdk中的所有使用timestamp字段均为小写。但最新版的支付后台生成签名使用的timeStamp字段名需大写其中的S字符\r\n                nonceStr: res.info.nonceStr, // 支付签名随机串，不长于 32 位\r\n                package: res.info.package, // 统一支付接口返回的prepay_id参数值，提交格式如：prepay_id=\\*\\*\\*）\r\n                signType: res.info.signType, // 签名方式，默认为'SHA1'，使用新版支付需传入'MD5'\r\n                paySign: res.info.paySign, // 支付签名\r\n                success: function (res) {\r\n                  if(res.errMsg == \"chooseWXPay:ok\" ) {\r\n                    // 支付成功后的回调函数\r\n                    resolve(tradeId) // 支付成功\r\n                  } else {\r\n                    res.cancelPay = true // 取消支付\r\n                    reject(res) // 支付失败\r\n                  }\r\n                },\r\n                fail (res) {\r\n                  res.cancelPay = true // 取消支付\r\n                  reject(res) // 支付失败\r\n                  Toast('支付失败')\r\n                },\r\n                complete: (res)=> {\r\n                  if (res.errMsg == 'chooseWXPay:cancel') {\r\n                    // 取消支付\r\n                    res.cancelPay = true // 取消支付\r\n                    reject(res) // 支付失败\r\n                    Toast('取消支付')\r\n                  }\r\n                }\r\n              });\r\n      \r\n            } else if (res.code == \"508\" || res.code == \"509\" || res.code == \"1412\") {\r\n              // 508 会员过期时，无法支付订单，订单自动取消。 509订单已过期\r\n              reject(res)\r\n            } else {\r\n              setTimeout(() => {\r\n                Toast(res.message)\r\n              }, 100)\r\n            }\r\n          }).finally(() => {\r\n            Toast.clear()\r\n            setTimeout(()=> {\r\n              this.isCanOrder = false\r\n            }, 300)\r\n          })\r\n        } else {\r\n          $wx.chooseWXPay({\r\n            timestamp: payInfo.timeStamp, // 支付签名时间戳，注意微信jssdk中的所有使用timestamp字段均为小写。但最新版的支付后台生成签名使用的timeStamp字段名需大写其中的S字符\r\n            nonceStr: payInfo.nonceStr, // 支付签名随机串，不长于 32 位\r\n            package: payInfo.package || payInfo.package1, // 统一支付接口返回的prepay_id参数值，提交格式如：prepay_id=\\*\\*\\*）\r\n            signType: payInfo.signType, // 签名方式，默认为'SHA1'，使用新版支付需传入'MD5'\r\n            paySign: payInfo.paySign || payInfo.againSign, // 支付签名\r\n            success: function (res) {\r\n              if(res.errMsg == \"chooseWXPay:ok\" ) {\r\n                // 支付成功后的回调函数\r\n                resolve(tradeId) // 支付成功\r\n              } else {\r\n                res.cancelPay = true // 取消支付\r\n                reject(res) // 支付失败\r\n              }\r\n            },\r\n            fail (res) {\r\n              res.cancelPay = true // 取消支付\r\n              reject(res) // 支付失败\r\n              Toast('支付失败')\r\n            },\r\n            complete: (res)=> {\r\n              if (res.errMsg == 'chooseWXPay:cancel') {\r\n                // 取消支付\r\n                res.cancelPay = true // 取消支付\r\n                reject(res) // 支付失败\r\n                Toast('取消支付')\r\n              }\r\n              setTimeout(()=> {\r\n                this.isCanOrder = false\r\n                Toast.clear()\r\n              }, 300)\r\n            }\r\n          });\r\n        }\r\n      })\r\n    }\r\n  },\r\n\r\n  /**\r\n   * @description: 活动订单检验查询\r\n   * @param {string} tradeId 订单ID\r\n   * @return: \r\n   * @author: yesong\r\n   */\r\n  orderQuery(tradeId) {\r\n    if (this.isQuery) return\r\n    Toast.loading({\r\n      message: '下单成功，校验订单...',\r\n      forbidClick: true,\r\n      duration: 0\r\n    });\r\n    this.isQuery = true\r\n    return api.order_query({\r\n      tradeId\r\n    }).then(res => {\r\n      if (res.state) {\r\n\r\n      } else {\r\n        setTimeout(() => {\r\n          Toast(res.message)\r\n        }, 100)\r\n      }\r\n      return res\r\n    }).finally(() => {\r\n      Toast.clear()\r\n      setTimeout(()=> {\r\n        this.isQuery = false\r\n      }, 300)\r\n    })\r\n  }\r\n\r\n}\r\nexport default orderPay"]}]}